import java.util.*;class Main{public static void main(String[]z){Scanner s=new Scanner(System.in);for(int n;(n=s.nextInt())>0;){Map<String,Long>m=new HashMap<String,Long>();for(m.put("",0L);n-->0;)m.put(s.next(),s.nextLong());Map<String,String[]>r=new HashMap<String,String[]>();String x;for(n=s.nextInt();n-->0;s.next(),r.put(x,s.nextLine().split(" ")))x=s.next();System.out.println(f(m,r,s.next()));}}static long f(Map<String,Long>m,Map<String,String[]>r,String x){if(r.containsKey(x)){long s=0;for(String y:r.get(x))s+=f(m,r,y);if(m.get(x)>s)return s;}return m.get(x);}}