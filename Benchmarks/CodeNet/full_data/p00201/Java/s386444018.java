import java.util.*;class Main{public static void main(String[]z){Scanner s=new Scanner(System.in);for(int n;(n=s.nextInt())>0;){m.clear();for(m.put("",0L);n-->0;)m.put(s.next(),s.nextLong());r.clear();String x;for(n=s.nextInt();n-->0;s.next(),r.put(x,s.nextLine().split(" ")))x=s.next();System.out.println(f(s.next()));}}static long f(String x){if(r.containsKey(x)){long s=0;for(String y:r.get(x))s+=f(y);if(m.get(x)>s)return s;}return m.get(x);}static Map<String,Long>m=new HashMap<String,Long>();static Map<String,String[]>r=new HashMap<String,String[]>();}