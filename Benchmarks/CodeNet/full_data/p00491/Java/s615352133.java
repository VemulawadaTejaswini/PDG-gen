import java.util.*;

public class Main {
	//static_val
	static int N, K;
	static int[] A;
	static int[][][] check;

	public static void main(String[] args){

		int ans = 0;
		Scanner scanner = new Scanner(System.in);

		N = scanner.nextInt();
		K = scanner.nextInt();
		A = new int[N+1];//A[?????????????±??????£???????????\]?????????????????????0,1,2
		Arrays.fill(A, -1);//??????A?????????
		
		for(;K!=0;K--){
			A[scanner.nextInt()]=scanner.nextInt()-1;
		}
		check = new int[N+1][3][3];
		for(int i=0;i<check.length;i++){
			for(int j=0;j<check[i].length;j++){
				Arrays.fill(check[i][j], -1);//1?¬?????????§???????????????????????????
			}
		}
		//		Arrays.fill(check, -1);//Arrays.fill?????????????¬???????????????????????????????
		for(int i=0;i<3;i++){
			for(int j=1;j<3;j++){
				ans+=count_pasta(1, i, j);
//				System.out.println("ans="+ans);
			}
		}
		System.out.println(ans%10000);
	}

	public static int count_pasta(int v, int s, int c){//v=???????????\??° s= c=
		//System.out.println("v="+v+"s="+s+"c="+c);
		if(A[v]!=-1&&A[v]!=s)return 0;
		
		if(v==N)return c==1?1:0;//
		
		if(check[v][s][c]!=-1)return check[v][s][c];//?????§??????????????????
		
		int ans = 0;
		
		if(c==1){
			for(int j=0;j<3;j++){
				if(s==j)continue;
				ans = (ans+count_pasta(v+1, j, 1)+count_pasta(v+1, j, 2))%10000;//????????????????????°????????????
			}
		}
		else ans = count_pasta(v+1, s, 1);
		check[v][s][c] = ans;
		System.out.println("ans="+ans);

		return ans;
		
	}
}