import java.util.Scanner;

public class Main {

public static void main(String[] args) {

		//??\??????????????????????????????Scanner???????????§???????????????
		Scanner scan = new Scanner(System.in);

		//??????????????????????????????
		String str = scan.next();

		//????????°?????????????????????
		int q = scan.nextInt();

		//????????°?????°???????????????
		for(int i = 0; i < q; i++){
			//?????????????????????
			String order = scan.next();
			//????????????????????????????????????
			int num1 = scan.nextInt();
			int num2 = scan.nextInt();

			if(order.equals("replace")){
				//??\??????????????????????????????????????????
				String rep = scan.next();
				//??\????????????????????????str?????£??\?????????
				str = str.substring(0 , num1) + rep + str.substring(num2 + 1);
			} else if(order.equals("reverse")){
				//??????????????§??????????????\???????????????
				String r = textRevers(str.substring(num1, num2 + 1));
				//??????????????¨????????°?????£?¨??????????
				String temp = "";
				//reverse?????????????????????????????????????????£??\?????????
				temp += str.substring(0 , num1);
				//?????????????????????????????£????????????
				temp += r;
				//?????£?????????????????£????????????
				temp += str.substring(num2 + 1);
				//??£?????????????????????str?????£??\?????????
				str = temp;

			} else if(order.equals("print")){
				//???????????????????????£?????????
				System.out.println(str.substring(num1 , num2 + 1));
			}
		}

	}

	/**
	 * ?????????????????????????????????????????????
	 * @String r
	 */
	public static String textRevers(String r){

		//??????????????£?¨?
		String rev = "";

		//???????????£??????????????????????????????????????????????????????????????????
		for(int i = r.length()- 1; 0 <= i; i--){
			rev += r.charAt(i);
			//System.out.println(rev);
		}
		return rev;
	}

}