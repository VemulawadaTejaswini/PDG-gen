import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Main {

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String str = br.readLine();
        int q = Integer.parseInt(br.readLine());    //????????°q

        for(int i = 0; i < q; i++){
            String input = br.readLine();
            String[] query = input.split(" ");
            int begin = Integer.parseInt(query[1]);
            int end = Integer.parseInt(query[2]);

            if(query[0].equals("print")){
                String printStr = str.substring(begin, end + 1);
                System.out.println(printStr);

            }else if(query[0].equals("reverse")){
//              ????????????????????????????????????sb?????£??\
                StringBuilder sb = new StringBuilder(str.substring(begin, end + 1));
//              ???????????????????????¢
                String reverseStr = sb.reverse().toString();
//              ??¨????????????????????£???
                str = str.substring(0, begin) + reverseStr + str.substring(end + 1);

            }else if(query[0].equals("replace")){
//              ???????????????????????????????????????
                String replaceStr = query[3];
//              ????????????????????????????±????
                String before = str.substring(begin, end + 1);
//              ???????????????
                str = str.replace(before, replaceStr);
            }
        }
    }
}