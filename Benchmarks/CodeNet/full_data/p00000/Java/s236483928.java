package sdjugyo;

import java.util.Scanner;

public class sd202 {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Scanner sc = new Scanner(System.in);
		int n = sc.nextInt();
		int k = sc.nextInt();
		int niti[] = new int [n+1]; //
		int pasuta[] = new int [n+1]; //
		int hasamari[] = new int [100];
		int renzoku[] = new int [100]; 		
		int jiyu = n-k;
		int jiyuuu[] = new int [100];  //?????±?????\?????\???????????\????????????
		int count1=0;  //?????????????????????????????\?????°????????¨?????????????????????
		int count2=0;  //????????????????????????????????\?????????????????¨???????????\??°
		int count4=0;  //??????????????\?????£?¶???\??°??????????????\?????????????????¨
		int count5=0; //?????????????????£?¶??????\????¬??????????????????¨???????????\??°
		int count6=0; //????????£?????\??????????????£?¶??????\????????\???????????????????????\???????????????????????¨
		int z[] = new int [1000];
		for(int i = 1 ; i <= k;i++){
			niti[i] = sc.nextInt();
			pasuta[i] = sc.nextInt();
		}
		for(int i = 1;i<=n;i++){
			for(int m = 1;m<=n;m++){
				if(i == niti[m]){
					//System.out.println(i+"??????????????????"); //?????????????????\??????
					break;
				}
				else if(m == n){
					jiyuuu[count1]=i;
					count1++;
					//System.out.println(i+"???????????§???"); //?????????????????\??????
					//?????????????????\????????¨??¨?????°
				}
			}
		}
		for(int i = 1;i<=n;i++){
			for(int m = 1;m<=n;m++){
				if(1==niti[i]-niti[m]&&(pasuta[i]==pasuta[m])){
					System.out.println(niti[i]+"??£?¶?????????°???");
					System.out.println(niti[m]+"??£?¶?????????°???");
					int box1;
					if(niti[m]>niti[i]){
						box1 = niti[m];  //??????????????§??????????????????
					}
					else{
						box1 = niti[i];
					}
					if(box1==jiyuuu[count6]){
						renzoku[count5] = box1;
						count5++;
						count6++;
					}
				}
				else if(2==niti[i]-niti[m]&&(pasuta[i]==pasuta[m])){
					System.out.println(niti[i]+"????????????????????°???");
					System.out.println(niti[m]+"????????????????????°???");
					int box1=(niti[i]+niti[m])/2;
					if(box1==jiyuuu[count6]){
						hasamari[count2] = box1;
						System.out.println(hasamari[count2]+"???????????????????????\???????????£?????????????????????");
						count2++;
						count6++;
					}
				}
			}
		}
		int junbi[] = new int [k];  //????????????????????\????°?????????????????????????
		for(int i = 0;i<k;i++){
			junbi[i] = niti[i+1];
		}
		int box,work;
		for(int i = 0; i < k; i++) { //??????????????????
			box = i;
			for(int m = i + 1; m < k; m++) {
				if(junbi[m] < junbi[box]){
					box = m;
				}
			}
			work = junbi[i]; junbi[i] = junbi[box]; junbi[box] = work;
		}
		int []free = new int [k+1];  //???????????\?????£?¶?????????\??°?????\??????
		for(int i = 1;i<k;i++){
			int sa = (junbi[i])-(junbi[i-1]);
			if(3 <= sa){
				free[count4] = sa;
				count4++;
			}
		}
		free[count4]=junbi[0]-1;
		count4++;
		free[count4]=n-junbi[k-1];
		count4++;
		for(int i=0;i<count4;i++){
			System.out.println(free[i]);
		}
		int rezult=0;
		z[0] = 3;
		z[1] = 8;
		int count3 = jiyu-k;
		//jiyu ?????±?????\???????¨???°
		//k  ?±??????£???????????\???????¨???°
		//System.out.println(count3+"??????????????§???");
		for(int i = 0;i <= count3;i++){
			if(count3==1){
				if(count2==0){
					rezult = 3*jiyu;   // ?±?????±?????????????????????????????????????????????£?????????
					break;
				}
				else{
					rezult = count2*2;  //?±???????????±???????????????????
					break;                // ????????????????±???????????????????
					// ????????£???????????????????±???????????±???????????±???????????±?????????????
				}
				
			}
			else if(count3==0){
				rezult = 1;
				break;
			}
			else if(i>=2){
				z[i]=2*(z[i-1])+2*(z[i-2]);
				System.out.println("????????????"+z[i]+"?????§"+i);
				rezult = z[i] * 2*count2;
				System.out.println("???????????????????????????"+rezult);
			}
		}
		System.out.println(rezult);
	}
}