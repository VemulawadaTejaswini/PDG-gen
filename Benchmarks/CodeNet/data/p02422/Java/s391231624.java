
import java.util.Scanner;

public class Main {
	public static void main(String []args){
		//????????£?????????????????????
		Scanner sc = new Scanner(System.in);
		
		//??????????????????
		String word = sc.next();
		//??°??????????????°?????????
		int n = sc.nextInt();
		
		//??????????????????????????????
		for(int i =0; i<= n;i++){
			//??????????????????
			String order = sc.next();
			System.out.println(order);
			
			//replace ????????????????????????
			if(order.equals("replace")){
				//??????????????§??????????????????
				int a = sc.nextInt();
				int b = sc.nextInt();
				
				//???????????????????????????
				String mozi = sc.next();
				//?????????????????§????????????
				String mae = word.substring(0, a);
				String usiro = word.substring(b+1);
				
				word = mae + mozi + usiro;
				System.out.println(word);
	
			
			//reverse ???????????\?????????
			}else if(order.equals("reverse")){
				
				//??????????????§??????????????????
				int a = sc.nextInt();
				int b = sc.nextInt();
				
				//?????????????????§????????????
				String mae = word.substring(a,b+1);
				System.out.println("MAE"+mae);
				String usiro = word.substring(b+1);
				StringBuffer sb = new StringBuffer(mae);
				
				sb.reverse();
				System.out.println("R"+sb);
				String BBB =sb.toString();
				
				word = BBB + usiro;
				System.out.println("R"+word);
			
				
			//print ?????????????????????????????¨???
			}else if(order.equals("print")){
				//??????????????§??????????????????
				int a = sc.nextInt();
				int b = sc.nextInt();
				
				//?????????????????§????????????
				String mae = word.substring(a,b+1);
				//String usiro = word.substring(b+1);
				//?????????????????§????????????
				//newWord = word.substring(a,b+1);
				System.out.println();
			
			}
			
		}
		//???????????¨???
		System.out.println(word);
		
	}
}