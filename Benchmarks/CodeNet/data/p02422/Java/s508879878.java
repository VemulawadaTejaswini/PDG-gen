import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.lang.StringBuffer;

/*Question
/????????? strstr ?????????????????????????????????????????????????????????????????°???????????????????????????????????????????????\?????????????????????????????§???:
/print a b: strstr ??? a ??????????????? b ??????????????§??????????????????
/reverse a b: strstr ??? a ??????????????? b ??????????????§?????????????????????
/replace a b p: strstr ??? a ??????????????? b ??????????????§??? p ?????????????????????
/????????§??????????????? strstr ????????????????????? 0 ???????????¨????????????
*/
/*Input
/1 ?????????????????? strstr ????????????????????????strstr ?????±?°????????????????????????????
/2 ????????????????????° qq ????????????????????????
/?¶???? qq ??????????????????????¨??????¢?????§?????????????????????
*/

public class Main {
	public static void main(String[] args) throws Exception{
		BufferedReader sc = new BufferedReader(new InputStreamReader(System.in));
		//????????¨
		StringBuffer sb = new StringBuffer();
		//??????????????????(strstr)
		String s = sc.readLine();
		//????????????????????????(qq)
		int n = Integer.parseInt(sc.readLine());
		//????????????????????????a,b??¨
		int a,b;
		//???????????°?????????
		for(int i = 0;i < n;i++){
			/*???????????\???
			/?????????????????£???" "(??????)??§???????????????s?????????
			/s[0]????????????s[1]?????????????????????????§???????(a)???s[2]???????????????(b)???replace????????°s[3]??????????????????????????????
			/a,b?????±?????§??????????????????????????????int?????????????????????????????£??\????????????
			/b???substring?????§????????´???1?????????????????¨???????????????1????°????????????£?????????????????§????????????
			/replace????????°????????????????????????????????§?????????????????§replace?????¨????????§???????????????????°???????????????§????????????
			*/
			String[] st = sc.readLine().split(" ");
			a = Integer.parseInt(st[1]);
			b = Integer.parseInt(st[2]);
			b++;
			//????????????????¨?(?????´?????????)
			if(st[0].equals("print")){
				//print??????????????????????????????s??¨?????????????????¨sb?????????
				sb.append(s.substring(a,b)+"\n");
			}else if(st[0].equals("reverse")){
				/*?????¢
				/?????¨????????????s??????????????¢?????????????????????StringBuffer rev???????´????????????¢
				/??????????????????????????????rev???????????????s???????´?
				*/
				StringBuffer rev = new StringBuffer(s.substring(a,b));
				s = rev.reverse().append(s.substring(b)).toString();
			}else if(st[0].equals("replace")){
				//??????
				s = s.replace(s.substring(a,b),st[3]);
			}
		}
		System.out.print(sb);
	}
}