import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Main {

	public static void main(String[] args) throws IOException {

		BufferedReader input = new BufferedReader(new InputStreamReader(System.in));

		// ?????????
		String str = input.readLine();

		// ????????°
		String instruction_q = input.readLine();

		int instruction_q_num = Integer.parseInt(instruction_q);

		StringBuilder change_string = new StringBuilder(str);

		// ????????°??????????????°?????????.?????°str????????????????????£?????????????????????
		for (int instruction_spot = 0; instruction_spot < instruction_q_num; instruction_spot++) {

			// ??????????????°?????\???
			String instruction_line = input.readLine();

			String[] instruction_array = instruction_line.split(" ");

			// ?????????
			String instruction_statement = instruction_array[0];

			// a??????
			int element_a = Integer.parseInt(instruction_array[1]);

			// b??????
			int element_b = Integer.parseInt(instruction_array[2]);



			if (instruction_statement.equals("replace")) {

				// replace??¨?°???????
				String small_strings = instruction_array[3];

				// a??????b?????§???change_string???small_strings????????´??????.b????????????????????????????????????????????????
				change_string.replace(element_a, element_b+1, small_strings);

				System.out.println(change_string);

				// ????????????????¨????????????????????????????????????????
			} else if (instruction_statement.equals("reverse")) {

				// ????????¨?????°
				String change_word = change_string.substring(element_a, element_b);

				// ???????????°???????????????????????°
				StringBuilder SB_extraction_word = new StringBuilder(change_word);

				// ?????????
				SB_extraction_word.reverse();

				String extraction_word = SB_extraction_word.toString();
				
				//b????????????????????????????????????????????????
				change_string.replace(element_a, element_b+1, extraction_word);

				System.out.println(change_string);

			} else {

				change_string.substring(element_a,element_b);

				System.out.println(change_string);
			}
		}

	}

}