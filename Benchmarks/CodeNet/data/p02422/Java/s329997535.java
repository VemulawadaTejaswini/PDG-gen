import java.util.Scanner;
 
public class Main {
    public static void main(String[] args) {
        Scanner scan = new Scanner(System.in);
        StringBuilder str = new StringBuilder();
         
        String line;
        String[] imperative;
        int a;
        int b;
         
        str.append(scan.nextLine());
        int turns = Integer.parseInt(scan.nextLine());
         
        for (int i = 0; i < turns; i++) {
            line = scan.nextLine();
            imperative = line.split(" ");
            //imperative[1] => a?????????
            a = Integer.parseInt(imperative[1]);
            //imperative[2] => b?????????
            b = Integer.parseInt(imperative[2]) + 1;
             
            if(imperative[0].equals("print")){
                //??????=>print ???§?????????°???¨???
                System.out.println(str.substring(a, b));
            }else if(imperative[0].equals("reverse")){
                //??????=>reverse ???§?????????°
                //str???§??????¢??????????????±?????????????reverse???????????????????????????¢?????????str???????????????
                StringBuilder reverse = new StringBuilder();
                reverse.append((str.substring(a, b)));
                str.replace(a, b, (reverse.reverse()).toString());
            }else{
                //?????????print???reverse ???§???????????????????????????
                str.replace(a, b, imperative[3]);
            }
             
        }
         
    }
}