

import java.util.Scanner;
	

public class Main {
	public static void main(String[]args){
		//????????£?????????????????????
		Scanner sc = new Scanner(System.in);


		//??????????????????
		String word = sc.next();

		//???????????°?????????
		int n = sc.nextInt();
		//?????????????????°?????°?????????
		for(int i = 0; 0 < n; i++){
			//???????????????????????? replace reverse print
			String order = sc.next();
			//???????????????????????? 1 ?????????????????´???
			if(order.equals("replace")){
				//?????¶?????????
				int a = sc.nextInt();
				int b = sc.nextInt();
				//????????????????????????
				String mozi = sc.next();
				String mae = word.substring(0,a);
				String usiro = word.substring(b+1);
				word = mae + mozi + usiro;
				System.out.println( word);

			//2??????????????????
			}else if(order.equals("reverse")){
				//?????¶?????????
				int a = sc.nextInt();
				int b = sc.nextInt();

				//reverse

				//??????????????????????????????????????????
				String reb= word.substring(a,b+1);
				System.out.println(reb);
				String rebgo ="";

				 for(int j  = reb.length()-1; j>=0; j--){
					rebgo +=  reb.charAt(j);
				 }
				 System.out.println(rebgo);

				String mae = word.substring(0,a);
				System.out.println("??????" + mae);
				 String usiro = word.substring(b+1);
				 System.out.println("?????????" + usiro);
				 word =  rebgo +usiro;
				 
				//??????????????????
				//3??????????????????????????¨???
			}else if(order.equals("print")){
				//?????¶?????????
				int a = sc.nextInt();
				int b = sc.nextInt();
				 word = word.substring(0,b+1);
				//???????????¨???
				System.out.println(word);

			}
		}
	}
}