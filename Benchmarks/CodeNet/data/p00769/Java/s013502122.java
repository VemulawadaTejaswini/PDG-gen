import java.util.ArrayList;
import java.util.Collections;
import java.util.Scanner;

public class Main {
	private static int pos;
	
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		
		int n = Integer.parseInt(sc.nextLine());
		for(int i = 0; i < n ; i++){
			String input = sc.nextLine();
			
			pos = 0;
			System.out.println(recursive(input));
		}
	}
	
	public static int recursive(String input){
		if( (input.charAt(pos) + "").matches("[0-9]+") ){/* ??°????????? */
			int sum = 0;
			while(input.charAt(pos) != ']'){
				sum = sum * 10 + Integer.parseInt(input.charAt(pos++) + "");
			}
			return (sum / 2 + 1);/* ??????????????§???????????????????°??????° */
		}
		
		ArrayList<Integer> array = new ArrayList<Integer>();
		while(input.charAt(pos) == '['){
			pos++;/* nextChar <- '[' */
			array.add(recursive(input));/* get Number */
			pos++;/* nextChar  <-  ']' */
			if(pos >= input.length()) break;
		}
		
		Collections.sort(array);/* ????°??????°?????????????????????????????????????????????????????°?????? */
		int sum = 0;
		int majority = array.size() / 2 + 1;/* ????????°????????§????????°?????? */
		for(int i = 0; i < majority; i++){
			sum += array.get(i);
		}
		
		return sum;
	}
}