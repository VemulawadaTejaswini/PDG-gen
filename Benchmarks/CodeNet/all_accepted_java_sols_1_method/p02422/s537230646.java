
import java.util.Scanner;

public class Main {
	    public static void main(String[] args) throws Exception {
	        Scanner sc = new Scanner(System.in);
	        String str = sc.next();
	        StringBuffer strBuf = new StringBuffer(str);
	        int q = sc.nextInt();
	        for(int i = 0; i < q; i++){
	            String order = sc.next();
	            int x = sc.nextInt();
	            int y = sc.nextInt()+1;
	            //System.out.println("Abc=" +x +":" + y);
	            //???????????????????????????
	            if(order.equals("replace")){
	            	//????????????????????????????????????
	                String repStr = sc.next();
	                //????????????a???????????????????????????repStr?????????
	                strBuf = strBuf.replace(x,y,repStr);
	                //????????????
	               // System.out.print("strBUF=" + strBuf);
	               //?????????????????¢?????????
	            }else if(order.equals("reverse")){
	            	//????????????a???????????????????????????????????????????????????word?????????
	            	String word = strBuf.substring(x,y);
	            	//a??????b?????????????????\??£????????????
	            	//System.out.print("WORD="+word );
	            	//StringBuffer revBuf = new StringBuffer(strBuf.substring(x,y));
	            	//??°??????StringBuffer?????????
	                StringBuffer revBuf = new StringBuffer(word);
	                //rebuf?????????????????¢?????????????????¨???string?????????
	                String revStr = revBuf.reverse().toString();
	               // System.out.println(revStr);
	                //strBuf??????????????????
	                strBuf = strBuf.replace(x,y,revStr);
	            }else{
	                System.out.println(strBuf.substring(x,y));
	            }
	        }
    }
}