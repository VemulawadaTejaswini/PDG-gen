
import java.util.Scanner;

public class Main{
	public static void main (String args[]){

		//???????????¨????????°???????????¨???
		Scanner sc = new Scanner(System.in);
		String word = sc.next();
		int q = sc.nextInt();

		//????????°???????????????????????¨???
		for(int i = 0; i < q; i++){
			String command = sc.next();

			//print a b: str str ??? a ??????????????? b ??????????????§??????????????????
			if(command.equals("print")){
				int a = sc.nextInt();
				int b = sc.nextInt();

				String str = word.substring(a,b+1);
				System.out.println(str);
			}

			//reverse a b: str str ??? a ??????????????? b ??????????????§?????????????????????
			if(command.equals("reverse")){
				int a = sc.nextInt();
				int b = sc.nextInt();

				String mae = word.substring(a,b+1);

				StringBuffer sb = new StringBuffer(mae);
				StringBuffer ato = sb.reverse();
				word = word.substring(0,a) + ato + word.substring(b+1);
			}


			//replace a b p: str str ??? a ??????????????? b ??????????????§??? p ?????????????????????
			if(command.equals("replace")){
				int a = sc.nextInt();
				int b = sc.nextInt();
				String ato = sc.next();

				word.substring(a,b+1);
				word = word.substring(0,a) + ato + word.substring(b+1);
			}
		}
		sc.close();
	}
}