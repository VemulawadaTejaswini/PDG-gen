

import java.util.Scanner;

public class Main {

	public static void main(String[] args) {

		Scanner in = new Scanner(System.in);

		StringBuilder sb = new StringBuilder(in.next());
		int num = in.nextInt();

		for(int i = 0; i < num; i++){

			String command = in.next();

			if(command.equals("print")){

				// ???????????????????????????????????§?????????????????????
				int first_num = in.nextInt();
				int second_num = in.nextInt();

				// ????????????????????????????????????
				System.out.println(sb.substring(first_num, second_num + 1));

			}else if(command.equals("reverse")){

				// ???????????????????????????????????§????????????????????????
				int first_num = in.nextInt();
				int second_num = in.nextInt();

				// ????????????????????????????????????????????????
				String reverse_word = sb.substring(first_num, second_num + 1);
				// ??????????????????????????????????????§?????????????????????
				StringBuilder reverse_sb = new StringBuilder(reverse_word);
				// ???????????????????????????
				reverse_word = reverse_sb.reverse().toString();
				// ???????????????????????????????????????????????´?????????????????????
				sb = sb.replace(first_num, second_num+1, reverse_word);

			}else if(command.equals("replace")){

				// ???????????????????????????????????§???????????????????????????
				int first_num = in.nextInt();
				int second_num = in.nextInt();
				// ??????????????????????????????
				String str = in.next();
				// ?????????????????????
				sb.replace(first_num, second_num + 1, str);

			}
		}
	}
}