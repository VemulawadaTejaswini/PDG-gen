
import java.util.*;

public class Main {
	public static void main(String args[]) {
		Scanner scan = new Scanner(System.in);
		String str, str2, p;
		int a, b;
		str2 = "";// ??????????¨????
		StringBuilder sb = new StringBuilder();
		StringBuilder sb2 = new StringBuilder();// ????????¨
		sb.append(scan.next());// ???????????????
		int x = scan.nextInt();// ???????????????
		char c;

		List<String> list = new ArrayList<String>();

		// ???????????????????????????
		for (int count = 0; count < x; count++) {
			// ????????????????????¶?????¨?????????
			switch (scan.next()) {
			case "print":// a~b?????????????????????
				a = scan.nextInt();
				b = scan.nextInt();
				str = new String(sb);
				sb2.append(str.substring(a, b + 1));// sb2?????\???
				sb2.append("\n");
				break;
			case "reverse":// a~b?????§??????????????????????????????
				a = scan.nextInt();
				b = scan.nextInt();
				// ????????????str?????????????????\??????
				str = new String(sb).substring(a, b+1);
				// ????????°??????????????????????????????????????\??????
				for (int count2 = 0; count2 < str.length(); count2++) {
					// ?????????????????????
					c = str.charAt(count2);
					// ????????????????´?(String)
					list.add(String.valueOf(c));
				}

				// ??????????????????
				for (int count3 = str.length(); count3 > 0; count3--) {
					str2 = str2 + list.get(count3 - 1);

				}

				// a~b???????????????????????????????????¨????????????
				sb.replace(a, b+1, str2);

				break;
			case "replace":// a~b?????§???????????????p???????????????
				a = scan.nextInt();// 1
				b = scan.nextInt();// 3
				p = scan.next();// ?????????????????????(xyz)

				// ????????????
				sb.replace(a, b + 1, p);// sb.replace(1, 3, "xyz");
				break;
			}
			str = "";// str?????????
			str2 = "";// str2?????????
			list.clear();
		}

		// ????????????????????????
		sb.deleteCharAt(sb.length() - 1);
		System.out.print(new String(sb2));

	}
}