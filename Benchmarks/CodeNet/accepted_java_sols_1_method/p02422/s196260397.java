
import java.util.Scanner;

public class Main {
	public static void main(String[]args){
		//????????£????????????
		Scanner sc = new Scanner(System.in);
		//??????????????????
		String str = sc.next();
		StringBuffer sb = new StringBuffer(str);

		//??????????????°?????????
		int n = sc.nextInt();
		for(int i = 0; i<n;i++){
			//??????????????????
			String order = sc.next();
			//?????¶?????????
			int a = sc.nextInt();
			int b = sc.nextInt()+1;
			//???????????????????????? 1 ?????????????????´???
			if(order.equals("replace")){
				//????????????????????????
				String wordRe = sc.next();
				sb = sb.replace(a, b, wordRe);
				 str= sb.toString();
				//System.out.println("????????????="+str);
				//2??????????????????
			}else if(order.equals("reverse")){
				StringBuffer sb2 = new StringBuffer(sb.substring(a,b));
				str =sb2.reverse().toString();;
				sb.replace(a, b, str);
				//System.out.println("???="+sb);
			//3??????????????????????????¨???
			}else if(order.equals("print")){
				//???????????????????????¨???
				str= sb.substring(a, b);
				System.out.println(str);
			}
		}
	}
}