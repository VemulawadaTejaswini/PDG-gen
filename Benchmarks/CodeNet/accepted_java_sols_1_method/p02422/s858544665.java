import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Main {

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringBuilder str = new StringBuilder(br.readLine());
        int q = Integer.parseInt(br.readLine());    //????????°q

        for(int i = 0; i < q; i++){
            String[] query = br.readLine().split(" ");
            int begin = Integer.parseInt(query[1]);
            int end = Integer.parseInt(query[2]);

            if(query[0].equals("print")){
                String print = str.substring(begin, end + 1);
                System.out.println(print);

            }else if(query[0].equals("reverse")){
//              ????????????????????????????????????sb?????£??\
                StringBuilder re = new StringBuilder(str.substring(begin, end + 1));
//              ???????????????????????¢
                String reverse = re.reverse().toString();
//              ??¨????????????????????£???
                str.replace(begin, end +1, reverse);

            }else if(query[0].equals("replace")){
//              ???????????????????????????????????????
                String replace = query[3];
//              ???????????????
                str.replace(begin, end +1, replace);
            }
        }
    }
}