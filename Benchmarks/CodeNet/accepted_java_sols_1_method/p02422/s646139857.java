import java.util.Scanner;

public class Main {
	
	public static void main(String[] args) {
		// TODO ?????????????????????????????????????????????

		Scanner scan = new Scanner(System.in);
		// ????????????????????????
		String str = scan.next();
		// ???????????°
		int q = scan.nextInt();
		// ???????????°?????????????????????
		for(int i = 0; i<q; i++){
			// ?????????????????????
			String m = scan.next();
			
			//print
			if(m.equals("print")){
				// a???b??????????????§???????????????
				int a = scan.nextInt();
				int b = scan.nextInt();
				String print = str.substring(a, b+1);
				System.out.println(print);
			}
			// reverse
			if(m.equals("reverse")){
				// a???b??????????????§???????????????
				int a = scan.nextInt();
				int b = scan.nextInt();
				String str2 = str.substring(a, b+1);
				// ?????????????????¢?????????
		        StringBuffer A = new StringBuffer();
		        for (int i2 = str2.length() - 1; i2 >= 0; i2--)
		            A.append(str2.charAt(i2));
		        //return dest.toString();
				String s1 = str.substring(0, a);
				String s3 = str.substring(b+1);
				str = s1 + A + s3;
			}
			// replace
			if(m.equals("replace")){
				// a???b??????????????§????????????
				int a = scan.nextInt();
				int b = scan.nextInt();
				// ????????????
				String p = scan.next();
				String s1 = str.substring(0, a);
				String s2 = p;
				String s3 = str.substring(b+1);
				str = s1 + s2 + s3;
			}
			
			
		}
		
	}

}