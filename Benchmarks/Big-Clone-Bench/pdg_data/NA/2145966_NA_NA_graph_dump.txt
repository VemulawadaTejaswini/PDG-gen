Line_0 $$ Entry-->Line_1 $$ public class dummy [ CD ]
Line_1 $$ public class dummy -->Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) [ CD ]
Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) -->Line_3 $$ if (increaseBy < 1)[ CD ]
Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) -->Line_3 $$ if (increaseBy < 1)[ FD ]
Line_3 $$ if (increaseBy < 1)-->Line_3 $$ increaseBy = 1[ CD ]
Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) -->Line_3 $$ increaseBy = 1[ FD ]
Line_3 $$ increaseBy = 1-->Line_3 $$ increaseBy = 1[ FD ]
Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) -->Line_4 $$ String where = "where eoentity_name = '" + ename + "'"[ CD ]
Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) -->Line_5 $$ ERXJDBCConnectionBroker broker = ERXJDBCConnectionBroker.connectionBrokerForEntityNamed(ename)[ CD ]
Line_5 $$ ERXJDBCConnectionBroker broker = ERXJDBCConnectionBroker.connectionBrokerForEntityNamed(ename)-->Line_5 $$ ERXJDBCConnectionBroker broker = ERXJDBCConnectionBroker.connectionBrokerForEntityNamed(ename)[ CD ]
Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) -->Line_5 $$ ERXJDBCConnectionBroker broker = ERXJDBCConnectionBroker.connectionBrokerForEntityNamed(ename)[ FD ]
Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) -->Line_6 $$ Connection con = broker.getConnection()[ CD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_6 $$ Connection con = broker.getConnection()[ CD ]
Line_5 $$ ERXJDBCConnectionBroker broker = ERXJDBCConnectionBroker.connectionBrokerForEntityNamed(ename)-->Line_6 $$ Connection con = broker.getConnection()[ FD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_9 $$ con.setAutoCommit(false)[ FD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_10 $$ con.setReadOnly(false)[ FD ]
Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) -->Line_14 $$ for (int tries = 0; tries < count; tries++) [ FD ]
Line_14 $$ for (int tries = 0; tries < count; tries++) -->Line_14 $$ for (int tries = 0; tries < count; tries++) [ CD ]
Line_14 $$ for (int tries = 0; tries < count; tries++) -->Line_14 $$ for (int tries = 0; tries < count; tries++) [ CD ]
Line_14 $$ for (int tries = 0; tries < count; tries++) -->Line_14 $$ for (int tries = 0; tries < count; tries++) [ FD ]
Line_16 $$ ResultSet resultSet = con.createStatement().executeQuery("select pk_value from pk_table " + where)-->Line_16 $$ ResultSet resultSet = con.createStatement().executeQuery("select pk_value from pk_table " + where)[ CD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_16 $$ ResultSet resultSet = con.createStatement().executeQuery("select pk_value from pk_table " + where)[ FD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_17 $$ con.commit()[ FD ]
Line_18 $$ boolean hasNext = resultSet.next()-->Line_18 $$ boolean hasNext = resultSet.next()[ CD ]
Line_16 $$ ResultSet resultSet = con.createStatement().executeQuery("select pk_value from pk_table " + where)-->Line_18 $$ boolean hasNext = resultSet.next()[ FD ]
Line_20 $$ if (hasNext) -->Line_21 $$ pk = resultSet.getLong("pk_value")[ CD ]
Line_19 $$ long pk = 1-->Line_21 $$ pk = resultSet.getLong("pk_value")[ FD ]
Line_21 $$ pk = resultSet.getLong("pk_value")-->Line_21 $$ pk = resultSet.getLong("pk_value")[ FD ]
Line_21 $$ pk = resultSet.getLong("pk_value")-->Line_21 $$ pk = resultSet.getLong("pk_value")[ CD ]
Line_16 $$ ResultSet resultSet = con.createStatement().executeQuery("select pk_value from pk_table " + where)-->Line_21 $$ pk = resultSet.getLong("pk_value")[ FD ]
Line_20 $$ if (hasNext) -->Line_22 $$ con.createStatement().executeUpdate("update pk_table set pk_value = " + (pk + increaseBy) + " " + where)[ CD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_22 $$ con.createStatement().executeUpdate("update pk_table set pk_value = " + (pk + increaseBy) + " " + where)[ FD ]
Line_20 $$ if (hasNext) -->Line_24 $$ pk = maxIdFromTable(ename)[ CD ]
Line_19 $$ long pk = 1-->Line_24 $$ pk = maxIdFromTable(ename)[ FD ]
Line_21 $$ pk = resultSet.getLong("pk_value")-->Line_24 $$ pk = maxIdFromTable(ename)[ FD ]
Line_24 $$ pk = maxIdFromTable(ename)-->Line_24 $$ pk = maxIdFromTable(ename)[ FD ]
Line_24 $$ pk = maxIdFromTable(ename)-->Line_24 $$ pk = maxIdFromTable(ename)[ CD ]
Line_2 $$ private static Long getNextPkValueForEntityIncreaseBy(String ename, int count, int increaseBy) -->Line_24 $$ pk = maxIdFromTable(ename)[ FD ]
Line_20 $$ if (hasNext) -->Line_25 $$ con.createStatement().executeUpdate("insert into pk_table (eoentity_name, pk_value) values ('" + ename + "', " + (pk + increaseBy) + ")")[ CD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_25 $$ con.createStatement().executeUpdate("insert into pk_table (eoentity_name, pk_value) values ('" + ename + "', " + (pk + increaseBy) + ")")[ FD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_27 $$ con.commit()[ FD ]
Line_30 $$ String s = ex.getMessage().toLowerCase()-->Line_30 $$ String s = ex.getMessage().toLowerCase()[ CD ]
Line_30 $$ String s = ex.getMessage().toLowerCase()-->Line_31 $$ boolean creationError = (s.indexOf("error code 116") != -1)[ FD ]
Line_31 $$ boolean creationError = (s.indexOf("error code 116") != -1)-->Line_32 $$ creationError |= (s.indexOf("pk_table") != -1 && s.indexOf("does not exist") != -1)[ FD ]
Line_32 $$ creationError |= (s.indexOf("pk_table") != -1 && s.indexOf("does not exist") != -1)-->Line_32 $$ creationError |= (s.indexOf("pk_table") != -1 && s.indexOf("does not exist") != -1)[ FD ]
Line_30 $$ String s = ex.getMessage().toLowerCase()-->Line_32 $$ creationError |= (s.indexOf("pk_table") != -1 && s.indexOf("does not exist") != -1)[ FD ]
Line_30 $$ String s = ex.getMessage().toLowerCase()-->Line_32 $$ creationError |= (s.indexOf("pk_table") != -1 && s.indexOf("does not exist") != -1)[ FD ]
Line_31 $$ boolean creationError = (s.indexOf("error code 116") != -1)-->Line_33 $$ creationError |= s.indexOf("ora-00942") != -1[ FD ]
Line_32 $$ creationError |= (s.indexOf("pk_table") != -1 && s.indexOf("does not exist") != -1)-->Line_33 $$ creationError |= s.indexOf("ora-00942") != -1[ FD ]
Line_33 $$ creationError |= s.indexOf("ora-00942") != -1-->Line_33 $$ creationError |= s.indexOf("ora-00942") != -1[ FD ]
Line_30 $$ String s = ex.getMessage().toLowerCase()-->Line_33 $$ creationError |= s.indexOf("ora-00942") != -1[ FD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_36 $$ con.rollback()[ FD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_38 $$ con.createStatement().executeUpdate("create table pk_table (eoentity_name varchar(100) not null, pk_value integer)")[ FD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_39 $$ con.createStatement().executeUpdate("alter table pk_table add primary key (eoentity_name)")[ FD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_40 $$ con.commit()[ FD ]
Line_5 $$ ERXJDBCConnectionBroker broker = ERXJDBCConnectionBroker.connectionBrokerForEntityNamed(ename)-->Line_50 $$ broker.freeConnection(con)[ FD ]
Line_6 $$ Connection con = broker.getConnection()-->Line_50 $$ broker.freeConnection(con)[ FD ]
Line_14 $$ for (int tries = 0; tries < count; tries++) -->Line_14 $$ for (int tries = 0; tries < count; tries++) [ FD ]
Line_14 $$ for (int tries = 0; tries < count; tries++) -->Line_14 $$ for (int tries = 0; tries < count; tries++) [ FD ]
Line_14 $$ for (int tries = 0; tries < count; tries++) -->Line_14 $$ for (int tries = 0; tries < count; tries++) [ FD ]
Line_16 $$ ResultSet resultSet = con.createStatement().executeQuery("select pk_value from pk_table " + where)-->Line_18 $$ boolean hasNext = resultSet.next()[ FD ]
Line_16 $$ ResultSet resultSet = con.createStatement().executeQuery("select pk_value from pk_table " + where)-->Line_21 $$ pk = resultSet.getLong("pk_value")[ FD ]
Line_30 $$ String s = ex.getMessage().toLowerCase()-->Line_31 $$ boolean creationError = (s.indexOf("error code 116") != -1)[ FD ]
Line_30 $$ String s = ex.getMessage().toLowerCase()-->Line_32 $$ creationError |= (s.indexOf("pk_table") != -1 && s.indexOf("does not exist") != -1)[ FD ]
Line_30 $$ String s = ex.getMessage().toLowerCase()-->Line_32 $$ creationError |= (s.indexOf("pk_table") != -1 && s.indexOf("does not exist") != -1)[ FD ]
Line_30 $$ String s = ex.getMessage().toLowerCase()-->Line_33 $$ creationError |= s.indexOf("ora-00942") != -1[ FD ]
