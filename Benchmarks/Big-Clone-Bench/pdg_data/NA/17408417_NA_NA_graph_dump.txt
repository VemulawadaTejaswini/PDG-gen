Line_0 $$ Entry-->Line_1 $$ public class dummy [ CD ]
Line_1 $$ public class dummy -->Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException [ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_3 $$ String updateSQL = " update dyhikemomessages set receive_id = ?, receive_Time = ?  where mo_to =? and receive_id =0  limit 20"[ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_4 $$ String selectSQL = " select MOMSG_ID,mo_from,mo_to,create_time,mo_content from dyhikemomessages where receive_id =?  "[ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_5 $$ String insertSQL = " insert into t_receive_history select * from dyhikemomessages  where receive_id =?  "[ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_6 $$ String deleteSQL = " delete from dyhikemomessages where receive_id =? "[ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_7 $$ Logger logger = Logger.getLogger(this.getClass())[ CD ]
Line_7 $$ Logger logger = Logger.getLogger(this.getClass())-->Line_7 $$ Logger logger = Logger.getLogger(this.getClass())[ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_8 $$ ArrayList msgInfoList = new ArrayList()[ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_9 $$ String mo_to = msgRecvReq.getAuthInfo().getUserName()[ CD ]
Line_9 $$ String mo_to = msgRecvReq.getAuthInfo().getUserName()-->Line_9 $$ String mo_to = msgRecvReq.getAuthInfo().getUserName()[ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_9 $$ String mo_to = msgRecvReq.getAuthInfo().getUserName()[ FD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_10 $$ MsgRecvInfo[] msgInfoArray = new ototype.MsgRecvInfo[0][ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_11 $$ String receiveTime = Const.DF.format(new Date())[ CD ]
Line_11 $$ String receiveTime = Const.DF.format(new Date())-->Line_11 $$ String receiveTime = Const.DF.format(new Date())[ CD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_12 $$ logger.debug("recvMsgNew1")[ CD ]
Line_7 $$ Logger logger = Logger.getLogger(this.getClass())-->Line_12 $$ logger.debug("recvMsgNew1")[ FD ]
Line_2 $$ public MsgRecvInfo[] recvMsg(MsgRecvReq msgRecvReq) throws SQLException -->Line_13 $$ Connection conn = null[ CD ]
Line_15 $$ int receiveID = this.getSegquence("receiveID")-->Line_15 $$ int receiveID = this.getSegquence("receiveID")[ CD ]
Line_13 $$ Connection conn = null-->Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()[ CD ]
Line_13 $$ Connection conn = null-->Line_17 $$ conn.setAutoCommit(false)[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_17 $$ conn.setAutoCommit(false)[ FD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)[ CD ]
Line_13 $$ Connection conn = null-->Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)[ FD ]
Line_3 $$ String updateSQL = " update dyhikemomessages set receive_id = ?, receive_Time = ?  where mo_to =? and receive_id =0  limit 20"-->Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)[ FD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_19 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_15 $$ int receiveID = this.getSegquence("receiveID")-->Line_19 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_20 $$ pstmt.setString(2, receiveTime)[ FD ]
Line_11 $$ String receiveTime = Const.DF.format(new Date())-->Line_20 $$ pstmt.setString(2, receiveTime)[ FD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_21 $$ pstmt.setString(3, mo_to)[ FD ]
Line_9 $$ String mo_to = msgRecvReq.getAuthInfo().getUserName()-->Line_21 $$ pstmt.setString(3, mo_to)[ FD ]
Line_22 $$ int recordCount = pstmt.executeUpdate()-->Line_22 $$ int recordCount = pstmt.executeUpdate()[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_22 $$ int recordCount = pstmt.executeUpdate()[ FD ]
Line_7 $$ Logger logger = Logger.getLogger(this.getClass())-->Line_23 $$ logger.info(recordCount + " record(s) got")[ FD ]
Line_22 $$ int recordCount = pstmt.executeUpdate()-->Line_24 $$ if (recordCount > 0) [ FD ]
Line_24 $$ if (recordCount > 0) -->Line_25 $$ pstmt = conn.prepareStatement(selectSQL)[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_25 $$ pstmt = conn.prepareStatement(selectSQL)[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_25 $$ pstmt = conn.prepareStatement(selectSQL)[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_25 $$ pstmt = conn.prepareStatement(selectSQL)[ CD ]
Line_13 $$ Connection conn = null-->Line_25 $$ pstmt = conn.prepareStatement(selectSQL)[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_25 $$ pstmt = conn.prepareStatement(selectSQL)[ FD ]
Line_4 $$ String selectSQL = " select MOMSG_ID,mo_from,mo_to,create_time,mo_content from dyhikemomessages where receive_id =?  "-->Line_25 $$ pstmt = conn.prepareStatement(selectSQL)[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_26 $$ pstmt.setInt(1, receiveID)[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_26 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_26 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_15 $$ int receiveID = this.getSegquence("receiveID")-->Line_26 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_27 $$ ResultSet rs = pstmt.executeQuery()[ CD ]
Line_27 $$ ResultSet rs = pstmt.executeQuery()-->Line_27 $$ ResultSet rs = pstmt.executeQuery()[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_27 $$ ResultSet rs = pstmt.executeQuery()[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_27 $$ ResultSet rs = pstmt.executeQuery()[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_28 $$ while (rs.next()) [ CD ]
Line_24 $$ if (recordCount > 0) -->Line_24 $$ if (recordCount > 0) [ CD ]
Line_28 $$ while (rs.next()) -->Line_28 $$ while (rs.next()) [ CD ]
Line_27 $$ ResultSet rs = pstmt.executeQuery()-->Line_28 $$ while (rs.next()) [ FD ]
Line_28 $$ while (rs.next()) -->Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()[ CD ]
Line_28 $$ while (rs.next()) -->Line_30 $$ msg.setDestMobile(rs.getString("mo_to"))[ CD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_30 $$ msg.setDestMobile(rs.getString("mo_to"))[ FD ]
Line_27 $$ ResultSet rs = pstmt.executeQuery()-->Line_30 $$ msg.setDestMobile(rs.getString("mo_to"))[ FD ]
Line_28 $$ while (rs.next()) -->Line_31 $$ msg.setRecvAddi(rs.getString("mo_to"))[ CD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_31 $$ msg.setRecvAddi(rs.getString("mo_to"))[ FD ]
Line_27 $$ ResultSet rs = pstmt.executeQuery()-->Line_31 $$ msg.setRecvAddi(rs.getString("mo_to"))[ FD ]
Line_28 $$ while (rs.next()) -->Line_32 $$ msg.setSendAddi(rs.getString("MO_FROM"))[ CD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_32 $$ msg.setSendAddi(rs.getString("MO_FROM"))[ FD ]
Line_27 $$ ResultSet rs = pstmt.executeQuery()-->Line_32 $$ msg.setSendAddi(rs.getString("MO_FROM"))[ FD ]
Line_28 $$ while (rs.next()) -->Line_33 $$ msg.setContent(rs.getString("mo_content"))[ CD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_33 $$ msg.setContent(rs.getString("mo_content"))[ FD ]
Line_27 $$ ResultSet rs = pstmt.executeQuery()-->Line_33 $$ msg.setContent(rs.getString("mo_content"))[ FD ]
Line_28 $$ while (rs.next()) -->Line_34 $$ msg.setRecvDate(rs.getString("create_time"))[ CD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_34 $$ msg.setRecvDate(rs.getString("create_time"))[ FD ]
Line_27 $$ ResultSet rs = pstmt.executeQuery()-->Line_34 $$ msg.setRecvDate(rs.getString("create_time"))[ FD ]
Line_28 $$ while (rs.next()) -->Line_35 $$ msgInfoList.add(msg)[ CD ]
Line_8 $$ ArrayList msgInfoList = new ArrayList()-->Line_35 $$ msgInfoList.add(msg)[ FD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_35 $$ msgInfoList.add(msg)[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_37 $$ msgInfoArray = (MsgRecvInfo[]) msgInfoList.toArray(new MsgRecvInfo[msgInfoList.size()])[ CD ]
Line_10 $$ MsgRecvInfo[] msgInfoArray = new ototype.MsgRecvInfo[0]-->Line_37 $$ msgInfoArray = (MsgRecvInfo[]) msgInfoList.toArray(new MsgRecvInfo[msgInfoList.size()])[ FD ]
Line_37 $$ msgInfoArray = (MsgRecvInfo[]) msgInfoList.toArray(new MsgRecvInfo[msgInfoList.size()])-->Line_37 $$ msgInfoArray = (MsgRecvInfo[]) msgInfoList.toArray(new MsgRecvInfo[msgInfoList.size()])[ FD ]
Line_8 $$ ArrayList msgInfoList = new ArrayList()-->Line_37 $$ msgInfoArray = (MsgRecvInfo[]) msgInfoList.toArray(new MsgRecvInfo[msgInfoList.size()])[ FD ]
Line_8 $$ ArrayList msgInfoList = new ArrayList()-->Line_37 $$ msgInfoArray = (MsgRecvInfo[]) msgInfoList.toArray(new MsgRecvInfo[msgInfoList.size()])[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_38 $$ pstmt = conn.prepareStatement(insertSQL)[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_38 $$ pstmt = conn.prepareStatement(insertSQL)[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_38 $$ pstmt = conn.prepareStatement(insertSQL)[ FD ]
Line_38 $$ pstmt = conn.prepareStatement(insertSQL)-->Line_38 $$ pstmt = conn.prepareStatement(insertSQL)[ FD ]
Line_38 $$ pstmt = conn.prepareStatement(insertSQL)-->Line_38 $$ pstmt = conn.prepareStatement(insertSQL)[ CD ]
Line_13 $$ Connection conn = null-->Line_38 $$ pstmt = conn.prepareStatement(insertSQL)[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_38 $$ pstmt = conn.prepareStatement(insertSQL)[ FD ]
Line_5 $$ String insertSQL = " insert into t_receive_history select * from dyhikemomessages  where receive_id =?  "-->Line_38 $$ pstmt = conn.prepareStatement(insertSQL)[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_39 $$ pstmt.setInt(1, receiveID)[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_39 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_39 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_38 $$ pstmt = conn.prepareStatement(insertSQL)-->Line_39 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_15 $$ int receiveID = this.getSegquence("receiveID")-->Line_39 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_40 $$ pstmt.execute()[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_40 $$ pstmt.execute()[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_40 $$ pstmt.execute()[ FD ]
Line_38 $$ pstmt = conn.prepareStatement(insertSQL)-->Line_40 $$ pstmt.execute()[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)[ FD ]
Line_38 $$ pstmt = conn.prepareStatement(insertSQL)-->Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)[ FD ]
Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)-->Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)[ FD ]
Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)-->Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)[ CD ]
Line_13 $$ Connection conn = null-->Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)[ FD ]
Line_6 $$ String deleteSQL = " delete from dyhikemomessages where receive_id =? "-->Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_42 $$ pstmt.setInt(1, receiveID)[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_42 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_42 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_38 $$ pstmt = conn.prepareStatement(insertSQL)-->Line_42 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)-->Line_42 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_15 $$ int receiveID = this.getSegquence("receiveID")-->Line_42 $$ pstmt.setInt(1, receiveID)[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_43 $$ pstmt.execute()[ CD ]
Line_18 $$ PreparedStatement pstmt = conn.prepareStatement(updateSQL)-->Line_43 $$ pstmt.execute()[ FD ]
Line_25 $$ pstmt = conn.prepareStatement(selectSQL)-->Line_43 $$ pstmt.execute()[ FD ]
Line_38 $$ pstmt = conn.prepareStatement(insertSQL)-->Line_43 $$ pstmt.execute()[ FD ]
Line_41 $$ pstmt = conn.prepareStatement(deleteSQL)-->Line_43 $$ pstmt.execute()[ FD ]
Line_24 $$ if (recordCount > 0) -->Line_44 $$ conn.commit()[ CD ]
Line_13 $$ Connection conn = null-->Line_44 $$ conn.commit()[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_44 $$ conn.commit()[ FD ]
Line_7 $$ Logger logger = Logger.getLogger(this.getClass())-->Line_46 $$ logger.debug("recvMsgNew2")[ FD ]
Line_13 $$ Connection conn = null-->Line_49 $$ conn.rollback()[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_49 $$ conn.rollback()[ FD ]
Line_13 $$ Connection conn = null-->Line_52 $$ if (conn != null) [ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_52 $$ if (conn != null) [ FD ]
Line_52 $$ if (conn != null) -->Line_53 $$ conn.setAutoCommit(true)[ CD ]
Line_13 $$ Connection conn = null-->Line_53 $$ conn.setAutoCommit(true)[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_53 $$ conn.setAutoCommit(true)[ FD ]
Line_52 $$ if (conn != null) -->Line_54 $$ conn.close()[ CD ]
Line_13 $$ Connection conn = null-->Line_54 $$ conn.close()[ FD ]
Line_16 $$ conn = this.getJdbcTemplate().getDataSource().getConnection()-->Line_54 $$ conn.close()[ FD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_30 $$ msg.setDestMobile(rs.getString("mo_to"))[ FD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_31 $$ msg.setRecvAddi(rs.getString("mo_to"))[ FD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_32 $$ msg.setSendAddi(rs.getString("MO_FROM"))[ FD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_33 $$ msg.setContent(rs.getString("mo_content"))[ FD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_34 $$ msg.setRecvDate(rs.getString("create_time"))[ FD ]
Line_29 $$ MsgRecvInfo msg = new MsgRecvInfo()-->Line_35 $$ msgInfoList.add(msg)[ FD ]
