Line_0 $$ Entry-->Line_1 $$ public class dummy [ CD ]
Line_1 $$ public class dummy -->Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException [ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_3 $$ Agent agent = service.getAgent(agentName)[ CD ]
Line_3 $$ Agent agent = service.getAgent(agentName)-->Line_3 $$ Agent agent = service.getAgent(agentName)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_3 $$ Agent agent = service.getAgent(agentName)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_4 $$ File instanceDir = getInstanceDir()[ CD ]
Line_4 $$ File instanceDir = getInstanceDir()-->Line_4 $$ File instanceDir = getInstanceDir()[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_5 $$ double agent_timeout_seconds = engine.getTimeout()[ CD ]
Line_5 $$ double agent_timeout_seconds = engine.getTimeout()-->Line_5 $$ double agent_timeout_seconds = engine.getTimeout()[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_6 $$ String ii = "\""[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_7 $$ String agentScript = "agent-" + agentName + ".py"[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_8 $$ String serviceScript = "service.py"[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_9 $$ Set<String> taskNames = agent.getTasks().keySet()[ CD ]
Line_9 $$ Set<String> taskNames = agent.getTasks().keySet()-->Line_9 $$ Set<String> taskNames = agent.getTasks().keySet()[ CD ]
Line_3 $$ Agent agent = service.getAgent(agentName)-->Line_9 $$ Set<String> taskNames = agent.getTasks().keySet()[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_10 $$ File scriptDir = getService().getScriptDir()[ CD ]
Line_10 $$ File scriptDir = getService().getScriptDir()-->Line_10 $$ File scriptDir = getService().getScriptDir()[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_11 $$ final boolean embedScripts = true[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_13 $$ ps.println("#!/bin/sh")[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_13 $$ ps.println("#!/bin/sh")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_14 $$ ps.println("umask 0077")[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_14 $$ ps.println("umask 0077")[ FD ]
Line_17 $$ Task task = getService().getTask(taskName)-->Line_17 $$ Task task = getService().getTask(taskName)[ CD ]
Line_16 $$ for (String taskName : taskNames) -->Line_17 $$ Task task = getService().getTask(taskName)[ FD ]
Line_18 $$ String script = task.getScriptContent()-->Line_18 $$ String script = task.getScriptContent()[ CD ]
Line_17 $$ Task task = getService().getTask(taskName)-->Line_18 $$ String script = task.getScriptContent()[ FD ]
Line_19 $$ if (embedScripts) -->Line_20 $$ ps.println()[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_20 $$ ps.println()[ FD ]
Line_19 $$ if (embedScripts) -->Line_21 $$ ps.println("cat > " + task.getFile() + " << " + ii + "EOF_" + task.getFile() + ii)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_21 $$ ps.println("cat > " + task.getFile() + " << " + ii + "EOF_" + task.getFile() + ii)[ FD ]
Line_17 $$ Task task = getService().getTask(taskName)-->Line_21 $$ ps.println("cat > " + task.getFile() + " << " + ii + "EOF_" + task.getFile() + ii)[ FD ]
Line_17 $$ Task task = getService().getTask(taskName)-->Line_21 $$ ps.println("cat > " + task.getFile() + " << " + ii + "EOF_" + task.getFile() + ii)[ FD ]
Line_19 $$ if (embedScripts) -->Line_22 $$ ps.println(script)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_22 $$ ps.println(script)[ FD ]
Line_18 $$ String script = task.getScriptContent()-->Line_22 $$ ps.println(script)[ FD ]
Line_19 $$ if (embedScripts) -->Line_23 $$ ps.println("EOF_" + task.getFile())[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_23 $$ ps.println("EOF_" + task.getFile())[ FD ]
Line_17 $$ Task task = getService().getTask(taskName)-->Line_23 $$ ps.println("EOF_" + task.getFile())[ FD ]
Line_19 $$ if (embedScripts) -->Line_25 $$ File taskScriptFile = new File(instanceDir, task.getFile())[ CD ]
Line_17 $$ Task task = getService().getTask(taskName)-->Line_25 $$ File taskScriptFile = new File(instanceDir, task.getFile())[ FD ]
Line_19 $$ if (embedScripts) -->Line_26 $$ PrintStream xs = new PrintStream(taskScriptFile)[ CD ]
Line_19 $$ if (embedScripts) -->Line_27 $$ xs.print(script)[ CD ]
Line_26 $$ PrintStream xs = new PrintStream(taskScriptFile)-->Line_27 $$ xs.print(script)[ FD ]
Line_18 $$ String script = task.getScriptContent()-->Line_27 $$ xs.print(script)[ FD ]
Line_19 $$ if (embedScripts) -->Line_28 $$ xs.close()[ CD ]
Line_26 $$ PrintStream xs = new PrintStream(taskScriptFile)-->Line_28 $$ xs.close()[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_32 $$ PrintStream ss = null[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_33 $$ if (embedScripts) [ CD ]
Line_33 $$ if (embedScripts) -->Line_34 $$ ps.println()[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_34 $$ ps.println()[ FD ]
Line_33 $$ if (embedScripts) -->Line_35 $$ ps.println("cat > " + serviceScript + " << " + ii + "EOF_" + serviceScript + ii)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_35 $$ ps.println("cat > " + serviceScript + " << " + ii + "EOF_" + serviceScript + ii)[ FD ]
Line_33 $$ if (embedScripts) -->Line_36 $$ ss = ps[ CD ]
Line_32 $$ PrintStream ss = null-->Line_36 $$ ss = ps[ FD ]
Line_36 $$ ss = ps-->Line_36 $$ ss = ps[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_36 $$ ss = ps[ FD ]
Line_33 $$ if (embedScripts) -->Line_38 $$ File serviceScriptFile = new File(instanceDir, serviceScript)[ CD ]
Line_33 $$ if (embedScripts) -->Line_39 $$ ss = new PrintStream(serviceScriptFile)[ CD ]
Line_32 $$ PrintStream ss = null-->Line_39 $$ ss = new PrintStream(serviceScriptFile)[ FD ]
Line_36 $$ ss = ps-->Line_39 $$ ss = new PrintStream(serviceScriptFile)[ FD ]
Line_39 $$ ss = new PrintStream(serviceScriptFile)-->Line_39 $$ ss = new PrintStream(serviceScriptFile)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_41 $$ service.createServiceScript(ss)[ CD ]
Line_32 $$ PrintStream ss = null-->Line_41 $$ service.createServiceScript(ss)[ FD ]
Line_36 $$ ss = ps-->Line_41 $$ service.createServiceScript(ss)[ FD ]
Line_39 $$ ss = new PrintStream(serviceScriptFile)-->Line_41 $$ service.createServiceScript(ss)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_42 $$ if (embedScripts)[ CD ]
Line_42 $$ if (embedScripts)-->Line_42 $$ ps.println("EOF_" + serviceScript)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_42 $$ ps.println("EOF_" + serviceScript)[ FD ]
Line_42 $$ if (embedScripts)-->Line_42 $$ ss.close()[ CD ]
Line_32 $$ PrintStream ss = null-->Line_42 $$ ss.close()[ FD ]
Line_36 $$ ss = ps-->Line_42 $$ ss.close()[ FD ]
Line_39 $$ ss = new PrintStream(serviceScriptFile)-->Line_42 $$ ss.close()[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_45 $$ URL url = new URL(engine.getAgentContextURL() + "/" + engine.getAgentURLPath())[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_46 $$ log.debug("url for agent = " + url.toExternalForm())[ CD ]
Line_45 $$ URL url = new URL(engine.getAgentContextURL() + "/" + engine.getAgentURLPath())-->Line_46 $$ log.debug("url for agent = " + url.toExternalForm())[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_47 $$ PrintStream as = null[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_48 $$ if (embedScripts) [ CD ]
Line_48 $$ if (embedScripts) -->Line_49 $$ ps.println()[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_49 $$ ps.println()[ FD ]
Line_48 $$ if (embedScripts) -->Line_50 $$ ps.println("cat > " + agentScript + " << " + ii + "EOF_" + agentScript + ii)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_50 $$ ps.println("cat > " + agentScript + " << " + ii + "EOF_" + agentScript + ii)[ FD ]
Line_48 $$ if (embedScripts) -->Line_51 $$ as = ps[ CD ]
Line_47 $$ PrintStream as = null-->Line_51 $$ as = ps[ FD ]
Line_51 $$ as = ps-->Line_51 $$ as = ps[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_51 $$ as = ps[ FD ]
Line_48 $$ if (embedScripts) -->Line_53 $$ File agentScriptFile = new File(instanceDir, agentScript)[ CD ]
Line_48 $$ if (embedScripts) -->Line_54 $$ as = new PrintStream(agentScriptFile)[ CD ]
Line_47 $$ PrintStream as = null-->Line_54 $$ as = new PrintStream(agentScriptFile)[ FD ]
Line_51 $$ as = ps-->Line_54 $$ as = new PrintStream(agentScriptFile)[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_54 $$ as = new PrintStream(agentScriptFile)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_56 $$ String tab[] = [ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_57 $$ int i = 0[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_58 $$ as.println(tab[i] + "from wrapper import ZSIWrapper")[ CD ]
Line_47 $$ PrintStream as = null-->Line_58 $$ as.println(tab[i] + "from wrapper import ZSIWrapper")[ FD ]
Line_51 $$ as = ps-->Line_58 $$ as.println(tab[i] + "from wrapper import ZSIWrapper")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_58 $$ as.println(tab[i] + "from wrapper import ZSIWrapper")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_59 $$ as.println(tab[i] + "from service import Service")[ CD ]
Line_47 $$ PrintStream as = null-->Line_59 $$ as.println(tab[i] + "from service import Service")[ FD ]
Line_51 $$ as = ps-->Line_59 $$ as.println(tab[i] + "from service import Service")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_59 $$ as.println(tab[i] + "from service import Service")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_60 $$ as.println(tab[i] + "import threading")[ CD ]
Line_47 $$ PrintStream as = null-->Line_60 $$ as.println(tab[i] + "import threading")[ FD ]
Line_51 $$ as = ps-->Line_60 $$ as.println(tab[i] + "import threading")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_60 $$ as.println(tab[i] + "import threading")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_61 $$ as.println(tab[i] + "from sys import exit")[ CD ]
Line_47 $$ PrintStream as = null-->Line_61 $$ as.println(tab[i] + "from sys import exit")[ FD ]
Line_51 $$ as = ps-->Line_61 $$ as.println(tab[i] + "from sys import exit")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_61 $$ as.println(tab[i] + "from sys import exit")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_62 $$ as.println()[ CD ]
Line_47 $$ PrintStream as = null-->Line_62 $$ as.println()[ FD ]
Line_51 $$ as = ps-->Line_62 $$ as.println()[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_62 $$ as.println()[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_63 $$ as.println(tab[i] + "URL=" + ii + url.toString() + ii)[ CD ]
Line_47 $$ PrintStream as = null-->Line_63 $$ as.println(tab[i] + "URL=" + ii + url.toString() + ii)[ FD ]
Line_51 $$ as = ps-->Line_63 $$ as.println(tab[i] + "URL=" + ii + url.toString() + ii)[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_63 $$ as.println(tab[i] + "URL=" + ii + url.toString() + ii)[ FD ]
Line_45 $$ URL url = new URL(engine.getAgentContextURL() + "/" + engine.getAgentURLPath())-->Line_63 $$ as.println(tab[i] + "URL=" + ii + url.toString() + ii)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_64 $$ as.println(tab[i] + "agentID=" + ii + agentID + ii)[ CD ]
Line_47 $$ PrintStream as = null-->Line_64 $$ as.println(tab[i] + "agentID=" + ii + agentID + ii)[ FD ]
Line_51 $$ as = ps-->Line_64 $$ as.println(tab[i] + "agentID=" + ii + agentID + ii)[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_64 $$ as.println(tab[i] + "agentID=" + ii + agentID + ii)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_65 $$ as.println(tab[i] + "instanceID=" + instanceID)[ CD ]
Line_47 $$ PrintStream as = null-->Line_65 $$ as.println(tab[i] + "instanceID=" + instanceID)[ FD ]
Line_51 $$ as = ps-->Line_65 $$ as.println(tab[i] + "instanceID=" + instanceID)[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_65 $$ as.println(tab[i] + "instanceID=" + instanceID)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_66 $$ as.println(tab[i] + "instanceKey=" + ii + key + ii)[ CD ]
Line_47 $$ PrintStream as = null-->Line_66 $$ as.println(tab[i] + "instanceKey=" + ii + key + ii)[ FD ]
Line_51 $$ as = ps-->Line_66 $$ as.println(tab[i] + "instanceKey=" + ii + key + ii)[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_66 $$ as.println(tab[i] + "instanceKey=" + ii + key + ii)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_67 $$ as.println(tab[i] + "timeout=" + ii + agent_timeout_seconds + ii)[ CD ]
Line_47 $$ PrintStream as = null-->Line_67 $$ as.println(tab[i] + "timeout=" + ii + agent_timeout_seconds + ii)[ FD ]
Line_51 $$ as = ps-->Line_67 $$ as.println(tab[i] + "timeout=" + ii + agent_timeout_seconds + ii)[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_67 $$ as.println(tab[i] + "timeout=" + ii + agent_timeout_seconds + ii)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_68 $$ as.println(tab[i] + "stop_flag=0")[ CD ]
Line_47 $$ PrintStream as = null-->Line_68 $$ as.println(tab[i] + "stop_flag=0")[ FD ]
Line_51 $$ as = ps-->Line_68 $$ as.println(tab[i] + "stop_flag=0")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_68 $$ as.println(tab[i] + "stop_flag=0")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_69 $$ as.println(tab[i] + "kill_flag=0")[ CD ]
Line_47 $$ PrintStream as = null-->Line_69 $$ as.println(tab[i] + "kill_flag=0")[ FD ]
Line_51 $$ as = ps-->Line_69 $$ as.println(tab[i] + "kill_flag=0")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_69 $$ as.println(tab[i] + "kill_flag=0")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_70 $$ as.println()[ CD ]
Line_47 $$ PrintStream as = null-->Line_70 $$ as.println()[ FD ]
Line_51 $$ as = ps-->Line_70 $$ as.println()[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_70 $$ as.println()[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_71 $$ as.println(tab[i] + "# Need extra port for each thread, " + "ZSIWrapper (actually ZSI) not thread save")[ CD ]
Line_47 $$ PrintStream as = null-->Line_71 $$ as.println(tab[i] + "# Need extra port for each thread, " + "ZSIWrapper (actually ZSI) not thread save")[ FD ]
Line_51 $$ as = ps-->Line_71 $$ as.println(tab[i] + "# Need extra port for each thread, " + "ZSIWrapper (actually ZSI) not thread save")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_71 $$ as.println(tab[i] + "# Need extra port for each thread, " + "ZSIWrapper (actually ZSI) not thread save")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_72 $$ as.println(tab[i] + "port0=ZSIWrapper(URL, agentID, instanceID, instanceKey, timeout)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_72 $$ as.println(tab[i] + "port0=ZSIWrapper(URL, agentID, instanceID, instanceKey, timeout)")[ FD ]
Line_51 $$ as = ps-->Line_72 $$ as.println(tab[i] + "port0=ZSIWrapper(URL, agentID, instanceID, instanceKey, timeout)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_72 $$ as.println(tab[i] + "port0=ZSIWrapper(URL, agentID, instanceID, instanceKey, timeout)")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_73 $$ as.println(tab[i] + "port0.setAgentStatus(" + Status.RUNNING.ordinal() + ")")[ CD ]
Line_47 $$ PrintStream as = null-->Line_73 $$ as.println(tab[i] + "port0.setAgentStatus(" + Status.RUNNING.ordinal() + ")")[ FD ]
Line_51 $$ as = ps-->Line_73 $$ as.println(tab[i] + "port0.setAgentStatus(" + Status.RUNNING.ordinal() + ")")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_73 $$ as.println(tab[i] + "port0.setAgentStatus(" + Status.RUNNING.ordinal() + ")")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_74 $$ as.println()[ CD ]
Line_47 $$ PrintStream as = null-->Line_74 $$ as.println()[ FD ]
Line_51 $$ as = ps-->Line_74 $$ as.println()[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_74 $$ as.println()[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_75 $$ as.println(tab[i] + "def create_namespace(service) :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_75 $$ as.println(tab[i] + "def create_namespace(service) :")[ FD ]
Line_51 $$ as = ps-->Line_75 $$ as.println(tab[i] + "def create_namespace(service) :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_75 $$ as.println(tab[i] + "def create_namespace(service) :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_76 $$ as.println(tab[i] + "    " + ii + "create a namespace for injection " + "into a task script and returns it." + ii)[ CD ]
Line_47 $$ PrintStream as = null-->Line_76 $$ as.println(tab[i] + "    " + ii + "create a namespace for injection " + "into a task script and returns it." + ii)[ FD ]
Line_51 $$ as = ps-->Line_76 $$ as.println(tab[i] + "    " + ii + "create a namespace for injection " + "into a task script and returns it." + ii)[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_76 $$ as.println(tab[i] + "    " + ii + "create a namespace for injection " + "into a task script and returns it." + ii)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_77 $$ as.println(tab[i] + "# first get most (not all) variables")[ CD ]
Line_47 $$ PrintStream as = null-->Line_77 $$ as.println(tab[i] + "# first get most (not all) variables")[ FD ]
Line_51 $$ as = ps-->Line_77 $$ as.println(tab[i] + "# first get most (not all) variables")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_77 $$ as.println(tab[i] + "# first get most (not all) variables")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_78 $$ as.print(tab[i] + "    arglist = [ ")[ CD ]
Line_47 $$ PrintStream as = null-->Line_78 $$ as.print(tab[i] + "    arglist = [ ")[ FD ]
Line_51 $$ as = ps-->Line_78 $$ as.print(tab[i] + "    arglist = [ ")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_78 $$ as.print(tab[i] + "    arglist = [ ")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_79 $$ int counter = 0[ CD ]
Line_79 $$ int counter = 0-->Line_81 $$ counter++[ FD ]
Line_82 $$ String varname = va.getName()-->Line_82 $$ String varname = va.getName()[ CD ]
Line_80 $$ for (VarAttributes va : attributesMap.values()) -->Line_82 $$ String varname = va.getName()[ FD ]
Line_82 $$ String varname = va.getName()-->Line_83 $$ if (Constants.VAR_STDOUT.equals(varname))[ FD ]
Line_83 $$ if (Constants.VAR_STDOUT.equals(varname))-->Line_83 $$ if (Constants.VAR_STDOUT.equals(varname))[ CD ]
Line_82 $$ String varname = va.getName()-->Line_83 $$ if (Constants.VAR_STDOUT.equals(varname))[ FD ]
Line_84 $$ VarTypeEnum vartype = va.getType()-->Line_84 $$ VarTypeEnum vartype = va.getType()[ CD ]
Line_80 $$ for (VarAttributes va : attributesMap.values()) -->Line_84 $$ VarTypeEnum vartype = va.getType()[ FD ]
Line_47 $$ PrintStream as = null-->Line_91 $$ as.print(tab[i] + "    '" + varname + "'")[ FD ]
Line_51 $$ as = ps-->Line_91 $$ as.print(tab[i] + "    '" + varname + "'")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_91 $$ as.print(tab[i] + "    '" + varname + "'")[ FD ]
Line_79 $$ int counter = 0-->Line_92 $$ if (counter != attributesMap.size())[ FD ]
Line_92 $$ if (counter != attributesMap.size())-->Line_92 $$ as.println(",\\")[ CD ]
Line_47 $$ PrintStream as = null-->Line_92 $$ as.println(",\\")[ FD ]
Line_51 $$ as = ps-->Line_92 $$ as.println(",\\")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_92 $$ as.println(",\\")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_100 $$ as.println("]")[ CD ]
Line_47 $$ PrintStream as = null-->Line_100 $$ as.println("]")[ FD ]
Line_51 $$ as = ps-->Line_100 $$ as.println("]")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_100 $$ as.println("]")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_101 $$ as.println(tab[i] + "    vars=port0.getManyVars(arglist)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_101 $$ as.println(tab[i] + "    vars=port0.getManyVars(arglist)")[ FD ]
Line_51 $$ as = ps-->Line_101 $$ as.println(tab[i] + "    vars=port0.getManyVars(arglist)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_101 $$ as.println(tab[i] + "    vars=port0.getManyVars(arglist)")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_102 $$ as.println(tab[i] + "    namesp = vars ")[ CD ]
Line_47 $$ PrintStream as = null-->Line_102 $$ as.println(tab[i] + "    namesp = vars ")[ FD ]
Line_51 $$ as = ps-->Line_102 $$ as.println(tab[i] + "    namesp = vars ")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_102 $$ as.println(tab[i] + "    namesp = vars ")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_103 $$ as.println(tab[i] + "    namesp[ 'service' ] = service ")[ CD ]
Line_47 $$ PrintStream as = null-->Line_103 $$ as.println(tab[i] + "    namesp[ 'service' ] = service ")[ FD ]
Line_51 $$ as = ps-->Line_103 $$ as.println(tab[i] + "    namesp[ 'service' ] = service ")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_103 $$ as.println(tab[i] + "    namesp[ 'service' ] = service ")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_104 $$ as.println(tab[i] + "    return namesp")[ CD ]
Line_47 $$ PrintStream as = null-->Line_104 $$ as.println(tab[i] + "    return namesp")[ FD ]
Line_51 $$ as = ps-->Line_104 $$ as.println(tab[i] + "    return namesp")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_104 $$ as.println(tab[i] + "    return namesp")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_105 $$ as.println()[ CD ]
Line_47 $$ PrintStream as = null-->Line_105 $$ as.println()[ FD ]
Line_51 $$ as = ps-->Line_105 $$ as.println()[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_105 $$ as.println()[ FD ]
Line_16 $$ for (String taskName : taskNames) -->Line_107 $$ Task task = getService().getTask(taskName)[ FD ]
Line_108 $$ boolean background = task.isBackground()-->Line_108 $$ boolean background = task.isBackground()[ CD ]
Line_17 $$ Task task = getService().getTask(taskName)-->Line_108 $$ boolean background = task.isBackground()[ FD ]
Line_47 $$ PrintStream as = null-->Line_109 $$ as.println(tab[i] + "def task_" + taskName + "():")[ FD ]
Line_51 $$ as = ps-->Line_109 $$ as.println(tab[i] + "def task_" + taskName + "():")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_109 $$ as.println(tab[i] + "def task_" + taskName + "():")[ FD ]
Line_57 $$ int i = 0-->Line_111 $$ i++[ FD ]
Line_47 $$ PrintStream as = null-->Line_112 $$ as.println(tab[i] + "try :")[ FD ]
Line_51 $$ as = ps-->Line_112 $$ as.println(tab[i] + "try :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_112 $$ as.println(tab[i] + "try :")[ FD ]
Line_113 $$ if (background) -->Line_114 $$ as.println(tab[i] + "    # as ZSIWrapper is not task save," + " create a new one")[ CD ]
Line_47 $$ PrintStream as = null-->Line_114 $$ as.println(tab[i] + "    # as ZSIWrapper is not task save," + " create a new one")[ FD ]
Line_51 $$ as = ps-->Line_114 $$ as.println(tab[i] + "    # as ZSIWrapper is not task save," + " create a new one")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_114 $$ as.println(tab[i] + "    # as ZSIWrapper is not task save," + " create a new one")[ FD ]
Line_113 $$ if (background) -->Line_115 $$ as.println(tab[i] + "    port_task=ZSIWrapper(URL, agentID, " + "instanceID, instanceKey, timeout)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_115 $$ as.println(tab[i] + "    port_task=ZSIWrapper(URL, agentID, " + "instanceID, instanceKey, timeout)")[ FD ]
Line_51 $$ as = ps-->Line_115 $$ as.println(tab[i] + "    port_task=ZSIWrapper(URL, agentID, " + "instanceID, instanceKey, timeout)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_115 $$ as.println(tab[i] + "    port_task=ZSIWrapper(URL, agentID, " + "instanceID, instanceKey, timeout)")[ FD ]
Line_113 $$ if (background) -->Line_116 $$ as.println(tab[i] + "    service = Service(port_task)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_116 $$ as.println(tab[i] + "    service = Service(port_task)")[ FD ]
Line_51 $$ as = ps-->Line_116 $$ as.println(tab[i] + "    service = Service(port_task)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_116 $$ as.println(tab[i] + "    service = Service(port_task)")[ FD ]
Line_113 $$ if (background) -->Line_118 $$ as.println(tab[i] + "    # this is foreground, " + "use port0 from current task")[ CD ]
Line_47 $$ PrintStream as = null-->Line_118 $$ as.println(tab[i] + "    # this is foreground, " + "use port0 from current task")[ FD ]
Line_51 $$ as = ps-->Line_118 $$ as.println(tab[i] + "    # this is foreground, " + "use port0 from current task")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_118 $$ as.println(tab[i] + "    # this is foreground, " + "use port0 from current task")[ FD ]
Line_113 $$ if (background) -->Line_119 $$ as.println(tab[i] + "    service = Service(port0)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_119 $$ as.println(tab[i] + "    service = Service(port0)")[ FD ]
Line_51 $$ as = ps-->Line_119 $$ as.println(tab[i] + "    service = Service(port0)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_119 $$ as.println(tab[i] + "    service = Service(port0)")[ FD ]
Line_47 $$ PrintStream as = null-->Line_121 $$ as.println(tab[i] + "    globals = create_namespace(service)")[ FD ]
Line_51 $$ as = ps-->Line_121 $$ as.println(tab[i] + "    globals = create_namespace(service)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_121 $$ as.println(tab[i] + "    globals = create_namespace(service)")[ FD ]
Line_47 $$ PrintStream as = null-->Line_122 $$ as.println(tab[i] + "    locals = [ FD ]
Line_51 $$ as = ps-->Line_122 $$ as.println(tab[i] + "    locals = [ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_122 $$ as.println(tab[i] + "    locals = [ FD ]
Line_47 $$ PrintStream as = null-->Line_123 $$ as.println(tab[i] + "    execfile('" + task.getFile() + "', globals, locals )")[ FD ]
Line_51 $$ as = ps-->Line_123 $$ as.println(tab[i] + "    execfile('" + task.getFile() + "', globals, locals )")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_123 $$ as.println(tab[i] + "    execfile('" + task.getFile() + "', globals, locals )")[ FD ]
Line_17 $$ Task task = getService().getTask(taskName)-->Line_123 $$ as.println(tab[i] + "    execfile('" + task.getFile() + "', globals, locals )")[ FD ]
Line_47 $$ PrintStream as = null-->Line_124 $$ as.println(tab[i] + "except :")[ FD ]
Line_51 $$ as = ps-->Line_124 $$ as.println(tab[i] + "except :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_124 $$ as.println(tab[i] + "except :")[ FD ]
Line_47 $$ PrintStream as = null-->Line_125 $$ as.println(tab[i] + "    port0.setTaskStatus('" + taskName + "', " + Status.FAILED.ordinal() + " )")[ FD ]
Line_51 $$ as = ps-->Line_125 $$ as.println(tab[i] + "    port0.setTaskStatus('" + taskName + "', " + Status.FAILED.ordinal() + " )")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_125 $$ as.println(tab[i] + "    port0.setTaskStatus('" + taskName + "', " + Status.FAILED.ordinal() + " )")[ FD ]
Line_47 $$ PrintStream as = null-->Line_126 $$ as.println(tab[i] + "else :")[ FD ]
Line_51 $$ as = ps-->Line_126 $$ as.println(tab[i] + "else :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_126 $$ as.println(tab[i] + "else :")[ FD ]
Line_47 $$ PrintStream as = null-->Line_127 $$ as.println(tab[i] + "    if kill_flag :")[ FD ]
Line_51 $$ as = ps-->Line_127 $$ as.println(tab[i] + "    if kill_flag :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_127 $$ as.println(tab[i] + "    if kill_flag :")[ FD ]
Line_47 $$ PrintStream as = null-->Line_128 $$ as.println(tab[i] + "        task_exit_status = " + Status.FAILED.ordinal())[ FD ]
Line_51 $$ as = ps-->Line_128 $$ as.println(tab[i] + "        task_exit_status = " + Status.FAILED.ordinal())[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_128 $$ as.println(tab[i] + "        task_exit_status = " + Status.FAILED.ordinal())[ FD ]
Line_47 $$ PrintStream as = null-->Line_129 $$ as.println(tab[i] + "    elif stop_flag :")[ FD ]
Line_51 $$ as = ps-->Line_129 $$ as.println(tab[i] + "    elif stop_flag :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_129 $$ as.println(tab[i] + "    elif stop_flag :")[ FD ]
Line_47 $$ PrintStream as = null-->Line_130 $$ as.println(tab[i] + "        task_exit_status = " + Status.TERMINATED.ordinal())[ FD ]
Line_51 $$ as = ps-->Line_130 $$ as.println(tab[i] + "        task_exit_status = " + Status.TERMINATED.ordinal())[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_130 $$ as.println(tab[i] + "        task_exit_status = " + Status.TERMINATED.ordinal())[ FD ]
Line_47 $$ PrintStream as = null-->Line_131 $$ as.println(tab[i] + "    else :")[ FD ]
Line_51 $$ as = ps-->Line_131 $$ as.println(tab[i] + "    else :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_131 $$ as.println(tab[i] + "    else :")[ FD ]
Line_47 $$ PrintStream as = null-->Line_132 $$ as.println(tab[i] + "        task_exit_status = " + Status.FINISHED.ordinal())[ FD ]
Line_51 $$ as = ps-->Line_132 $$ as.println(tab[i] + "        task_exit_status = " + Status.FINISHED.ordinal())[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_132 $$ as.println(tab[i] + "        task_exit_status = " + Status.FINISHED.ordinal())[ FD ]
Line_47 $$ PrintStream as = null-->Line_133 $$ as.println(tab[i] + "    port0.setTaskStatus('" + taskName + "', task_exit_status )")[ FD ]
Line_51 $$ as = ps-->Line_133 $$ as.println(tab[i] + "    port0.setTaskStatus('" + taskName + "', task_exit_status )")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_133 $$ as.println(tab[i] + "    port0.setTaskStatus('" + taskName + "', task_exit_status )")[ FD ]
Line_47 $$ PrintStream as = null-->Line_134 $$ as.println()[ FD ]
Line_51 $$ as = ps-->Line_134 $$ as.println()[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_134 $$ as.println()[ FD ]
Line_57 $$ int i = 0-->Line_135 $$ i--[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_138 $$ as.println(tab[i] + "try:")[ CD ]
Line_47 $$ PrintStream as = null-->Line_138 $$ as.println(tab[i] + "try:")[ FD ]
Line_51 $$ as = ps-->Line_138 $$ as.println(tab[i] + "try:")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_138 $$ as.println(tab[i] + "try:")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_139 $$ i++[ CD ]
Line_57 $$ int i = 0-->Line_139 $$ i++[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_140 $$ as.println(tab[i] + "tasklist = []")[ CD ]
Line_47 $$ PrintStream as = null-->Line_140 $$ as.println(tab[i] + "tasklist = []")[ FD ]
Line_51 $$ as = ps-->Line_140 $$ as.println(tab[i] + "tasklist = []")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_140 $$ as.println(tab[i] + "tasklist = []")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_141 $$ as.println(tab[i] + "action=None")[ CD ]
Line_47 $$ PrintStream as = null-->Line_141 $$ as.println(tab[i] + "action=None")[ FD ]
Line_51 $$ as = ps-->Line_141 $$ as.println(tab[i] + "action=None")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_141 $$ as.println(tab[i] + "action=None")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_142 $$ as.println(tab[i] + "while action != '" + Agent.STOP + "' and action != '" + Agent.KILL + "' and action != '" + Agent.FINISH + "' :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_142 $$ as.println(tab[i] + "while action != '" + Agent.STOP + "' and action != '" + Agent.KILL + "' and action != '" + Agent.FINISH + "' :")[ FD ]
Line_51 $$ as = ps-->Line_142 $$ as.println(tab[i] + "while action != '" + Agent.STOP + "' and action != '" + Agent.KILL + "' and action != '" + Agent.FINISH + "' :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_142 $$ as.println(tab[i] + "while action != '" + Agent.STOP + "' and action != '" + Agent.KILL + "' and action != '" + Agent.FINISH + "' :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_144 $$ i++[ CD ]
Line_57 $$ int i = 0-->Line_144 $$ i++[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_145 $$ as.println(tab[i] + "# print 'ACTION=', action")[ CD ]
Line_47 $$ PrintStream as = null-->Line_145 $$ as.println(tab[i] + "# print 'ACTION=', action")[ FD ]
Line_51 $$ as = ps-->Line_145 $$ as.println(tab[i] + "# print 'ACTION=', action")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_145 $$ as.println(tab[i] + "# print 'ACTION=', action")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_146 $$ as.println(tab[i] + "action = port0.getAction()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_146 $$ as.println(tab[i] + "action = port0.getAction()")[ FD ]
Line_51 $$ as = ps-->Line_146 $$ as.println(tab[i] + "action = port0.getAction()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_146 $$ as.println(tab[i] + "action = port0.getAction()")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_147 $$ as.println(tab[i] + "")[ CD ]
Line_47 $$ PrintStream as = null-->Line_147 $$ as.println(tab[i] + "")[ FD ]
Line_51 $$ as = ps-->Line_147 $$ as.println(tab[i] + "")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_147 $$ as.println(tab[i] + "")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_148 $$ as.println(tab[i] + "# cleanup tasklist (only to save memory)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_148 $$ as.println(tab[i] + "# cleanup tasklist (only to save memory)")[ FD ]
Line_51 $$ as = ps-->Line_148 $$ as.println(tab[i] + "# cleanup tasklist (only to save memory)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_148 $$ as.println(tab[i] + "# cleanup tasklist (only to save memory)")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_149 $$ as.println(tab[i] + "# In two cycles, don't change list during iter.")[ CD ]
Line_47 $$ PrintStream as = null-->Line_149 $$ as.println(tab[i] + "# In two cycles, don't change list during iter.")[ FD ]
Line_51 $$ as = ps-->Line_149 $$ as.println(tab[i] + "# In two cycles, don't change list during iter.")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_149 $$ as.println(tab[i] + "# In two cycles, don't change list during iter.")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_150 $$ as.println(tab[i] + "to_be_removed = []")[ CD ]
Line_47 $$ PrintStream as = null-->Line_150 $$ as.println(tab[i] + "to_be_removed = []")[ FD ]
Line_51 $$ as = ps-->Line_150 $$ as.println(tab[i] + "to_be_removed = []")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_150 $$ as.println(tab[i] + "to_be_removed = []")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_151 $$ as.println(tab[i] + "for tr2 in tasklist:")[ CD ]
Line_47 $$ PrintStream as = null-->Line_151 $$ as.println(tab[i] + "for tr2 in tasklist:")[ FD ]
Line_51 $$ as = ps-->Line_151 $$ as.println(tab[i] + "for tr2 in tasklist:")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_151 $$ as.println(tab[i] + "for tr2 in tasklist:")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_152 $$ as.println(tab[i] + "    if (not tr2.isAlive()):")[ CD ]
Line_47 $$ PrintStream as = null-->Line_152 $$ as.println(tab[i] + "    if (not tr2.isAlive()):")[ FD ]
Line_51 $$ as = ps-->Line_152 $$ as.println(tab[i] + "    if (not tr2.isAlive()):")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_152 $$ as.println(tab[i] + "    if (not tr2.isAlive()):")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_153 $$ as.println(tab[i] + "        to_be_removed.append(tr2)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_153 $$ as.println(tab[i] + "        to_be_removed.append(tr2)")[ FD ]
Line_51 $$ as = ps-->Line_153 $$ as.println(tab[i] + "        to_be_removed.append(tr2)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_153 $$ as.println(tab[i] + "        to_be_removed.append(tr2)")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_154 $$ as.println(tab[i] + "for tr3 in to_be_removed:")[ CD ]
Line_47 $$ PrintStream as = null-->Line_154 $$ as.println(tab[i] + "for tr3 in to_be_removed:")[ FD ]
Line_51 $$ as = ps-->Line_154 $$ as.println(tab[i] + "for tr3 in to_be_removed:")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_154 $$ as.println(tab[i] + "for tr3 in to_be_removed:")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_155 $$ as.println(tab[i] + "    # print 'old task removed: ',tr3.getName()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_155 $$ as.println(tab[i] + "    # print 'old task removed: ',tr3.getName()")[ FD ]
Line_51 $$ as = ps-->Line_155 $$ as.println(tab[i] + "    # print 'old task removed: ',tr3.getName()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_155 $$ as.println(tab[i] + "    # print 'old task removed: ',tr3.getName()")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_156 $$ as.println(tab[i] + "    tasklist.remove(tr3)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_156 $$ as.println(tab[i] + "    tasklist.remove(tr3)")[ FD ]
Line_51 $$ as = ps-->Line_156 $$ as.println(tab[i] + "    tasklist.remove(tr3)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_156 $$ as.println(tab[i] + "    tasklist.remove(tr3)")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_157 $$ as.println(tab[i] + "")[ CD ]
Line_47 $$ PrintStream as = null-->Line_157 $$ as.println(tab[i] + "")[ FD ]
Line_51 $$ as = ps-->Line_157 $$ as.println(tab[i] + "")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_157 $$ as.println(tab[i] + "")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_158 $$ as.println(tab[i] + "if action == None :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_158 $$ as.println(tab[i] + "if action == None :")[ FD ]
Line_51 $$ as = ps-->Line_158 $$ as.println(tab[i] + "if action == None :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_158 $$ as.println(tab[i] + "if action == None :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_159 $$ as.println(tab[i] + "    # print 'processing None'")[ CD ]
Line_47 $$ PrintStream as = null-->Line_159 $$ as.println(tab[i] + "    # print 'processing None'")[ FD ]
Line_51 $$ as = ps-->Line_159 $$ as.println(tab[i] + "    # print 'processing None'")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_159 $$ as.println(tab[i] + "    # print 'processing None'")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_160 $$ as.println(tab[i] + "    None")[ CD ]
Line_47 $$ PrintStream as = null-->Line_160 $$ as.println(tab[i] + "    None")[ FD ]
Line_51 $$ as = ps-->Line_160 $$ as.println(tab[i] + "    None")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_160 $$ as.println(tab[i] + "    None")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_161 $$ as.println(tab[i] + "if action == '" + Agent.FINISH + "' :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_161 $$ as.println(tab[i] + "if action == '" + Agent.FINISH + "' :")[ FD ]
Line_51 $$ as = ps-->Line_161 $$ as.println(tab[i] + "if action == '" + Agent.FINISH + "' :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_161 $$ as.println(tab[i] + "if action == '" + Agent.FINISH + "' :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_162 $$ as.println(tab[i] + "    # print 'processing FINISH'")[ CD ]
Line_47 $$ PrintStream as = null-->Line_162 $$ as.println(tab[i] + "    # print 'processing FINISH'")[ FD ]
Line_51 $$ as = ps-->Line_162 $$ as.println(tab[i] + "    # print 'processing FINISH'")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_162 $$ as.println(tab[i] + "    # print 'processing FINISH'")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_163 $$ as.println(tab[i] + "    None")[ CD ]
Line_47 $$ PrintStream as = null-->Line_163 $$ as.println(tab[i] + "    None")[ FD ]
Line_51 $$ as = ps-->Line_163 $$ as.println(tab[i] + "    None")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_163 $$ as.println(tab[i] + "    None")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_164 $$ as.println(tab[i] + "elif action == '" + Agent.STOP + "' :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_164 $$ as.println(tab[i] + "elif action == '" + Agent.STOP + "' :")[ FD ]
Line_51 $$ as = ps-->Line_164 $$ as.println(tab[i] + "elif action == '" + Agent.STOP + "' :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_164 $$ as.println(tab[i] + "elif action == '" + Agent.STOP + "' :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_165 $$ as.println(tab[i] + "    stop_flag=1")[ CD ]
Line_47 $$ PrintStream as = null-->Line_165 $$ as.println(tab[i] + "    stop_flag=1")[ FD ]
Line_51 $$ as = ps-->Line_165 $$ as.println(tab[i] + "    stop_flag=1")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_165 $$ as.println(tab[i] + "    stop_flag=1")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_166 $$ as.println(tab[i] + "    # print 'processing STOP'")[ CD ]
Line_47 $$ PrintStream as = null-->Line_166 $$ as.println(tab[i] + "    # print 'processing STOP'")[ FD ]
Line_51 $$ as = ps-->Line_166 $$ as.println(tab[i] + "    # print 'processing STOP'")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_166 $$ as.println(tab[i] + "    # print 'processing STOP'")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_167 $$ String onStop = agent.onStop[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_168 $$ if (onStop != null) [ CD ]
Line_167 $$ String onStop = agent.onStop-->Line_168 $$ if (onStop != null) [ FD ]
Line_168 $$ if (onStop != null) -->Line_169 $$ String function = "task_" + onStop[ CD ]
Line_168 $$ if (onStop != null) -->Line_170 $$ as.println(tab[i] + "    " + function + "()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_170 $$ as.println(tab[i] + "    " + function + "()")[ FD ]
Line_51 $$ as = ps-->Line_170 $$ as.println(tab[i] + "    " + function + "()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_170 $$ as.println(tab[i] + "    " + function + "()")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_172 $$ as.println(tab[i] + "")[ CD ]
Line_47 $$ PrintStream as = null-->Line_172 $$ as.println(tab[i] + "")[ FD ]
Line_51 $$ as = ps-->Line_172 $$ as.println(tab[i] + "")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_172 $$ as.println(tab[i] + "")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_173 $$ as.println(tab[i] + "elif action == '" + Agent.KILL + "' :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_173 $$ as.println(tab[i] + "elif action == '" + Agent.KILL + "' :")[ FD ]
Line_51 $$ as = ps-->Line_173 $$ as.println(tab[i] + "elif action == '" + Agent.KILL + "' :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_173 $$ as.println(tab[i] + "elif action == '" + Agent.KILL + "' :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_174 $$ as.println(tab[i] + "    kill_flag=1")[ CD ]
Line_47 $$ PrintStream as = null-->Line_174 $$ as.println(tab[i] + "    kill_flag=1")[ FD ]
Line_51 $$ as = ps-->Line_174 $$ as.println(tab[i] + "    kill_flag=1")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_174 $$ as.println(tab[i] + "    kill_flag=1")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_175 $$ as.println(tab[i] + "    # print 'processing KILL'")[ CD ]
Line_47 $$ PrintStream as = null-->Line_175 $$ as.println(tab[i] + "    # print 'processing KILL'")[ FD ]
Line_51 $$ as = ps-->Line_175 $$ as.println(tab[i] + "    # print 'processing KILL'")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_175 $$ as.println(tab[i] + "    # print 'processing KILL'")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_176 $$ String onKill = agent.onKill[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_177 $$ if (onKill != null) [ CD ]
Line_176 $$ String onKill = agent.onKill-->Line_177 $$ if (onKill != null) [ FD ]
Line_177 $$ if (onKill != null) -->Line_179 $$ as.println(tab[i] + "    " + function + "()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_179 $$ as.println(tab[i] + "    " + function + "()")[ FD ]
Line_51 $$ as = ps-->Line_179 $$ as.println(tab[i] + "    " + function + "()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_179 $$ as.println(tab[i] + "    " + function + "()")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_181 $$ as.println(tab[i] + "    # This would be the place " + "to kill external programs")[ CD ]
Line_47 $$ PrintStream as = null-->Line_181 $$ as.println(tab[i] + "    # This would be the place " + "to kill external programs")[ FD ]
Line_51 $$ as = ps-->Line_181 $$ as.println(tab[i] + "    # This would be the place " + "to kill external programs")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_181 $$ as.println(tab[i] + "    # This would be the place " + "to kill external programs")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_182 $$ as.println(tab[i] + "    port0.setAgentStatus(" + Status.FAILED.ordinal() + ")")[ CD ]
Line_47 $$ PrintStream as = null-->Line_182 $$ as.println(tab[i] + "    port0.setAgentStatus(" + Status.FAILED.ordinal() + ")")[ FD ]
Line_51 $$ as = ps-->Line_182 $$ as.println(tab[i] + "    port0.setAgentStatus(" + Status.FAILED.ordinal() + ")")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_182 $$ as.println(tab[i] + "    port0.setAgentStatus(" + Status.FAILED.ordinal() + ")")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_183 $$ as.println(tab[i] + "    # exit without waiting for bg threads")[ CD ]
Line_47 $$ PrintStream as = null-->Line_183 $$ as.println(tab[i] + "    # exit without waiting for bg threads")[ FD ]
Line_51 $$ as = ps-->Line_183 $$ as.println(tab[i] + "    # exit without waiting for bg threads")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_183 $$ as.println(tab[i] + "    # exit without waiting for bg threads")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_184 $$ as.println(tab[i] + "    exit(13)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_184 $$ as.println(tab[i] + "    exit(13)")[ FD ]
Line_51 $$ as = ps-->Line_184 $$ as.println(tab[i] + "    exit(13)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_184 $$ as.println(tab[i] + "    exit(13)")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_185 $$ as.println(tab[i] + "")[ CD ]
Line_47 $$ PrintStream as = null-->Line_185 $$ as.println(tab[i] + "")[ FD ]
Line_51 $$ as = ps-->Line_185 $$ as.println(tab[i] + "")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_185 $$ as.println(tab[i] + "")[ FD ]
Line_16 $$ for (String taskName : taskNames) -->Line_187 $$ Task task = getService().getTask(taskName)[ FD ]
Line_17 $$ Task task = getService().getTask(taskName)-->Line_188 $$ boolean background = task.isBackground()[ FD ]
Line_47 $$ PrintStream as = null-->Line_189 $$ as.println(tab[i] + "elif action == '" + Agent.TASK + taskName + "':")[ FD ]
Line_51 $$ as = ps-->Line_189 $$ as.println(tab[i] + "elif action == '" + Agent.TASK + taskName + "':")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_189 $$ as.println(tab[i] + "elif action == '" + Agent.TASK + taskName + "':")[ FD ]
Line_191 $$ if (background) -->Line_192 $$ as.println(tab[i] + "    # create, register and start task")[ CD ]
Line_47 $$ PrintStream as = null-->Line_192 $$ as.println(tab[i] + "    # create, register and start task")[ FD ]
Line_51 $$ as = ps-->Line_192 $$ as.println(tab[i] + "    # create, register and start task")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_192 $$ as.println(tab[i] + "    # create, register and start task")[ FD ]
Line_191 $$ if (background) -->Line_193 $$ as.println(tab[i] + "    t = threading.Thread(target=" + function + ", name='" + function + "')")[ CD ]
Line_47 $$ PrintStream as = null-->Line_193 $$ as.println(tab[i] + "    t = threading.Thread(target=" + function + ", name='" + function + "')")[ FD ]
Line_51 $$ as = ps-->Line_193 $$ as.println(tab[i] + "    t = threading.Thread(target=" + function + ", name='" + function + "')")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_193 $$ as.println(tab[i] + "    t = threading.Thread(target=" + function + ", name='" + function + "')")[ FD ]
Line_191 $$ if (background) -->Line_194 $$ as.println(tab[i] + "    tasklist.append(t)")[ CD ]
Line_47 $$ PrintStream as = null-->Line_194 $$ as.println(tab[i] + "    tasklist.append(t)")[ FD ]
Line_51 $$ as = ps-->Line_194 $$ as.println(tab[i] + "    tasklist.append(t)")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_194 $$ as.println(tab[i] + "    tasklist.append(t)")[ FD ]
Line_191 $$ if (background) -->Line_195 $$ as.println(tab[i] + "    t.start()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_195 $$ as.println(tab[i] + "    t.start()")[ FD ]
Line_51 $$ as = ps-->Line_195 $$ as.println(tab[i] + "    t.start()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_195 $$ as.println(tab[i] + "    t.start()")[ FD ]
Line_191 $$ if (background) -->Line_197 $$ as.println(tab[i] + "    " + function + "()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_197 $$ as.println(tab[i] + "    " + function + "()")[ FD ]
Line_51 $$ as = ps-->Line_197 $$ as.println(tab[i] + "    " + function + "()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_197 $$ as.println(tab[i] + "    " + function + "()")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_200 $$ as.println(tab[i] + "else :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_200 $$ as.println(tab[i] + "else :")[ FD ]
Line_51 $$ as = ps-->Line_200 $$ as.println(tab[i] + "else :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_200 $$ as.println(tab[i] + "else :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_201 $$ as.println(tab[i] + "    print 'undefined case in agent script iov0j23fds, " + "action=', action")[ CD ]
Line_47 $$ PrintStream as = null-->Line_201 $$ as.println(tab[i] + "    print 'undefined case in agent script iov0j23fds, " + "action=', action")[ FD ]
Line_51 $$ as = ps-->Line_201 $$ as.println(tab[i] + "    print 'undefined case in agent script iov0j23fds, " + "action=', action")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_201 $$ as.println(tab[i] + "    print 'undefined case in agent script iov0j23fds, " + "action=', action")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_202 $$ i--[ CD ]
Line_57 $$ int i = 0-->Line_202 $$ i--[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_204 $$ as.println()[ CD ]
Line_47 $$ PrintStream as = null-->Line_204 $$ as.println()[ FD ]
Line_51 $$ as = ps-->Line_204 $$ as.println()[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_204 $$ as.println()[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_205 $$ as.println(tab[i] + "# wait for running background tasks")[ CD ]
Line_47 $$ PrintStream as = null-->Line_205 $$ as.println(tab[i] + "# wait for running background tasks")[ FD ]
Line_51 $$ as = ps-->Line_205 $$ as.println(tab[i] + "# wait for running background tasks")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_205 $$ as.println(tab[i] + "# wait for running background tasks")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_206 $$ as.println(tab[i] + "# print 'remaining threads (inclides demonic ones!):'" + ", threading.activeCount()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_206 $$ as.println(tab[i] + "# print 'remaining threads (inclides demonic ones!):'" + ", threading.activeCount()")[ FD ]
Line_51 $$ as = ps-->Line_206 $$ as.println(tab[i] + "# print 'remaining threads (inclides demonic ones!):'" + ", threading.activeCount()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_206 $$ as.println(tab[i] + "# print 'remaining threads (inclides demonic ones!):'" + ", threading.activeCount()")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_207 $$ as.println(tab[i] + "# for tr in threading.enumerate():")[ CD ]
Line_47 $$ PrintStream as = null-->Line_207 $$ as.println(tab[i] + "# for tr in threading.enumerate():")[ FD ]
Line_51 $$ as = ps-->Line_207 $$ as.println(tab[i] + "# for tr in threading.enumerate():")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_207 $$ as.println(tab[i] + "# for tr in threading.enumerate():")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_208 $$ as.println(tab[i] + "#    print 'remaining thread: '," + " tr.getName()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_208 $$ as.println(tab[i] + "#    print 'remaining thread: '," + " tr.getName()")[ FD ]
Line_51 $$ as = ps-->Line_208 $$ as.println(tab[i] + "#    print 'remaining thread: '," + " tr.getName()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_208 $$ as.println(tab[i] + "#    print 'remaining thread: '," + " tr.getName()")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_209 $$ as.println(tab[i] + "for tr2 in tasklist:")[ CD ]
Line_47 $$ PrintStream as = null-->Line_209 $$ as.println(tab[i] + "for tr2 in tasklist:")[ FD ]
Line_51 $$ as = ps-->Line_209 $$ as.println(tab[i] + "for tr2 in tasklist:")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_209 $$ as.println(tab[i] + "for tr2 in tasklist:")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_210 $$ as.println(tab[i] + "    # print 'joining with ',tr2.getName()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_210 $$ as.println(tab[i] + "    # print 'joining with ',tr2.getName()")[ FD ]
Line_51 $$ as = ps-->Line_210 $$ as.println(tab[i] + "    # print 'joining with ',tr2.getName()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_210 $$ as.println(tab[i] + "    # print 'joining with ',tr2.getName()")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_211 $$ as.println(tab[i] + "    tr2.join()")[ CD ]
Line_47 $$ PrintStream as = null-->Line_211 $$ as.println(tab[i] + "    tr2.join()")[ FD ]
Line_51 $$ as = ps-->Line_211 $$ as.println(tab[i] + "    tr2.join()")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_211 $$ as.println(tab[i] + "    tr2.join()")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_212 $$ i--[ CD ]
Line_57 $$ int i = 0-->Line_212 $$ i--[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_213 $$ as.println(tab[i] + "# Set agent status")[ CD ]
Line_47 $$ PrintStream as = null-->Line_213 $$ as.println(tab[i] + "# Set agent status")[ FD ]
Line_51 $$ as = ps-->Line_213 $$ as.println(tab[i] + "# Set agent status")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_213 $$ as.println(tab[i] + "# Set agent status")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_214 $$ as.println(tab[i] + "except :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_214 $$ as.println(tab[i] + "except :")[ FD ]
Line_51 $$ as = ps-->Line_214 $$ as.println(tab[i] + "except :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_214 $$ as.println(tab[i] + "except :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_215 $$ as.println(tab[i] + "    port0.setAgentStatus(" + Status.FAILED.ordinal() + ")")[ CD ]
Line_47 $$ PrintStream as = null-->Line_215 $$ as.println(tab[i] + "    port0.setAgentStatus(" + Status.FAILED.ordinal() + ")")[ FD ]
Line_51 $$ as = ps-->Line_215 $$ as.println(tab[i] + "    port0.setAgentStatus(" + Status.FAILED.ordinal() + ")")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_215 $$ as.println(tab[i] + "    port0.setAgentStatus(" + Status.FAILED.ordinal() + ")")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_216 $$ as.println(tab[i] + "else :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_216 $$ as.println(tab[i] + "else :")[ FD ]
Line_51 $$ as = ps-->Line_216 $$ as.println(tab[i] + "else :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_216 $$ as.println(tab[i] + "else :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_217 $$ as.println(tab[i] + "    if kill_flag :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_217 $$ as.println(tab[i] + "    if kill_flag :")[ FD ]
Line_51 $$ as = ps-->Line_217 $$ as.println(tab[i] + "    if kill_flag :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_217 $$ as.println(tab[i] + "    if kill_flag :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_218 $$ as.println(tab[i] + "        agent_exit_status = " + Status.FAILED.ordinal())[ CD ]
Line_47 $$ PrintStream as = null-->Line_218 $$ as.println(tab[i] + "        agent_exit_status = " + Status.FAILED.ordinal())[ FD ]
Line_51 $$ as = ps-->Line_218 $$ as.println(tab[i] + "        agent_exit_status = " + Status.FAILED.ordinal())[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_218 $$ as.println(tab[i] + "        agent_exit_status = " + Status.FAILED.ordinal())[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_219 $$ as.println(tab[i] + "    elif stop_flag :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_219 $$ as.println(tab[i] + "    elif stop_flag :")[ FD ]
Line_51 $$ as = ps-->Line_219 $$ as.println(tab[i] + "    elif stop_flag :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_219 $$ as.println(tab[i] + "    elif stop_flag :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_220 $$ as.println(tab[i] + "        agent_exit_status = " + Status.TERMINATED.ordinal())[ CD ]
Line_47 $$ PrintStream as = null-->Line_220 $$ as.println(tab[i] + "        agent_exit_status = " + Status.TERMINATED.ordinal())[ FD ]
Line_51 $$ as = ps-->Line_220 $$ as.println(tab[i] + "        agent_exit_status = " + Status.TERMINATED.ordinal())[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_220 $$ as.println(tab[i] + "        agent_exit_status = " + Status.TERMINATED.ordinal())[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_221 $$ as.println(tab[i] + "    else :")[ CD ]
Line_47 $$ PrintStream as = null-->Line_221 $$ as.println(tab[i] + "    else :")[ FD ]
Line_51 $$ as = ps-->Line_221 $$ as.println(tab[i] + "    else :")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_221 $$ as.println(tab[i] + "    else :")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_222 $$ as.println(tab[i] + "        agent_exit_status = " + Status.FINISHED.ordinal())[ CD ]
Line_47 $$ PrintStream as = null-->Line_222 $$ as.println(tab[i] + "        agent_exit_status = " + Status.FINISHED.ordinal())[ FD ]
Line_51 $$ as = ps-->Line_222 $$ as.println(tab[i] + "        agent_exit_status = " + Status.FINISHED.ordinal())[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_222 $$ as.println(tab[i] + "        agent_exit_status = " + Status.FINISHED.ordinal())[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_223 $$ as.println(tab[i] + "    port0.setAgentStatus( agent_exit_status )")[ CD ]
Line_47 $$ PrintStream as = null-->Line_223 $$ as.println(tab[i] + "    port0.setAgentStatus( agent_exit_status )")[ FD ]
Line_51 $$ as = ps-->Line_223 $$ as.println(tab[i] + "    port0.setAgentStatus( agent_exit_status )")[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_223 $$ as.println(tab[i] + "    port0.setAgentStatus( agent_exit_status )")[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_224 $$ if (embedScripts)[ CD ]
Line_224 $$ if (embedScripts)-->Line_224 $$ ps.println("EOF_" + agentScript)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_224 $$ ps.println("EOF_" + agentScript)[ FD ]
Line_224 $$ if (embedScripts)-->Line_224 $$ as.close()[ CD ]
Line_47 $$ PrintStream as = null-->Line_224 $$ as.close()[ FD ]
Line_51 $$ as = ps-->Line_224 $$ as.close()[ FD ]
Line_54 $$ as = new PrintStream(agentScriptFile)-->Line_224 $$ as.close()[ FD ]
Line_3 $$ Agent agent = service.getAgent(agentName)-->Line_226 $$ for (String agentFileName : agent.getFilesSet()) [ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_227 $$ ps.println()[ FD ]
Line_229 $$ File directory = agentRelFile.getParentFile()-->Line_229 $$ File directory = agentRelFile.getParentFile()[ CD ]
Line_228 $$ File agentRelFile = new File(agentFileName)-->Line_229 $$ File directory = agentRelFile.getParentFile()[ FD ]
Line_229 $$ File directory = agentRelFile.getParentFile()-->Line_230 $$ if (directory != null) [ FD ]
Line_230 $$ if (directory != null) -->Line_231 $$ ps.println("mkdir -p " + directory.getPath())[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_231 $$ ps.println("mkdir -p " + directory.getPath())[ FD ]
Line_229 $$ File directory = agentRelFile.getParentFile()-->Line_231 $$ ps.println("mkdir -p " + directory.getPath())[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_233 $$ ps.println("cat > " + agentFileName + " << " + ii + "EOF_" + agentFileName + ii)[ FD ]
Line_235 $$ byte bytes[] = FileUtils.readFileToByteArray(file)-->Line_235 $$ byte bytes[] = FileUtils.readFileToByteArray(file)[ CD ]
Line_234 $$ File file = new File(scriptDir, agentFileName)-->Line_235 $$ byte bytes[] = FileUtils.readFileToByteArray(file)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_236 $$ ps.write(bytes)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_237 $$ ps.println()[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_238 $$ ps.println("EOF_" + agentFileName)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_240 $$ if (embedScripts) [ CD ]
Line_240 $$ if (embedScripts) -->Line_241 $$ ps.println("SKIP=`awk '/^__ARCHIVE_FOLLOWS__/ [ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_241 $$ ps.println("SKIP=`awk '/^__ARCHIVE_FOLLOWS__/ [ FD ]
Line_240 $$ if (embedScripts) -->Line_242 $$ ps.println("tail -n +$SKIP $0 | gzip -dc | tar x ")[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_242 $$ ps.println("tail -n +$SKIP $0 | gzip -dc | tar x ")[ FD ]
Line_240 $$ if (embedScripts) -->Line_243 $$ ps.println("python -u " + agentScript)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_243 $$ ps.println("python -u " + agentScript)[ FD ]
Line_240 $$ if (embedScripts) -->Line_244 $$ ps.println("exit 0")[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_244 $$ ps.println("exit 0")[ FD ]
Line_240 $$ if (embedScripts) -->Line_245 $$ ps.println("__ARCHIVE_FOLLOWS__")[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_245 $$ ps.println("__ARCHIVE_FOLLOWS__")[ FD ]
Line_240 $$ if (embedScripts) -->Line_246 $$ java.io.InputStream istream = this.getClass().getClassLoader().getResourceAsStream("sc/fgrid/agent.tar.gz")[ CD ]
Line_246 $$ java.io.InputStream istream = this.getClass().getClassLoader().getResourceAsStream("sc/fgrid/agent.tar.gz")-->Line_246 $$ java.io.InputStream istream = this.getClass().getClassLoader().getResourceAsStream("sc/fgrid/agent.tar.gz")[ CD ]
Line_240 $$ if (embedScripts) -->Line_247 $$ IOUtils.copy(istream, ps)[ CD ]
Line_246 $$ java.io.InputStream istream = this.getClass().getClassLoader().getResourceAsStream("sc/fgrid/agent.tar.gz")-->Line_247 $$ IOUtils.copy(istream, ps)[ FD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_247 $$ IOUtils.copy(istream, ps)[ FD ]
Line_240 $$ if (embedScripts) -->Line_249 $$ String pypath = engine.getAgentPythonPath()[ CD ]
Line_249 $$ String pypath = engine.getAgentPythonPath()-->Line_249 $$ String pypath = engine.getAgentPythonPath()[ CD ]
Line_240 $$ if (embedScripts) -->Line_250 $$ ps.println("export PYTHONPATH=" + ii + pypath + ii)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_250 $$ ps.println("export PYTHONPATH=" + ii + pypath + ii)[ FD ]
Line_240 $$ if (embedScripts) -->Line_251 $$ ps.println("python -u " + agentScript)[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_251 $$ ps.println("python -u " + agentScript)[ FD ]
Line_240 $$ if (embedScripts) -->Line_252 $$ ps.println("exit 0")[ CD ]
Line_2 $$ void createAgentProgram(PrintStream ps, String agentName, String agentID) throws IOException, ConfigException -->Line_252 $$ ps.println("exit 0")[ FD ]
