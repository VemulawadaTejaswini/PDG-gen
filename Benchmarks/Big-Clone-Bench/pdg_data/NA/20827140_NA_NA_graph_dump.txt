Line_0 $$ Entry-->Line_1 $$ public class dummy [ CD ]
Line_1 $$ public class dummy -->Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception [ CD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_3 $$ DBConnectionManager dbm = null[ CD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_4 $$ Connection conn = null[ CD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_5 $$ PreparedStatement stmt = null[ CD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_6 $$ Chunk ret = null[ CD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_7 $$ String SQL = "UPDATE CHUNK SET SENT=? WHERE FILEHASH=? AND STARTOFF=? AND LENGTH=?"[ CD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_8 $$ log.debug("update chunk last sent for chunk " + c.getHash() + " startoff " + c.getStartOffset())[ CD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_8 $$ log.debug("update chunk last sent for chunk " + c.getHash() + " startoff " + c.getStartOffset())[ FD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_8 $$ log.debug("update chunk last sent for chunk " + c.getHash() + " startoff " + c.getStartOffset())[ FD ]
Line_3 $$ DBConnectionManager dbm = null-->Line_10 $$ dbm = DBConnectionManager.getInstance()[ FD ]
Line_10 $$ dbm = DBConnectionManager.getInstance()-->Line_10 $$ dbm = DBConnectionManager.getInstance()[ FD ]
Line_10 $$ dbm = DBConnectionManager.getInstance()-->Line_10 $$ dbm = DBConnectionManager.getInstance()[ CD ]
Line_4 $$ Connection conn = null-->Line_11 $$ conn = dbm.getConnection("satmule")[ FD ]
Line_11 $$ conn = dbm.getConnection("satmule")-->Line_11 $$ conn = dbm.getConnection("satmule")[ FD ]
Line_11 $$ conn = dbm.getConnection("satmule")-->Line_11 $$ conn = dbm.getConnection("satmule")[ CD ]
Line_3 $$ DBConnectionManager dbm = null-->Line_11 $$ conn = dbm.getConnection("satmule")[ FD ]
Line_10 $$ dbm = DBConnectionManager.getInstance()-->Line_11 $$ conn = dbm.getConnection("satmule")[ FD ]
Line_5 $$ PreparedStatement stmt = null-->Line_12 $$ stmt = conn.prepareStatement(SQL)[ FD ]
Line_12 $$ stmt = conn.prepareStatement(SQL)-->Line_12 $$ stmt = conn.prepareStatement(SQL)[ FD ]
Line_12 $$ stmt = conn.prepareStatement(SQL)-->Line_12 $$ stmt = conn.prepareStatement(SQL)[ CD ]
Line_4 $$ Connection conn = null-->Line_12 $$ stmt = conn.prepareStatement(SQL)[ FD ]
Line_11 $$ conn = dbm.getConnection("satmule")-->Line_12 $$ stmt = conn.prepareStatement(SQL)[ FD ]
Line_7 $$ String SQL = "UPDATE CHUNK SET SENT=? WHERE FILEHASH=? AND STARTOFF=? AND LENGTH=?"-->Line_12 $$ stmt = conn.prepareStatement(SQL)[ FD ]
Line_5 $$ PreparedStatement stmt = null-->Line_13 $$ stmt.setDate(1, new java.sql.Date(c.getLastSend().getTime()))[ FD ]
Line_12 $$ stmt = conn.prepareStatement(SQL)-->Line_13 $$ stmt.setDate(1, new java.sql.Date(c.getLastSend().getTime()))[ FD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_13 $$ stmt.setDate(1, new java.sql.Date(c.getLastSend().getTime()))[ FD ]
Line_5 $$ PreparedStatement stmt = null-->Line_14 $$ stmt.setString(2, c.getHash())[ FD ]
Line_12 $$ stmt = conn.prepareStatement(SQL)-->Line_14 $$ stmt.setString(2, c.getHash())[ FD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_14 $$ stmt.setString(2, c.getHash())[ FD ]
Line_5 $$ PreparedStatement stmt = null-->Line_15 $$ stmt.setLong(3, c.getStartOffset())[ FD ]
Line_12 $$ stmt = conn.prepareStatement(SQL)-->Line_15 $$ stmt.setLong(3, c.getStartOffset())[ FD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_15 $$ stmt.setLong(3, c.getStartOffset())[ FD ]
Line_5 $$ PreparedStatement stmt = null-->Line_16 $$ stmt.setLong(4, c.getSize())[ FD ]
Line_12 $$ stmt = conn.prepareStatement(SQL)-->Line_16 $$ stmt.setLong(4, c.getSize())[ FD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_16 $$ stmt.setLong(4, c.getSize())[ FD ]
Line_5 $$ PreparedStatement stmt = null-->Line_17 $$ stmt.executeUpdate()[ FD ]
Line_12 $$ stmt = conn.prepareStatement(SQL)-->Line_17 $$ stmt.executeUpdate()[ FD ]
Line_4 $$ Connection conn = null-->Line_18 $$ conn.commit()[ FD ]
Line_11 $$ conn = dbm.getConnection("satmule")-->Line_18 $$ conn.commit()[ FD ]
Line_5 $$ PreparedStatement stmt = null-->Line_19 $$ stmt.close()[ FD ]
Line_12 $$ stmt = conn.prepareStatement(SQL)-->Line_19 $$ stmt.close()[ FD ]
Line_3 $$ DBConnectionManager dbm = null-->Line_20 $$ dbm.freeConnection("satmule", conn)[ FD ]
Line_10 $$ dbm = DBConnectionManager.getInstance()-->Line_20 $$ dbm.freeConnection("satmule", conn)[ FD ]
Line_4 $$ Connection conn = null-->Line_20 $$ dbm.freeConnection("satmule", conn)[ FD ]
Line_11 $$ conn = dbm.getConnection("satmule")-->Line_20 $$ dbm.freeConnection("satmule", conn)[ FD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_22 $$ log.error("Error while updating chunk " + c.getHash() + "offset:" + c.getStartOffset() + "SQL error: " + SQL, e)[ FD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_22 $$ log.error("Error while updating chunk " + c.getHash() + "offset:" + c.getStartOffset() + "SQL error: " + SQL, e)[ FD ]
Line_3 $$ DBConnectionManager dbm = null-->Line_24 $$ if (dbm == null)[ FD ]
Line_10 $$ dbm = DBConnectionManager.getInstance()-->Line_24 $$ if (dbm == null)[ FD ]
Line_24 $$ if (dbm == null)-->Line_24 $$ excep = new Exception("Could not obtain pool object DbConnectionManager")[ CD ]
Line_23 $$ Exception excep-->Line_24 $$ excep = new Exception("Could not obtain pool object DbConnectionManager")[ FD ]
Line_24 $$ excep = new Exception("Could not obtain pool object DbConnectionManager")-->Line_24 $$ excep = new Exception("Could not obtain pool object DbConnectionManager")[ FD ]
Line_24 $$ if (dbm == null)-->Line_24 $$ if (conn == null)[ CD ]
Line_4 $$ Connection conn = null-->Line_24 $$ if (conn == null)[ FD ]
Line_11 $$ conn = dbm.getConnection("satmule")-->Line_24 $$ if (conn == null)[ FD ]
Line_24 $$ if (conn == null)-->Line_24 $$ excep = new Exception("The Db connection pool could not obtain a database connection")[ CD ]
Line_23 $$ Exception excep-->Line_24 $$ excep = new Exception("The Db connection pool could not obtain a database connection")[ FD ]
Line_24 $$ excep = new Exception("Could not obtain pool object DbConnectionManager")-->Line_24 $$ excep = new Exception("The Db connection pool could not obtain a database connection")[ FD ]
Line_24 $$ excep = new Exception("The Db connection pool could not obtain a database connection")-->Line_24 $$ excep = new Exception("The Db connection pool could not obtain a database connection")[ FD ]
Line_24 $$ if (conn == null)-->Line_25 $$ conn.rollback()[ CD ]
Line_4 $$ Connection conn = null-->Line_25 $$ conn.rollback()[ FD ]
Line_11 $$ conn = dbm.getConnection("satmule")-->Line_25 $$ conn.rollback()[ FD ]
Line_24 $$ if (conn == null)-->Line_26 $$ excep = new Exception("SQL Error : " + SQL + " error: " + e)[ CD ]
Line_23 $$ Exception excep-->Line_26 $$ excep = new Exception("SQL Error : " + SQL + " error: " + e)[ FD ]
Line_24 $$ excep = new Exception("Could not obtain pool object DbConnectionManager")-->Line_26 $$ excep = new Exception("SQL Error : " + SQL + " error: " + e)[ FD ]
Line_24 $$ excep = new Exception("The Db connection pool could not obtain a database connection")-->Line_26 $$ excep = new Exception("SQL Error : " + SQL + " error: " + e)[ FD ]
Line_26 $$ excep = new Exception("SQL Error : " + SQL + " error: " + e)-->Line_26 $$ excep = new Exception("SQL Error : " + SQL + " error: " + e)[ FD ]
Line_24 $$ if (conn == null)-->Line_27 $$ dbm.freeConnection("satmule", conn)[ CD ]
Line_3 $$ DBConnectionManager dbm = null-->Line_27 $$ dbm.freeConnection("satmule", conn)[ FD ]
Line_10 $$ dbm = DBConnectionManager.getInstance()-->Line_27 $$ dbm.freeConnection("satmule", conn)[ FD ]
Line_4 $$ Connection conn = null-->Line_27 $$ dbm.freeConnection("satmule", conn)[ FD ]
Line_11 $$ conn = dbm.getConnection("satmule")-->Line_27 $$ dbm.freeConnection("satmule", conn)[ FD ]
Line_2 $$ public static Chunk updateLastSend(Chunk c) throws Exception -->Line_31 $$ return ret[ CD ]
