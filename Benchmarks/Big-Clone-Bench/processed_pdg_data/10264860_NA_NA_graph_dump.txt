Line_2 $$ public AddressType[] getAdressFromCRSCoordinate(Point3d crs_position) --> Line_3 $$ AddressType[] result = null [CD]
Line_2 $$ public AddressType[] getAdressFromCRSCoordinate(Point3d crs_position) --> Line_4 $$ String postRequest = "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n" + "<xls:XLS xmlns:xls=\"http://www.opengis.net/xls\" xmlns:sch=\"http://www.ascc.net/xml/schematron\" xmlns:gml=\"http://www.opengis.net/gml\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.opengis.net/xls \n" + "	http://gdi3d.giub.uni-bonn.de/lus/schemas/LocationUtilityService.xsd\" version=\"1.1\"> \n" + "	<xls:RequestHeader srsName=\"EPSG:" + Navigator.getEpsg_code() + "\"/> \n" + "	<xls:Request methodName=\"ReverseGeocodeRequest\" requestID=\"123456789\" version=\"1.1\"> \n" + "		<xls:ReverseGeocodeRequest> \n" + "			<xls:Position> \n" + "				<gml:Point srsName=\"" + Navigator.getEpsg_code() + "\"> \n" + "					<gml:pos>" + crs_position.x + " " + crs_position.y + "</gml:pos> \n" + "				</gml:Point> \n" + "			</xls:Position> \n" + "			<xls:ReverseGeocodePreference>StreetAddress</xls:ReverseGeocodePreference> \n" + "		</xls:ReverseGeocodeRequest> \n" + "	</xls:Request> \n" + "</xls:XLS> \n" [CD]
Line_6 $$ if (Navigator.isVerbose()) --> Line_7 $$ System.out.println("contacting " + serviceEndPoint + ":\n" + postRequest) [CD]
Line_9 $$ URL u = new URL(serviceEndPoint) --> Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() [FD]
Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() --> Line_11 $$ urlc.setReadTimeout(Navigator.TIME_OUT) [FD]
Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() --> Line_12 $$ urlc.setAllowUserInteraction(false) [FD]
Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() --> Line_13 $$ urlc.setRequestMethod("POST") [FD]
Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() --> Line_14 $$ urlc.setRequestProperty("Content-Type", "application/xml") [FD]
Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() --> Line_15 $$ urlc.setDoOutput(true) [FD]
Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() --> Line_16 $$ urlc.setDoInput(true) [FD]
Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() --> Line_17 $$ urlc.setUseCaches(false) [FD]
Line_18 $$ PrintWriter xmlOut = null --> Line_19 $$ xmlOut = new java.io.PrintWriter(urlc.getOutputStream()) [FD]
Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() --> Line_19 $$ xmlOut = new java.io.PrintWriter(urlc.getOutputStream()) [FD]
Line_18 $$ PrintWriter xmlOut = null --> Line_20 $$ xmlOut.write(postRequest) [FD]
Line_19 $$ xmlOut = new java.io.PrintWriter(urlc.getOutputStream()) --> Line_20 $$ xmlOut.write(postRequest) [FD]
Line_4 $$ String postRequest = "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n" + "<xls:XLS xmlns:xls=\"http://www.opengis.net/xls\" xmlns:sch=\"http://www.ascc.net/xml/schematron\" xmlns:gml=\"http://www.opengis.net/gml\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.opengis.net/xls \n" + "	http://gdi3d.giub.uni-bonn.de/lus/schemas/LocationUtilityService.xsd\" version=\"1.1\"> \n" + "	<xls:RequestHeader srsName=\"EPSG:" + Navigator.getEpsg_code() + "\"/> \n" + "	<xls:Request methodName=\"ReverseGeocodeRequest\" requestID=\"123456789\" version=\"1.1\"> \n" + "		<xls:ReverseGeocodeRequest> \n" + "			<xls:Position> \n" + "				<gml:Point srsName=\"" + Navigator.getEpsg_code() + "\"> \n" + "					<gml:pos>" + crs_position.x + " " + crs_position.y + "</gml:pos> \n" + "				</gml:Point> \n" + "			</xls:Position> \n" + "			<xls:ReverseGeocodePreference>StreetAddress</xls:ReverseGeocodePreference> \n" + "		</xls:ReverseGeocodeRequest> \n" + "	</xls:Request> \n" + "</xls:XLS> \n" --> Line_20 $$ xmlOut.write(postRequest) [FD]
Line_18 $$ PrintWriter xmlOut = null --> Line_21 $$ xmlOut.flush() [FD]
Line_19 $$ xmlOut = new java.io.PrintWriter(urlc.getOutputStream()) --> Line_21 $$ xmlOut.flush() [FD]
Line_18 $$ PrintWriter xmlOut = null --> Line_22 $$ xmlOut.close() [FD]
Line_19 $$ xmlOut = new java.io.PrintWriter(urlc.getOutputStream()) --> Line_22 $$ xmlOut.close() [FD]
Line_10 $$ HttpURLConnection urlc = (HttpURLConnection) u.openConnection() --> Line_23 $$ InputStream is = urlc.getInputStream() [FD]
Line_23 $$ InputStream is = urlc.getInputStream() --> Line_24 $$ XLSDocument xlsResponse = XLSDocument.Factory.parse(is) [FD]
Line_23 $$ InputStream is = urlc.getInputStream() --> Line_25 $$ is.close() [FD]
Line_24 $$ XLSDocument xlsResponse = XLSDocument.Factory.parse(is) --> Line_26 $$ XLSType xlsTypeResponse = xlsResponse.getXLS() [FD]
Line_26 $$ XLSType xlsTypeResponse = xlsResponse.getXLS() --> Line_27 $$ AbstractBodyType abBodyResponse[] = xlsTypeResponse.getBodyArray() [FD]
Line_28 $$ ResponseType response = (ResponseType) abBodyResponse[0].changeType(ResponseType.type) --> Line_29 $$ AbstractResponseParametersType respParam = response.getResponseParameters() [FD]
Line_29 $$ AbstractResponseParametersType respParam = response.getResponseParameters() --> Line_30 $$ if (respParam == null) [FD]
Line_30 $$ if (respParam == null) --> Line_31 $$ return null [CD]
Line_29 $$ AbstractResponseParametersType respParam = response.getResponseParameters() --> Line_33 $$ ReverseGeocodeResponseType drResp = (ReverseGeocodeResponseType) respParam.changeType(ReverseGeocodeResponseType.type) [FD]
Line_33 $$ ReverseGeocodeResponseType drResp = (ReverseGeocodeResponseType) respParam.changeType(ReverseGeocodeResponseType.type) --> Line_34 $$ net.opengis.xls.ReverseGeocodedLocationType[] types = drResp.getReverseGeocodedLocationArray() [FD]
Line_35 $$ int num = types.length --> Line_36 $$ if (num > 2) [FD]
Line_36 $$ if (num > 2) --> Line_37 $$ return null [CD]
Line_3 $$ AddressType[] result = null --> Line_39 $$ result = new AddressType[num] [FD]
Line_35 $$ int num = types.length --> Line_40 $$ for (int i = 0; i < num; i++) [FD]
Line_40 $$ for (int i = 0; i < num; i++) --> Line_41 $$ String addressDescription = "<b>" [CD]
Line_40 $$ for (int i = 0; i < num; i++) --> Line_42 $$ net.opengis.xls.ReverseGeocodedLocationType type = types[i] [CD]
Line_40 $$ for (int i = 0; i < num; i++) --> Line_43 $$ result[i] = type.getAddress() [CD]
Line_42 $$ net.opengis.xls.ReverseGeocodedLocationType type = types[i] --> Line_43 $$ result[i] = type.getAddress() [FD]
Line_2 $$ public AddressType[] getAdressFromCRSCoordinate(Point3d crs_position) --> Line_50 $$ return result [CD]
