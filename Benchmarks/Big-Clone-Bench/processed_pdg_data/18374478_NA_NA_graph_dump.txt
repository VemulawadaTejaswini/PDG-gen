Line_4 $$ Connection conn = null --> Line_7 $$ conn = pool.getConnection() [FD]
Line_5 $$ boolean autoCommit = false --> Line_8 $$ autoCommit = conn.getAutoCommit() [FD]
Line_4 $$ Connection conn = null --> Line_8 $$ autoCommit = conn.getAutoCommit() [FD]
Line_7 $$ conn = pool.getConnection() --> Line_8 $$ autoCommit = conn.getAutoCommit() [FD]
Line_4 $$ Connection conn = null --> Line_9 $$ conn.setAutoCommit(false) [FD]
Line_7 $$ conn = pool.getConnection() --> Line_9 $$ conn.setAutoCommit(false) [FD]
Line_4 $$ Connection conn = null --> Line_10 $$ final PreparedStatement updateUser = conn.prepareStatement("update users set mainRoleId=? where userId=?") [FD]
Line_7 $$ conn = pool.getConnection() --> Line_10 $$ final PreparedStatement updateUser = conn.prepareStatement("update users set mainRoleId=? where userId=?") [FD]
Line_10 $$ final PreparedStatement updateUser = conn.prepareStatement("update users set mainRoleId=? where userId=?") --> Line_11 $$ updateUser.setInt(1, user.getMainRole().getId()) [FD]
Line_2 $$ public void updateUser(final User user) throws IOException --> Line_11 $$ updateUser.setInt(1, user.getMainRole().getId()) [FD]
Line_10 $$ final PreparedStatement updateUser = conn.prepareStatement("update users set mainRoleId=? where userId=?") --> Line_12 $$ updateUser.setString(2, user.getUserId()) [FD]
Line_2 $$ public void updateUser(final User user) throws IOException --> Line_12 $$ updateUser.setString(2, user.getUserId()) [FD]
Line_10 $$ final PreparedStatement updateUser = conn.prepareStatement("update users set mainRoleId=? where userId=?") --> Line_13 $$ updateUser.executeUpdate() [FD]
Line_4 $$ Connection conn = null --> Line_14 $$ final PreparedStatement deleteRoles = conn.prepareStatement("delete from userRoles where userId=?") [FD]
Line_7 $$ conn = pool.getConnection() --> Line_14 $$ final PreparedStatement deleteRoles = conn.prepareStatement("delete from userRoles where userId=?") [FD]
Line_14 $$ final PreparedStatement deleteRoles = conn.prepareStatement("delete from userRoles where userId=?") --> Line_15 $$ deleteRoles.setString(1, user.getUserId()) [FD]
Line_2 $$ public void updateUser(final User user) throws IOException --> Line_15 $$ deleteRoles.setString(1, user.getUserId()) [FD]
Line_14 $$ final PreparedStatement deleteRoles = conn.prepareStatement("delete from userRoles where userId=?") --> Line_16 $$ deleteRoles.executeUpdate() [FD]
Line_4 $$ Connection conn = null --> Line_17 $$ final PreparedStatement insertRoles = conn.prepareStatement("insert into userRoles (userId, roleId) values (?,?)") [FD]
Line_7 $$ conn = pool.getConnection() --> Line_17 $$ final PreparedStatement insertRoles = conn.prepareStatement("insert into userRoles (userId, roleId) values (?,?)") [FD]
Line_2 $$ public void updateUser(final User user) throws IOException --> Line_18 $$ for (final Role role : user.getRoles()) [FD]
Line_17 $$ final PreparedStatement insertRoles = conn.prepareStatement("insert into userRoles (userId, roleId) values (?,?)") --> Line_19 $$ insertRoles.setString(1, user.getUserId()) [FD]
Line_2 $$ public void updateUser(final User user) throws IOException --> Line_19 $$ insertRoles.setString(1, user.getUserId()) [FD]
Line_17 $$ final PreparedStatement insertRoles = conn.prepareStatement("insert into userRoles (userId, roleId) values (?,?)") --> Line_20 $$ insertRoles.setInt(2, role.getId()) [FD]
Line_18 $$ for (final Role role : user.getRoles()) --> Line_20 $$ insertRoles.setInt(2, role.getId()) [FD]
Line_17 $$ final PreparedStatement insertRoles = conn.prepareStatement("insert into userRoles (userId, roleId) values (?,?)") --> Line_21 $$ insertRoles.executeUpdate() [FD]
Line_4 $$ Connection conn = null --> Line_23 $$ conn.commit() [FD]
Line_7 $$ conn = pool.getConnection() --> Line_23 $$ conn.commit() [FD]
Line_4 $$ Connection conn = null --> Line_25 $$ if (conn != null) [FD]
Line_7 $$ conn = pool.getConnection() --> Line_25 $$ if (conn != null) [FD]
Line_4 $$ Connection conn = null --> Line_28 $$ if (conn != null) [FD]
Line_7 $$ conn = pool.getConnection() --> Line_28 $$ if (conn != null) [FD]
Line_28 $$ if (conn != null) --> Line_29 $$ conn.setAutoCommit(autoCommit) [CD]
Line_4 $$ Connection conn = null --> Line_29 $$ conn.setAutoCommit(autoCommit) [FD]
Line_7 $$ conn = pool.getConnection() --> Line_29 $$ conn.setAutoCommit(autoCommit) [FD]
Line_5 $$ boolean autoCommit = false --> Line_29 $$ conn.setAutoCommit(autoCommit) [FD]
Line_8 $$ autoCommit = conn.getAutoCommit() --> Line_29 $$ conn.setAutoCommit(autoCommit) [FD]
Line_28 $$ if (conn != null) --> Line_30 $$ conn.close() [CD]
Line_4 $$ Connection conn = null --> Line_30 $$ conn.close() [FD]
Line_7 $$ conn = pool.getConnection() --> Line_30 $$ conn.close() [FD]
