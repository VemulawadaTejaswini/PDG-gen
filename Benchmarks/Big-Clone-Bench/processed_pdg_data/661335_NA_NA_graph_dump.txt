Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_3 $$ Debug.log("Config Updater", "Checking for newer configuration...") [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_4 $$ URL url = new URL(target) [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_5 $$ String[] urlSplit = target.split("/") [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_5 $$ String[] urlSplit = target.split("/") [FD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_6 $$ this.fileName = urlSplit[urlSplit.length - 1] [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_7 $$ BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(Main.getHomeDir() + "tmp-" + this.fileName)) [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_8 $$ URLConnection urlConnection = url.openConnection() [CD]
Line_4 $$ URL url = new URL(target) --> Line_8 $$ URLConnection urlConnection = url.openConnection() [FD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_9 $$ InputStream in = urlConnection.getInputStream() [CD]
Line_8 $$ URLConnection urlConnection = url.openConnection() --> Line_9 $$ InputStream in = urlConnection.getInputStream() [FD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_10 $$ byte[] buffer = new byte[1024] [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_11 $$ int numRead [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_12 $$ int fileSize = 0 [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_13 $$ while ((numRead = in.read(buffer)) != -1) [CD]
Line_11 $$ int numRead --> Line_13 $$ while ((numRead = in.read(buffer)) != -1) [FD]
Line_9 $$ InputStream in = urlConnection.getInputStream() --> Line_13 $$ while ((numRead = in.read(buffer)) != -1) [FD]
Line_10 $$ byte[] buffer = new byte[1024] --> Line_13 $$ while ((numRead = in.read(buffer)) != -1) [FD]
Line_13 $$ while ((numRead = in.read(buffer)) != -1) --> Line_14 $$ out.write(buffer, 0, numRead) [CD]
Line_13 $$ while ((numRead = in.read(buffer)) != -1) --> Line_14 $$ out.write(buffer, 0, numRead) [FD]
Line_7 $$ BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(Main.getHomeDir() + "tmp-" + this.fileName)) --> Line_14 $$ out.write(buffer, 0, numRead) [FD]
Line_10 $$ byte[] buffer = new byte[1024] --> Line_14 $$ out.write(buffer, 0, numRead) [FD]
Line_11 $$ int numRead --> Line_14 $$ out.write(buffer, 0, numRead) [FD]
Line_13 $$ while ((numRead = in.read(buffer)) != -1) --> Line_15 $$ fileSize += numRead [CD]
Line_13 $$ while ((numRead = in.read(buffer)) != -1) --> Line_15 $$ fileSize += numRead [FD]
Line_12 $$ int fileSize = 0 --> Line_15 $$ fileSize += numRead [FD]
Line_11 $$ int numRead --> Line_15 $$ fileSize += numRead [FD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_17 $$ Debug.log("Config Updater", "Read latest configuration: " + fileSize + " bytes") [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_18 $$ in.close() [CD]
Line_9 $$ InputStream in = urlConnection.getInputStream() --> Line_18 $$ in.close() [FD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_19 $$ out.close() [CD]
Line_7 $$ BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(Main.getHomeDir() + "tmp-" + this.fileName)) --> Line_19 $$ out.close() [FD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_20 $$ XMLController xmlC = new XMLController() [CD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_21 $$ String newFileVersion = xmlC.readCfgVersion(Main.getHomeDir() + "tmp-" + this.fileName) [CD]
Line_20 $$ XMLController xmlC = new XMLController() --> Line_21 $$ String newFileVersion = xmlC.readCfgVersion(Main.getHomeDir() + "tmp-" + this.fileName) [FD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_22 $$ if (new File(Main.getHomeDir() + this.fileName).exists()) [CD]
Line_22 $$ if (new File(Main.getHomeDir() + this.fileName).exists()) --> Line_23 $$ Debug.log("Config Updater", "Local configfile '" + Main.getHomeDir() + this.fileName + "' exists (version " + cfgVersion + ")") [CD]
Line_22 $$ if (new File(Main.getHomeDir() + this.fileName).exists()) --> Line_24 $$ if (Double.parseDouble(newFileVersion) > Double.parseDouble(cfgVersion)) [CD]
Line_21 $$ String newFileVersion = xmlC.readCfgVersion(Main.getHomeDir() + "tmp-" + this.fileName) --> Line_24 $$ if (Double.parseDouble(newFileVersion) > Double.parseDouble(cfgVersion)) [FD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_24 $$ if (Double.parseDouble(newFileVersion) > Double.parseDouble(cfgVersion)) [FD]
Line_24 $$ if (Double.parseDouble(newFileVersion) > Double.parseDouble(cfgVersion)) --> Line_25 $$ Debug.log("Config Updater", "Removing old config and replacing it with version " + newFileVersion) [CD]
Line_24 $$ if (Double.parseDouble(newFileVersion) > Double.parseDouble(cfgVersion)) --> Line_26 $$ new File(Main.getHomeDir() + this.fileName).delete() [CD]
Line_24 $$ if (Double.parseDouble(newFileVersion) > Double.parseDouble(cfgVersion)) --> Line_27 $$ new File(Main.getHomeDir() + "tmp-" + this.fileName).renameTo(new File(Main.getHomeDir() + this.fileName)) [CD]
Line_24 $$ if (Double.parseDouble(newFileVersion) > Double.parseDouble(cfgVersion)) --> Line_28 $$ this.result = "ConfigFile upgraded to version " + newFileVersion [CD]
Line_21 $$ String newFileVersion = xmlC.readCfgVersion(Main.getHomeDir() + "tmp-" + this.fileName) --> Line_28 $$ this.result = "ConfigFile upgraded to version " + newFileVersion [FD]
Line_24 $$ if (Double.parseDouble(newFileVersion) > Double.parseDouble(cfgVersion)) --> Line_30 $$ new File(Main.getHomeDir() + "tmp-" + this.fileName).delete() [CD]
Line_24 $$ if (Double.parseDouble(newFileVersion) > Double.parseDouble(cfgVersion)) --> Line_31 $$ Debug.log("Config Updater", "I already have the latest version " + cfgVersion) [CD]
Line_22 $$ if (new File(Main.getHomeDir() + this.fileName).exists()) --> Line_34 $$ Debug.log("Config Updater", "Local config doesn't exist. Loading the new one, version " + newFileVersion) [CD]
Line_22 $$ if (new File(Main.getHomeDir() + this.fileName).exists()) --> Line_35 $$ new File(Main.getHomeDir() + "tmp-" + this.fileName).renameTo(new File(Main.getHomeDir() + this.fileName)) [CD]
Line_22 $$ if (new File(Main.getHomeDir() + this.fileName).exists()) --> Line_36 $$ this.result = "ConfigFile upgraded to version " + newFileVersion [CD]
Line_21 $$ String newFileVersion = xmlC.readCfgVersion(Main.getHomeDir() + "tmp-" + this.fileName) --> Line_36 $$ this.result = "ConfigFile upgraded to version " + newFileVersion [FD]
Line_2 $$ public void update(String target, String cfgVersion) throws MalformedURLException, FileNotFoundException, IOException --> Line_38 $$ Debug.log("Config Updater", "Update of configuration done") [CD]
