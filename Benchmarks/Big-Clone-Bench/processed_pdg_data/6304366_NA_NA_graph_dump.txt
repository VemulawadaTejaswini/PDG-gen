Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_3 $$ CofaxToolsUser user = (CofaxToolsUser) session.getAttribute("user") [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_3 $$ CofaxToolsUser user = (CofaxToolsUser) session.getAttribute("user") [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_4 $$ if (!localPath.endsWith(File.separator)) [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_4 $$ if (!localPath.endsWith(File.separator)) [FD]
Line_4 $$ if (!localPath.endsWith(File.separator)) --> Line_5 $$ localPath += File.separator [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_5 $$ localPath += File.separator [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_7 $$ FTPClient ftp = new FTPClient() [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_8 $$ String liveFTPLogin = (String) user.workingPubConfigElementsHash.get("LIVEFTPLOGIN") [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_9 $$ String liveFTPPassword = (String) user.workingPubConfigElementsHash.get("LIVEFTPPASSWORD") [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_10 $$ String liveImagesServer = (String) user.workingPubConfigElementsHash.get("LIVEFTPSERVER") [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_11 $$ String liveImagesFolder = (String) user.workingPubConfigElementsHash.get("LIVEIMAGESFOLDER") [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_12 $$ if (!liveImagesFolder.endsWith("/")) [CD]
Line_11 $$ String liveImagesFolder = (String) user.workingPubConfigElementsHash.get("LIVEIMAGESFOLDER") --> Line_12 $$ if (!liveImagesFolder.endsWith("/")) [FD]
Line_12 $$ if (!liveImagesFolder.endsWith("/")) --> Line_13 $$ liveImagesFolder = liveImagesFolder + "/" [CD]
Line_11 $$ String liveImagesFolder = (String) user.workingPubConfigElementsHash.get("LIVEIMAGESFOLDER") --> Line_13 $$ liveImagesFolder = liveImagesFolder + "/" [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_15 $$ String liveImagesYearFolder = "" [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_16 $$ String liveImagesMonthFolder = "" [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_17 $$ String fileLocation = "" [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_18 $$ fileLocation += "/" + year + "/" + month + "/" + day [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_18 $$ fileLocation += "/" + year + "/" + month + "/" + day [FD]
Line_17 $$ String fileLocation = "" --> Line_18 $$ fileLocation += "/" + year + "/" + month + "/" + day [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_19 $$ liveImagesYearFolder = liveImagesFolder + year [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_19 $$ liveImagesYearFolder = liveImagesFolder + year [FD]
Line_15 $$ String liveImagesYearFolder = "" --> Line_19 $$ liveImagesYearFolder = liveImagesFolder + year [FD]
Line_11 $$ String liveImagesFolder = (String) user.workingPubConfigElementsHash.get("LIVEIMAGESFOLDER") --> Line_19 $$ liveImagesYearFolder = liveImagesFolder + year [FD]
Line_13 $$ liveImagesFolder = liveImagesFolder + "/" --> Line_19 $$ liveImagesYearFolder = liveImagesFolder + year [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_20 $$ liveImagesMonthFolder = (liveImagesYearFolder + "/" + month) [CD]
Line_16 $$ String liveImagesMonthFolder = "" --> Line_20 $$ liveImagesMonthFolder = (liveImagesYearFolder + "/" + month) [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_21 $$ liveImagesFolder = (liveImagesMonthFolder + "/" + day) [CD]
Line_11 $$ String liveImagesFolder = (String) user.workingPubConfigElementsHash.get("LIVEIMAGESFOLDER") --> Line_21 $$ liveImagesFolder = (liveImagesMonthFolder + "/" + day) [FD]
Line_13 $$ liveImagesFolder = liveImagesFolder + "/" --> Line_21 $$ liveImagesFolder = (liveImagesMonthFolder + "/" + day) [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_22 $$ CofaxToolsUtil.log("CofaxToolsFTP: liveImagesServer: " + liveImagesServer) [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_23 $$ CofaxToolsUtil.log("CofaxToolsFTP: liveImagesFolder: " + liveImagesFolder) [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_24 $$ boolean stored = false [CD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_25 $$ ArrayList servers = splitServers(liveImagesServer) [CD]
Line_10 $$ String liveImagesServer = (String) user.workingPubConfigElementsHash.get("LIVEFTPSERVER") --> Line_25 $$ ArrayList servers = splitServers(liveImagesServer) [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_26 $$ for (int count = 0; count < servers.size(); count++) [CD]
Line_25 $$ ArrayList servers = splitServers(liveImagesServer) --> Line_26 $$ for (int count = 0; count < servers.size(); count++) [FD]
Line_26 $$ for (int count = 0; count < servers.size(); count++) --> Line_27 $$ String server = (String) servers.get(count) [CD]
Line_26 $$ for (int count = 0; count < servers.size(); count++) --> Line_27 $$ String server = (String) servers.get(count) [FD]
Line_25 $$ ArrayList servers = splitServers(liveImagesServer) --> Line_27 $$ String server = (String) servers.get(count) [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_30 $$ ftp.connect(server) [FD]
Line_27 $$ String server = (String) servers.get(count) --> Line_30 $$ ftp.connect(server) [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_32 $$ CofaxToolsUtil.log("CofaxToolsFTP: uploadArticleMedia results: " + ftp.getReplyString()) [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_33 $$ CofaxToolsUtil.log(ftp.getReplyString()) [FD]
Line_29 $$ int reply --> Line_34 $$ reply = ftp.getReplyCode() [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_34 $$ reply = ftp.getReplyCode() [FD]
Line_29 $$ int reply --> Line_35 $$ if (!FTPReply.isPositiveCompletion(reply)) [FD]
Line_34 $$ reply = ftp.getReplyCode() --> Line_35 $$ if (!FTPReply.isPositiveCompletion(reply)) [FD]
Line_35 $$ if (!FTPReply.isPositiveCompletion(reply)) --> Line_36 $$ ftp.disconnect() [CD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_36 $$ ftp.disconnect() [FD]
Line_35 $$ if (!FTPReply.isPositiveCompletion(reply)) --> Line_37 $$ return ("CofaxToolsFTP uploadArticleMedia ERROR: FTP server refused connection.") [CD]
Line_35 $$ if (!FTPReply.isPositiveCompletion(reply)) --> Line_39 $$ ftp.login(liveFTPLogin, liveFTPPassword) [CD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_39 $$ ftp.login(liveFTPLogin, liveFTPPassword) [FD]
Line_8 $$ String liveFTPLogin = (String) user.workingPubConfigElementsHash.get("LIVEFTPLOGIN") --> Line_39 $$ ftp.login(liveFTPLogin, liveFTPPassword) [FD]
Line_9 $$ String liveFTPPassword = (String) user.workingPubConfigElementsHash.get("LIVEFTPPASSWORD") --> Line_39 $$ ftp.login(liveFTPLogin, liveFTPPassword) [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_42 $$ ftp.setFileType(FTP.IMAGE_FILE_TYPE) [FD]
Line_43 $$ InputStream input --> Line_45 $$ input = new FileInputStream(localPath + articleImageName) [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_47 $$ boolean changed = ftp.changeWorkingDirectory(liveImagesFolder) [FD]
Line_11 $$ String liveImagesFolder = (String) user.workingPubConfigElementsHash.get("LIVEIMAGESFOLDER") --> Line_47 $$ boolean changed = ftp.changeWorkingDirectory(liveImagesFolder) [FD]
Line_13 $$ liveImagesFolder = liveImagesFolder + "/" --> Line_47 $$ boolean changed = ftp.changeWorkingDirectory(liveImagesFolder) [FD]
Line_21 $$ liveImagesFolder = (liveImagesMonthFolder + "/" + day) --> Line_47 $$ boolean changed = ftp.changeWorkingDirectory(liveImagesFolder) [FD]
Line_47 $$ boolean changed = ftp.changeWorkingDirectory(liveImagesFolder) --> Line_49 $$ if (changed == false) [FD]
Line_49 $$ if (changed == false) --> Line_50 $$ CofaxToolsUtil.log("CofaxToolsFTP: uploadArticleMedia attempting to create directory :" + liveImagesFolder) [CD]
Line_49 $$ if (changed == false) --> Line_51 $$ boolean newDirYear = ftp.makeDirectory(liveImagesYearFolder) [CD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_51 $$ boolean newDirYear = ftp.makeDirectory(liveImagesYearFolder) [FD]
Line_15 $$ String liveImagesYearFolder = "" --> Line_51 $$ boolean newDirYear = ftp.makeDirectory(liveImagesYearFolder) [FD]
Line_19 $$ liveImagesYearFolder = liveImagesFolder + year --> Line_51 $$ boolean newDirYear = ftp.makeDirectory(liveImagesYearFolder) [FD]
Line_49 $$ if (changed == false) --> Line_52 $$ boolean newDirMonth = ftp.makeDirectory(liveImagesMonthFolder) [CD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_52 $$ boolean newDirMonth = ftp.makeDirectory(liveImagesMonthFolder) [FD]
Line_16 $$ String liveImagesMonthFolder = "" --> Line_52 $$ boolean newDirMonth = ftp.makeDirectory(liveImagesMonthFolder) [FD]
Line_20 $$ liveImagesMonthFolder = (liveImagesYearFolder + "/" + month) --> Line_52 $$ boolean newDirMonth = ftp.makeDirectory(liveImagesMonthFolder) [FD]
Line_49 $$ if (changed == false) --> Line_53 $$ boolean newDir = ftp.makeDirectory(liveImagesFolder) [CD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_53 $$ boolean newDir = ftp.makeDirectory(liveImagesFolder) [FD]
Line_11 $$ String liveImagesFolder = (String) user.workingPubConfigElementsHash.get("LIVEIMAGESFOLDER") --> Line_53 $$ boolean newDir = ftp.makeDirectory(liveImagesFolder) [FD]
Line_13 $$ liveImagesFolder = liveImagesFolder + "/" --> Line_53 $$ boolean newDir = ftp.makeDirectory(liveImagesFolder) [FD]
Line_21 $$ liveImagesFolder = (liveImagesMonthFolder + "/" + day) --> Line_53 $$ boolean newDir = ftp.makeDirectory(liveImagesFolder) [FD]
Line_49 $$ if (changed == false) --> Line_54 $$ CofaxToolsUtil.log("CofaxToolsFTP: uploadArticleMedia results: YearDir: " + newDirYear + " MonthDir: " + newDirMonth + " finalDir: " + newDir) [CD]
Line_49 $$ if (changed == false) --> Line_55 $$ changed = ftp.changeWorkingDirectory(liveImagesFolder) [CD]
Line_47 $$ boolean changed = ftp.changeWorkingDirectory(liveImagesFolder) --> Line_55 $$ changed = ftp.changeWorkingDirectory(liveImagesFolder) [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_55 $$ changed = ftp.changeWorkingDirectory(liveImagesFolder) [FD]
Line_11 $$ String liveImagesFolder = (String) user.workingPubConfigElementsHash.get("LIVEIMAGESFOLDER") --> Line_55 $$ changed = ftp.changeWorkingDirectory(liveImagesFolder) [FD]
Line_13 $$ liveImagesFolder = liveImagesFolder + "/" --> Line_55 $$ changed = ftp.changeWorkingDirectory(liveImagesFolder) [FD]
Line_21 $$ liveImagesFolder = (liveImagesMonthFolder + "/" + day) --> Line_55 $$ changed = ftp.changeWorkingDirectory(liveImagesFolder) [FD]
Line_57 $$ if (changed) --> Line_58 $$ CofaxToolsUtil.log("CofaxToolsFTP: storing " + articleImageName + " to " + liveImagesFolder) [CD]
Line_57 $$ if (changed) --> Line_59 $$ stored = ftp.storeFile(articleImageName, input) [CD]
Line_24 $$ boolean stored = false --> Line_59 $$ stored = ftp.storeFile(articleImageName, input) [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_59 $$ stored = ftp.storeFile(articleImageName, input) [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_59 $$ stored = ftp.storeFile(articleImageName, input) [FD]
Line_43 $$ InputStream input --> Line_59 $$ stored = ftp.storeFile(articleImageName, input) [FD]
Line_45 $$ input = new FileInputStream(localPath + articleImageName) --> Line_59 $$ stored = ftp.storeFile(articleImageName, input) [FD]
Line_57 $$ if (changed) --> Line_61 $$ CofaxToolsUtil.log("CofaxToolsFTP: failed changing: " + liveImagesFolder) [CD]
Line_63 $$ if (stored) --> Line_64 $$ CofaxToolsUtil.log("CofaxToolsFTP: Successfully ftped file.") [CD]
Line_63 $$ if (stored) --> Line_66 $$ CofaxToolsUtil.log("CofaxToolsFTP: Failed ftping file.") [CD]
Line_43 $$ InputStream input --> Line_68 $$ input.close() [FD]
Line_45 $$ input = new FileInputStream(localPath + articleImageName) --> Line_68 $$ input.close() [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_69 $$ ftp.logout() [FD]
Line_7 $$ FTPClient ftp = new FTPClient() --> Line_70 $$ ftp.disconnect() [FD]
Line_2 $$ public static String uploadArticleMedia(String localPath, String articleImageName, String year, String month, String day, DataStore db, HttpSession session) --> Line_86 $$ return ("") [CD]
Line_55 $$ changed = ftp.changeWorkingDirectory(liveImagesFolder) --> Line_49 $$ if (changed == false) [FD]
