Line_2 $$ protected void shutdown(final boolean unexpected) --> Line_3 $$ ControlerState oldState = this.state [CD]
Line_2 $$ protected void shutdown(final boolean unexpected) --> Line_4 $$ this.state = ControlerState.Shutdown [CD]
Line_2 $$ protected void shutdown(final boolean unexpected) --> Line_5 $$ if (oldState == ControlerState.Running) [CD]
Line_3 $$ ControlerState oldState = this.state --> Line_5 $$ if (oldState == ControlerState.Running) [FD]
Line_5 $$ if (oldState == ControlerState.Running) --> Line_6 $$ if (unexpected) [CD]
Line_6 $$ if (unexpected) --> Line_7 $$ log.warn("S H U T D O W N   ---   received unexpected shutdown request.") [CD]
Line_6 $$ if (unexpected) --> Line_9 $$ log.info("S H U T D O W N   ---   start regular shutdown.") [CD]
Line_5 $$ if (oldState == ControlerState.Running) --> Line_11 $$ if (this.uncaughtException != null) [CD]
Line_11 $$ if (this.uncaughtException != null) --> Line_12 $$ log.warn("Shutdown probably caused by the following Exception.", this.uncaughtException) [CD]
Line_5 $$ if (oldState == ControlerState.Running) --> Line_14 $$ this.controlerListenerManager.fireControlerShutdownEvent(unexpected) [CD]
Line_2 $$ protected void shutdown(final boolean unexpected) --> Line_14 $$ this.controlerListenerManager.fireControlerShutdownEvent(unexpected) [FD]
Line_5 $$ if (oldState == ControlerState.Running) --> Line_15 $$ if (this.dumpDataAtEnd) [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_16 $$ Knowledges kk [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_17 $$ if (this.config.scenario().isUseKnowledges()) [CD]
Line_17 $$ if (this.config.scenario().isUseKnowledges()) --> Line_18 $$ kk = (this.getScenario()).getKnowledges() [CD]
Line_16 $$ Knowledges kk --> Line_18 $$ kk = (this.getScenario()).getKnowledges() [FD]
Line_17 $$ if (this.config.scenario().isUseKnowledges()) --> Line_20 $$ kk = this.getScenario().retrieveNotEnabledKnowledges() [CD]
Line_16 $$ Knowledges kk --> Line_20 $$ kk = this.getScenario().retrieveNotEnabledKnowledges() [FD]
Line_18 $$ kk = (this.getScenario()).getKnowledges() --> Line_20 $$ kk = this.getScenario().retrieveNotEnabledKnowledges() [FD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_22 $$ new PopulationWriter(this.population, this.network, kk).write(this.controlerIO.getOutputFilename(FILENAME_POPULATION)) [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_23 $$ new NetworkWriter(this.network).write(this.controlerIO.getOutputFilename(FILENAME_NETWORK)) [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_24 $$ new ConfigWriter(this.config).write(this.controlerIO.getOutputFilename(FILENAME_CONFIG)) [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_25 $$ ActivityFacilities facilities = this.getFacilities() [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_26 $$ if (facilities != null) [CD]
Line_25 $$ ActivityFacilities facilities = this.getFacilities() --> Line_26 $$ if (facilities != null) [FD]
Line_26 $$ if (facilities != null) --> Line_27 $$ new FacilitiesWriter((ActivityFacilitiesImpl) facilities).write(this.controlerIO.getOutputFilename("output_facilities.xml.gz")) [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_29 $$ if (((NetworkFactoryImpl) this.network.getFactory()).isTimeVariant()) [CD]
Line_29 $$ if (((NetworkFactoryImpl) this.network.getFactory()).isTimeVariant()) --> Line_30 $$ new NetworkChangeEventsWriter().write(this.controlerIO.getOutputFilename("output_change_events.xml.gz"), ((NetworkImpl) this.network).getNetworkChangeEvents()) [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_32 $$ if (this.config.scenario().isUseHouseholds()) [CD]
Line_32 $$ if (this.config.scenario().isUseHouseholds()) --> Line_33 $$ new HouseholdsWriterV10(this.scenarioData.getHouseholds()).writeFile(this.controlerIO.getOutputFilename(FILENAME_HOUSEHOLDS)) [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_35 $$ if (this.config.scenario().isUseLanes()) [CD]
Line_35 $$ if (this.config.scenario().isUseLanes()) --> Line_36 $$ new LaneDefinitionsWriter20(this.scenarioData.getScenarioElement(LaneDefinitions20.class)).write(this.controlerIO.getOutputFilename(FILENAME_LANES)) [CD]
Line_15 $$ if (this.dumpDataAtEnd) --> Line_38 $$ if (!unexpected && this.getConfig().vspExperimental().isWritingOutputEvents()) [CD]
Line_2 $$ protected void shutdown(final boolean unexpected) --> Line_38 $$ if (!unexpected && this.getConfig().vspExperimental().isWritingOutputEvents()) [FD]
Line_38 $$ if (!unexpected && this.getConfig().vspExperimental().isWritingOutputEvents()) --> Line_39 $$ File toFile = new File(this.controlerIO.getOutputFilename("output_events.xml.gz")) [CD]
Line_38 $$ if (!unexpected && this.getConfig().vspExperimental().isWritingOutputEvents()) --> Line_40 $$ File fromFile = new File(this.controlerIO.getIterationFilename(this.getLastIteration(), "events.xml.gz")) [CD]
Line_38 $$ if (!unexpected && this.getConfig().vspExperimental().isWritingOutputEvents()) --> Line_41 $$ IOUtils.copyFile(fromFile, toFile) [CD]
Line_40 $$ File fromFile = new File(this.controlerIO.getIterationFilename(this.getLastIteration(), "events.xml.gz")) --> Line_41 $$ IOUtils.copyFile(fromFile, toFile) [FD]
Line_39 $$ File toFile = new File(this.controlerIO.getOutputFilename("output_events.xml.gz")) --> Line_41 $$ IOUtils.copyFile(fromFile, toFile) [FD]
Line_5 $$ if (oldState == ControlerState.Running) --> Line_44 $$ if (unexpected) [CD]
Line_44 $$ if (unexpected) --> Line_45 $$ log.info("S H U T D O W N   ---   unexpected shutdown request completed.") [CD]
Line_44 $$ if (unexpected) --> Line_47 $$ log.info("S H U T D O W N   ---   regular shutdown completed.") [CD]
Line_5 $$ if (oldState == ControlerState.Running) --> Line_54 $$ this.shutdownHook = null [CD]
Line_5 $$ if (oldState == ControlerState.Running) --> Line_55 $$ this.collectLogMessagesAppender = null [CD]
Line_5 $$ if (oldState == ControlerState.Running) --> Line_56 $$ IOUtils.closeOutputDirLogging() [CD]
