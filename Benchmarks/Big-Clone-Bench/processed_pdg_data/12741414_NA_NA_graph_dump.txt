Line_2 $$ private void saveMessage(String server, Message message, byte[] bytes) throws Exception --> Line_3 $$ ConnectionProvider cp = null [CD]
Line_2 $$ private void saveMessage(String server, Message message, byte[] bytes) throws Exception --> Line_4 $$ Connection conn = null [CD]
Line_2 $$ private void saveMessage(String server, Message message, byte[] bytes) throws Exception --> Line_5 $$ PreparedStatement ps = null [CD]
Line_3 $$ ConnectionProvider cp = null --> Line_8 $$ cp = impl.getConnectionProvider() [FD]
Line_7 $$ SessionFactoryImplementor impl = (SessionFactoryImplementor) getPortalDao().getSessionFactory() --> Line_8 $$ cp = impl.getConnectionProvider() [FD]
Line_4 $$ Connection conn = null --> Line_9 $$ conn = cp.getConnection() [FD]
Line_3 $$ ConnectionProvider cp = null --> Line_9 $$ conn = cp.getConnection() [FD]
Line_8 $$ cp = impl.getConnectionProvider() --> Line_9 $$ conn = cp.getConnection() [FD]
Line_4 $$ Connection conn = null --> Line_10 $$ conn.setAutoCommit(false) [FD]
Line_9 $$ conn = cp.getConnection() --> Line_10 $$ conn.setAutoCommit(false) [FD]
Line_2 $$ private void saveMessage(String server, Message message, byte[] bytes) throws Exception --> Line_14 $$ if (message.getBody() instanceof Entity) [FD]
Line_14 $$ if (message.getBody() instanceof Entity) --> Line_15 $$ Entity entity = (Entity) message.getBody() [CD]
Line_2 $$ private void saveMessage(String server, Message message, byte[] bytes) throws Exception --> Line_15 $$ Entity entity = (Entity) message.getBody() [FD]
Line_14 $$ if (message.getBody() instanceof Entity) --> Line_16 $$ orgId = entity.getOrgId() [CD]
Line_11 $$ long orgId = 0 --> Line_16 $$ orgId = entity.getOrgId() [FD]
Line_15 $$ Entity entity = (Entity) message.getBody() --> Line_16 $$ orgId = entity.getOrgId() [FD]
Line_14 $$ if (message.getBody() instanceof Entity) --> Line_17 $$ className = entity.getClass().getName() [CD]
Line_15 $$ Entity entity = (Entity) message.getBody() --> Line_17 $$ className = entity.getClass().getName() [FD]
Line_14 $$ if (message.getBody() instanceof Entity) --> Line_18 $$ classId = entity.getId() [CD]
Line_15 $$ Entity entity = (Entity) message.getBody() --> Line_18 $$ classId = entity.getId() [FD]
Line_5 $$ PreparedStatement ps = null --> Line_20 $$ ps = conn.prepareStatement("insert into light_replication_message (orgId,server,event,className,classId,message,createDate) values(?,?,?,?,?,?,?);") [FD]
Line_4 $$ Connection conn = null --> Line_20 $$ ps = conn.prepareStatement("insert into light_replication_message (orgId,server,event,className,classId,message,createDate) values(?,?,?,?,?,?,?);") [FD]
Line_9 $$ conn = cp.getConnection() --> Line_20 $$ ps = conn.prepareStatement("insert into light_replication_message (orgId,server,event,className,classId,message,createDate) values(?,?,?,?,?,?,?);") [FD]
Line_5 $$ PreparedStatement ps = null --> Line_21 $$ ps.setLong(1, orgId) [FD]
Line_11 $$ long orgId = 0 --> Line_21 $$ ps.setLong(1, orgId) [FD]
Line_16 $$ orgId = entity.getOrgId() --> Line_21 $$ ps.setLong(1, orgId) [FD]
Line_5 $$ PreparedStatement ps = null --> Line_22 $$ ps.setString(2, server) [FD]
Line_2 $$ private void saveMessage(String server, Message message, byte[] bytes) throws Exception --> Line_22 $$ ps.setString(2, server) [FD]
Line_5 $$ PreparedStatement ps = null --> Line_23 $$ ps.setString(3, message.getEvent().toString()) [FD]
Line_2 $$ private void saveMessage(String server, Message message, byte[] bytes) throws Exception --> Line_23 $$ ps.setString(3, message.getEvent().toString()) [FD]
Line_5 $$ PreparedStatement ps = null --> Line_24 $$ ps.setString(4, className) [FD]
Line_5 $$ PreparedStatement ps = null --> Line_25 $$ ps.setLong(5, classId) [FD]
Line_5 $$ PreparedStatement ps = null --> Line_26 $$ ps.setBytes(6, bytes) [FD]
Line_2 $$ private void saveMessage(String server, Message message, byte[] bytes) throws Exception --> Line_26 $$ ps.setBytes(6, bytes) [FD]
Line_5 $$ PreparedStatement ps = null --> Line_27 $$ ps.setTimestamp(7, new Timestamp(System.currentTimeMillis())) [FD]
Line_5 $$ PreparedStatement ps = null --> Line_28 $$ ps.executeUpdate() [FD]
Line_4 $$ Connection conn = null --> Line_29 $$ conn.commit() [FD]
Line_9 $$ conn = cp.getConnection() --> Line_29 $$ conn.commit() [FD]
Line_5 $$ PreparedStatement ps = null --> Line_30 $$ ps.close() [FD]
Line_4 $$ Connection conn = null --> Line_31 $$ conn.close() [FD]
Line_9 $$ conn = cp.getConnection() --> Line_31 $$ conn.close() [FD]
Line_4 $$ Connection conn = null --> Line_33 $$ conn.rollback() [FD]
Line_9 $$ conn = cp.getConnection() --> Line_33 $$ conn.rollback() [FD]
Line_5 $$ PreparedStatement ps = null --> Line_34 $$ ps.close() [FD]
Line_4 $$ Connection conn = null --> Line_35 $$ conn.close() [FD]
Line_9 $$ conn = cp.getConnection() --> Line_35 $$ conn.close() [FD]
