Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_3 $$ Connection conexion = null [CD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_4 $$ PreparedStatement insertHistorial = null [CD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_5 $$ PreparedStatement insertCarrito = null [CD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_6 $$ boolean exito = false [CD]
Line_3 $$ Connection conexion = null --> Line_8 $$ conexion = pool.getConnection() [FD]
Line_3 $$ Connection conexion = null --> Line_9 $$ conexion.setAutoCommit(false) [FD]
Line_8 $$ conexion = pool.getConnection() --> Line_9 $$ conexion.setAutoCommit(false) [FD]
Line_4 $$ PreparedStatement insertHistorial = null --> Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") [FD]
Line_3 $$ Connection conexion = null --> Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") [FD]
Line_8 $$ conexion = pool.getConnection() --> Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") [FD]
Line_4 $$ PreparedStatement insertHistorial = null --> Line_11 $$ insertHistorial.setString(1, cart.getUser()) [FD]
Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") --> Line_11 $$ insertHistorial.setString(1, cart.getUser()) [FD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_11 $$ insertHistorial.setString(1, cart.getUser()) [FD]
Line_4 $$ PreparedStatement insertHistorial = null --> Line_12 $$ insertHistorial.setString(2, cart.getCodigo()) [FD]
Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") --> Line_12 $$ insertHistorial.setString(2, cart.getCodigo()) [FD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_12 $$ insertHistorial.setString(2, cart.getCodigo()) [FD]
Line_4 $$ PreparedStatement insertHistorial = null --> Line_13 $$ insertHistorial.setString(3, date) [FD]
Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") --> Line_13 $$ insertHistorial.setString(3, date) [FD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_13 $$ insertHistorial.setString(3, date) [FD]
Line_4 $$ PreparedStatement insertHistorial = null --> Line_14 $$ insertHistorial.setDouble(4, cart.getPrecio()) [FD]
Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") --> Line_14 $$ insertHistorial.setDouble(4, cart.getPrecio()) [FD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_14 $$ insertHistorial.setDouble(4, cart.getPrecio()) [FD]
Line_4 $$ PreparedStatement insertHistorial = null --> Line_15 $$ insertHistorial.setString(5, formPago) [FD]
Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") --> Line_15 $$ insertHistorial.setString(5, formPago) [FD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_15 $$ insertHistorial.setString(5, formPago) [FD]
Line_4 $$ PreparedStatement insertHistorial = null --> Line_16 $$ insertHistorial.setBoolean(6, completado) [FD]
Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") --> Line_16 $$ insertHistorial.setBoolean(6, completado) [FD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_16 $$ insertHistorial.setBoolean(6, completado) [FD]
Line_4 $$ PreparedStatement insertHistorial = null --> Line_17 $$ int filasAfectadas = insertHistorial.executeUpdate() [FD]
Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") --> Line_17 $$ int filasAfectadas = insertHistorial.executeUpdate() [FD]
Line_17 $$ int filasAfectadas = insertHistorial.executeUpdate() --> Line_18 $$ if (filasAfectadas != 1) [FD]
Line_18 $$ if (filasAfectadas != 1) --> Line_19 $$ conexion.rollback() [CD]
Line_3 $$ Connection conexion = null --> Line_19 $$ conexion.rollback() [FD]
Line_8 $$ conexion = pool.getConnection() --> Line_19 $$ conexion.rollback() [FD]
Line_18 $$ if (filasAfectadas != 1) --> Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") [CD]
Line_5 $$ PreparedStatement insertCarrito = null --> Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") [FD]
Line_3 $$ Connection conexion = null --> Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") [FD]
Line_8 $$ conexion = pool.getConnection() --> Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") [FD]
Line_18 $$ if (filasAfectadas != 1) --> Line_22 $$ Iterator<String> iteradorProductos = cart.getArticulos().keySet().iterator() [CD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_22 $$ Iterator<String> iteradorProductos = cart.getArticulos().keySet().iterator() [FD]
Line_18 $$ if (filasAfectadas != 1) --> Line_23 $$ while (iteradorProductos.hasNext()) [CD]
Line_22 $$ Iterator<String> iteradorProductos = cart.getArticulos().keySet().iterator() --> Line_23 $$ while (iteradorProductos.hasNext()) [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_24 $$ String key = iteradorProductos.next() [CD]
Line_22 $$ Iterator<String> iteradorProductos = cart.getArticulos().keySet().iterator() --> Line_24 $$ String key = iteradorProductos.next() [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_25 $$ Producto prod = getProduct(key) [CD]
Line_24 $$ String key = iteradorProductos.next() --> Line_25 $$ Producto prod = getProduct(key) [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_26 $$ int cantidad = cart.getArticulos().get(key) [CD]
Line_24 $$ String key = iteradorProductos.next() --> Line_26 $$ int cantidad = cart.getArticulos().get(key) [FD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_26 $$ int cantidad = cart.getArticulos().get(key) [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_27 $$ insertCarrito.setString(1, cart.getCodigo()) [CD]
Line_5 $$ PreparedStatement insertCarrito = null --> Line_27 $$ insertCarrito.setString(1, cart.getCodigo()) [FD]
Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") --> Line_27 $$ insertCarrito.setString(1, cart.getCodigo()) [FD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_27 $$ insertCarrito.setString(1, cart.getCodigo()) [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_28 $$ insertCarrito.setString(2, prod.getCodigo()) [CD]
Line_5 $$ PreparedStatement insertCarrito = null --> Line_28 $$ insertCarrito.setString(2, prod.getCodigo()) [FD]
Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") --> Line_28 $$ insertCarrito.setString(2, prod.getCodigo()) [FD]
Line_25 $$ Producto prod = getProduct(key) --> Line_28 $$ insertCarrito.setString(2, prod.getCodigo()) [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_29 $$ insertCarrito.setString(3, prod.getNombre()) [CD]
Line_5 $$ PreparedStatement insertCarrito = null --> Line_29 $$ insertCarrito.setString(3, prod.getNombre()) [FD]
Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") --> Line_29 $$ insertCarrito.setString(3, prod.getNombre()) [FD]
Line_25 $$ Producto prod = getProduct(key) --> Line_29 $$ insertCarrito.setString(3, prod.getNombre()) [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_30 $$ insertCarrito.setDouble(4, prod.getPrecio()) [CD]
Line_5 $$ PreparedStatement insertCarrito = null --> Line_30 $$ insertCarrito.setDouble(4, prod.getPrecio()) [FD]
Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") --> Line_30 $$ insertCarrito.setDouble(4, prod.getPrecio()) [FD]
Line_25 $$ Producto prod = getProduct(key) --> Line_30 $$ insertCarrito.setDouble(4, prod.getPrecio()) [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_31 $$ insertCarrito.setInt(5, cantidad) [CD]
Line_5 $$ PreparedStatement insertCarrito = null --> Line_31 $$ insertCarrito.setInt(5, cantidad) [FD]
Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") --> Line_31 $$ insertCarrito.setInt(5, cantidad) [FD]
Line_26 $$ int cantidad = cart.getArticulos().get(key) --> Line_31 $$ insertCarrito.setInt(5, cantidad) [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_32 $$ filasAfectadas = insertCarrito.executeUpdate() [CD]
Line_17 $$ int filasAfectadas = insertHistorial.executeUpdate() --> Line_32 $$ filasAfectadas = insertCarrito.executeUpdate() [FD]
Line_5 $$ PreparedStatement insertCarrito = null --> Line_32 $$ filasAfectadas = insertCarrito.executeUpdate() [FD]
Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") --> Line_32 $$ filasAfectadas = insertCarrito.executeUpdate() [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_33 $$ if (filasAfectadas != 1) [CD]
Line_32 $$ filasAfectadas = insertCarrito.executeUpdate() --> Line_33 $$ if (filasAfectadas != 1) [FD]
Line_17 $$ int filasAfectadas = insertHistorial.executeUpdate() --> Line_33 $$ if (filasAfectadas != 1) [FD]
Line_33 $$ if (filasAfectadas != 1) --> Line_34 $$ conexion.rollback() [CD]
Line_3 $$ Connection conexion = null --> Line_34 $$ conexion.rollback() [FD]
Line_8 $$ conexion = pool.getConnection() --> Line_34 $$ conexion.rollback() [FD]
Line_23 $$ while (iteradorProductos.hasNext()) --> Line_37 $$ insertCarrito.clearParameters() [CD]
Line_5 $$ PreparedStatement insertCarrito = null --> Line_37 $$ insertCarrito.clearParameters() [FD]
Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") --> Line_37 $$ insertCarrito.clearParameters() [FD]
Line_18 $$ if (filasAfectadas != 1) --> Line_39 $$ conexion.commit() [CD]
Line_3 $$ Connection conexion = null --> Line_39 $$ conexion.commit() [FD]
Line_8 $$ conexion = pool.getConnection() --> Line_39 $$ conexion.commit() [FD]
Line_18 $$ if (filasAfectadas != 1) --> Line_40 $$ exito = true [CD]
Line_6 $$ boolean exito = false --> Line_40 $$ exito = true [FD]
Line_3 $$ Connection conexion = null --> Line_45 $$ conexion.rollback() [FD]
Line_8 $$ conexion = pool.getConnection() --> Line_45 $$ conexion.rollback() [FD]
Line_3 $$ Connection conexion = null --> Line_50 $$ cerrarConexionYStatement(conexion, insertCarrito, insertHistorial) [FD]
Line_8 $$ conexion = pool.getConnection() --> Line_50 $$ cerrarConexionYStatement(conexion, insertCarrito, insertHistorial) [FD]
Line_5 $$ PreparedStatement insertCarrito = null --> Line_50 $$ cerrarConexionYStatement(conexion, insertCarrito, insertHistorial) [FD]
Line_21 $$ insertCarrito = conexion.prepareStatement("INSERT INTO " + nameBD + ".Carritos VALUES (?,?,?,?,?)") --> Line_50 $$ cerrarConexionYStatement(conexion, insertCarrito, insertHistorial) [FD]
Line_4 $$ PreparedStatement insertHistorial = null --> Line_50 $$ cerrarConexionYStatement(conexion, insertCarrito, insertHistorial) [FD]
Line_10 $$ insertHistorial = conexion.prepareStatement("INSERT INTO " + nameBD + ".HistorialCarritos VALUES (?,?,?,?,?,?)") --> Line_50 $$ cerrarConexionYStatement(conexion, insertCarrito, insertHistorial) [FD]
Line_2 $$ public boolean saveCart(Carrito cart, boolean completado, String date, String formPago) --> Line_52 $$ return exito [CD]
