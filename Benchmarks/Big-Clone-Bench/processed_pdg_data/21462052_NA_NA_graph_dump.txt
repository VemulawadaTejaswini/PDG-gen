Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_3 $$ Connection con = null [CD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_4 $$ boolean autoCommit = true [CD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_5 $$ PreparedStatement st = null [CD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_6 $$ ResultSet rs = null [CD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_7 $$ int nRows = 0 [CD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_8 $$ boolean cancelTask = false [CD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_9 $$ StringSet fids = new StringSet() [CD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_10 $$ if (cswRemoteRepository.isActive()) [CD]
Line_10 $$ if (cswRemoteRepository.isActive()) --> Line_11 $$ StringSet uuids = new StringSet() [CD]
Line_10 $$ if (cswRemoteRepository.isActive()) --> Line_12 $$ uuids.add(uuid) [CD]
Line_11 $$ StringSet uuids = new StringSet() --> Line_12 $$ uuids.add(uuid) [FD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_12 $$ uuids.add(uuid) [FD]
Line_10 $$ if (cswRemoteRepository.isActive()) --> Line_13 $$ fids = queryFileIdentifiers(uuids) [CD]
Line_9 $$ StringSet fids = new StringSet() --> Line_13 $$ fids = queryFileIdentifiers(uuids) [FD]
Line_11 $$ StringSet uuids = new StringSet() --> Line_13 $$ fids = queryFileIdentifiers(uuids) [FD]
Line_3 $$ Connection con = null --> Line_16 $$ con = returnConnection().getJdbcConnection() [FD]
Line_4 $$ boolean autoCommit = true --> Line_17 $$ autoCommit = con.getAutoCommit() [FD]
Line_3 $$ Connection con = null --> Line_17 $$ autoCommit = con.getAutoCommit() [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_17 $$ autoCommit = con.getAutoCommit() [FD]
Line_3 $$ Connection con = null --> Line_18 $$ con.setAutoCommit(false) [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_18 $$ con.setAutoCommit(false) [FD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_20 $$ logExpression(sSql) [FD]
Line_5 $$ PreparedStatement st = null --> Line_21 $$ st = con.prepareStatement(sSql) [FD]
Line_3 $$ Connection con = null --> Line_21 $$ st = con.prepareStatement(sSql) [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_21 $$ st = con.prepareStatement(sSql) [FD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_21 $$ st = con.prepareStatement(sSql) [FD]
Line_5 $$ PreparedStatement st = null --> Line_22 $$ st.setString(1, uuid) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_22 $$ st.setString(1, uuid) [FD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_22 $$ st.setString(1, uuid) [FD]
Line_6 $$ ResultSet rs = null --> Line_23 $$ rs = st.executeQuery() [FD]
Line_5 $$ PreparedStatement st = null --> Line_23 $$ rs = st.executeQuery() [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_23 $$ rs = st.executeQuery() [FD]
Line_6 $$ ResultSet rs = null --> Line_24 $$ if (rs.next()) [FD]
Line_23 $$ rs = st.executeQuery() --> Line_24 $$ if (rs.next()) [FD]
Line_24 $$ if (rs.next()) --> Line_25 $$ cancelTask = rs.getInt(1) > 0 [CD]
Line_8 $$ boolean cancelTask = false --> Line_25 $$ cancelTask = rs.getInt(1) > 0 [FD]
Line_6 $$ ResultSet rs = null --> Line_25 $$ cancelTask = rs.getInt(1) > 0 [FD]
Line_23 $$ rs = st.executeQuery() --> Line_25 $$ cancelTask = rs.getInt(1) > 0 [FD]
Line_5 $$ PreparedStatement st = null --> Line_27 $$ closeStatement(st) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_27 $$ closeStatement(st) [FD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_28 $$ sSql = "DELETE FROM " + getResourceTableName() + " WHERE DOCUUID=?" [FD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_29 $$ logExpression(sSql) [FD]
Line_28 $$ sSql = "DELETE FROM " + getResourceTableName() + " WHERE DOCUUID=?" --> Line_29 $$ logExpression(sSql) [FD]
Line_5 $$ PreparedStatement st = null --> Line_30 $$ st = con.prepareStatement(sSql) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_30 $$ st = con.prepareStatement(sSql) [FD]
Line_3 $$ Connection con = null --> Line_30 $$ st = con.prepareStatement(sSql) [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_30 $$ st = con.prepareStatement(sSql) [FD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_30 $$ st = con.prepareStatement(sSql) [FD]
Line_28 $$ sSql = "DELETE FROM " + getResourceTableName() + " WHERE DOCUUID=?" --> Line_30 $$ st = con.prepareStatement(sSql) [FD]
Line_5 $$ PreparedStatement st = null --> Line_31 $$ st.setString(1, uuid) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_31 $$ st.setString(1, uuid) [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_31 $$ st.setString(1, uuid) [FD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_31 $$ st.setString(1, uuid) [FD]
Line_7 $$ int nRows = 0 --> Line_32 $$ nRows = st.executeUpdate() [FD]
Line_5 $$ PreparedStatement st = null --> Line_32 $$ nRows = st.executeUpdate() [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_32 $$ nRows = st.executeUpdate() [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_32 $$ nRows = st.executeUpdate() [FD]
Line_5 $$ PreparedStatement st = null --> Line_33 $$ closeStatement(st) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_33 $$ closeStatement(st) [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_33 $$ closeStatement(st) [FD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_34 $$ sSql = "DELETE FROM " + getResourceDataTableName() + " WHERE DOCUUID=?" [FD]
Line_28 $$ sSql = "DELETE FROM " + getResourceTableName() + " WHERE DOCUUID=?" --> Line_34 $$ sSql = "DELETE FROM " + getResourceDataTableName() + " WHERE DOCUUID=?" [FD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_35 $$ logExpression(sSql) [FD]
Line_28 $$ sSql = "DELETE FROM " + getResourceTableName() + " WHERE DOCUUID=?" --> Line_35 $$ logExpression(sSql) [FD]
Line_34 $$ sSql = "DELETE FROM " + getResourceDataTableName() + " WHERE DOCUUID=?" --> Line_35 $$ logExpression(sSql) [FD]
Line_5 $$ PreparedStatement st = null --> Line_36 $$ st = con.prepareStatement(sSql) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_36 $$ st = con.prepareStatement(sSql) [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_36 $$ st = con.prepareStatement(sSql) [FD]
Line_3 $$ Connection con = null --> Line_36 $$ st = con.prepareStatement(sSql) [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_36 $$ st = con.prepareStatement(sSql) [FD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_36 $$ st = con.prepareStatement(sSql) [FD]
Line_28 $$ sSql = "DELETE FROM " + getResourceTableName() + " WHERE DOCUUID=?" --> Line_36 $$ st = con.prepareStatement(sSql) [FD]
Line_34 $$ sSql = "DELETE FROM " + getResourceDataTableName() + " WHERE DOCUUID=?" --> Line_36 $$ st = con.prepareStatement(sSql) [FD]
Line_5 $$ PreparedStatement st = null --> Line_37 $$ st.setString(1, uuid) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_37 $$ st.setString(1, uuid) [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_37 $$ st.setString(1, uuid) [FD]
Line_36 $$ st = con.prepareStatement(sSql) --> Line_37 $$ st.setString(1, uuid) [FD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_37 $$ st.setString(1, uuid) [FD]
Line_5 $$ PreparedStatement st = null --> Line_38 $$ st.executeUpdate() [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_38 $$ st.executeUpdate() [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_38 $$ st.executeUpdate() [FD]
Line_36 $$ st = con.prepareStatement(sSql) --> Line_38 $$ st.executeUpdate() [FD]
Line_39 $$ CollectionDao colDao = new CollectionDao(this.getRequestContext()) --> Line_40 $$ if (colDao.getUseCollections()) [FD]
Line_40 $$ if (colDao.getUseCollections()) --> Line_41 $$ closeStatement(st) [CD]
Line_5 $$ PreparedStatement st = null --> Line_41 $$ closeStatement(st) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_41 $$ closeStatement(st) [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_41 $$ closeStatement(st) [FD]
Line_36 $$ st = con.prepareStatement(sSql) --> Line_41 $$ closeStatement(st) [FD]
Line_40 $$ if (colDao.getUseCollections()) --> Line_42 $$ sSql = "DELETE FROM " + colDao.getCollectionMemberTableName() + " WHERE DOCUUID=?" [CD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_42 $$ sSql = "DELETE FROM " + colDao.getCollectionMemberTableName() + " WHERE DOCUUID=?" [FD]
Line_28 $$ sSql = "DELETE FROM " + getResourceTableName() + " WHERE DOCUUID=?" --> Line_42 $$ sSql = "DELETE FROM " + colDao.getCollectionMemberTableName() + " WHERE DOCUUID=?" [FD]
Line_34 $$ sSql = "DELETE FROM " + getResourceDataTableName() + " WHERE DOCUUID=?" --> Line_42 $$ sSql = "DELETE FROM " + colDao.getCollectionMemberTableName() + " WHERE DOCUUID=?" [FD]
Line_39 $$ CollectionDao colDao = new CollectionDao(this.getRequestContext()) --> Line_42 $$ sSql = "DELETE FROM " + colDao.getCollectionMemberTableName() + " WHERE DOCUUID=?" [FD]
Line_40 $$ if (colDao.getUseCollections()) --> Line_43 $$ logExpression(sSql) [CD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_43 $$ logExpression(sSql) [FD]
Line_28 $$ sSql = "DELETE FROM " + getResourceTableName() + " WHERE DOCUUID=?" --> Line_43 $$ logExpression(sSql) [FD]
Line_34 $$ sSql = "DELETE FROM " + getResourceDataTableName() + " WHERE DOCUUID=?" --> Line_43 $$ logExpression(sSql) [FD]
Line_42 $$ sSql = "DELETE FROM " + colDao.getCollectionMemberTableName() + " WHERE DOCUUID=?" --> Line_43 $$ logExpression(sSql) [FD]
Line_40 $$ if (colDao.getUseCollections()) --> Line_44 $$ st = con.prepareStatement(sSql) [CD]
Line_5 $$ PreparedStatement st = null --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_36 $$ st = con.prepareStatement(sSql) --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_3 $$ Connection con = null --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_19 $$ String sSql = "SELECT COUNT(*) FROM " + getResourceTableName() + " WHERE DOCUUID=? AND PROTOCOL_TYPE IS NOT NULL AND PROTOCOL_TYPE<>''" --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_28 $$ sSql = "DELETE FROM " + getResourceTableName() + " WHERE DOCUUID=?" --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_34 $$ sSql = "DELETE FROM " + getResourceDataTableName() + " WHERE DOCUUID=?" --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_42 $$ sSql = "DELETE FROM " + colDao.getCollectionMemberTableName() + " WHERE DOCUUID=?" --> Line_44 $$ st = con.prepareStatement(sSql) [FD]
Line_40 $$ if (colDao.getUseCollections()) --> Line_45 $$ st.setString(1, uuid) [CD]
Line_5 $$ PreparedStatement st = null --> Line_45 $$ st.setString(1, uuid) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_45 $$ st.setString(1, uuid) [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_45 $$ st.setString(1, uuid) [FD]
Line_36 $$ st = con.prepareStatement(sSql) --> Line_45 $$ st.setString(1, uuid) [FD]
Line_44 $$ st = con.prepareStatement(sSql) --> Line_45 $$ st.setString(1, uuid) [FD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_45 $$ st.setString(1, uuid) [FD]
Line_40 $$ if (colDao.getUseCollections()) --> Line_46 $$ st.executeUpdate() [CD]
Line_5 $$ PreparedStatement st = null --> Line_46 $$ st.executeUpdate() [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_46 $$ st.executeUpdate() [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_46 $$ st.executeUpdate() [FD]
Line_36 $$ st = con.prepareStatement(sSql) --> Line_46 $$ st.executeUpdate() [FD]
Line_44 $$ st = con.prepareStatement(sSql) --> Line_46 $$ st.executeUpdate() [FD]
Line_3 $$ Connection con = null --> Line_48 $$ con.commit() [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_48 $$ con.commit() [FD]
Line_3 $$ Connection con = null --> Line_50 $$ if (con != null) [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_50 $$ if (con != null) [FD]
Line_50 $$ if (con != null) --> Line_51 $$ con.rollback() [CD]
Line_3 $$ Connection con = null --> Line_51 $$ con.rollback() [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_51 $$ con.rollback() [FD]
Line_6 $$ ResultSet rs = null --> Line_55 $$ closeResultSet(rs) [FD]
Line_23 $$ rs = st.executeQuery() --> Line_55 $$ closeResultSet(rs) [FD]
Line_5 $$ PreparedStatement st = null --> Line_56 $$ closeStatement(st) [FD]
Line_21 $$ st = con.prepareStatement(sSql) --> Line_56 $$ closeStatement(st) [FD]
Line_30 $$ st = con.prepareStatement(sSql) --> Line_56 $$ closeStatement(st) [FD]
Line_36 $$ st = con.prepareStatement(sSql) --> Line_56 $$ closeStatement(st) [FD]
Line_44 $$ st = con.prepareStatement(sSql) --> Line_56 $$ closeStatement(st) [FD]
Line_3 $$ Connection con = null --> Line_57 $$ if (con != null) [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_57 $$ if (con != null) [FD]
Line_57 $$ if (con != null) --> Line_58 $$ con.setAutoCommit(autoCommit) [CD]
Line_3 $$ Connection con = null --> Line_58 $$ con.setAutoCommit(autoCommit) [FD]
Line_16 $$ con = returnConnection().getJdbcConnection() --> Line_58 $$ con.setAutoCommit(autoCommit) [FD]
Line_4 $$ boolean autoCommit = true --> Line_58 $$ con.setAutoCommit(autoCommit) [FD]
Line_17 $$ autoCommit = con.getAutoCommit() --> Line_58 $$ con.setAutoCommit(autoCommit) [FD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_61 $$ CatalogIndexAdapter indexAdapter = getCatalogIndexAdapter() [CD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_62 $$ if (indexAdapter != null) [CD]
Line_61 $$ CatalogIndexAdapter indexAdapter = getCatalogIndexAdapter() --> Line_62 $$ if (indexAdapter != null) [FD]
Line_62 $$ if (indexAdapter != null) --> Line_63 $$ indexAdapter.deleteDocument(uuid) [CD]
Line_61 $$ CatalogIndexAdapter indexAdapter = getCatalogIndexAdapter() --> Line_63 $$ indexAdapter.deleteDocument(uuid) [FD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_63 $$ indexAdapter.deleteDocument(uuid) [FD]
Line_62 $$ if (indexAdapter != null) --> Line_64 $$ if (cswRemoteRepository.isActive()) [CD]
Line_64 $$ if (cswRemoteRepository.isActive()) --> Line_65 $$ cswRemoteRepository.onRecordsDeleted(fids) [CD]
Line_9 $$ StringSet fids = new StringSet() --> Line_65 $$ cswRemoteRepository.onRecordsDeleted(fids) [FD]
Line_13 $$ fids = queryFileIdentifiers(uuids) --> Line_65 $$ cswRemoteRepository.onRecordsDeleted(fids) [FD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_68 $$ if (cancelTask && getRequestContext() != null) [CD]
Line_8 $$ boolean cancelTask = false --> Line_68 $$ if (cancelTask && getRequestContext() != null) [FD]
Line_25 $$ cancelTask = rs.getInt(1) > 0 --> Line_68 $$ if (cancelTask && getRequestContext() != null) [FD]
Line_68 $$ if (cancelTask && getRequestContext() != null) --> Line_69 $$ getRequestContext().getApplicationContext().getHarvestingEngine().cancel(getRequestContext(), uuid) [CD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_69 $$ getRequestContext().getApplicationContext().getHarvestingEngine().cancel(getRequestContext(), uuid) [FD]
Line_2 $$ public int deleteRecord(String uuid) throws SQLException, CatalogIndexException --> Line_71 $$ return nRows [CD]
