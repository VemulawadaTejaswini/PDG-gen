Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_3 $$ String sPage = null [CD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_4 $$ Transformer transformer = null [CD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_5 $$ String dig = null [CD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_6 $$ CharArrayWriter page = new CharArrayWriter() [CD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_7 $$ if (this.nCachedPages > 0) [CD]
Line_7 $$ if (this.nCachedPages > 0) --> Line_8 $$ java.security.MessageDigest mess = java.security.MessageDigest.getInstance("SHA1") [CD]
Line_7 $$ if (this.nCachedPages > 0) --> Line_9 $$ mess.update(XML.getBytes()) [CD]
Line_8 $$ java.security.MessageDigest mess = java.security.MessageDigest.getInstance("SHA1") --> Line_9 $$ mess.update(XML.getBytes()) [FD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_9 $$ mess.update(XML.getBytes()) [FD]
Line_7 $$ if (this.nCachedPages > 0) --> Line_10 $$ mess.update(Long.toString(new File(basePath + xslFileName).lastModified()).getBytes()) [CD]
Line_8 $$ java.security.MessageDigest mess = java.security.MessageDigest.getInstance("SHA1") --> Line_10 $$ mess.update(Long.toString(new File(basePath + xslFileName).lastModified()).getBytes()) [FD]
Line_7 $$ if (this.nCachedPages > 0) --> Line_11 $$ dig = new String(mess.digest()) [CD]
Line_5 $$ String dig = null --> Line_11 $$ dig = new String(mess.digest()) [FD]
Line_8 $$ java.security.MessageDigest mess = java.security.MessageDigest.getInstance("SHA1") --> Line_11 $$ dig = new String(mess.digest()) [FD]
Line_5 $$ String dig = null --> Line_13 $$ if (pages.containsKey(dig)) [FD]
Line_11 $$ dig = new String(mess.digest()) --> Line_13 $$ if (pages.containsKey(dig)) [FD]
Line_13 $$ if (pages.containsKey(dig)) --> Line_14 $$ sPage = pages.get(dig) [CD]
Line_3 $$ String sPage = null --> Line_14 $$ sPage = pages.get(dig) [FD]
Line_5 $$ String dig = null --> Line_14 $$ sPage = pages.get(dig) [FD]
Line_11 $$ dig = new String(mess.digest()) --> Line_14 $$ sPage = pages.get(dig) [FD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_18 $$ if (sPage == null && xslFileName.length() > 4) [CD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_18 $$ if (sPage == null && xslFileName.length() > 4) [FD]
Line_21 $$ String path = basePath.replaceAll("\\\\", "/") + xslFileName --> Line_22 $$ ///" + path; [FD]
Line_24 $$ if (this.nCachedTransformers > 0) --> Line_25 $$ String cacheKey = action + xslFileName + modifyTime [CD]
Line_24 $$ if (this.nCachedTransformers > 0) --> Line_26 $$ if (this.transformers.containsKey(cacheKey)) [CD]
Line_25 $$ String cacheKey = action + xslFileName + modifyTime --> Line_26 $$ if (this.transformers.containsKey(cacheKey)) [FD]
Line_26 $$ if (this.transformers.containsKey(cacheKey)) --> Line_27 $$ transformer = this.transformers.get(cacheKey) [CD]
Line_4 $$ Transformer transformer = null --> Line_27 $$ transformer = this.transformers.get(cacheKey) [FD]
Line_25 $$ String cacheKey = action + xslFileName + modifyTime --> Line_27 $$ transformer = this.transformers.get(cacheKey) [FD]
Line_4 $$ Transformer transformer = null --> Line_29 $$ transformer.transform(new StreamSource(new ByteArrayInputStream(XML.getBytes("UTF-8"))), new StreamResult(page)) [FD]
Line_27 $$ transformer = this.transformers.get(cacheKey) --> Line_29 $$ transformer.transform(new StreamSource(new ByteArrayInputStream(XML.getBytes("UTF-8"))), new StreamResult(page)) [FD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_29 $$ transformer.transform(new StreamSource(new ByteArrayInputStream(XML.getBytes("UTF-8"))), new StreamResult(page)) [FD]
Line_26 $$ if (this.transformers.containsKey(cacheKey)) --> Line_32 $$ add2cache = true [CD]
Line_23 $$ boolean add2cache = false --> Line_32 $$ add2cache = true [FD]
Line_4 $$ Transformer transformer = null --> Line_35 $$ if (transformer == null) [FD]
Line_27 $$ transformer = this.transformers.get(cacheKey) --> Line_35 $$ if (transformer == null) [FD]
Line_35 $$ if (transformer == null) --> Line_36 $$ transformer = TransformerFactory.newInstance().newTransformer(new StreamSource(path)) [CD]
Line_4 $$ Transformer transformer = null --> Line_36 $$ transformer = TransformerFactory.newInstance().newTransformer(new StreamSource(path)) [FD]
Line_27 $$ transformer = this.transformers.get(cacheKey) --> Line_36 $$ transformer = TransformerFactory.newInstance().newTransformer(new StreamSource(path)) [FD]
Line_35 $$ if (transformer == null) --> Line_37 $$ transformer.transform(new StreamSource(new ByteArrayInputStream(XML.getBytes("UTF-8"))), new StreamResult(page)) [CD]
Line_4 $$ Transformer transformer = null --> Line_37 $$ transformer.transform(new StreamSource(new ByteArrayInputStream(XML.getBytes("UTF-8"))), new StreamResult(page)) [FD]
Line_27 $$ transformer = this.transformers.get(cacheKey) --> Line_37 $$ transformer.transform(new StreamSource(new ByteArrayInputStream(XML.getBytes("UTF-8"))), new StreamResult(page)) [FD]
Line_36 $$ transformer = TransformerFactory.newInstance().newTransformer(new StreamSource(path)) --> Line_37 $$ transformer.transform(new StreamSource(new ByteArrayInputStream(XML.getBytes("UTF-8"))), new StreamResult(page)) [FD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_37 $$ transformer.transform(new StreamSource(new ByteArrayInputStream(XML.getBytes("UTF-8"))), new StreamResult(page)) [FD]
Line_3 $$ String sPage = null --> Line_39 $$ sPage = page.toString() [FD]
Line_14 $$ sPage = pages.get(dig) --> Line_39 $$ sPage = page.toString() [FD]
Line_6 $$ CharArrayWriter page = new CharArrayWriter() --> Line_39 $$ sPage = page.toString() [FD]
Line_3 $$ String sPage = null --> Line_40 $$ sPage = sPage.replaceAll("&lt;", "<") [FD]
Line_14 $$ sPage = pages.get(dig) --> Line_40 $$ sPage = sPage.replaceAll("&lt;", "<") [FD]
Line_39 $$ sPage = page.toString() --> Line_40 $$ sPage = sPage.replaceAll("&lt;", "<") [FD]
Line_3 $$ String sPage = null --> Line_41 $$ sPage = sPage.replaceAll("&gt;", ">") [FD]
Line_14 $$ sPage = pages.get(dig) --> Line_41 $$ sPage = sPage.replaceAll("&gt;", ">") [FD]
Line_39 $$ sPage = page.toString() --> Line_41 $$ sPage = sPage.replaceAll("&gt;", ">") [FD]
Line_40 $$ sPage = sPage.replaceAll("&lt;", "<") --> Line_41 $$ sPage = sPage.replaceAll("&gt;", ">") [FD]
Line_3 $$ String sPage = null --> Line_42 $$ sPage = replaceLinks(sPage, request) [FD]
Line_14 $$ sPage = pages.get(dig) --> Line_42 $$ sPage = replaceLinks(sPage, request) [FD]
Line_39 $$ sPage = page.toString() --> Line_42 $$ sPage = replaceLinks(sPage, request) [FD]
Line_40 $$ sPage = sPage.replaceAll("&lt;", "<") --> Line_42 $$ sPage = replaceLinks(sPage, request) [FD]
Line_41 $$ sPage = sPage.replaceAll("&gt;", ">") --> Line_42 $$ sPage = replaceLinks(sPage, request) [FD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_42 $$ sPage = replaceLinks(sPage, request) [FD]
Line_5 $$ String dig = null --> Line_45 $$ pages.put(dig, sPage) [FD]
Line_11 $$ dig = new String(mess.digest()) --> Line_45 $$ pages.put(dig, sPage) [FD]
Line_3 $$ String sPage = null --> Line_45 $$ pages.put(dig, sPage) [FD]
Line_14 $$ sPage = pages.get(dig) --> Line_45 $$ pages.put(dig, sPage) [FD]
Line_39 $$ sPage = page.toString() --> Line_45 $$ pages.put(dig, sPage) [FD]
Line_40 $$ sPage = sPage.replaceAll("&lt;", "<") --> Line_45 $$ pages.put(dig, sPage) [FD]
Line_41 $$ sPage = sPage.replaceAll("&gt;", ">") --> Line_45 $$ pages.put(dig, sPage) [FD]
Line_42 $$ sPage = replaceLinks(sPage, request) --> Line_45 $$ pages.put(dig, sPage) [FD]
Line_46 $$ if (pages.size() > nCachedPages) --> Line_47 $$ Iterator<String> i = pages.values().iterator() [CD]
Line_46 $$ if (pages.size() > nCachedPages) --> Line_48 $$ i.next() [CD]
Line_47 $$ Iterator<String> i = pages.values().iterator() --> Line_48 $$ i.next() [FD]
Line_46 $$ if (pages.size() > nCachedPages) --> Line_49 $$ i.remove() [CD]
Line_47 $$ Iterator<String> i = pages.values().iterator() --> Line_49 $$ i.remove() [FD]
Line_4 $$ Transformer transformer = null --> Line_55 $$ this.transformers.put(action + xslFileName + modifyTime, transformer) [FD]
Line_27 $$ transformer = this.transformers.get(cacheKey) --> Line_55 $$ this.transformers.put(action + xslFileName + modifyTime, transformer) [FD]
Line_36 $$ transformer = TransformerFactory.newInstance().newTransformer(new StreamSource(path)) --> Line_55 $$ this.transformers.put(action + xslFileName + modifyTime, transformer) [FD]
Line_56 $$ if (this.transformers.size() > this.nCachedTransformers) --> Line_57 $$ Iterator<Transformer> it = this.transformers.values().iterator() [CD]
Line_56 $$ if (this.transformers.size() > this.nCachedTransformers) --> Line_58 $$ it.next() [CD]
Line_57 $$ Iterator<Transformer> it = this.transformers.values().iterator() --> Line_58 $$ it.next() [FD]
Line_56 $$ if (this.transformers.size() > this.nCachedTransformers) --> Line_59 $$ it.remove() [CD]
Line_57 $$ Iterator<Transformer> it = this.transformers.values().iterator() --> Line_59 $$ it.remove() [FD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_67 $$ Logger.getLogger(getClass().getName()).log(Level.SEVERE, XML) [FD]
Line_2 $$ String getOutputPage(String action, String XML, String xslFileName, InputStream pageS, HttpServletRequest request) throws NoSuchAlgorithmException, UnsupportedEncodingException, TransformerException --> Line_72 $$ return sPage [CD]
