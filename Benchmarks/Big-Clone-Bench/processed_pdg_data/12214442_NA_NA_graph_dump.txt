Line_2 $$ public boolean saveTemplate(Template t) --> Line_8 $$ if (Integer.parseInt(executeMySQLGet("SELECT COUNT(*) FROM templates WHERE name='" + escapeCharacters(t.getName()) + "'")) != 0) [FD]
Line_6 $$ String query --> Line_9 $$ query = "select * from templates where templateid = " + t.getID() [FD]
Line_2 $$ public boolean saveTemplate(Template t) --> Line_9 $$ query = "select * from templates where templateid = " + t.getID() [FD]
Line_7 $$ ResultSet rset --> Line_10 $$ rset = stmt.executeQuery(query) [FD]
Line_5 $$ Statement stmt = conn.createStatement() --> Line_10 $$ rset = stmt.executeQuery(query) [FD]
Line_6 $$ String query --> Line_10 $$ rset = stmt.executeQuery(query) [FD]
Line_9 $$ query = "select * from templates where templateid = " + t.getID() --> Line_10 $$ rset = stmt.executeQuery(query) [FD]
Line_7 $$ ResultSet rset --> Line_11 $$ if (rset.next()) [FD]
Line_10 $$ rset = stmt.executeQuery(query) --> Line_11 $$ if (rset.next()) [FD]
Line_11 $$ if (rset.next()) --> Line_12 $$ System.err.println("Updating already saved template is not supported!!!!!!") [CD]
Line_11 $$ if (rset.next()) --> Line_13 $$ return false [CD]
Line_11 $$ if (rset.next()) --> Line_15 $$ query = "INSERT INTO templates (name, parentid) VALUES ('" + escapeCharacters(t.getName()) + "', " + t.getParentID() + ")" [CD]
Line_6 $$ String query --> Line_15 $$ query = "INSERT INTO templates (name, parentid) VALUES ('" + escapeCharacters(t.getName()) + "', " + t.getParentID() + ")" [FD]
Line_9 $$ query = "select * from templates where templateid = " + t.getID() --> Line_15 $$ query = "INSERT INTO templates (name, parentid) VALUES ('" + escapeCharacters(t.getName()) + "', " + t.getParentID() + ")" [FD]
Line_2 $$ public boolean saveTemplate(Template t) --> Line_15 $$ query = "INSERT INTO templates (name, parentid) VALUES ('" + escapeCharacters(t.getName()) + "', " + t.getParentID() + ")" [FD]
Line_5 $$ Statement stmt = conn.createStatement() --> Line_17 $$ stmt.executeUpdate(query) [FD]
Line_6 $$ String query --> Line_17 $$ stmt.executeUpdate(query) [FD]
Line_9 $$ query = "select * from templates where templateid = " + t.getID() --> Line_17 $$ stmt.executeUpdate(query) [FD]
Line_15 $$ query = "INSERT INTO templates (name, parentid) VALUES ('" + escapeCharacters(t.getName()) + "', " + t.getParentID() + ")" --> Line_17 $$ stmt.executeUpdate(query) [FD]
Line_11 $$ if (rset.next()) --> Line_24 $$ int templateid = Integer.parseInt(executeMySQLGet("SELECT LAST_INSERT_ID()")) [CD]
Line_11 $$ if (rset.next()) --> Line_25 $$ t.setID(templateid) [CD]
Line_2 $$ public boolean saveTemplate(Template t) --> Line_25 $$ t.setID(templateid) [FD]
Line_24 $$ int templateid = Integer.parseInt(executeMySQLGet("SELECT LAST_INSERT_ID()")) --> Line_25 $$ t.setID(templateid) [FD]
Line_11 $$ if (rset.next()) --> Line_26 $$ LinkedList<Field> fields = t.getFields() [CD]
Line_2 $$ public boolean saveTemplate(Template t) --> Line_26 $$ LinkedList<Field> fields = t.getFields() [FD]
Line_11 $$ if (rset.next()) --> Line_27 $$ ListIterator<Field> iter = fields.listIterator() [CD]
Line_26 $$ LinkedList<Field> fields = t.getFields() --> Line_27 $$ ListIterator<Field> iter = fields.listIterator() [FD]
Line_11 $$ if (rset.next()) --> Line_28 $$ Field f = null [CD]
Line_11 $$ if (rset.next()) --> Line_29 $$ PreparedStatement pstmt = conn.prepareStatement("INSERT INTO templatefields(fieldtype, name, templateid, defaultvalue)" + "VALUES (?,?,?,?)") [CD]
Line_27 $$ ListIterator<Field> iter = fields.listIterator() --> Line_31 $$ while (iter.hasNext()) [FD]
Line_31 $$ while (iter.hasNext()) --> Line_32 $$ f = iter.next() [CD]
Line_28 $$ Field f = null --> Line_32 $$ f = iter.next() [FD]
Line_27 $$ ListIterator<Field> iter = fields.listIterator() --> Line_32 $$ f = iter.next() [FD]
Line_31 $$ while (iter.hasNext()) --> Line_33 $$ if (f.getType() == Field.IMAGE) [CD]
Line_32 $$ f = iter.next() --> Line_33 $$ if (f.getType() == Field.IMAGE) [FD]
Line_28 $$ Field f = null --> Line_33 $$ if (f.getType() == Field.IMAGE) [FD]
Line_33 $$ if (f.getType() == Field.IMAGE) --> Line_34 $$ System.out.println("field is an image.") [CD]
Line_33 $$ if (f.getType() == Field.IMAGE) --> Line_35 $$ byte data[] = ((FieldDataImage) f.getDefault()).getDataBytes() [CD]
Line_32 $$ f = iter.next() --> Line_35 $$ byte data[] = ((FieldDataImage) f.getDefault()).getDataBytes() [FD]
Line_28 $$ Field f = null --> Line_35 $$ byte data[] = ((FieldDataImage) f.getDefault()).getDataBytes() [FD]
Line_33 $$ if (f.getType() == Field.IMAGE) --> Line_36 $$ pstmt.setBytes(4, data) [CD]
Line_29 $$ PreparedStatement pstmt = conn.prepareStatement("INSERT INTO templatefields(fieldtype, name, templateid, defaultvalue)" + "VALUES (?,?,?,?)") --> Line_36 $$ pstmt.setBytes(4, data) [FD]
Line_33 $$ if (f.getType() == Field.IMAGE) --> Line_38 $$ System.out.println("field is not an image") [CD]
Line_33 $$ if (f.getType() == Field.IMAGE) --> Line_39 $$ String deflt = (f.getDefault()).getData() [CD]
Line_32 $$ f = iter.next() --> Line_39 $$ String deflt = (f.getDefault()).getData() [FD]
Line_28 $$ Field f = null --> Line_39 $$ String deflt = (f.getDefault()).getData() [FD]
Line_33 $$ if (f.getType() == Field.IMAGE) --> Line_40 $$ pstmt.setString(4, deflt) [CD]
Line_29 $$ PreparedStatement pstmt = conn.prepareStatement("INSERT INTO templatefields(fieldtype, name, templateid, defaultvalue)" + "VALUES (?,?,?,?)") --> Line_40 $$ pstmt.setString(4, deflt) [FD]
Line_39 $$ String deflt = (f.getDefault()).getData() --> Line_40 $$ pstmt.setString(4, deflt) [FD]
Line_31 $$ while (iter.hasNext()) --> Line_42 $$ pstmt.setInt(1, f.getType()) [CD]
Line_29 $$ PreparedStatement pstmt = conn.prepareStatement("INSERT INTO templatefields(fieldtype, name, templateid, defaultvalue)" + "VALUES (?,?,?,?)") --> Line_42 $$ pstmt.setInt(1, f.getType()) [FD]
Line_32 $$ f = iter.next() --> Line_42 $$ pstmt.setInt(1, f.getType()) [FD]
Line_28 $$ Field f = null --> Line_42 $$ pstmt.setInt(1, f.getType()) [FD]
Line_31 $$ while (iter.hasNext()) --> Line_43 $$ pstmt.setString(2, f.getName()) [CD]
Line_29 $$ PreparedStatement pstmt = conn.prepareStatement("INSERT INTO templatefields(fieldtype, name, templateid, defaultvalue)" + "VALUES (?,?,?,?)") --> Line_43 $$ pstmt.setString(2, f.getName()) [FD]
Line_32 $$ f = iter.next() --> Line_43 $$ pstmt.setString(2, f.getName()) [FD]
Line_28 $$ Field f = null --> Line_43 $$ pstmt.setString(2, f.getName()) [FD]
Line_31 $$ while (iter.hasNext()) --> Line_44 $$ pstmt.setInt(3, t.getID()) [CD]
Line_29 $$ PreparedStatement pstmt = conn.prepareStatement("INSERT INTO templatefields(fieldtype, name, templateid, defaultvalue)" + "VALUES (?,?,?,?)") --> Line_44 $$ pstmt.setInt(3, t.getID()) [FD]
Line_2 $$ public boolean saveTemplate(Template t) --> Line_44 $$ pstmt.setInt(3, t.getID()) [FD]
Line_31 $$ while (iter.hasNext()) --> Line_45 $$ pstmt.execute() [CD]
Line_29 $$ PreparedStatement pstmt = conn.prepareStatement("INSERT INTO templatefields(fieldtype, name, templateid, defaultvalue)" + "VALUES (?,?,?,?)") --> Line_45 $$ pstmt.execute() [FD]
Line_31 $$ while (iter.hasNext()) --> Line_46 $$ f.setID(Integer.parseInt(executeMySQLGet("SELECT LAST_INSERT_ID()"))) [CD]
Line_32 $$ f = iter.next() --> Line_46 $$ f.setID(Integer.parseInt(executeMySQLGet("SELECT LAST_INSERT_ID()"))) [FD]
Line_28 $$ Field f = null --> Line_46 $$ f.setID(Integer.parseInt(executeMySQLGet("SELECT LAST_INSERT_ID()"))) [FD]
Line_2 $$ public boolean saveTemplate(Template t) --> Line_61 $$ return true [CD]
