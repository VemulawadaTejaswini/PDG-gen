Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_3 $$ String version = req.getParameter("version") [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_3 $$ String version = req.getParameter("version") [FD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_4 $$ String cdn = req.getParameter("cdn") [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_4 $$ String cdn = req.getParameter("cdn") [FD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_5 $$ String dependencies = req.getParameter("dependencies") [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_5 $$ String dependencies = req.getParameter("dependencies") [FD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_6 $$ String optimize = req.getParameter("optimize") [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_6 $$ String optimize = req.getParameter("optimize") [FD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_7 $$ String cacheFile = null [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_8 $$ String result = null [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_9 $$ boolean isCached = false [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_10 $$ Boolean isError = true [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_11 $$ if (!version.equals("1.3.2")) [CD]
Line_3 $$ String version = req.getParameter("version") --> Line_11 $$ if (!version.equals("1.3.2")) [FD]
Line_11 $$ if (!version.equals("1.3.2")) --> Line_12 $$ result = "invalid version: " + version [CD]
Line_8 $$ String result = null --> Line_12 $$ result = "invalid version: " + version [FD]
Line_3 $$ String version = req.getParameter("version") --> Line_12 $$ result = "invalid version: " + version [FD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_14 $$ if (!cdn.equals("google") && !cdn.equals("aol")) [CD]
Line_4 $$ String cdn = req.getParameter("cdn") --> Line_14 $$ if (!cdn.equals("google") && !cdn.equals("aol")) [FD]
Line_14 $$ if (!cdn.equals("google") && !cdn.equals("aol")) --> Line_15 $$ result = "invalide CDN type: " + cdn [CD]
Line_8 $$ String result = null --> Line_15 $$ result = "invalide CDN type: " + cdn [FD]
Line_12 $$ result = "invalid version: " + version --> Line_15 $$ result = "invalide CDN type: " + cdn [FD]
Line_4 $$ String cdn = req.getParameter("cdn") --> Line_15 $$ result = "invalide CDN type: " + cdn [FD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_17 $$ if (!optimize.equals("comments") && !optimize.equals("shrinksafe") && !optimize.equals("none") && !optimize.equals("shrinksafe.keepLines")) [CD]
Line_6 $$ String optimize = req.getParameter("optimize") --> Line_17 $$ if (!optimize.equals("comments") && !optimize.equals("shrinksafe") && !optimize.equals("none") && !optimize.equals("shrinksafe.keepLines")) [FD]
Line_17 $$ if (!optimize.equals("comments") && !optimize.equals("shrinksafe") && !optimize.equals("none") && !optimize.equals("shrinksafe.keepLines")) --> Line_18 $$ result = "invalid optimize type: " + optimize [CD]
Line_8 $$ String result = null --> Line_18 $$ result = "invalid optimize type: " + optimize [FD]
Line_12 $$ result = "invalid version: " + version --> Line_18 $$ result = "invalid optimize type: " + optimize [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_18 $$ result = "invalid optimize type: " + optimize [FD]
Line_6 $$ String optimize = req.getParameter("optimize") --> Line_18 $$ result = "invalid optimize type: " + optimize [FD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_20 $$ if (!dependencies.matches("^[\\w\\-\\,\\s\\.]+$")) [CD]
Line_5 $$ String dependencies = req.getParameter("dependencies") --> Line_20 $$ if (!dependencies.matches("^[\\w\\-\\,\\s\\.]+$")) [FD]
Line_20 $$ if (!dependencies.matches("^[\\w\\-\\,\\s\\.]+$")) --> Line_21 $$ result = "invalid dependency list: " + dependencies [CD]
Line_8 $$ String result = null --> Line_21 $$ result = "invalid dependency list: " + dependencies [FD]
Line_12 $$ result = "invalid version: " + version --> Line_21 $$ result = "invalid dependency list: " + dependencies [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_21 $$ result = "invalid dependency list: " + dependencies [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_21 $$ result = "invalid dependency list: " + dependencies [FD]
Line_5 $$ String dependencies = req.getParameter("dependencies") --> Line_21 $$ result = "invalid dependency list: " + dependencies [FD]
Line_24 $$ MessageDigest md = null --> Line_26 $$ md = MessageDigest.getInstance("SHA") [FD]
Line_8 $$ String result = null --> Line_28 $$ result = e.getMessage() [FD]
Line_12 $$ result = "invalid version: " + version --> Line_28 $$ result = e.getMessage() [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_28 $$ result = e.getMessage() [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_28 $$ result = e.getMessage() [FD]
Line_21 $$ result = "invalid dependency list: " + dependencies --> Line_28 $$ result = e.getMessage() [FD]
Line_8 $$ String result = null --> Line_30 $$ if (result == null) [FD]
Line_12 $$ result = "invalid version: " + version --> Line_30 $$ if (result == null) [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_30 $$ if (result == null) [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_30 $$ if (result == null) [FD]
Line_21 $$ result = "invalid dependency list: " + dependencies --> Line_30 $$ if (result == null) [FD]
Line_28 $$ result = e.getMessage() --> Line_30 $$ if (result == null) [FD]
Line_30 $$ if (result == null) --> Line_31 $$ md.update(dependencies.getBytes()) [CD]
Line_24 $$ MessageDigest md = null --> Line_31 $$ md.update(dependencies.getBytes()) [FD]
Line_26 $$ md = MessageDigest.getInstance("SHA") --> Line_31 $$ md.update(dependencies.getBytes()) [FD]
Line_5 $$ String dependencies = req.getParameter("dependencies") --> Line_31 $$ md.update(dependencies.getBytes()) [FD]
Line_30 $$ if (result == null) --> Line_32 $$ String digest = (new BASE64Encoder()).encode(md.digest()).replace('+', '~').replace('/', '_').replace('=', '_') [CD]
Line_24 $$ MessageDigest md = null --> Line_32 $$ String digest = (new BASE64Encoder()).encode(md.digest()).replace('+', '~').replace('/', '_').replace('=', '_') [FD]
Line_26 $$ md = MessageDigest.getInstance("SHA") --> Line_32 $$ String digest = (new BASE64Encoder()).encode(md.digest()).replace('+', '~').replace('/', '_').replace('=', '_') [FD]
Line_30 $$ if (result == null) --> Line_33 $$ cacheFile = cachePath + "/" + version + "/" + cdn + "/" + digest + "/" + optimize + ".js" [CD]
Line_7 $$ String cacheFile = null --> Line_33 $$ cacheFile = cachePath + "/" + version + "/" + cdn + "/" + digest + "/" + optimize + ".js" [FD]
Line_30 $$ if (result == null) --> Line_34 $$ File file = new File(cacheFile) [CD]
Line_30 $$ if (result == null) --> Line_35 $$ if (file.exists()) [CD]
Line_34 $$ File file = new File(cacheFile) --> Line_35 $$ if (file.exists()) [FD]
Line_35 $$ if (file.exists()) --> Line_36 $$ isCached = true [CD]
Line_9 $$ boolean isCached = false --> Line_36 $$ isCached = true [FD]
Line_35 $$ if (file.exists()) --> Line_37 $$ isError = false [CD]
Line_10 $$ Boolean isError = true --> Line_37 $$ isError = false [FD]
Line_9 $$ boolean isCached = false --> Line_40 $$ if (result == null && !isCached) [FD]
Line_36 $$ isCached = true --> Line_40 $$ if (result == null && !isCached) [FD]
Line_40 $$ if (result == null && !isCached) --> Line_41 $$ BuilderContextAction contextAction = new BuilderContextAction(builderPath, version, cdn, dependencies, optimize) [CD]
Line_40 $$ if (result == null && !isCached) --> Line_42 $$ ContextFactory.getGlobal().call(contextAction) [CD]
Line_41 $$ BuilderContextAction contextAction = new BuilderContextAction(builderPath, version, cdn, dependencies, optimize) --> Line_42 $$ ContextFactory.getGlobal().call(contextAction) [FD]
Line_40 $$ if (result == null && !isCached) --> Line_43 $$ Exception exception = contextAction.getException() [CD]
Line_41 $$ BuilderContextAction contextAction = new BuilderContextAction(builderPath, version, cdn, dependencies, optimize) --> Line_43 $$ Exception exception = contextAction.getException() [FD]
Line_40 $$ if (result == null && !isCached) --> Line_44 $$ if (exception != null) [CD]
Line_43 $$ Exception exception = contextAction.getException() --> Line_44 $$ if (exception != null) [FD]
Line_44 $$ if (exception != null) --> Line_45 $$ result = exception.getMessage() [CD]
Line_8 $$ String result = null --> Line_45 $$ result = exception.getMessage() [FD]
Line_12 $$ result = "invalid version: " + version --> Line_45 $$ result = exception.getMessage() [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_45 $$ result = exception.getMessage() [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_45 $$ result = exception.getMessage() [FD]
Line_21 $$ result = "invalid dependency list: " + dependencies --> Line_45 $$ result = exception.getMessage() [FD]
Line_28 $$ result = e.getMessage() --> Line_45 $$ result = exception.getMessage() [FD]
Line_43 $$ Exception exception = contextAction.getException() --> Line_45 $$ result = exception.getMessage() [FD]
Line_44 $$ if (exception != null) --> Line_47 $$ result = contextAction.getResult() [CD]
Line_8 $$ String result = null --> Line_47 $$ result = contextAction.getResult() [FD]
Line_12 $$ result = "invalid version: " + version --> Line_47 $$ result = contextAction.getResult() [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_47 $$ result = contextAction.getResult() [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_47 $$ result = contextAction.getResult() [FD]
Line_21 $$ result = "invalid dependency list: " + dependencies --> Line_47 $$ result = contextAction.getResult() [FD]
Line_28 $$ result = e.getMessage() --> Line_47 $$ result = contextAction.getResult() [FD]
Line_45 $$ result = exception.getMessage() --> Line_47 $$ result = contextAction.getResult() [FD]
Line_41 $$ BuilderContextAction contextAction = new BuilderContextAction(builderPath, version, cdn, dependencies, optimize) --> Line_47 $$ result = contextAction.getResult() [FD]
Line_44 $$ if (exception != null) --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [CD]
Line_7 $$ String cacheFile = null --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_33 $$ cacheFile = cachePath + "/" + version + "/" + cdn + "/" + digest + "/" + optimize + ".js" --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_8 $$ String result = null --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_12 $$ result = "invalid version: " + version --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_21 $$ result = "invalid dependency list: " + dependencies --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_28 $$ result = e.getMessage() --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_45 $$ result = exception.getMessage() --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_47 $$ result = contextAction.getResult() --> Line_48 $$ FileUtil.writeToFile(cacheFile, result, null, true) [FD]
Line_44 $$ if (exception != null) --> Line_49 $$ isError = false [CD]
Line_10 $$ Boolean isError = true --> Line_49 $$ isError = false [FD]
Line_37 $$ isError = false --> Line_49 $$ isError = false [FD]
Line_8 $$ String result = null --> Line_53 $$ result = e.getMessage() [FD]
Line_12 $$ result = "invalid version: " + version --> Line_53 $$ result = e.getMessage() [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_53 $$ result = e.getMessage() [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_53 $$ result = e.getMessage() [FD]
Line_21 $$ result = "invalid dependency list: " + dependencies --> Line_53 $$ result = e.getMessage() [FD]
Line_28 $$ result = e.getMessage() --> Line_53 $$ result = e.getMessage() [FD]
Line_45 $$ result = exception.getMessage() --> Line_53 $$ result = e.getMessage() [FD]
Line_47 $$ result = contextAction.getResult() --> Line_53 $$ result = e.getMessage() [FD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_55 $$ res.setCharacterEncoding("utf-8") [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_55 $$ res.setCharacterEncoding("utf-8") [FD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_56 $$ if (isError) [CD]
Line_56 $$ if (isError) --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [CD]
Line_8 $$ String result = null --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [FD]
Line_12 $$ result = "invalid version: " + version --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [FD]
Line_21 $$ result = "invalid dependency list: " + dependencies --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [FD]
Line_28 $$ result = e.getMessage() --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [FD]
Line_45 $$ result = exception.getMessage() --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [FD]
Line_47 $$ result = contextAction.getResult() --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [FD]
Line_53 $$ result = e.getMessage() --> Line_57 $$ result = result.replaceAll("\\\"", "\\\"") [FD]
Line_56 $$ if (isError) --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [CD]
Line_8 $$ String result = null --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_12 $$ result = "invalid version: " + version --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_21 $$ result = "invalid dependency list: " + dependencies --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_28 $$ result = e.getMessage() --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_45 $$ result = exception.getMessage() --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_47 $$ result = contextAction.getResult() --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_53 $$ result = e.getMessage() --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_57 $$ result = result.replaceAll("\\\"", "\\\"") --> Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" [FD]
Line_56 $$ if (isError) --> Line_59 $$ PrintWriter writer = res.getWriter() [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_59 $$ PrintWriter writer = res.getWriter() [FD]
Line_56 $$ if (isError) --> Line_60 $$ writer.append(result) [CD]
Line_59 $$ PrintWriter writer = res.getWriter() --> Line_60 $$ writer.append(result) [FD]
Line_8 $$ String result = null --> Line_60 $$ writer.append(result) [FD]
Line_12 $$ result = "invalid version: " + version --> Line_60 $$ writer.append(result) [FD]
Line_15 $$ result = "invalide CDN type: " + cdn --> Line_60 $$ writer.append(result) [FD]
Line_18 $$ result = "invalid optimize type: " + optimize --> Line_60 $$ writer.append(result) [FD]
Line_21 $$ result = "invalid dependency list: " + dependencies --> Line_60 $$ writer.append(result) [FD]
Line_28 $$ result = e.getMessage() --> Line_60 $$ writer.append(result) [FD]
Line_45 $$ result = exception.getMessage() --> Line_60 $$ writer.append(result) [FD]
Line_47 $$ result = contextAction.getResult() --> Line_60 $$ writer.append(result) [FD]
Line_53 $$ result = e.getMessage() --> Line_60 $$ writer.append(result) [FD]
Line_57 $$ result = result.replaceAll("\\\"", "\\\"") --> Line_60 $$ writer.append(result) [FD]
Line_58 $$ result = "<html><head><script type=\"text/javascript\">alert(\"" + result + "\");</script></head><body></body></html>" --> Line_60 $$ writer.append(result) [FD]
Line_56 $$ if (isError) --> Line_62 $$ res.setHeader("Content-Type", "application/x-javascript") [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_62 $$ res.setHeader("Content-Type", "application/x-javascript") [FD]
Line_56 $$ if (isError) --> Line_63 $$ res.setHeader("Content-disposition", "attachment; filename=dojo.js") [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_63 $$ res.setHeader("Content-disposition", "attachment; filename=dojo.js") [FD]
Line_56 $$ if (isError) --> Line_64 $$ res.setHeader("Content-Encoding", "gzip") [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_64 $$ res.setHeader("Content-Encoding", "gzip") [FD]
Line_56 $$ if (isError) --> Line_66 $$ BufferedInputStream in = new java.io.BufferedInputStream(new DataInputStream(new FileInputStream(file))) [CD]
Line_56 $$ if (isError) --> Line_67 $$ OutputStream out = res.getOutputStream() [CD]
Line_2 $$ public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException --> Line_67 $$ OutputStream out = res.getOutputStream() [FD]
Line_56 $$ if (isError) --> Line_68 $$ byte[] bytes = new byte[64000] [CD]
Line_56 $$ if (isError) --> Line_69 $$ int bytesRead = 0 [CD]
Line_56 $$ if (isError) --> Line_70 $$ while (bytesRead != -1) [CD]
Line_69 $$ int bytesRead = 0 --> Line_70 $$ while (bytesRead != -1) [FD]
Line_70 $$ while (bytesRead != -1) --> Line_71 $$ bytesRead = in.read(bytes) [CD]
Line_69 $$ int bytesRead = 0 --> Line_71 $$ bytesRead = in.read(bytes) [FD]
Line_66 $$ BufferedInputStream in = new java.io.BufferedInputStream(new DataInputStream(new FileInputStream(file))) --> Line_71 $$ bytesRead = in.read(bytes) [FD]
Line_68 $$ byte[] bytes = new byte[64000] --> Line_71 $$ bytesRead = in.read(bytes) [FD]
Line_70 $$ while (bytesRead != -1) --> Line_72 $$ if (bytesRead != -1) [CD]
Line_71 $$ bytesRead = in.read(bytes) --> Line_72 $$ if (bytesRead != -1) [FD]
Line_69 $$ int bytesRead = 0 --> Line_72 $$ if (bytesRead != -1) [FD]
Line_72 $$ if (bytesRead != -1) --> Line_73 $$ out.write(bytes, 0, bytesRead) [CD]
Line_67 $$ OutputStream out = res.getOutputStream() --> Line_73 $$ out.write(bytes, 0, bytesRead) [FD]
Line_68 $$ byte[] bytes = new byte[64000] --> Line_73 $$ out.write(bytes, 0, bytesRead) [FD]
Line_71 $$ bytesRead = in.read(bytes) --> Line_73 $$ out.write(bytes, 0, bytesRead) [FD]
Line_69 $$ int bytesRead = 0 --> Line_73 $$ out.write(bytes, 0, bytesRead) [FD]
Line_71 $$ bytesRead = in.read(bytes) --> Line_70 $$ while (bytesRead != -1) [FD]
