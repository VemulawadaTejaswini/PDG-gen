Line_2 $$ public void downloadFile(OutputStream os, int fileId) throws IOException, SQLException --> Line_3 $$ Connection conn = null [CD]
Line_3 $$ Connection conn = null --> Line_5 $$ conn = ds.getConnection() [FD]
Line_3 $$ Connection conn = null --> Line_6 $$ Guard.checkConnectionNotNull(conn) [FD]
Line_5 $$ conn = ds.getConnection() --> Line_6 $$ Guard.checkConnectionNotNull(conn) [FD]
Line_3 $$ Connection conn = null --> Line_7 $$ PreparedStatement ps = conn.prepareStatement("select * from FILE_BODIES where file_id=?") [FD]
Line_5 $$ conn = ds.getConnection() --> Line_7 $$ PreparedStatement ps = conn.prepareStatement("select * from FILE_BODIES where file_id=?") [FD]
Line_7 $$ PreparedStatement ps = conn.prepareStatement("select * from FILE_BODIES where file_id=?") --> Line_8 $$ ps.setInt(1, fileId) [FD]
Line_2 $$ public void downloadFile(OutputStream os, int fileId) throws IOException, SQLException --> Line_8 $$ ps.setInt(1, fileId) [FD]
Line_7 $$ PreparedStatement ps = conn.prepareStatement("select * from FILE_BODIES where file_id=?") --> Line_9 $$ ResultSet rs = ps.executeQuery() [FD]
Line_9 $$ ResultSet rs = ps.executeQuery() --> Line_10 $$ if (!rs.next()) [FD]
Line_9 $$ ResultSet rs = ps.executeQuery() --> Line_13 $$ Blob blob = rs.getBlob("data") [FD]
Line_13 $$ Blob blob = rs.getBlob("data") --> Line_14 $$ InputStream is = blob.getBinaryStream() [FD]
Line_14 $$ InputStream is = blob.getBinaryStream() --> Line_15 $$ IOUtils.copyLarge(is, os) [FD]
Line_2 $$ public void downloadFile(OutputStream os, int fileId) throws IOException, SQLException --> Line_15 $$ IOUtils.copyLarge(is, os) [FD]
Line_3 $$ Connection conn = null --> Line_17 $$ JdbcDaoHelper.safeClose(conn, log) [FD]
Line_5 $$ conn = ds.getConnection() --> Line_17 $$ JdbcDaoHelper.safeClose(conn, log) [FD]
