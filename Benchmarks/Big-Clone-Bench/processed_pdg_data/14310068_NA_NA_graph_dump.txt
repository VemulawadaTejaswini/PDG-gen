Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_3 $$ String codeerr [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_4 $$ Boolean retour = false [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_5 $$ Boolean SauvegardeEtatAutocommit [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_6 $$ int etat [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_7 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Appel de la fonction Lancer incident") [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_8 $$ Statement statement = null [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_9 $$ ResultSet resultat = null [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_10 $$ String RequeteSQL = "" [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_11 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - nouvel incident pour le bloc : " + acgtools_core.AcgIO.RetourneDate(datebloc)) [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_11 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - nouvel incident pour le bloc : " + acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_5 $$ Boolean SauvegardeEtatAutocommit --> Line_14 $$ SauvegardeEtatAutocommit = this.con.getAutoCommit() [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_16 $$ if (idbloc == 0) [FD]
Line_16 $$ if (idbloc == 0) --> Line_17 $$ idbloc = this.CreationBloc(idServeur) [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_17 $$ idbloc = this.CreationBloc(idServeur) [FD]
Line_16 $$ if (idbloc == 0) --> Line_18 $$ if (idbloc == 0) [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_18 $$ if (idbloc == 0) [FD]
Line_17 $$ idbloc = this.CreationBloc(idServeur) --> Line_18 $$ if (idbloc == 0) [FD]
Line_18 $$ if (idbloc == 0) --> Line_19 $$ retour = false [CD]
Line_4 $$ Boolean retour = false --> Line_19 $$ retour = false [FD]
Line_18 $$ if (idbloc == 0) --> Line_20 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Problème lors de la création du bloc") [CD]
Line_18 $$ if (idbloc == 0) --> Line_21 $$ this.con.rollback() [CD]
Line_18 $$ if (idbloc == 0) --> Line_22 $$ this.con.close() [CD]
Line_18 $$ if (idbloc == 0) --> Line_23 $$ return false [CD]
Line_6 $$ int etat --> Line_27 $$ etat = this.ChargerEtatServeur(idbloc, datebloc) [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_27 $$ etat = this.ChargerEtatServeur(idbloc, datebloc) [FD]
Line_17 $$ idbloc = this.CreationBloc(idServeur) --> Line_27 $$ etat = this.ChargerEtatServeur(idbloc, datebloc) [FD]
Line_6 $$ int etat --> Line_28 $$ if (etat != 2) [FD]
Line_27 $$ etat = this.ChargerEtatServeur(idbloc, datebloc) --> Line_28 $$ if (etat != 2) [FD]
Line_28 $$ if (etat != 2) --> Line_29 $$ statement = con.createStatement() [CD]
Line_8 $$ Statement statement = null --> Line_29 $$ statement = con.createStatement() [FD]
Line_28 $$ if (etat != 2) --> Line_30 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Etat chargé") [CD]
Line_28 $$ if (etat != 2) --> Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" [CD]
Line_10 $$ String RequeteSQL = "" --> Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" [FD]
Line_28 $$ if (etat != 2) --> Line_32 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - " + RequeteSQL) [CD]
Line_28 $$ if (etat != 2) --> Line_33 $$ resultat = statement.executeQuery(RequeteSQL) [CD]
Line_9 $$ ResultSet resultat = null --> Line_33 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_8 $$ Statement statement = null --> Line_33 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_29 $$ statement = con.createStatement() --> Line_33 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_10 $$ String RequeteSQL = "" --> Line_33 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_33 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_28 $$ if (etat != 2) --> Line_34 $$ if (!resultat.next()) [CD]
Line_9 $$ ResultSet resultat = null --> Line_34 $$ if (!resultat.next()) [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_34 $$ if (!resultat.next()) [FD]
Line_34 $$ if (!resultat.next()) --> Line_35 $$ resultat.close() [CD]
Line_9 $$ ResultSet resultat = null --> Line_35 $$ resultat.close() [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_35 $$ resultat.close() [FD]
Line_34 $$ if (!resultat.next()) --> Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" [CD]
Line_10 $$ String RequeteSQL = "" --> Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" [FD]
Line_34 $$ if (!resultat.next()) --> Line_37 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - " + RequeteSQL) [CD]
Line_34 $$ if (!resultat.next()) --> Line_38 $$ statement.executeUpdate(RequeteSQL) [CD]
Line_8 $$ Statement statement = null --> Line_38 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_29 $$ statement = con.createStatement() --> Line_38 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_10 $$ String RequeteSQL = "" --> Line_38 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_38 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_38 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_34 $$ if (!resultat.next()) --> Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" [CD]
Line_10 $$ String RequeteSQL = "" --> Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" [FD]
Line_34 $$ if (!resultat.next()) --> Line_40 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - " + RequeteSQL) [CD]
Line_34 $$ if (!resultat.next()) --> Line_41 $$ resultat = statement.executeQuery(RequeteSQL) [CD]
Line_9 $$ ResultSet resultat = null --> Line_41 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_41 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_8 $$ Statement statement = null --> Line_41 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_29 $$ statement = con.createStatement() --> Line_41 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_10 $$ String RequeteSQL = "" --> Line_41 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_41 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_41 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_41 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_34 $$ if (!resultat.next()) --> Line_42 $$ if (resultat.next()) [CD]
Line_9 $$ ResultSet resultat = null --> Line_42 $$ if (resultat.next()) [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_42 $$ if (resultat.next()) [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_42 $$ if (resultat.next()) [FD]
Line_42 $$ if (resultat.next()) --> Line_43 $$ codeerr = resultat.getString("incref_err_numer") [CD]
Line_3 $$ String codeerr --> Line_43 $$ codeerr = resultat.getString("incref_err_numer") [FD]
Line_9 $$ ResultSet resultat = null --> Line_43 $$ codeerr = resultat.getString("incref_err_numer") [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_43 $$ codeerr = resultat.getString("incref_err_numer") [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_43 $$ codeerr = resultat.getString("incref_err_numer") [FD]
Line_42 $$ if (resultat.next()) --> Line_44 $$ resultat.close() [CD]
Line_9 $$ ResultSet resultat = null --> Line_44 $$ resultat.close() [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_44 $$ resultat.close() [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_44 $$ resultat.close() [FD]
Line_42 $$ if (resultat.next()) --> Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" [CD]
Line_10 $$ String RequeteSQL = "" --> Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" [FD]
Line_42 $$ if (resultat.next()) --> Line_46 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - " + RequeteSQL) [CD]
Line_42 $$ if (resultat.next()) --> Line_47 $$ statement.executeUpdate(RequeteSQL) [CD]
Line_8 $$ Statement statement = null --> Line_47 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_29 $$ statement = con.createStatement() --> Line_47 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_10 $$ String RequeteSQL = "" --> Line_47 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_47 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_47 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_47 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" --> Line_47 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_42 $$ if (resultat.next()) --> Line_48 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Incident inséré dans la base de données") [CD]
Line_42 $$ if (resultat.next()) --> Line_49 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Traitement de l'envois des emails si nécessaire") [CD]
Line_42 $$ if (resultat.next()) --> Line_50 $$ this.usermail(codeerr, etat, acgtools_core.AcgIO.RetourneDate(datebloc), message) [CD]
Line_3 $$ String codeerr --> Line_50 $$ this.usermail(codeerr, etat, acgtools_core.AcgIO.RetourneDate(datebloc), message) [FD]
Line_43 $$ codeerr = resultat.getString("incref_err_numer") --> Line_50 $$ this.usermail(codeerr, etat, acgtools_core.AcgIO.RetourneDate(datebloc), message) [FD]
Line_6 $$ int etat --> Line_50 $$ this.usermail(codeerr, etat, acgtools_core.AcgIO.RetourneDate(datebloc), message) [FD]
Line_27 $$ etat = this.ChargerEtatServeur(idbloc, datebloc) --> Line_50 $$ this.usermail(codeerr, etat, acgtools_core.AcgIO.RetourneDate(datebloc), message) [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_50 $$ this.usermail(codeerr, etat, acgtools_core.AcgIO.RetourneDate(datebloc), message) [FD]
Line_42 $$ if (resultat.next()) --> Line_51 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Création de l'historique") [CD]
Line_42 $$ if (resultat.next()) --> Line_52 $$ this.CreerHistorique(codeerr) [CD]
Line_3 $$ String codeerr --> Line_52 $$ this.CreerHistorique(codeerr) [FD]
Line_43 $$ codeerr = resultat.getString("incref_err_numer") --> Line_52 $$ this.CreerHistorique(codeerr) [FD]
Line_42 $$ if (resultat.next()) --> Line_53 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Créer maj") [CD]
Line_42 $$ if (resultat.next()) --> Line_54 $$ this.CreerMaj(true) [CD]
Line_42 $$ if (resultat.next()) --> Line_55 $$ retour = true [CD]
Line_4 $$ Boolean retour = false --> Line_55 $$ retour = true [FD]
Line_19 $$ retour = false --> Line_55 $$ retour = true [FD]
Line_42 $$ if (resultat.next()) --> Line_57 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Problème d'insertion du nouvel incident dans la base") [CD]
Line_42 $$ if (resultat.next()) --> Line_58 $$ retour = false [CD]
Line_4 $$ Boolean retour = false --> Line_58 $$ retour = false [FD]
Line_19 $$ retour = false --> Line_58 $$ retour = false [FD]
Line_55 $$ retour = true --> Line_58 $$ retour = false [FD]
Line_34 $$ if (!resultat.next()) --> Line_61 $$ codeerr = resultat.getString("incref_err_numer") [CD]
Line_3 $$ String codeerr --> Line_61 $$ codeerr = resultat.getString("incref_err_numer") [FD]
Line_43 $$ codeerr = resultat.getString("incref_err_numer") --> Line_61 $$ codeerr = resultat.getString("incref_err_numer") [FD]
Line_9 $$ ResultSet resultat = null --> Line_61 $$ codeerr = resultat.getString("incref_err_numer") [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_61 $$ codeerr = resultat.getString("incref_err_numer") [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_61 $$ codeerr = resultat.getString("incref_err_numer") [FD]
Line_34 $$ if (!resultat.next()) --> Line_62 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Numéro de l'erreur trouvé. Numéro =" + codeerr) [CD]
Line_34 $$ if (!resultat.next()) --> Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" [CD]
Line_10 $$ String RequeteSQL = "" --> Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" [FD]
Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" --> Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" [FD]
Line_34 $$ if (!resultat.next()) --> Line_64 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - " + RequeteSQL) [CD]
Line_34 $$ if (!resultat.next()) --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [CD]
Line_9 $$ ResultSet resultat = null --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_8 $$ Statement statement = null --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_29 $$ statement = con.createStatement() --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_10 $$ String RequeteSQL = "" --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" --> Line_65 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_34 $$ if (!resultat.next()) --> Line_66 $$ if (!resultat.next()) [CD]
Line_9 $$ ResultSet resultat = null --> Line_66 $$ if (!resultat.next()) [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_66 $$ if (!resultat.next()) [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_66 $$ if (!resultat.next()) [FD]
Line_65 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_66 $$ if (!resultat.next()) [FD]
Line_66 $$ if (!resultat.next()) --> Line_67 $$ resultat.close() [CD]
Line_9 $$ ResultSet resultat = null --> Line_67 $$ resultat.close() [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_67 $$ resultat.close() [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_67 $$ resultat.close() [FD]
Line_65 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_67 $$ resultat.close() [FD]
Line_66 $$ if (!resultat.next()) --> Line_68 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Problème lors de la lecture de l'état de l'incident.") [CD]
Line_66 $$ if (!resultat.next()) --> Line_69 $$ String RequeteSQLInsert = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + "Incident non clotur&eacute; - " + message + "','" + niveau + "');" [CD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_69 $$ String RequeteSQLInsert = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + "Incident non clotur&eacute; - " + message + "','" + niveau + "');" [FD]
Line_66 $$ if (!resultat.next()) --> Line_70 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - " + RequeteSQLInsert) [CD]
Line_66 $$ if (!resultat.next()) --> Line_71 $$ statement.execute(RequeteSQLInsert) [CD]
Line_8 $$ Statement statement = null --> Line_71 $$ statement.execute(RequeteSQLInsert) [FD]
Line_29 $$ statement = con.createStatement() --> Line_71 $$ statement.execute(RequeteSQLInsert) [FD]
Line_69 $$ String RequeteSQLInsert = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + "Incident non clotur&eacute; - " + message + "','" + niveau + "');" --> Line_71 $$ statement.execute(RequeteSQLInsert) [FD]
Line_66 $$ if (!resultat.next()) --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [CD]
Line_9 $$ ResultSet resultat = null --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_65 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_8 $$ Statement statement = null --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_29 $$ statement = con.createStatement() --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_10 $$ String RequeteSQL = "" --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" --> Line_72 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_66 $$ if (!resultat.next()) --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [CD]
Line_9 $$ ResultSet resultat = null --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_65 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_72 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_8 $$ Statement statement = null --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_29 $$ statement = con.createStatement() --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_10 $$ String RequeteSQL = "" --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" --> Line_74 $$ resultat = statement.executeQuery(RequeteSQL) [FD]
Line_66 $$ if (!resultat.next()) --> Line_75 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Incident correctement positionné dans encours") [CD]
Line_34 $$ if (!resultat.next()) --> Line_77 $$ if (resultat.next()) [CD]
Line_9 $$ ResultSet resultat = null --> Line_77 $$ if (resultat.next()) [FD]
Line_33 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_77 $$ if (resultat.next()) [FD]
Line_41 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_77 $$ if (resultat.next()) [FD]
Line_65 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_77 $$ if (resultat.next()) [FD]
Line_72 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_77 $$ if (resultat.next()) [FD]
Line_74 $$ resultat = statement.executeQuery(RequeteSQL) --> Line_77 $$ if (resultat.next()) [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_78 $$ switch(Etatbloc.charAt(0)) [FD]
Line_10 $$ String RequeteSQL = "" --> Line_82 $$ RequeteSQL = "UPDATE tbl_incident_ref SET incref_err_etat='c'" + "WHERE incref_err_numer='" + codeerr + "';" [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_82 $$ RequeteSQL = "UPDATE tbl_incident_ref SET incref_err_etat='c'" + "WHERE incref_err_numer='" + codeerr + "';" [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_82 $$ RequeteSQL = "UPDATE tbl_incident_ref SET incref_err_etat='c'" + "WHERE incref_err_numer='" + codeerr + "';" [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_82 $$ RequeteSQL = "UPDATE tbl_incident_ref SET incref_err_etat='c'" + "WHERE incref_err_numer='" + codeerr + "';" [FD]
Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" --> Line_82 $$ RequeteSQL = "UPDATE tbl_incident_ref SET incref_err_etat='c'" + "WHERE incref_err_numer='" + codeerr + "';" [FD]
Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" --> Line_82 $$ RequeteSQL = "UPDATE tbl_incident_ref SET incref_err_etat='c'" + "WHERE incref_err_numer='" + codeerr + "';" [FD]
Line_8 $$ Statement statement = null --> Line_84 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_29 $$ statement = con.createStatement() --> Line_84 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_10 $$ String RequeteSQL = "" --> Line_84 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_84 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_84 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_84 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" --> Line_84 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" --> Line_84 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_82 $$ RequeteSQL = "UPDATE tbl_incident_ref SET incref_err_etat='c'" + "WHERE incref_err_numer='" + codeerr + "';" --> Line_84 $$ statement.executeUpdate(RequeteSQL) [FD]
Line_3 $$ String codeerr --> Line_85 $$ this.UpdateEnCours(codeerr, "c", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "auto") [FD]
Line_43 $$ codeerr = resultat.getString("incref_err_numer") --> Line_85 $$ this.UpdateEnCours(codeerr, "c", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "auto") [FD]
Line_61 $$ codeerr = resultat.getString("incref_err_numer") --> Line_85 $$ this.UpdateEnCours(codeerr, "c", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "auto") [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_85 $$ this.UpdateEnCours(codeerr, "c", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "auto") [FD]
Line_3 $$ String codeerr --> Line_87 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_43 $$ codeerr = resultat.getString("incref_err_numer") --> Line_87 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_61 $$ codeerr = resultat.getString("incref_err_numer") --> Line_87 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_6 $$ int etat --> Line_87 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_27 $$ etat = this.ChargerEtatServeur(idbloc, datebloc) --> Line_87 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_87 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_4 $$ Boolean retour = false --> Line_90 $$ retour = true [FD]
Line_19 $$ retour = false --> Line_90 $$ retour = true [FD]
Line_55 $$ retour = true --> Line_90 $$ retour = true [FD]
Line_58 $$ retour = false --> Line_90 $$ retour = true [FD]
Line_3 $$ String codeerr --> Line_95 $$ this.UpdateEnCours(codeerr, "m", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "auto") [FD]
Line_43 $$ codeerr = resultat.getString("incref_err_numer") --> Line_95 $$ this.UpdateEnCours(codeerr, "m", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "auto") [FD]
Line_61 $$ codeerr = resultat.getString("incref_err_numer") --> Line_95 $$ this.UpdateEnCours(codeerr, "m", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "auto") [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_95 $$ this.UpdateEnCours(codeerr, "m", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "auto") [FD]
Line_3 $$ String codeerr --> Line_97 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_43 $$ codeerr = resultat.getString("incref_err_numer") --> Line_97 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_61 $$ codeerr = resultat.getString("incref_err_numer") --> Line_97 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_6 $$ int etat --> Line_97 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_27 $$ etat = this.ChargerEtatServeur(idbloc, datebloc) --> Line_97 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_97 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_4 $$ Boolean retour = false --> Line_100 $$ retour = true [FD]
Line_19 $$ retour = false --> Line_100 $$ retour = true [FD]
Line_55 $$ retour = true --> Line_100 $$ retour = true [FD]
Line_58 $$ retour = false --> Line_100 $$ retour = true [FD]
Line_90 $$ retour = true --> Line_100 $$ retour = true [FD]
Line_3 $$ String codeerr --> Line_105 $$ this.UpdateEnCours(codeerr, "m", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "") [FD]
Line_43 $$ codeerr = resultat.getString("incref_err_numer") --> Line_105 $$ this.UpdateEnCours(codeerr, "m", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "") [FD]
Line_61 $$ codeerr = resultat.getString("incref_err_numer") --> Line_105 $$ this.UpdateEnCours(codeerr, "m", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "") [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_105 $$ this.UpdateEnCours(codeerr, "m", niveau, acgtools_core.AcgIO.RetourneDate(datebloc), message, "") [FD]
Line_3 $$ String codeerr --> Line_107 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_43 $$ codeerr = resultat.getString("incref_err_numer") --> Line_107 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_61 $$ codeerr = resultat.getString("incref_err_numer") --> Line_107 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_6 $$ int etat --> Line_107 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_27 $$ etat = this.ChargerEtatServeur(idbloc, datebloc) --> Line_107 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_2 $$ protected Boolean lancerincident(long idbloc, String Etatbloc, java.util.GregorianCalendar datebloc, long idServeur, String niveau, String message) --> Line_107 $$ this.usermail(codeerr, etat, message, acgtools_core.AcgIO.RetourneDate(datebloc)) [FD]
Line_4 $$ Boolean retour = false --> Line_110 $$ retour = true [FD]
Line_19 $$ retour = false --> Line_110 $$ retour = true [FD]
Line_55 $$ retour = true --> Line_110 $$ retour = true [FD]
Line_58 $$ retour = false --> Line_110 $$ retour = true [FD]
Line_90 $$ retour = true --> Line_110 $$ retour = true [FD]
Line_100 $$ retour = true --> Line_110 $$ retour = true [FD]
Line_77 $$ if (resultat.next()) --> Line_115 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Problème lors de la lecture de l'état de l'incident.") [CD]
Line_77 $$ if (resultat.next()) --> Line_116 $$ retour = false [CD]
Line_4 $$ Boolean retour = false --> Line_116 $$ retour = false [FD]
Line_19 $$ retour = false --> Line_116 $$ retour = false [FD]
Line_55 $$ retour = true --> Line_116 $$ retour = false [FD]
Line_58 $$ retour = false --> Line_116 $$ retour = false [FD]
Line_90 $$ retour = true --> Line_116 $$ retour = false [FD]
Line_100 $$ retour = true --> Line_116 $$ retour = false [FD]
Line_110 $$ retour = true --> Line_116 $$ retour = false [FD]
Line_28 $$ if (etat != 2) --> Line_120 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Systeme en maintenance, pas de remontée d'incidents.") [CD]
Line_28 $$ if (etat != 2) --> Line_121 $$ retour = false [CD]
Line_4 $$ Boolean retour = false --> Line_121 $$ retour = false [FD]
Line_19 $$ retour = false --> Line_121 $$ retour = false [FD]
Line_55 $$ retour = true --> Line_121 $$ retour = false [FD]
Line_58 $$ retour = false --> Line_121 $$ retour = false [FD]
Line_90 $$ retour = true --> Line_121 $$ retour = false [FD]
Line_100 $$ retour = true --> Line_121 $$ retour = false [FD]
Line_110 $$ retour = true --> Line_121 $$ retour = false [FD]
Line_116 $$ retour = false --> Line_121 $$ retour = false [FD]
Line_4 $$ Boolean retour = false --> Line_128 $$ retour = false [FD]
Line_19 $$ retour = false --> Line_128 $$ retour = false [FD]
Line_55 $$ retour = true --> Line_128 $$ retour = false [FD]
Line_58 $$ retour = false --> Line_128 $$ retour = false [FD]
Line_90 $$ retour = true --> Line_128 $$ retour = false [FD]
Line_100 $$ retour = true --> Line_128 $$ retour = false [FD]
Line_110 $$ retour = true --> Line_128 $$ retour = false [FD]
Line_116 $$ retour = false --> Line_128 $$ retour = false [FD]
Line_121 $$ retour = false --> Line_128 $$ retour = false [FD]
Line_10 $$ String RequeteSQL = "" --> Line_134 $$ acgtools_core.AcgIO.SortieLog(RequeteSQL) [FD]
Line_31 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job ='" + idbloc + "' " + "AND incref_err_numer NOT IN " + "(SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_err_etat='c') " + "AND incref_err_numer NOT IN " + "(SELECT incenc_err_numer FROM tbl_incident_encours " + "WHERE incenc_err_etat='c') ;" --> Line_134 $$ acgtools_core.AcgIO.SortieLog(RequeteSQL) [FD]
Line_36 $$ RequeteSQL = "INSERT INTO tbl_incident_ref " + "(incref_cde_job,incref_err_date,incref_err_etat,incref_niv_crimd,incref_err_msg,incref_err_srvnm)" + "VALUES ('" + idbloc + "','" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','" + Etatbloc + "','" + niveau + "','" + message + "','" + idServeur + "');" --> Line_134 $$ acgtools_core.AcgIO.SortieLog(RequeteSQL) [FD]
Line_39 $$ RequeteSQL = "SELECT incref_err_numer FROM tbl_incident_ref " + "WHERE incref_cde_job = '" + idbloc + "' " + "AND incref_err_srvnm = '" + idServeur + "' " + "AND incref_err_date = '" + acgtools_core.AcgIO.RetourneDate(datebloc) + "';" --> Line_134 $$ acgtools_core.AcgIO.SortieLog(RequeteSQL) [FD]
Line_45 $$ RequeteSQL = "INSERT INTO tbl_incident_encours" + "(incenc_err_numer, incenc_err_etat, incenc_esc_etap, " + "incenc_err_date, incenc_typ_user,incenc_cde_user,incenc_err_msg,incenc_niv_crimd) " + "VALUES ('" + codeerr + "','" + Etatbloc + "',0, " + "'" + acgtools_core.AcgIO.RetourneDate(datebloc) + "','n',0,'" + message + "','" + niveau + "');" --> Line_134 $$ acgtools_core.AcgIO.SortieLog(RequeteSQL) [FD]
Line_63 $$ RequeteSQL = "SELECT incenc_err_etat FROM tbl_incident_encours " + "WHERE incenc_err_numer='" + codeerr + "';" --> Line_134 $$ acgtools_core.AcgIO.SortieLog(RequeteSQL) [FD]
Line_82 $$ RequeteSQL = "UPDATE tbl_incident_ref SET incref_err_etat='c'" + "WHERE incref_err_numer='" + codeerr + "';" --> Line_134 $$ acgtools_core.AcgIO.SortieLog(RequeteSQL) [FD]
Line_4 $$ Boolean retour = false --> Line_135 $$ retour = false [FD]
Line_19 $$ retour = false --> Line_135 $$ retour = false [FD]
Line_55 $$ retour = true --> Line_135 $$ retour = false [FD]
Line_58 $$ retour = false --> Line_135 $$ retour = false [FD]
Line_90 $$ retour = true --> Line_135 $$ retour = false [FD]
Line_100 $$ retour = true --> Line_135 $$ retour = false [FD]
Line_110 $$ retour = true --> Line_135 $$ retour = false [FD]
Line_116 $$ retour = false --> Line_135 $$ retour = false [FD]
Line_121 $$ retour = false --> Line_135 $$ retour = false [FD]
Line_128 $$ retour = false --> Line_135 $$ retour = false [FD]
Line_8 $$ Statement statement = null --> Line_138 $$ if (statement != null) [FD]
Line_29 $$ statement = con.createStatement() --> Line_138 $$ if (statement != null) [FD]
Line_138 $$ if (statement != null) --> Line_139 $$ statement.close() [CD]
Line_8 $$ Statement statement = null --> Line_139 $$ statement.close() [FD]
Line_29 $$ statement = con.createStatement() --> Line_139 $$ statement.close() [FD]
Line_141 $$ if (retour) --> Line_142 $$ con.commit() [CD]
Line_141 $$ if (retour) --> Line_143 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Création de l'incident : succès") [CD]
Line_141 $$ if (retour) --> Line_145 $$ con.rollback() [CD]
Line_141 $$ if (retour) --> Line_146 $$ acgtools_core.AcgIO.SortieLog(new Date() + " - Création de l'incident : echec") [CD]
Line_148 $$ if (con != null) --> Line_149 $$ con.close() [CD]
