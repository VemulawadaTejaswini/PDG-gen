Line_2 $$ private int addPollToDB(DataSource database) --> Line_3 $$ int pollid = -2 [CD]
Line_2 $$ private int addPollToDB(DataSource database) --> Line_4 $$ Connection con = null [CD]
Line_4 $$ Connection con = null --> Line_6 $$ con = database.getConnection() [FD]
Line_2 $$ private int addPollToDB(DataSource database) --> Line_6 $$ con = database.getConnection() [FD]
Line_4 $$ Connection con = null --> Line_7 $$ con.setAutoCommit(false) [FD]
Line_6 $$ con = database.getConnection() --> Line_7 $$ con.setAutoCommit(false) [FD]
Line_4 $$ Connection con = null --> Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) [FD]
Line_6 $$ con = database.getConnection() --> Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) [FD]
Line_8 $$ String add = "insert into polls" + " values( ?, ?, ?, ?)" --> Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_10 $$ prepStatement.setString(1, selectedCourse.getAdmin()) [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_11 $$ prepStatement.setString(2, selectedCourse.getCourseId()) [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_12 $$ prepStatement.setString(3, getTitle()) [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_13 $$ prepStatement.setInt(4, 0) [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_14 $$ prepStatement.executeUpdate() [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_16 $$ prepStatement = con.prepareStatement(findNewID) [FD]
Line_4 $$ Connection con = null --> Line_16 $$ prepStatement = con.prepareStatement(findNewID) [FD]
Line_6 $$ con = database.getConnection() --> Line_16 $$ prepStatement = con.prepareStatement(findNewID) [FD]
Line_15 $$ String findNewID = "select max(pollid) from polls" --> Line_16 $$ prepStatement = con.prepareStatement(findNewID) [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_17 $$ ResultSet newID = prepStatement.executeQuery() [FD]
Line_16 $$ prepStatement = con.prepareStatement(findNewID) --> Line_17 $$ ResultSet newID = prepStatement.executeQuery() [FD]
Line_3 $$ int pollid = -2 --> Line_18 $$ pollid = -2 [FD]
Line_17 $$ ResultSet newID = prepStatement.executeQuery() --> Line_19 $$ while (newID.next()) [FD]
Line_19 $$ while (newID.next()) --> Line_20 $$ pollid = newID.getInt(1) [CD]
Line_3 $$ int pollid = -2 --> Line_20 $$ pollid = newID.getInt(1) [FD]
Line_18 $$ pollid = -2 --> Line_20 $$ pollid = newID.getInt(1) [FD]
Line_17 $$ ResultSet newID = prepStatement.executeQuery() --> Line_20 $$ pollid = newID.getInt(1) [FD]
Line_20 $$ pollid = newID.getInt(1) --> Line_22 $$ if (pollid == -2) [FD]
Line_3 $$ int pollid = -2 --> Line_22 $$ if (pollid == -2) [FD]
Line_18 $$ pollid = -2 --> Line_22 $$ if (pollid == -2) [FD]
Line_22 $$ if (pollid == -2) --> Line_23 $$ this.sqlError = true [CD]
Line_27 $$ for (int i = 0; i < 4; i++) --> Line_28 $$ String insertOption = "insert into polloptions values ( ?, ?, ? )" [CD]
Line_27 $$ for (int i = 0; i < 4; i++) --> Line_29 $$ prepStatement = con.prepareStatement(insertOption) [CD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_29 $$ prepStatement = con.prepareStatement(insertOption) [FD]
Line_16 $$ prepStatement = con.prepareStatement(findNewID) --> Line_29 $$ prepStatement = con.prepareStatement(insertOption) [FD]
Line_4 $$ Connection con = null --> Line_29 $$ prepStatement = con.prepareStatement(insertOption) [FD]
Line_6 $$ con = database.getConnection() --> Line_29 $$ prepStatement = con.prepareStatement(insertOption) [FD]
Line_28 $$ String insertOption = "insert into polloptions values ( ?, ?, ? )" --> Line_29 $$ prepStatement = con.prepareStatement(insertOption) [FD]
Line_27 $$ for (int i = 0; i < 4; i++) --> Line_30 $$ prepStatement.setString(1, options[i]) [CD]
Line_29 $$ prepStatement = con.prepareStatement(insertOption) --> Line_30 $$ prepStatement.setString(1, options[i]) [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_30 $$ prepStatement.setString(1, options[i]) [FD]
Line_16 $$ prepStatement = con.prepareStatement(findNewID) --> Line_30 $$ prepStatement.setString(1, options[i]) [FD]
Line_27 $$ for (int i = 0; i < 4; i++) --> Line_31 $$ prepStatement.setInt(2, 0) [CD]
Line_29 $$ prepStatement = con.prepareStatement(insertOption) --> Line_31 $$ prepStatement.setInt(2, 0) [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_31 $$ prepStatement.setInt(2, 0) [FD]
Line_16 $$ prepStatement = con.prepareStatement(findNewID) --> Line_31 $$ prepStatement.setInt(2, 0) [FD]
Line_27 $$ for (int i = 0; i < 4; i++) --> Line_32 $$ prepStatement.setInt(3, pollid) [CD]
Line_29 $$ prepStatement = con.prepareStatement(insertOption) --> Line_32 $$ prepStatement.setInt(3, pollid) [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_32 $$ prepStatement.setInt(3, pollid) [FD]
Line_16 $$ prepStatement = con.prepareStatement(findNewID) --> Line_32 $$ prepStatement.setInt(3, pollid) [FD]
Line_20 $$ pollid = newID.getInt(1) --> Line_32 $$ prepStatement.setInt(3, pollid) [FD]
Line_3 $$ int pollid = -2 --> Line_32 $$ prepStatement.setInt(3, pollid) [FD]
Line_18 $$ pollid = -2 --> Line_32 $$ prepStatement.setInt(3, pollid) [FD]
Line_27 $$ for (int i = 0; i < 4; i++) --> Line_33 $$ prepStatement.executeUpdate() [CD]
Line_29 $$ prepStatement = con.prepareStatement(insertOption) --> Line_33 $$ prepStatement.executeUpdate() [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_33 $$ prepStatement.executeUpdate() [FD]
Line_16 $$ prepStatement = con.prepareStatement(findNewID) --> Line_33 $$ prepStatement.executeUpdate() [FD]
Line_29 $$ prepStatement = con.prepareStatement(insertOption) --> Line_35 $$ prepStatement.close() [FD]
Line_9 $$ PreparedStatement prepStatement = con.prepareStatement(add) --> Line_35 $$ prepStatement.close() [FD]
Line_16 $$ prepStatement = con.prepareStatement(findNewID) --> Line_35 $$ prepStatement.close() [FD]
Line_4 $$ Connection con = null --> Line_36 $$ con.commit() [FD]
Line_6 $$ con = database.getConnection() --> Line_36 $$ con.commit() [FD]
Line_4 $$ Connection con = null --> Line_40 $$ if (con != null) [FD]
Line_6 $$ con = database.getConnection() --> Line_40 $$ if (con != null) [FD]
Line_4 $$ Connection con = null --> Line_41 $$ con.rollback() [FD]
Line_6 $$ con = database.getConnection() --> Line_41 $$ con.rollback() [FD]
Line_4 $$ Connection con = null --> Line_50 $$ if (con != null) [FD]
Line_6 $$ con = database.getConnection() --> Line_50 $$ if (con != null) [FD]
Line_4 $$ Connection con = null --> Line_51 $$ con.close() [FD]
Line_6 $$ con = database.getConnection() --> Line_51 $$ con.close() [FD]
Line_2 $$ private int addPollToDB(DataSource database) --> Line_55 $$ return pollid [CD]
