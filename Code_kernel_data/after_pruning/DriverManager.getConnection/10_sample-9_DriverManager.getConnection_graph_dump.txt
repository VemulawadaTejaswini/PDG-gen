Line_2 $$ public void lockPatchTable(String database) --> Line_3 $$ Connection conn = DriverManager.getConnection("jdbc:hsqldb:mem:" + database, "sa", "") [CD]
Line_2 $$ public void lockPatchTable(String database) --> Line_4 $$ PreparedStatement stmt = conn.prepareStatement("UPDATE patches SET patch_in_progress = 'T' WHERE patch_level in ( SELECT MAX(patch_level) FROM patches WHERE system_name = ?)") [CD]
Line_3 $$ Connection conn = DriverManager.getConnection("jdbc:hsqldb:mem:" + database, "sa", "") --> Line_4 $$ PreparedStatement stmt = conn.prepareStatement("UPDATE patches SET patch_in_progress = 'T' WHERE patch_level in ( SELECT MAX(patch_level) FROM patches WHERE system_name = ?)") [FD]
Line_2 $$ public void lockPatchTable(String database) --> Line_5 $$ stmt.setString(1, database) [CD]
Line_4 $$ PreparedStatement stmt = conn.prepareStatement("UPDATE patches SET patch_in_progress = 'T' WHERE patch_level in ( SELECT MAX(patch_level) FROM patches WHERE system_name = ?)") --> Line_5 $$ stmt.setString(1, database) [FD]
Line_2 $$ public void lockPatchTable(String database) --> Line_6 $$ int rowCount = stmt.executeUpdate() [CD]
Line_4 $$ PreparedStatement stmt = conn.prepareStatement("UPDATE patches SET patch_in_progress = 'T' WHERE patch_level in ( SELECT MAX(patch_level) FROM patches WHERE system_name = ?)") --> Line_6 $$ int rowCount = stmt.executeUpdate() [FD]
Line_2 $$ public void lockPatchTable(String database) --> Line_7 $$ assertEquals(1, rowCount) [CD]
Line_6 $$ int rowCount = stmt.executeUpdate() --> Line_7 $$ assertEquals(1, rowCount) [FD]
Line_2 $$ public void lockPatchTable(String database) --> Line_8 $$ SqlUtil.close(conn, stmt, null) [CD]
Line_3 $$ Connection conn = DriverManager.getConnection("jdbc:hsqldb:mem:" + database, "sa", "") --> Line_8 $$ SqlUtil.close(conn, stmt, null) [FD]
Line_4 $$ PreparedStatement stmt = conn.prepareStatement("UPDATE patches SET patch_in_progress = 'T' WHERE patch_level in ( SELECT MAX(patch_level) FROM patches WHERE system_name = ?)") --> Line_8 $$ SqlUtil.close(conn, stmt, null) [FD]
