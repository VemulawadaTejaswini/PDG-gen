Line_2 $$ public int download() --> Line_3 $$ FTPClient client = null [CD]
Line_2 $$ public int download() --> Line_4 $$ URL url = null [CD]
Line_3 $$ FTPClient client = null --> Line_6 $$ client = new FTPClient() [FD]
Line_4 $$ URL url = null --> Line_7 $$ url = new URL(ratingsUrl) [FD]
Line_3 $$ FTPClient client = null --> Line_9 $$ client.connect(url.getHost()) [FD]
Line_6 $$ client = new FTPClient() --> Line_9 $$ client.connect(url.getHost()) [FD]
Line_4 $$ URL url = null --> Line_9 $$ client.connect(url.getHost()) [FD]
Line_7 $$ url = new URL(ratingsUrl) --> Line_9 $$ client.connect(url.getHost()) [FD]
Line_3 $$ FTPClient client = null --> Line_10 $$ int reply = client.getReplyCode() [FD]
Line_6 $$ client = new FTPClient() --> Line_10 $$ int reply = client.getReplyCode() [FD]
Line_10 $$ int reply = client.getReplyCode() --> Line_11 $$ if (!FTPReply.isPositiveCompletion(reply)) [FD]
Line_11 $$ if (!FTPReply.isPositiveCompletion(reply)) --> Line_12 $$ log.error("Connection to " + url + " refused") [CD]
Line_11 $$ if (!FTPReply.isPositiveCompletion(reply)) --> Line_13 $$ return RESULT_CONNECTION_REFUSED [CD]
Line_3 $$ FTPClient client = null --> Line_16 $$ client.login(getUserName(), getPassword()) [FD]
Line_6 $$ client = new FTPClient() --> Line_16 $$ client.login(getUserName(), getPassword()) [FD]
Line_3 $$ FTPClient client = null --> Line_17 $$ client.changeWorkingDirectory(url.getPath()) [FD]
Line_6 $$ client = new FTPClient() --> Line_17 $$ client.changeWorkingDirectory(url.getPath()) [FD]
Line_4 $$ URL url = null --> Line_17 $$ client.changeWorkingDirectory(url.getPath()) [FD]
Line_7 $$ url = new URL(ratingsUrl) --> Line_17 $$ client.changeWorkingDirectory(url.getPath()) [FD]
Line_3 $$ FTPClient client = null --> Line_18 $$ FTPFile[] files = client.listFiles(url.getPath()) [FD]
Line_6 $$ client = new FTPClient() --> Line_18 $$ FTPFile[] files = client.listFiles(url.getPath()) [FD]
Line_4 $$ URL url = null --> Line_18 $$ FTPFile[] files = client.listFiles(url.getPath()) [FD]
Line_7 $$ url = new URL(ratingsUrl) --> Line_18 $$ FTPFile[] files = client.listFiles(url.getPath()) [FD]
Line_22 $$ File local = new File(getOutputFile()) --> Line_23 $$ if (local.exists()) [FD]
Line_23 $$ if (local.exists()) --> Line_24 $$ if ((local.lastModified() == remote.getTimestamp().getTimeInMillis())) [CD]
Line_22 $$ File local = new File(getOutputFile()) --> Line_24 $$ if ((local.lastModified() == remote.getTimestamp().getTimeInMillis())) [FD]
Line_20 $$ FTPFile remote = files[0] --> Line_24 $$ if ((local.lastModified() == remote.getTimestamp().getTimeInMillis())) [FD]
Line_24 $$ if ((local.lastModified() == remote.getTimestamp().getTimeInMillis())) --> Line_25 $$ log.debug("File " + local.getAbsolutePath() + " is not changed on the server") [CD]
Line_22 $$ File local = new File(getOutputFile()) --> Line_25 $$ log.debug("File " + local.getAbsolutePath() + " is not changed on the server") [FD]
Line_24 $$ if ((local.lastModified() == remote.getTimestamp().getTimeInMillis())) --> Line_26 $$ return RESULT_NO_NEW_FILE [CD]
Line_3 $$ FTPClient client = null --> Line_30 $$ client.mode(FTPClient.BINARY_FILE_TYPE) [FD]
Line_6 $$ client = new FTPClient() --> Line_30 $$ client.mode(FTPClient.BINARY_FILE_TYPE) [FD]
Line_3 $$ FTPClient client = null --> Line_31 $$ client.setFileType(FTPClient.BINARY_FILE_TYPE) [FD]
Line_6 $$ client = new FTPClient() --> Line_31 $$ client.setFileType(FTPClient.BINARY_FILE_TYPE) [FD]
Line_3 $$ FTPClient client = null --> Line_33 $$ boolean result = client.retrieveFile(url.getPath(), fos) [FD]
Line_6 $$ client = new FTPClient() --> Line_33 $$ boolean result = client.retrieveFile(url.getPath(), fos) [FD]
Line_32 $$ OutputStream fos = new FileOutputStream(local) --> Line_33 $$ boolean result = client.retrieveFile(url.getPath(), fos) [FD]
Line_4 $$ URL url = null --> Line_33 $$ boolean result = client.retrieveFile(url.getPath(), fos) [FD]
Line_7 $$ url = new URL(ratingsUrl) --> Line_33 $$ boolean result = client.retrieveFile(url.getPath(), fos) [FD]
Line_32 $$ OutputStream fos = new FileOutputStream(local) --> Line_35 $$ fos.flush() [FD]
Line_32 $$ OutputStream fos = new FileOutputStream(local) --> Line_36 $$ fos.close() [FD]
Line_22 $$ File local = new File(getOutputFile()) --> Line_37 $$ local.setLastModified(remote.getTimestamp().getTimeInMillis()) [FD]
Line_20 $$ FTPFile remote = files[0] --> Line_37 $$ local.setLastModified(remote.getTimestamp().getTimeInMillis()) [FD]
Line_3 $$ FTPClient client = null --> Line_49 $$ if (client != null) [FD]
Line_6 $$ client = new FTPClient() --> Line_49 $$ if (client != null) [FD]
Line_3 $$ FTPClient client = null --> Line_52 $$ client.logout() [FD]
Line_6 $$ client = new FTPClient() --> Line_52 $$ client.logout() [FD]
Line_3 $$ FTPClient client = null --> Line_57 $$ client.disconnect() [FD]
Line_6 $$ client = new FTPClient() --> Line_57 $$ client.disconnect() [FD]
