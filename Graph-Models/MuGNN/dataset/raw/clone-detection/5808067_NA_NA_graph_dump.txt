Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_3 $$ String city = "成都" [CD]
Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_4 $$ if (msg.indexOf("#") != -1) [CD]
Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_4 $$ if (msg.indexOf("#") != -1) [FD]
Line_4 $$ if (msg.indexOf("#") != -1) --> Line_5 $$ city = msg.substring(msg.indexOf("#") + 1) [CD]
Line_3 $$ String city = "成都" --> Line_5 $$ city = msg.substring(msg.indexOf("#") + 1) [FD]
Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_5 $$ city = msg.substring(msg.indexOf("#") + 1) [FD]
Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_7 $$ String url = "http://webservice.webxml.com.cn/WebServices/WeatherWS.asmx/getWeather?theCityCode= [CD]
Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_8 $$ url = url.replace(" [CD]
Line_7 $$ String url = "http://webservice.webxml.com.cn/WebServices/WeatherWS.asmx/getWeather?theCityCode= --> Line_8 $$ url = url.replace(" [FD]
Line_3 $$ String city = "成都" --> Line_8 $$ url = url.replace(" [FD]
Line_5 $$ city = msg.substring(msg.indexOf("#") + 1) --> Line_8 $$ url = url.replace(" [FD]
Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_9 $$ HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection() [CD]
Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_10 $$ if (conn.getResponseCode() == 200) [CD]
Line_9 $$ HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection() --> Line_10 $$ if (conn.getResponseCode() == 200) [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_11 $$ SAXBuilder builder = new SAXBuilder() [CD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_12 $$ Document doc = builder.build(conn.getInputStream()) [CD]
Line_11 $$ SAXBuilder builder = new SAXBuilder() --> Line_12 $$ Document doc = builder.build(conn.getInputStream()) [FD]
Line_9 $$ HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection() --> Line_12 $$ Document doc = builder.build(conn.getInputStream()) [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_13 $$ List strings = doc.getRootElement().getChildren() [CD]
Line_12 $$ Document doc = builder.build(conn.getInputStream()) --> Line_13 $$ List strings = doc.getRootElement().getChildren() [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_14 $$ String[] sugguestions = getText(strings.get(6)).split("\n") [CD]
Line_13 $$ List strings = doc.getRootElement().getChildren() --> Line_14 $$ String[] sugguestions = getText(strings.get(6)).split("\n") [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_15 $$ StringBuffer buffer = new StringBuffer() [CD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_16 $$ buffer.append("欢迎使用MapleSMS的天气服务！\n") [CD]
Line_15 $$ StringBuffer buffer = new StringBuffer() --> Line_16 $$ buffer.append("欢迎使用MapleSMS的天气服务！\n") [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_17 $$ buffer.append("你查询的是 " + getText(strings.get(1)) + "的天气。\n") [CD]
Line_15 $$ StringBuffer buffer = new StringBuffer() --> Line_17 $$ buffer.append("你查询的是 " + getText(strings.get(1)) + "的天气。\n") [FD]
Line_13 $$ List strings = doc.getRootElement().getChildren() --> Line_17 $$ buffer.append("你查询的是 " + getText(strings.get(1)) + "的天气。\n") [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_18 $$ buffer.append(getText(strings.get(4)) + "。\n") [CD]
Line_15 $$ StringBuffer buffer = new StringBuffer() --> Line_18 $$ buffer.append(getText(strings.get(4)) + "。\n") [FD]
Line_13 $$ List strings = doc.getRootElement().getChildren() --> Line_18 $$ buffer.append(getText(strings.get(4)) + "。\n") [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_19 $$ buffer.append(getText(strings.get(5)) + "。\n") [CD]
Line_15 $$ StringBuffer buffer = new StringBuffer() --> Line_19 $$ buffer.append(getText(strings.get(5)) + "。\n") [FD]
Line_13 $$ List strings = doc.getRootElement().getChildren() --> Line_19 $$ buffer.append(getText(strings.get(5)) + "。\n") [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_20 $$ buffer.append(sugguestions[0] + "\n") [CD]
Line_15 $$ StringBuffer buffer = new StringBuffer() --> Line_20 $$ buffer.append(sugguestions[0] + "\n") [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_21 $$ buffer.append(sugguestions[1] + "\n") [CD]
Line_15 $$ StringBuffer buffer = new StringBuffer() --> Line_21 $$ buffer.append(sugguestions[1] + "\n") [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_22 $$ buffer.append(sugguestions[7] + "\n") [CD]
Line_15 $$ StringBuffer buffer = new StringBuffer() --> Line_22 $$ buffer.append(sugguestions[7] + "\n") [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_23 $$ buffer.append("感谢你使用MapleSMS的天气服务！祝你愉快！") [CD]
Line_15 $$ StringBuffer buffer = new StringBuffer() --> Line_23 $$ buffer.append("感谢你使用MapleSMS的天气服务！祝你愉快！") [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_24 $$ gateway.sendSMS(uri, buffer.toString()) [CD]
Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_24 $$ gateway.sendSMS(uri, buffer.toString()) [FD]
Line_15 $$ StringBuffer buffer = new StringBuffer() --> Line_24 $$ gateway.sendSMS(uri, buffer.toString()) [FD]
Line_10 $$ if (conn.getResponseCode() == 200) --> Line_26 $$ gateway.sendSMS(uri, "对不起，你输入的城市格式有误，请检查后再试~") [CD]
Line_2 $$ public void action(String msg, String uri, Gateway gateway) throws Exception --> Line_26 $$ gateway.sendSMS(uri, "对不起，你输入的城市格式有误，请检查后再试~") [FD]
