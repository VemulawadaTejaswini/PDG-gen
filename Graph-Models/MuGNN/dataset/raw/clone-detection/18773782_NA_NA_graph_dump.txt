Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_3 $$ Node fileNode = contentNode.getNode() [CD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_3 $$ Node fileNode = contentNode.getNode() [FD]
Line_3 $$ Node fileNode = contentNode.getNode() --> Line_5 $$ Node res = fileNode.getNode("jcr:content") [FD]
Line_5 $$ Node res = fileNode.getNode("jcr:content") --> Line_6 $$ if (checkLastModified(res, req.getServletRequset(), resp.getServletResponse())) [FD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_6 $$ if (checkLastModified(res, req.getServletRequset(), resp.getServletResponse())) [FD]
Line_6 $$ if (checkLastModified(res, req.getServletRequset(), resp.getServletResponse())) --> Line_7 $$ return [CD]
Line_5 $$ Node res = fileNode.getNode("jcr:content") --> Line_9 $$ Property data = res.getProperty("jcr:data") [FD]
Line_9 $$ Property data = res.getProperty("jcr:data") --> Line_10 $$ InputStream is = data.getBinary().getStream() [FD]
Line_9 $$ Property data = res.getProperty("jcr:data") --> Line_11 $$ int contentLength = (int) data.getBinary().getSize() [FD]
Line_5 $$ Node res = fileNode.getNode("jcr:content") --> Line_13 $$ if (res.hasProperty("jcr:mimeType")) [FD]
Line_13 $$ if (res.hasProperty("jcr:mimeType")) --> Line_14 $$ mime = res.getProperty("jcr:mimeType").getString() [CD]
Line_12 $$ String mime --> Line_14 $$ mime = res.getProperty("jcr:mimeType").getString() [FD]
Line_5 $$ Node res = fileNode.getNode("jcr:content") --> Line_14 $$ mime = res.getProperty("jcr:mimeType").getString() [FD]
Line_13 $$ if (res.hasProperty("jcr:mimeType")) --> Line_16 $$ mime = serverInfo.getSerlvetContext().getMimeType(fileNode.getName()) [CD]
Line_12 $$ String mime --> Line_16 $$ mime = serverInfo.getSerlvetContext().getMimeType(fileNode.getName()) [FD]
Line_14 $$ mime = res.getProperty("jcr:mimeType").getString() --> Line_16 $$ mime = serverInfo.getSerlvetContext().getMimeType(fileNode.getName()) [FD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_16 $$ mime = serverInfo.getSerlvetContext().getMimeType(fileNode.getName()) [FD]
Line_3 $$ Node fileNode = contentNode.getNode() --> Line_16 $$ mime = serverInfo.getSerlvetContext().getMimeType(fileNode.getName()) [FD]
Line_12 $$ String mime --> Line_18 $$ if (mime != null && mime.startsWith("image")) [FD]
Line_14 $$ mime = res.getProperty("jcr:mimeType").getString() --> Line_18 $$ if (mime != null && mime.startsWith("image")) [FD]
Line_16 $$ mime = serverInfo.getSerlvetContext().getMimeType(fileNode.getName()) --> Line_18 $$ if (mime != null && mime.startsWith("image")) [FD]
Line_18 $$ if (mime != null && mime.startsWith("image")) --> Line_19 $$ int w = req.getInt("w", 0) [CD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_19 $$ int w = req.getInt("w", 0) [FD]
Line_18 $$ if (mime != null && mime.startsWith("image")) --> Line_20 $$ int h = req.getInt("h", 0) [CD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_20 $$ int h = req.getInt("h", 0) [FD]
Line_18 $$ if (mime != null && mime.startsWith("image")) --> Line_21 $$ String fmt = req.get("fmt") [CD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_21 $$ String fmt = req.get("fmt") [FD]
Line_18 $$ if (mime != null && mime.startsWith("image")) --> Line_22 $$ if (w != 0 || h != 0 || fmt != null) [CD]
Line_22 $$ if (w != 0 || h != 0 || fmt != null) --> Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) [CD]
Line_10 $$ InputStream is = data.getBinary().getStream() --> Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) [FD]
Line_19 $$ int w = req.getInt("w", 0) --> Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) [FD]
Line_20 $$ int h = req.getInt("h", 0) --> Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) [FD]
Line_21 $$ String fmt = req.get("fmt") --> Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) [FD]
Line_12 $$ String mime --> Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) [FD]
Line_14 $$ mime = res.getProperty("jcr:mimeType").getString() --> Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) [FD]
Line_16 $$ mime = serverInfo.getSerlvetContext().getMimeType(fileNode.getName()) --> Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) [FD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) [FD]
Line_22 $$ if (w != 0 || h != 0 || fmt != null) --> Line_24 $$ imgRes.process(serverInfo) [CD]
Line_23 $$ Resource imgRes = ImageResource.create(is, mime.substring(6), w, h, req.getInt("cut", 0), fmt) --> Line_24 $$ imgRes.process(serverInfo) [FD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_24 $$ imgRes.process(serverInfo) [FD]
Line_22 $$ if (w != 0 || h != 0 || fmt != null) --> Line_25 $$ return [CD]
Line_12 $$ String mime --> Line_28 $$ resp.getServletResponse().setContentType(mime) [FD]
Line_14 $$ mime = res.getProperty("jcr:mimeType").getString() --> Line_28 $$ resp.getServletResponse().setContentType(mime) [FD]
Line_16 $$ mime = serverInfo.getSerlvetContext().getMimeType(fileNode.getName()) --> Line_28 $$ resp.getServletResponse().setContentType(mime) [FD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_28 $$ resp.getServletResponse().setContentType(mime) [FD]
Line_11 $$ int contentLength = (int) data.getBinary().getSize() --> Line_29 $$ resp.getServletResponse().setContentLength(contentLength) [FD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_29 $$ resp.getServletResponse().setContentLength(contentLength) [FD]
Line_2 $$ public void render(IContentNode contentNode, Request req, Response resp, Application app, ServerInfo serverInfo) --> Line_30 $$ OutputStream os = resp.getServletResponse().getOutputStream() [FD]
Line_10 $$ InputStream is = data.getBinary().getStream() --> Line_31 $$ IOUtils.copy(is, os) [FD]
Line_30 $$ OutputStream os = resp.getServletResponse().getOutputStream() --> Line_31 $$ IOUtils.copy(is, os) [FD]
Line_30 $$ OutputStream os = resp.getServletResponse().getOutputStream() --> Line_32 $$ os.flush() [FD]
Line_30 $$ OutputStream os = resp.getServletResponse().getOutputStream() --> Line_33 $$ os.close() [FD]
