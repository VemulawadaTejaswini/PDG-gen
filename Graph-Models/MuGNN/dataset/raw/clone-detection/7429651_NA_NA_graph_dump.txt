Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_3 $$ Connection c = null [CD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_4 $$ Statement s = null [CD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_5 $$ Integer check = context.getValueAsInteger("Total") [CD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_5 $$ Integer check = context.getValueAsInteger("Total") [FD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_6 $$ System.err.println("In BuyWidget.execute()") [CD]
Line_3 $$ Connection c = null --> Line_8 $$ c = context.getConnection() [FD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_8 $$ c = context.getConnection() [FD]
Line_3 $$ Connection c = null --> Line_9 $$ c.setAutoCommit(false) [FD]
Line_8 $$ c = context.getConnection() --> Line_9 $$ c.setAutoCommit(false) [FD]
Line_4 $$ Statement s = null --> Line_10 $$ s = c.createStatement() [FD]
Line_3 $$ Connection c = null --> Line_10 $$ s = c.createStatement() [FD]
Line_8 $$ c = context.getConnection() --> Line_10 $$ s = c.createStatement() [FD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_11 $$ int total = computeCheckoutTotal(context, s) [FD]
Line_4 $$ Statement s = null --> Line_11 $$ int total = computeCheckoutTotal(context, s) [FD]
Line_10 $$ s = c.createStatement() --> Line_11 $$ int total = computeCheckoutTotal(context, s) [FD]
Line_5 $$ Integer check = context.getValueAsInteger("Total") --> Line_12 $$ if (check == null) [FD]
Line_11 $$ int total = computeCheckoutTotal(context, s) --> Line_15 $$ if (check.intValue() != total) [FD]
Line_5 $$ Integer check = context.getValueAsInteger("Total") --> Line_15 $$ if (check.intValue() != total) [FD]
Line_18 $$ StringBuffer q = new StringBuffer("select BIDSTATE.Bid, BIDSTATE.Amount, " + "BIDSTATE.QShipping, BIDSTATE.QInsure " + "from BID, BIDSTATE " + "where  BIDSTATE.Bid = BID.Bid " + "and ( BIDSTATE.BidStatus = 0 " + "or BIDSTATE.BidStatus = 15) " + "and BID.Customer = ") --> Line_19 $$ q.append(context.get("customer")) [FD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_19 $$ q.append(context.get("customer")) [FD]
Line_18 $$ StringBuffer q = new StringBuffer("select BIDSTATE.Bid, BIDSTATE.Amount, " + "BIDSTATE.QShipping, BIDSTATE.QInsure " + "from BID, BIDSTATE " + "where  BIDSTATE.Bid = BID.Bid " + "and ( BIDSTATE.BidStatus = 0 " + "or BIDSTATE.BidStatus = 15) " + "and BID.Customer = ") --> Line_20 $$ q.append(" and bidstate.bidstate =  " + "( select max( bidstate.bidstate) " + "from bidstate " + "where bid = bid.bid) ") [FD]
Line_18 $$ StringBuffer q = new StringBuffer("select BIDSTATE.Bid, BIDSTATE.Amount, " + "BIDSTATE.QShipping, BIDSTATE.QInsure " + "from BID, BIDSTATE " + "where  BIDSTATE.Bid = BID.Bid " + "and ( BIDSTATE.BidStatus = 0 " + "or BIDSTATE.BidStatus = 15) " + "and BID.Customer = ") --> Line_21 $$ System.err.println(q.toString()) [FD]
Line_4 $$ Statement s = null --> Line_22 $$ Contexts rows = new RSContexts(s.executeQuery(q.toString())) [FD]
Line_10 $$ s = c.createStatement() --> Line_22 $$ Contexts rows = new RSContexts(s.executeQuery(q.toString())) [FD]
Line_18 $$ StringBuffer q = new StringBuffer("select BIDSTATE.Bid, BIDSTATE.Amount, " + "BIDSTATE.QShipping, BIDSTATE.QInsure " + "from BID, BIDSTATE " + "where  BIDSTATE.Bid = BID.Bid " + "and ( BIDSTATE.BidStatus = 0 " + "or BIDSTATE.BidStatus = 15) " + "and BID.Customer = ") --> Line_22 $$ Contexts rows = new RSContexts(s.executeQuery(q.toString())) [FD]
Line_22 $$ Contexts rows = new RSContexts(s.executeQuery(q.toString())) --> Line_23 $$ Enumeration e = rows.elements() [FD]
Line_23 $$ Enumeration e = rows.elements() --> Line_24 $$ while (e.hasMoreElements()) [FD]
Line_24 $$ while (e.hasMoreElements()) --> Line_25 $$ Context row = (Context) e.nextElement() [CD]
Line_23 $$ Enumeration e = rows.elements() --> Line_25 $$ Context row = (Context) e.nextElement() [FD]
Line_24 $$ while (e.hasMoreElements()) --> Line_26 $$ row.merge((Map) context) [CD]
Line_25 $$ Context row = (Context) e.nextElement() --> Line_26 $$ row.merge((Map) context) [FD]
Line_24 $$ while (e.hasMoreElements()) --> Line_27 $$ row.put("Username", context.get(ConnectionPool.DBUSERMAGICTOKEN)) [CD]
Line_25 $$ Context row = (Context) e.nextElement() --> Line_27 $$ row.put("Username", context.get(ConnectionPool.DBUSERMAGICTOKEN)) [FD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_27 $$ row.put("Username", context.get(ConnectionPool.DBUSERMAGICTOKEN)) [FD]
Line_24 $$ while (e.hasMoreElements()) --> Line_28 $$ row.put("BidStatus", BidStatus.OFFER) [CD]
Line_25 $$ Context row = (Context) e.nextElement() --> Line_28 $$ row.put("BidStatus", BidStatus.OFFER) [FD]
Line_24 $$ while (e.hasMoreElements()) --> Line_29 $$ s.executeUpdate(bidStateInsert(row)) [CD]
Line_4 $$ Statement s = null --> Line_29 $$ s.executeUpdate(bidStateInsert(row)) [FD]
Line_10 $$ s = c.createStatement() --> Line_29 $$ s.executeUpdate(bidStateInsert(row)) [FD]
Line_25 $$ Context row = (Context) e.nextElement() --> Line_29 $$ s.executeUpdate(bidStateInsert(row)) [FD]
Line_24 $$ while (e.hasMoreElements()) --> Line_30 $$ s.execute(bidPrivateInsert(context, row)) [CD]
Line_4 $$ Statement s = null --> Line_30 $$ s.execute(bidPrivateInsert(context, row)) [FD]
Line_10 $$ s = c.createStatement() --> Line_30 $$ s.execute(bidPrivateInsert(context, row)) [FD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_30 $$ s.execute(bidPrivateInsert(context, row)) [FD]
Line_25 $$ Context row = (Context) e.nextElement() --> Line_30 $$ s.execute(bidPrivateInsert(context, row)) [FD]
Line_3 $$ Connection c = null --> Line_32 $$ c.commit() [FD]
Line_8 $$ c = context.getConnection() --> Line_32 $$ c.commit() [FD]
Line_3 $$ Connection c = null --> Line_34 $$ c.rollback() [FD]
Line_8 $$ c = context.getConnection() --> Line_34 $$ c.rollback() [FD]
Line_4 $$ Statement s = null --> Line_38 $$ if (s != null) [FD]
Line_10 $$ s = c.createStatement() --> Line_38 $$ if (s != null) [FD]
Line_38 $$ if (s != null) --> Line_39 $$ s.close() [CD]
Line_4 $$ Statement s = null --> Line_39 $$ s.close() [FD]
Line_10 $$ s = c.createStatement() --> Line_39 $$ s.close() [FD]
Line_3 $$ Connection c = null --> Line_41 $$ if (c != null) [FD]
Line_8 $$ c = context.getConnection() --> Line_41 $$ if (c != null) [FD]
Line_41 $$ if (c != null) --> Line_42 $$ context.releaseConnection(c) [CD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_42 $$ context.releaseConnection(c) [FD]
Line_3 $$ Connection c = null --> Line_42 $$ context.releaseConnection(c) [FD]
Line_8 $$ c = context.getConnection() --> Line_42 $$ context.releaseConnection(c) [FD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_48 $$ context.put(REDIRECTMAGICTOKEN, "account") [CD]
Line_2 $$ protected void execute(Context context) throws java.lang.Exception --> Line_48 $$ context.put(REDIRECTMAGICTOKEN, "account") [FD]
