Line_2 $$ private void insert() throws SQLException, NamingException --> Line_3 $$ Logger logger = getLogger() [CD]
Line_2 $$ private void insert() throws SQLException, NamingException --> Line_4 $$ if (logger.isDebugEnabled()) [CD]
Line_3 $$ Logger logger = getLogger() --> Line_4 $$ if (logger.isDebugEnabled()) [FD]
Line_4 $$ if (logger.isDebugEnabled()) --> Line_5 $$ logger.debug("enter - " + getClass().getName() + ".insert()") [CD]
Line_3 $$ Logger logger = getLogger() --> Line_5 $$ logger.debug("enter - " + getClass().getName() + ".insert()") [FD]
Line_3 $$ Logger logger = getLogger() --> Line_8 $$ if (logger.isInfoEnabled()) [FD]
Line_8 $$ if (logger.isInfoEnabled()) --> Line_9 $$ logger.info("insert(): Create new sequencer record for " + getName()) [CD]
Line_3 $$ Logger logger = getLogger() --> Line_9 $$ logger.info("insert(): Create new sequencer record for " + getName()) [FD]
Line_15 $$ InitialContext ctx = new InitialContext() --> Line_16 $$ DataSource ds = (DataSource) ctx.lookup(dataSourceName) [FD]
Line_11 $$ Connection conn = null --> Line_17 $$ conn = ds.getConnection() [FD]
Line_16 $$ DataSource ds = (DataSource) ctx.lookup(dataSourceName) --> Line_17 $$ conn = ds.getConnection() [FD]
Line_11 $$ Connection conn = null --> Line_18 $$ conn.setReadOnly(false) [FD]
Line_17 $$ conn = ds.getConnection() --> Line_18 $$ conn.setReadOnly(false) [FD]
Line_12 $$ PreparedStatement stmt = null --> Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) [FD]
Line_11 $$ Connection conn = null --> Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) [FD]
Line_17 $$ conn = ds.getConnection() --> Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) [FD]
Line_12 $$ PreparedStatement stmt = null --> Line_20 $$ stmt.setString(INS_NAME, getName()) [FD]
Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) --> Line_20 $$ stmt.setString(INS_NAME, getName()) [FD]
Line_12 $$ PreparedStatement stmt = null --> Line_21 $$ stmt.setLong(INS_NEXT_KEY, defaultInterval * 2) [FD]
Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) --> Line_21 $$ stmt.setLong(INS_NEXT_KEY, defaultInterval * 2) [FD]
Line_12 $$ PreparedStatement stmt = null --> Line_22 $$ stmt.setLong(INS_INTERVAL, defaultInterval) [FD]
Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) --> Line_22 $$ stmt.setLong(INS_INTERVAL, defaultInterval) [FD]
Line_12 $$ PreparedStatement stmt = null --> Line_23 $$ stmt.setLong(INS_UPDATE, System.currentTimeMillis()) [FD]
Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) --> Line_23 $$ stmt.setLong(INS_UPDATE, System.currentTimeMillis()) [FD]
Line_12 $$ PreparedStatement stmt = null --> Line_25 $$ if (stmt.executeUpdate() != 1) [FD]
Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) --> Line_25 $$ if (stmt.executeUpdate() != 1) [FD]
Line_25 $$ if (stmt.executeUpdate() != 1) --> Line_26 $$ nextId = -1L [CD]
Line_25 $$ if (stmt.executeUpdate() != 1) --> Line_27 $$ logger.warn("insert(): Failed to create sequencer entry for " + getName() + " (no error message)") [CD]
Line_3 $$ Logger logger = getLogger() --> Line_27 $$ logger.warn("insert(): Failed to create sequencer entry for " + getName() + " (no error message)") [FD]
Line_25 $$ if (stmt.executeUpdate() != 1) --> Line_28 $$ if (logger.isInfoEnabled()) [CD]
Line_3 $$ Logger logger = getLogger() --> Line_28 $$ if (logger.isInfoEnabled()) [FD]
Line_28 $$ if (logger.isInfoEnabled()) --> Line_32 $$ logger.info("insert(): First ID will be " + nextId) [CD]
Line_3 $$ Logger logger = getLogger() --> Line_32 $$ logger.info("insert(): First ID will be " + nextId) [FD]
Line_3 $$ Logger logger = getLogger() --> Line_35 $$ logger.warn("insert(): Error inserting row into database, possible concurrency issue: " + e.getMessage()) [FD]
Line_3 $$ Logger logger = getLogger() --> Line_36 $$ if (logger.isDebugEnabled()) [FD]
Line_36 $$ if (logger.isDebugEnabled()) --> Line_37 $$ e.printStackTrace() [CD]
Line_11 $$ Connection conn = null --> Line_41 $$ if (!conn.getAutoCommit()) [FD]
Line_17 $$ conn = ds.getConnection() --> Line_41 $$ if (!conn.getAutoCommit()) [FD]
Line_41 $$ if (!conn.getAutoCommit()) --> Line_42 $$ conn.commit() [CD]
Line_11 $$ Connection conn = null --> Line_42 $$ conn.commit() [FD]
Line_17 $$ conn = ds.getConnection() --> Line_42 $$ conn.commit() [FD]
Line_13 $$ ResultSet rs = null --> Line_45 $$ if (rs != null) [FD]
Line_13 $$ ResultSet rs = null --> Line_47 $$ rs.close() [FD]
Line_12 $$ PreparedStatement stmt = null --> Line_51 $$ if (stmt != null) [FD]
Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) --> Line_51 $$ if (stmt != null) [FD]
Line_12 $$ PreparedStatement stmt = null --> Line_53 $$ stmt.close() [FD]
Line_19 $$ stmt = conn.prepareStatement(INSERT_SEQ) --> Line_53 $$ stmt.close() [FD]
Line_11 $$ Connection conn = null --> Line_57 $$ if (conn != null) [FD]
Line_17 $$ conn = ds.getConnection() --> Line_57 $$ if (conn != null) [FD]
Line_57 $$ if (conn != null) --> Line_58 $$ if (!conn.getAutoCommit()) [CD]
Line_11 $$ Connection conn = null --> Line_58 $$ if (!conn.getAutoCommit()) [FD]
Line_17 $$ conn = ds.getConnection() --> Line_58 $$ if (!conn.getAutoCommit()) [FD]
Line_11 $$ Connection conn = null --> Line_60 $$ conn.rollback() [FD]
Line_17 $$ conn = ds.getConnection() --> Line_60 $$ conn.rollback() [FD]
Line_11 $$ Connection conn = null --> Line_65 $$ conn.close() [FD]
Line_17 $$ conn = ds.getConnection() --> Line_65 $$ conn.close() [FD]
Line_3 $$ Logger logger = getLogger() --> Line_71 $$ if (logger.isDebugEnabled()) [FD]
Line_71 $$ if (logger.isDebugEnabled()) --> Line_72 $$ logger.debug("exit - " + getClass().getName() + ".insert()") [CD]
Line_3 $$ Logger logger = getLogger() --> Line_72 $$ logger.debug("exit - " + getClass().getName() + ".insert()") [FD]
