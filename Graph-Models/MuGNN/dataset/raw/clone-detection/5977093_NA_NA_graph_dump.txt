Line_2 $$ public FileBean create(MimeTypeBean mimeType, SanBean san) throws SQLException --> Line_3 $$ long fileId = 0 [CD]
Line_2 $$ public FileBean create(MimeTypeBean mimeType, SanBean san) throws SQLException --> Line_4 $$ DataSource ds = getDataSource(DEFAULT_DATASOURCE) [CD]
Line_2 $$ public FileBean create(MimeTypeBean mimeType, SanBean san) throws SQLException --> Line_5 $$ Connection conn = ds.getConnection() [CD]
Line_4 $$ DataSource ds = getDataSource(DEFAULT_DATASOURCE) --> Line_5 $$ Connection conn = ds.getConnection() [FD]
Line_5 $$ Connection conn = ds.getConnection() --> Line_7 $$ conn.setAutoCommit(false) [FD]
Line_5 $$ Connection conn = ds.getConnection() --> Line_8 $$ Statement stmt = conn.createStatement() [FD]
Line_8 $$ Statement stmt = conn.createStatement() --> Line_9 $$ stmt.execute(NEXT_FILE_ID) [FD]
Line_8 $$ Statement stmt = conn.createStatement() --> Line_10 $$ ResultSet rs = stmt.getResultSet() [FD]
Line_10 $$ ResultSet rs = stmt.getResultSet() --> Line_11 $$ while (rs.next()) [FD]
Line_11 $$ while (rs.next()) --> Line_12 $$ fileId = rs.getLong(NEXTVAL) [CD]
Line_3 $$ long fileId = 0 --> Line_12 $$ fileId = rs.getLong(NEXTVAL) [FD]
Line_10 $$ ResultSet rs = stmt.getResultSet() --> Line_12 $$ fileId = rs.getLong(NEXTVAL) [FD]
Line_5 $$ Connection conn = ds.getConnection() --> Line_14 $$ PreparedStatement pstmt = conn.prepareStatement(INSERT_FILE) [FD]
Line_14 $$ PreparedStatement pstmt = conn.prepareStatement(INSERT_FILE) --> Line_15 $$ pstmt.setLong(1, fileId) [FD]
Line_12 $$ fileId = rs.getLong(NEXTVAL) --> Line_15 $$ pstmt.setLong(1, fileId) [FD]
Line_3 $$ long fileId = 0 --> Line_15 $$ pstmt.setLong(1, fileId) [FD]
Line_14 $$ PreparedStatement pstmt = conn.prepareStatement(INSERT_FILE) --> Line_16 $$ pstmt.setLong(2, mimeType.getId()) [FD]
Line_2 $$ public FileBean create(MimeTypeBean mimeType, SanBean san) throws SQLException --> Line_16 $$ pstmt.setLong(2, mimeType.getId()) [FD]
Line_14 $$ PreparedStatement pstmt = conn.prepareStatement(INSERT_FILE) --> Line_17 $$ pstmt.setLong(3, san.getId()) [FD]
Line_2 $$ public FileBean create(MimeTypeBean mimeType, SanBean san) throws SQLException --> Line_17 $$ pstmt.setLong(3, san.getId()) [FD]
Line_14 $$ PreparedStatement pstmt = conn.prepareStatement(INSERT_FILE) --> Line_18 $$ pstmt.setLong(4, WORKFLOW_ATTENTE_VALIDATION) [FD]
Line_14 $$ PreparedStatement pstmt = conn.prepareStatement(INSERT_FILE) --> Line_19 $$ int nbrow = pstmt.executeUpdate() [FD]
Line_19 $$ int nbrow = pstmt.executeUpdate() --> Line_20 $$ if (nbrow == 0) [FD]
Line_5 $$ Connection conn = ds.getConnection() --> Line_23 $$ conn.commit() [FD]
Line_5 $$ Connection conn = ds.getConnection() --> Line_24 $$ closeRessources(conn, pstmt) [FD]
Line_14 $$ PreparedStatement pstmt = conn.prepareStatement(INSERT_FILE) --> Line_24 $$ closeRessources(conn, pstmt) [FD]
Line_5 $$ Connection conn = ds.getConnection() --> Line_27 $$ conn.rollback() [FD]
Line_2 $$ public FileBean create(MimeTypeBean mimeType, SanBean san) throws SQLException --> Line_30 $$ FileBean fileBean = new FileBean() [CD]
Line_2 $$ public FileBean create(MimeTypeBean mimeType, SanBean san) throws SQLException --> Line_31 $$ return fileBean [CD]
