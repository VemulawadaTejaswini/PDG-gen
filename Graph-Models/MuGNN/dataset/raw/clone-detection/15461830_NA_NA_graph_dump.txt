Line_2 $$ private void update() --> Line_3 $$ if (VERSION.contains("dev")) [CD]
Line_2 $$ private void update() --> Line_4 $$ System.out.println(updateURL_s) [CD]
Line_6 $$ URL updateURL = new URL(updateURL_s) --> Line_7 $$ InputStream uis = updateURL.openStream() [FD]
Line_9 $$ BufferedReader ubr = new BufferedReader(uisr) --> Line_10 $$ String header = ubr.readLine() [FD]
Line_10 $$ String header = ubr.readLine() --> Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) [FD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_12 $$ String cver = ubr.readLine() [CD]
Line_9 $$ BufferedReader ubr = new BufferedReader(uisr) --> Line_12 $$ String cver = ubr.readLine() [FD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_13 $$ String cdl = ubr.readLine() [CD]
Line_9 $$ BufferedReader ubr = new BufferedReader(uisr) --> Line_13 $$ String cdl = ubr.readLine() [FD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_14 $$ if (!cver.equals(VERSION)) [CD]
Line_12 $$ String cver = ubr.readLine() --> Line_14 $$ if (!cver.equals(VERSION)) [FD]
Line_14 $$ if (!cver.equals(VERSION)) --> Line_15 $$ System.out.println("Update available!") [CD]
Line_14 $$ if (!cver.equals(VERSION)) --> Line_16 $$ int i = JOptionPane.showConfirmDialog(this, Language.get("UPDATE_AVAILABLE_MSG").replaceAll("%o", VERSION).replaceAll("%c", cver), Language.get("UPDATE_AVAILABLE_TITLE"), JOptionPane.YES_NO_OPTION) [CD]
Line_12 $$ String cver = ubr.readLine() --> Line_16 $$ int i = JOptionPane.showConfirmDialog(this, Language.get("UPDATE_AVAILABLE_MSG").replaceAll("%o", VERSION).replaceAll("%c", cver), Language.get("UPDATE_AVAILABLE_TITLE"), JOptionPane.YES_NO_OPTION) [FD]
Line_14 $$ if (!cver.equals(VERSION)) --> Line_17 $$ if (i == 0) [CD]
Line_16 $$ int i = JOptionPane.showConfirmDialog(this, Language.get("UPDATE_AVAILABLE_MSG").replaceAll("%o", VERSION).replaceAll("%c", cver), Language.get("UPDATE_AVAILABLE_TITLE"), JOptionPane.YES_NO_OPTION) --> Line_17 $$ if (i == 0) [FD]
Line_17 $$ if (i == 0) --> Line_18 $$ URL url = new URL(cdl) [CD]
Line_17 $$ if (i == 0) --> Line_19 $$ HttpURLConnection connection = (HttpURLConnection) url.openConnection() [CD]
Line_18 $$ URL url = new URL(cdl) --> Line_19 $$ HttpURLConnection connection = (HttpURLConnection) url.openConnection() [FD]
Line_17 $$ if (i == 0) --> Line_20 $$ connection.connect() [CD]
Line_19 $$ HttpURLConnection connection = (HttpURLConnection) url.openConnection() --> Line_20 $$ connection.connect() [FD]
Line_17 $$ if (i == 0) --> Line_21 $$ if (connection.getResponseCode() / 100 != 2) [CD]
Line_19 $$ HttpURLConnection connection = (HttpURLConnection) url.openConnection() --> Line_21 $$ if (connection.getResponseCode() / 100 != 2) [FD]
Line_19 $$ HttpURLConnection connection = (HttpURLConnection) url.openConnection() --> Line_22 $$ throw new Exception("Server error! Response code: " + connection.getResponseCode()) [FD]
Line_17 $$ if (i == 0) --> Line_24 $$ int contentLength = connection.getContentLength() [CD]
Line_19 $$ HttpURLConnection connection = (HttpURLConnection) url.openConnection() --> Line_24 $$ int contentLength = connection.getContentLength() [FD]
Line_17 $$ if (i == 0) --> Line_25 $$ if (contentLength < 1) [CD]
Line_24 $$ int contentLength = connection.getContentLength() --> Line_25 $$ if (contentLength < 1) [FD]
Line_17 $$ if (i == 0) --> Line_28 $$ int size = contentLength [CD]
Line_17 $$ if (i == 0) --> Line_29 $$ File tempfile = File.createTempFile("genreman_update", ".zip") [CD]
Line_17 $$ if (i == 0) --> Line_30 $$ tempfile.deleteOnExit() [CD]
Line_29 $$ File tempfile = File.createTempFile("genreman_update", ".zip") --> Line_30 $$ tempfile.deleteOnExit() [FD]
Line_17 $$ if (i == 0) --> Line_31 $$ RandomAccessFile file = new RandomAccessFile(tempfile, "rw") [CD]
Line_17 $$ if (i == 0) --> Line_32 $$ InputStream stream = connection.getInputStream() [CD]
Line_19 $$ HttpURLConnection connection = (HttpURLConnection) url.openConnection() --> Line_32 $$ InputStream stream = connection.getInputStream() [FD]
Line_17 $$ if (i == 0) --> Line_33 $$ int downloaded = 0 [CD]
Line_17 $$ if (i == 0) --> Line_34 $$ ProgressWindow pwin = new ProgressWindow(this, "Downloading") [CD]
Line_17 $$ if (i == 0) --> Line_35 $$ pwin.setVisible(true) [CD]
Line_34 $$ ProgressWindow pwin = new ProgressWindow(this, "Downloading") --> Line_35 $$ pwin.setVisible(true) [FD]
Line_17 $$ if (i == 0) --> Line_36 $$ pwin.setProgress(0) [CD]
Line_34 $$ ProgressWindow pwin = new ProgressWindow(this, "Downloading") --> Line_36 $$ pwin.setProgress(0) [FD]
Line_17 $$ if (i == 0) --> Line_37 $$ pwin.setText("Connecting...") [CD]
Line_34 $$ ProgressWindow pwin = new ProgressWindow(this, "Downloading") --> Line_37 $$ pwin.setText("Connecting...") [FD]
Line_17 $$ if (i == 0) --> Line_38 $$ while (downloaded < size) [CD]
Line_33 $$ int downloaded = 0 --> Line_38 $$ while (downloaded < size) [FD]
Line_28 $$ int size = contentLength --> Line_38 $$ while (downloaded < size) [FD]
Line_38 $$ while (downloaded < size) --> Line_39 $$ byte buffer[] [CD]
Line_38 $$ while (downloaded < size) --> Line_40 $$ if (size - downloaded > 1024) [CD]
Line_38 $$ while (downloaded < size) --> Line_45 $$ int read = stream.read(buffer) [CD]
Line_32 $$ InputStream stream = connection.getInputStream() --> Line_45 $$ int read = stream.read(buffer) [FD]
Line_38 $$ while (downloaded < size) --> Line_46 $$ if (read == -1) [CD]
Line_45 $$ int read = stream.read(buffer) --> Line_46 $$ if (read == -1) [FD]
Line_38 $$ while (downloaded < size) --> Line_47 $$ file.write(buffer, 0, read) [CD]
Line_31 $$ RandomAccessFile file = new RandomAccessFile(tempfile, "rw") --> Line_47 $$ file.write(buffer, 0, read) [FD]
Line_45 $$ int read = stream.read(buffer) --> Line_47 $$ file.write(buffer, 0, read) [FD]
Line_38 $$ while (downloaded < size) --> Line_48 $$ downloaded += read [CD]
Line_33 $$ int downloaded = 0 --> Line_48 $$ downloaded += read [FD]
Line_45 $$ int read = stream.read(buffer) --> Line_48 $$ downloaded += read [FD]
Line_38 $$ while (downloaded < size) --> Line_49 $$ pwin.setProgress(downloaded / size) [CD]
Line_34 $$ ProgressWindow pwin = new ProgressWindow(this, "Downloading") --> Line_49 $$ pwin.setProgress(downloaded / size) [FD]
Line_17 $$ if (i == 0) --> Line_51 $$ file.close() [CD]
Line_31 $$ RandomAccessFile file = new RandomAccessFile(tempfile, "rw") --> Line_51 $$ file.close() [FD]
Line_17 $$ if (i == 0) --> Line_52 $$ System.out.println("Downloaded file to " + tempfile.getAbsolutePath()) [CD]
Line_29 $$ File tempfile = File.createTempFile("genreman_update", ".zip") --> Line_52 $$ System.out.println("Downloaded file to " + tempfile.getAbsolutePath()) [FD]
Line_17 $$ if (i == 0) --> Line_53 $$ pwin.setVisible(false) [CD]
Line_34 $$ ProgressWindow pwin = new ProgressWindow(this, "Downloading") --> Line_53 $$ pwin.setVisible(false) [FD]
Line_17 $$ if (i == 0) --> Line_54 $$ pwin.dispose() [CD]
Line_34 $$ ProgressWindow pwin = new ProgressWindow(this, "Downloading") --> Line_54 $$ pwin.dispose() [FD]
Line_17 $$ if (i == 0) --> Line_55 $$ pwin = null [CD]
Line_34 $$ ProgressWindow pwin = new ProgressWindow(this, "Downloading") --> Line_55 $$ pwin = null [FD]
Line_17 $$ if (i == 0) --> Line_56 $$ ZipInputStream zin = new ZipInputStream(new FileInputStream(tempfile)) [CD]
Line_17 $$ if (i == 0) --> Line_57 $$ ZipEntry entry [CD]
Line_17 $$ if (i == 0) --> Line_58 $$ while ((entry = zin.getNextEntry()) != null) [CD]
Line_56 $$ ZipInputStream zin = new ZipInputStream(new FileInputStream(tempfile)) --> Line_58 $$ while ((entry = zin.getNextEntry()) != null) [FD]
Line_59 $$ File outf = new File(entry.getName()) --> Line_60 $$ System.out.println(outf.getAbsoluteFile()) [FD]
Line_59 $$ File outf = new File(entry.getName()) --> Line_61 $$ if (outf.exists()) [FD]
Line_64 $$ int len --> Line_65 $$ while ((len = zin.read(buf)) > 0) [FD]
Line_56 $$ ZipInputStream zin = new ZipInputStream(new FileInputStream(tempfile)) --> Line_65 $$ while ((len = zin.read(buf)) > 0) [FD]
Line_63 $$ byte[] buf = new byte[1024] --> Line_65 $$ while ((len = zin.read(buf)) > 0) [FD]
Line_65 $$ while ((len = zin.read(buf)) > 0) --> Line_66 $$ out.write(buf, 0, len) [CD]
Line_65 $$ while ((len = zin.read(buf)) > 0) --> Line_66 $$ out.write(buf, 0, len) [FD]
Line_62 $$ OutputStream out = new FileOutputStream(outf) --> Line_66 $$ out.write(buf, 0, len) [FD]
Line_63 $$ byte[] buf = new byte[1024] --> Line_66 $$ out.write(buf, 0, len) [FD]
Line_64 $$ int len --> Line_66 $$ out.write(buf, 0, len) [FD]
Line_62 $$ OutputStream out = new FileOutputStream(outf) --> Line_68 $$ out.close() [FD]
Line_17 $$ if (i == 0) --> Line_70 $$ JOptionPane.showMessageDialog(this, Language.get("UPDATE_SUCCESS_MSG"), Language.get("UPDATE_SUCCESS_TITLE"), JOptionPane.INFORMATION_MESSAGE) [CD]
Line_17 $$ if (i == 0) --> Line_71 $$ setVisible(false) [CD]
Line_17 $$ if (i == 0) --> Line_72 $$ if (System.getProperty("os.name").indexOf("Windows") != -1) [CD]
Line_72 $$ if (System.getProperty("os.name").indexOf("Windows") != -1) --> Line_73 $$ Runtime.getRuntime().exec("iTunesGenreArtManager.exe") [CD]
Line_72 $$ if (System.getProperty("os.name").indexOf("Windows") != -1) --> Line_75 $$ Runtime.getRuntime().exec("java -jar \"iTunes Genre Art Manager.app/Contents/Resources/Java/iTunes_Genre_Art_Manager.jar\"") [CD]
Line_17 $$ if (i == 0) --> Line_77 $$ System.exit(0) [CD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_81 $$ ubr.close() [CD]
Line_9 $$ BufferedReader ubr = new BufferedReader(uisr) --> Line_81 $$ ubr.close() [FD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_82 $$ uisr.close() [CD]
Line_8 $$ InputStreamReader uisr = new InputStreamReader(uis) --> Line_82 $$ uisr.close() [FD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_83 $$ uis.close() [CD]
Line_7 $$ InputStream uis = updateURL.openStream() --> Line_83 $$ uis.close() [FD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_85 $$ while (ubr.ready()) [CD]
Line_9 $$ BufferedReader ubr = new BufferedReader(uisr) --> Line_85 $$ while (ubr.ready()) [FD]
Line_85 $$ while (ubr.ready()) --> Line_86 $$ System.out.println(ubr.readLine()) [CD]
Line_9 $$ BufferedReader ubr = new BufferedReader(uisr) --> Line_86 $$ System.out.println(ubr.readLine()) [FD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_88 $$ ubr.close() [CD]
Line_9 $$ BufferedReader ubr = new BufferedReader(uisr) --> Line_88 $$ ubr.close() [FD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_89 $$ uisr.close() [CD]
Line_8 $$ InputStreamReader uisr = new InputStreamReader(uis) --> Line_89 $$ uisr.close() [FD]
Line_11 $$ if (header.equals("GENREMANUPDATEPAGE")) --> Line_90 $$ uis.close() [CD]
Line_7 $$ InputStream uis = updateURL.openStream() --> Line_90 $$ uis.close() [FD]
Line_48 $$ downloaded += read --> Line_38 $$ while (downloaded < size) [FD]
