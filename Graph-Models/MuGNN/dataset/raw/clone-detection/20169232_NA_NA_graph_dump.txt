Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_3 $$ if (role == null) [CD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_3 $$ if (role == null) [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_4 $$ if (role.getName() == null || "".equals(role.getName())) [CD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_4 $$ if (role.getName() == null || "".equals(role.getName())) [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_5 $$ if (hasRole(role.getName(), userId)) [CD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_5 $$ if (hasRole(role.getName(), userId)) [FD]
Line_5 $$ if (hasRole(role.getName(), userId)) --> Line_6 $$ return new RoleItem(role.getName(), "", "exist") [CD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_6 $$ return new RoleItem(role.getName(), "", "exist") [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_8 $$ RoleItem defaultRole = new RoleItem(role.getName(), "", "exist") [CD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_8 $$ RoleItem defaultRole = new RoleItem(role.getName(), "", "exist") [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_14 $$ String retID = "exist" [CD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_15 $$ String roleDesc = "" [CD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_16 $$ PreparedStatement seqSt = null, roleDescSt = null [CD]
Line_19 $$ PreparedStatement insSt = getConnection().prepareStatement(INSERT_USER_IN_ROLE_STATEMENT) --> Line_20 $$ insSt.setLong(1, userId) [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_20 $$ insSt.setLong(1, userId) [FD]
Line_19 $$ PreparedStatement insSt = getConnection().prepareStatement(INSERT_USER_IN_ROLE_STATEMENT) --> Line_21 $$ insSt.setString(2, role.getName()) [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_21 $$ insSt.setString(2, role.getName()) [FD]
Line_18 $$ int modified = 0 --> Line_22 $$ modified = insSt.executeUpdate() [FD]
Line_19 $$ PreparedStatement insSt = getConnection().prepareStatement(INSERT_USER_IN_ROLE_STATEMENT) --> Line_22 $$ modified = insSt.executeUpdate() [FD]
Line_16 $$ PreparedStatement seqSt = null, roleDescSt = null --> Line_23 $$ seqSt = getConnection().prepareStatement(USER_ROLE_VALUE) [FD]
Line_16 $$ PreparedStatement seqSt = null, roleDescSt = null --> Line_24 $$ ResultSet rs = seqSt.executeQuery() [FD]
Line_23 $$ seqSt = getConnection().prepareStatement(USER_ROLE_VALUE) --> Line_24 $$ ResultSet rs = seqSt.executeQuery() [FD]
Line_24 $$ ResultSet rs = seqSt.executeQuery() --> Line_25 $$ while (rs.next()) [FD]
Line_25 $$ while (rs.next()) --> Line_26 $$ retID = rs.getString(1) [CD]
Line_14 $$ String retID = "exist" --> Line_26 $$ retID = rs.getString(1) [FD]
Line_24 $$ ResultSet rs = seqSt.executeQuery() --> Line_26 $$ retID = rs.getString(1) [FD]
Line_16 $$ PreparedStatement seqSt = null, roleDescSt = null --> Line_28 $$ roleDescSt = getConnection().prepareStatement(SELECT_ROLE_DESCRIPTION) [FD]
Line_16 $$ PreparedStatement seqSt = null, roleDescSt = null --> Line_29 $$ roleDescSt.setString(1, role.getName()) [FD]
Line_28 $$ roleDescSt = getConnection().prepareStatement(SELECT_ROLE_DESCRIPTION) --> Line_29 $$ roleDescSt.setString(1, role.getName()) [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_29 $$ roleDescSt.setString(1, role.getName()) [FD]
Line_16 $$ PreparedStatement seqSt = null, roleDescSt = null --> Line_30 $$ ResultSet rs2 = roleDescSt.executeQuery() [FD]
Line_28 $$ roleDescSt = getConnection().prepareStatement(SELECT_ROLE_DESCRIPTION) --> Line_30 $$ ResultSet rs2 = roleDescSt.executeQuery() [FD]
Line_30 $$ ResultSet rs2 = roleDescSt.executeQuery() --> Line_31 $$ while (rs2.next()) [FD]
Line_31 $$ while (rs2.next()) --> Line_32 $$ roleDesc = rs2.getString(1) [CD]
Line_15 $$ String roleDesc = "" --> Line_32 $$ roleDesc = rs2.getString(1) [FD]
Line_30 $$ ResultSet rs2 = roleDescSt.executeQuery() --> Line_32 $$ roleDesc = rs2.getString(1) [FD]
Line_18 $$ int modified = 0 --> Line_34 $$ if (modified == 1) [FD]
Line_22 $$ modified = insSt.executeUpdate() --> Line_34 $$ if (modified == 1) [FD]
Line_34 $$ if (modified == 1) --> Line_35 $$ getConnection().commit() [CD]
Line_34 $$ if (modified == 1) --> Line_36 $$ LOGGER.debug("DB has been updated. Queries: \"" + seqSt + "\" and \"" + roleDescSt + "\"") [CD]
Line_34 $$ if (modified == 1) --> Line_38 $$ getConnection().rollback() [CD]
Line_34 $$ if (modified == 1) --> Line_39 $$ LOGGER.error("DB has not been updated -> rollback! Queries: \"" + seqSt + "\" and \"" + roleDescSt + "\"") [CD]
Line_34 $$ if (modified == 1) --> Line_40 $$ retID = "error" [CD]
Line_26 $$ retID = rs.getString(1) --> Line_40 $$ retID = "error" [FD]
Line_14 $$ String retID = "exist" --> Line_40 $$ retID = "error" [FD]
Line_26 $$ retID = rs.getString(1) --> Line_44 $$ retID = "error" [FD]
Line_14 $$ String retID = "exist" --> Line_44 $$ retID = "error" [FD]
Line_40 $$ retID = "error" --> Line_44 $$ retID = "error" [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_48 $$ defaultRole.setId(retID) [CD]
Line_8 $$ RoleItem defaultRole = new RoleItem(role.getName(), "", "exist") --> Line_48 $$ defaultRole.setId(retID) [FD]
Line_26 $$ retID = rs.getString(1) --> Line_48 $$ defaultRole.setId(retID) [FD]
Line_14 $$ String retID = "exist" --> Line_48 $$ defaultRole.setId(retID) [FD]
Line_40 $$ retID = "error" --> Line_48 $$ defaultRole.setId(retID) [FD]
Line_44 $$ retID = "error" --> Line_48 $$ defaultRole.setId(retID) [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_49 $$ defaultRole.setDescription(roleDesc) [CD]
Line_8 $$ RoleItem defaultRole = new RoleItem(role.getName(), "", "exist") --> Line_49 $$ defaultRole.setDescription(roleDesc) [FD]
Line_32 $$ roleDesc = rs2.getString(1) --> Line_49 $$ defaultRole.setDescription(roleDesc) [FD]
Line_15 $$ String roleDesc = "" --> Line_49 $$ defaultRole.setDescription(roleDesc) [FD]
Line_2 $$ public RoleItem addUserRole(RoleItem role, long userId) throws DatabaseException --> Line_50 $$ return defaultRole [CD]
