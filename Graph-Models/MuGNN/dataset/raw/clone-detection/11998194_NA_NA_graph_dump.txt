Line_2 $$ private static void executeDBPatchFile() throws Exception --> Line_3 $$ Connection con = null [CD]
Line_2 $$ private static void executeDBPatchFile() throws Exception --> Line_4 $$ PreparedStatement pre_stmt = null [CD]
Line_2 $$ private static void executeDBPatchFile() throws Exception --> Line_5 $$ ResultSet rs = null [CD]
Line_7 $$ InputStream is = null --> Line_9 $$ is = url.openStream() [FD]
Line_8 $$ URL url = new URL("http://www.hdd-player.de/umc/UMC-DB-Update-Script.sql") --> Line_9 $$ is = url.openStream() [FD]
Line_3 $$ Connection con = null --> Line_12 $$ con = DriverManager.getConnection("jdbc:sqlite:database/umc.db", "", "") [FD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") [FD]
Line_3 $$ Connection con = null --> Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") [FD]
Line_12 $$ con = DriverManager.getConnection("jdbc:sqlite:database/umc.db", "", "") --> Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") [FD]
Line_5 $$ ResultSet rs = null --> Line_15 $$ rs = pre_stmt.executeQuery() [FD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_15 $$ rs = pre_stmt.executeQuery() [FD]
Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") --> Line_15 $$ rs = pre_stmt.executeQuery() [FD]
Line_5 $$ ResultSet rs = null --> Line_16 $$ if (rs.next()) [FD]
Line_15 $$ rs = pre_stmt.executeQuery() --> Line_16 $$ if (rs.next()) [FD]
Line_16 $$ if (rs.next()) --> Line_17 $$ dbVersion = rs.getDouble("VERSION") [CD]
Line_13 $$ double dbVersion = -1 --> Line_17 $$ dbVersion = rs.getDouble("VERSION") [FD]
Line_5 $$ ResultSet rs = null --> Line_17 $$ dbVersion = rs.getDouble("VERSION") [FD]
Line_15 $$ rs = pre_stmt.executeQuery() --> Line_17 $$ dbVersion = rs.getDouble("VERSION") [FD]
Line_3 $$ Connection con = null --> Line_20 $$ con.setAutoCommit(false) [FD]
Line_12 $$ con = DriverManager.getConnection("jdbc:sqlite:database/umc.db", "", "") --> Line_20 $$ con.setAutoCommit(false) [FD]
Line_19 $$ String line = "" --> Line_24 $$ while ((line = br.readLine()) != null) [FD]
Line_10 $$ BufferedReader br = new BufferedReader(new InputStreamReader(is)) --> Line_24 $$ while ((line = br.readLine()) != null) [FD]
Line_24 $$ while ((line = br.readLine()) != null) --> Line_25 $$ if (line.startsWith("[")) [CD]
Line_24 $$ while ((line = br.readLine()) != null) --> Line_25 $$ if (line.startsWith("[")) [FD]
Line_19 $$ String line = "" --> Line_25 $$ if (line.startsWith("[")) [FD]
Line_25 $$ if (line.startsWith("[")) --> Line_26 $$ Pattern p = Pattern.compile("\\[.*\\]") [CD]
Line_25 $$ if (line.startsWith("[")) --> Line_27 $$ Matcher m = p.matcher(line) [CD]
Line_26 $$ Pattern p = Pattern.compile("\\[.*\\]") --> Line_27 $$ Matcher m = p.matcher(line) [FD]
Line_24 $$ while ((line = br.readLine()) != null) --> Line_27 $$ Matcher m = p.matcher(line) [FD]
Line_19 $$ String line = "" --> Line_27 $$ Matcher m = p.matcher(line) [FD]
Line_25 $$ if (line.startsWith("[")) --> Line_28 $$ m.find() [CD]
Line_27 $$ Matcher m = p.matcher(line) --> Line_28 $$ m.find() [FD]
Line_25 $$ if (line.startsWith("[")) --> Line_29 $$ String value = m.group() [CD]
Line_27 $$ Matcher m = p.matcher(line) --> Line_29 $$ String value = m.group() [FD]
Line_25 $$ if (line.startsWith("[")) --> Line_30 $$ value = value.substring(1, value.length() - 1) [CD]
Line_29 $$ String value = m.group() --> Line_30 $$ value = value.substring(1, value.length() - 1) [FD]
Line_25 $$ if (line.startsWith("[")) --> Line_31 $$ patchVersion = Double.parseDouble(value) [CD]
Line_23 $$ double patchVersion = 0 --> Line_31 $$ patchVersion = Double.parseDouble(value) [FD]
Line_29 $$ String value = m.group() --> Line_31 $$ patchVersion = Double.parseDouble(value) [FD]
Line_30 $$ value = value.substring(1, value.length() - 1) --> Line_31 $$ patchVersion = Double.parseDouble(value) [FD]
Line_24 $$ while ((line = br.readLine()) != null) --> Line_33 $$ if (patchVersion == dbVersion + 1) [CD]
Line_31 $$ patchVersion = Double.parseDouble(value) --> Line_33 $$ if (patchVersion == dbVersion + 1) [FD]
Line_23 $$ double patchVersion = 0 --> Line_33 $$ if (patchVersion == dbVersion + 1) [FD]
Line_21 $$ boolean collectSQL = false --> Line_33 $$ if (patchVersion == dbVersion + 1) [FD]
Line_24 $$ while ((line = br.readLine()) != null) --> Line_34 $$ if (collectSQL) [CD]
Line_34 $$ if (collectSQL) --> Line_35 $$ if (!line.equals("") && !line.startsWith("[") && !line.startsWith("--") && !line.contains("--")) [CD]
Line_24 $$ while ((line = br.readLine()) != null) --> Line_35 $$ if (!line.equals("") && !line.startsWith("[") && !line.startsWith("--") && !line.contains("--")) [FD]
Line_19 $$ String line = "" --> Line_35 $$ if (!line.equals("") && !line.startsWith("[") && !line.startsWith("--") && !line.contains("--")) [FD]
Line_35 $$ if (!line.equals("") && !line.startsWith("[") && !line.startsWith("--") && !line.contains("--")) --> Line_36 $$ line = line.substring(0, line.length() - 1) [CD]
Line_24 $$ while ((line = br.readLine()) != null) --> Line_36 $$ line = line.substring(0, line.length() - 1) [FD]
Line_19 $$ String line = "" --> Line_36 $$ line = line.substring(0, line.length() - 1) [FD]
Line_35 $$ if (!line.equals("") && !line.startsWith("[") && !line.startsWith("--") && !line.contains("--")) --> Line_37 $$ sqls.add(line) [CD]
Line_22 $$ ArrayList<String> sqls = new ArrayList<String>() --> Line_37 $$ sqls.add(line) [FD]
Line_24 $$ while ((line = br.readLine()) != null) --> Line_37 $$ sqls.add(line) [FD]
Line_36 $$ line = line.substring(0, line.length() - 1) --> Line_37 $$ sqls.add(line) [FD]
Line_19 $$ String line = "" --> Line_37 $$ sqls.add(line) [FD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_41 $$ if (pre_stmt != null) [FD]
Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") --> Line_41 $$ if (pre_stmt != null) [FD]
Line_5 $$ ResultSet rs = null --> Line_42 $$ if (rs != null) [FD]
Line_15 $$ rs = pre_stmt.executeQuery() --> Line_42 $$ if (rs != null) [FD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_45 $$ pre_stmt = con.prepareStatement(sql) [FD]
Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") --> Line_45 $$ pre_stmt = con.prepareStatement(sql) [FD]
Line_3 $$ Connection con = null --> Line_45 $$ pre_stmt = con.prepareStatement(sql) [FD]
Line_12 $$ con = DriverManager.getConnection("jdbc:sqlite:database/umc.db", "", "") --> Line_45 $$ pre_stmt = con.prepareStatement(sql) [FD]
Line_43 $$ for (String sql : sqls) --> Line_45 $$ pre_stmt = con.prepareStatement(sql) [FD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_46 $$ pre_stmt.execute() [FD]
Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") --> Line_46 $$ pre_stmt.execute() [FD]
Line_45 $$ pre_stmt = con.prepareStatement(sql) --> Line_46 $$ pre_stmt.execute() [FD]
Line_31 $$ patchVersion = Double.parseDouble(value) --> Line_48 $$ if (patchVersion > 0) [FD]
Line_23 $$ double patchVersion = 0 --> Line_48 $$ if (patchVersion > 0) [FD]
Line_48 $$ if (patchVersion > 0) --> Line_49 $$ log.debug("aktualisiere Versionsnummer in DB") [CD]
Line_48 $$ if (patchVersion > 0) --> Line_50 $$ if (pre_stmt != null) [CD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_50 $$ if (pre_stmt != null) [FD]
Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") --> Line_50 $$ if (pre_stmt != null) [FD]
Line_45 $$ pre_stmt = con.prepareStatement(sql) --> Line_50 $$ if (pre_stmt != null) [FD]
Line_48 $$ if (patchVersion > 0) --> Line_51 $$ if (rs != null) [CD]
Line_5 $$ ResultSet rs = null --> Line_51 $$ if (rs != null) [FD]
Line_15 $$ rs = pre_stmt.executeQuery() --> Line_51 $$ if (rs != null) [FD]
Line_48 $$ if (patchVersion > 0) --> Line_52 $$ pre_stmt = con.prepareStatement("UPDATE DB_VERSION SET VERSION = ? WHERE ID_MODUL = 0") [CD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_52 $$ pre_stmt = con.prepareStatement("UPDATE DB_VERSION SET VERSION = ? WHERE ID_MODUL = 0") [FD]
Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") --> Line_52 $$ pre_stmt = con.prepareStatement("UPDATE DB_VERSION SET VERSION = ? WHERE ID_MODUL = 0") [FD]
Line_45 $$ pre_stmt = con.prepareStatement(sql) --> Line_52 $$ pre_stmt = con.prepareStatement("UPDATE DB_VERSION SET VERSION = ? WHERE ID_MODUL = 0") [FD]
Line_3 $$ Connection con = null --> Line_52 $$ pre_stmt = con.prepareStatement("UPDATE DB_VERSION SET VERSION = ? WHERE ID_MODUL = 0") [FD]
Line_12 $$ con = DriverManager.getConnection("jdbc:sqlite:database/umc.db", "", "") --> Line_52 $$ pre_stmt = con.prepareStatement("UPDATE DB_VERSION SET VERSION = ? WHERE ID_MODUL = 0") [FD]
Line_48 $$ if (patchVersion > 0) --> Line_53 $$ pre_stmt.setDouble(1, patchVersion) [CD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_53 $$ pre_stmt.setDouble(1, patchVersion) [FD]
Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") --> Line_53 $$ pre_stmt.setDouble(1, patchVersion) [FD]
Line_45 $$ pre_stmt = con.prepareStatement(sql) --> Line_53 $$ pre_stmt.setDouble(1, patchVersion) [FD]
Line_52 $$ pre_stmt = con.prepareStatement("UPDATE DB_VERSION SET VERSION = ? WHERE ID_MODUL = 0") --> Line_53 $$ pre_stmt.setDouble(1, patchVersion) [FD]
Line_31 $$ patchVersion = Double.parseDouble(value) --> Line_53 $$ pre_stmt.setDouble(1, patchVersion) [FD]
Line_23 $$ double patchVersion = 0 --> Line_53 $$ pre_stmt.setDouble(1, patchVersion) [FD]
Line_48 $$ if (patchVersion > 0) --> Line_54 $$ pre_stmt.execute() [CD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_54 $$ pre_stmt.execute() [FD]
Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") --> Line_54 $$ pre_stmt.execute() [FD]
Line_45 $$ pre_stmt = con.prepareStatement(sql) --> Line_54 $$ pre_stmt.execute() [FD]
Line_52 $$ pre_stmt = con.prepareStatement("UPDATE DB_VERSION SET VERSION = ? WHERE ID_MODUL = 0") --> Line_54 $$ pre_stmt.execute() [FD]
Line_3 $$ Connection con = null --> Line_56 $$ con.commit() [FD]
Line_12 $$ con = DriverManager.getConnection("jdbc:sqlite:database/umc.db", "", "") --> Line_56 $$ con.commit() [FD]
Line_3 $$ Connection con = null --> Line_66 $$ con.rollback() [FD]
Line_12 $$ con = DriverManager.getConnection("jdbc:sqlite:database/umc.db", "", "") --> Line_66 $$ con.rollback() [FD]
Line_4 $$ PreparedStatement pre_stmt = null --> Line_72 $$ if (pre_stmt != null) [FD]
Line_14 $$ pre_stmt = con.prepareStatement("SELECT * FROM DB_VERSION WHERE ID_MODUL = 0") --> Line_72 $$ if (pre_stmt != null) [FD]
Line_45 $$ pre_stmt = con.prepareStatement(sql) --> Line_72 $$ if (pre_stmt != null) [FD]
Line_52 $$ pre_stmt = con.prepareStatement("UPDATE DB_VERSION SET VERSION = ? WHERE ID_MODUL = 0") --> Line_72 $$ if (pre_stmt != null) [FD]
Line_3 $$ Connection con = null --> Line_73 $$ if (con != null) [FD]
Line_12 $$ con = DriverManager.getConnection("jdbc:sqlite:database/umc.db", "", "") --> Line_73 $$ if (con != null) [FD]
Line_36 $$ line = line.substring(0, line.length() - 1) --> Line_25 $$ if (line.startsWith("[")) [FD]
Line_36 $$ line = line.substring(0, line.length() - 1) --> Line_27 $$ Matcher m = p.matcher(line) [FD]
Line_36 $$ line = line.substring(0, line.length() - 1) --> Line_35 $$ if (!line.equals("") && !line.startsWith("[") && !line.startsWith("--") && !line.contains("--")) [FD]
