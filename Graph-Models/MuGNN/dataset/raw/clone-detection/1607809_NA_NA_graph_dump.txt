Line_2 $$ public void lock(String oid, String key) throws PersisterException --> Line_3 $$ String lock = getLock(oid) [CD]
Line_2 $$ public void lock(String oid, String key) throws PersisterException --> Line_3 $$ String lock = getLock(oid) [FD]
Line_2 $$ public void lock(String oid, String key) throws PersisterException --> Line_4 $$ if (lock == null) [CD]
Line_3 $$ String lock = getLock(oid) --> Line_4 $$ if (lock == null) [FD]
Line_4 $$ if (lock == null) --> Line_6 $$ if (!NULL.equals(lock) && (!lock.equals(key))) [CD]
Line_3 $$ String lock = getLock(oid) --> Line_6 $$ if (!NULL.equals(lock) && (!lock.equals(key))) [FD]
Line_2 $$ public void lock(String oid, String key) throws PersisterException --> Line_6 $$ if (!NULL.equals(lock) && (!lock.equals(key))) [FD]
Line_2 $$ public void lock(String oid, String key) throws PersisterException --> Line_9 $$ Connection conn = null [CD]
Line_2 $$ public void lock(String oid, String key) throws PersisterException --> Line_10 $$ PreparedStatement ps = null [CD]
Line_9 $$ Connection conn = null --> Line_12 $$ conn = _ds.getConnection() [FD]
Line_9 $$ Connection conn = null --> Line_13 $$ conn.setAutoCommit(true) [FD]
Line_12 $$ conn = _ds.getConnection() --> Line_13 $$ conn.setAutoCommit(true) [FD]
Line_10 $$ PreparedStatement ps = null --> Line_14 $$ ps = conn.prepareStatement("update " + _table_name + " set " + _key_col + " = ?, " + _ts_col + " = ? where " + _oid_col + " = ?") [FD]
Line_9 $$ Connection conn = null --> Line_14 $$ ps = conn.prepareStatement("update " + _table_name + " set " + _key_col + " = ?, " + _ts_col + " = ? where " + _oid_col + " = ?") [FD]
Line_12 $$ conn = _ds.getConnection() --> Line_14 $$ ps = conn.prepareStatement("update " + _table_name + " set " + _key_col + " = ?, " + _ts_col + " = ? where " + _oid_col + " = ?") [FD]
Line_10 $$ PreparedStatement ps = null --> Line_15 $$ ps.setString(1, key) [FD]
Line_14 $$ ps = conn.prepareStatement("update " + _table_name + " set " + _key_col + " = ?, " + _ts_col + " = ? where " + _oid_col + " = ?") --> Line_15 $$ ps.setString(1, key) [FD]
Line_2 $$ public void lock(String oid, String key) throws PersisterException --> Line_15 $$ ps.setString(1, key) [FD]
Line_10 $$ PreparedStatement ps = null --> Line_16 $$ ps.setLong(2, System.currentTimeMillis()) [FD]
Line_14 $$ ps = conn.prepareStatement("update " + _table_name + " set " + _key_col + " = ?, " + _ts_col + " = ? where " + _oid_col + " = ?") --> Line_16 $$ ps.setLong(2, System.currentTimeMillis()) [FD]
Line_10 $$ PreparedStatement ps = null --> Line_17 $$ ps.setString(3, oid) [FD]
Line_14 $$ ps = conn.prepareStatement("update " + _table_name + " set " + _key_col + " = ?, " + _ts_col + " = ? where " + _oid_col + " = ?") --> Line_17 $$ ps.setString(3, oid) [FD]
Line_2 $$ public void lock(String oid, String key) throws PersisterException --> Line_17 $$ ps.setString(3, oid) [FD]
Line_10 $$ PreparedStatement ps = null --> Line_18 $$ ps.executeUpdate() [FD]
Line_14 $$ ps = conn.prepareStatement("update " + _table_name + " set " + _key_col + " = ?, " + _ts_col + " = ? where " + _oid_col + " = ?") --> Line_18 $$ ps.executeUpdate() [FD]
Line_9 $$ Connection conn = null --> Line_20 $$ if (conn != null) [FD]
Line_12 $$ conn = _ds.getConnection() --> Line_20 $$ if (conn != null) [FD]
Line_9 $$ Connection conn = null --> Line_22 $$ conn.rollback() [FD]
Line_12 $$ conn = _ds.getConnection() --> Line_22 $$ conn.rollback() [FD]
Line_10 $$ PreparedStatement ps = null --> Line_28 $$ if (ps != null) [FD]
Line_14 $$ ps = conn.prepareStatement("update " + _table_name + " set " + _key_col + " = ?, " + _ts_col + " = ? where " + _oid_col + " = ?") --> Line_28 $$ if (ps != null) [FD]
Line_10 $$ PreparedStatement ps = null --> Line_30 $$ ps.close() [FD]
Line_14 $$ ps = conn.prepareStatement("update " + _table_name + " set " + _key_col + " = ?, " + _ts_col + " = ? where " + _oid_col + " = ?") --> Line_30 $$ ps.close() [FD]
Line_9 $$ Connection conn = null --> Line_34 $$ if (conn != null) [FD]
Line_12 $$ conn = _ds.getConnection() --> Line_34 $$ if (conn != null) [FD]
Line_9 $$ Connection conn = null --> Line_36 $$ conn.close() [FD]
Line_12 $$ conn = _ds.getConnection() --> Line_36 $$ conn.close() [FD]
