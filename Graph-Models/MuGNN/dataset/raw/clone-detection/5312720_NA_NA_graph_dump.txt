Line_2 $$ public void putMedia(Media m) --> Line_3 $$ if (m == null) [CD]
Line_2 $$ public void putMedia(Media m) --> Line_3 $$ if (m == null) [FD]
Line_3 $$ if (m == null) --> Line_4 $$ return [CD]
Line_2 $$ public void putMedia(Media m) --> Line_6 $$ if (_conn == null) [CD]
Line_6 $$ if (_conn == null) --> Line_7 $$ log.error("DatabaseDatastore not connected!") [CD]
Line_6 $$ if (_conn == null) --> Line_8 $$ return [CD]
Line_2 $$ public void putMedia(Media m) --> Line_10 $$ if (log.isTraceEnabled()) [CD]
Line_10 $$ if (log.isTraceEnabled()) --> Line_11 $$ log.trace("Writing Media " + m.toString() + " to database") [CD]
Line_2 $$ public void putMedia(Media m) --> Line_11 $$ log.trace("Writing Media " + m.toString() + " to database") [FD]
Line_2 $$ public void putMedia(Media m) --> Line_15 $$ long trackid = getLocalID(m, _conn) [FD]
Line_2 $$ public void putMedia(Media m) --> Line_16 $$ if (m.isBaseDirty()) [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_17 $$ if (log.isTraceEnabled()) [CD]
Line_17 $$ if (log.isTraceEnabled()) --> Line_18 $$ log.trace("Need to update base " + m.getID() + " to database") [CD]
Line_2 $$ public void putMedia(Media m) --> Line_18 $$ log.trace("Need to update base " + m.getID() + " to database") [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_20 $$ Integer artist = getArtistID(m, _conn) [CD]
Line_2 $$ public void putMedia(Media m) --> Line_20 $$ Integer artist = getArtistID(m, _conn) [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_21 $$ Integer author = getAuthorID(m, _conn) [CD]
Line_2 $$ public void putMedia(Media m) --> Line_21 $$ Integer author = getAuthorID(m, _conn) [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_22 $$ Integer artistAlias = getArtistAliasID(m, _conn) [CD]
Line_2 $$ public void putMedia(Media m) --> Line_22 $$ Integer artistAlias = getArtistAliasID(m, _conn) [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") [CD]
Line_16 $$ if (m.isBaseDirty()) --> Line_24 $$ s.setString(1, m.getName()) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_24 $$ s.setString(1, m.getName()) [FD]
Line_2 $$ public void putMedia(Media m) --> Line_24 $$ s.setString(1, m.getName()) [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_25 $$ if (artist != null) [CD]
Line_20 $$ Integer artist = getArtistID(m, _conn) --> Line_25 $$ if (artist != null) [FD]
Line_25 $$ if (artist != null) --> Line_26 $$ s.setLong(2, artist) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_26 $$ s.setLong(2, artist) [FD]
Line_20 $$ Integer artist = getArtistID(m, _conn) --> Line_26 $$ s.setLong(2, artist) [FD]
Line_25 $$ if (artist != null) --> Line_28 $$ s.setNull(2, Types.BIGINT) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_28 $$ s.setNull(2, Types.BIGINT) [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_30 $$ if (author != null) [CD]
Line_21 $$ Integer author = getAuthorID(m, _conn) --> Line_30 $$ if (author != null) [FD]
Line_30 $$ if (author != null) --> Line_31 $$ s.setLong(3, author) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_31 $$ s.setLong(3, author) [FD]
Line_21 $$ Integer author = getAuthorID(m, _conn) --> Line_31 $$ s.setLong(3, author) [FD]
Line_30 $$ if (author != null) --> Line_33 $$ s.setNull(3, Types.BIGINT) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_33 $$ s.setNull(3, Types.BIGINT) [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_35 $$ if (artistAlias != null) [CD]
Line_22 $$ Integer artistAlias = getArtistAliasID(m, _conn) --> Line_35 $$ if (artistAlias != null) [FD]
Line_35 $$ if (artistAlias != null) --> Line_36 $$ s.setLong(4, artistAlias) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_36 $$ s.setLong(4, artistAlias) [FD]
Line_22 $$ Integer artistAlias = getArtistAliasID(m, _conn) --> Line_36 $$ s.setLong(4, artistAlias) [FD]
Line_35 $$ if (artistAlias != null) --> Line_38 $$ s.setNull(4, Types.BIGINT) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_38 $$ s.setNull(4, Types.BIGINT) [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_40 $$ s.setLong(5, trackid) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_40 $$ s.setLong(5, trackid) [FD]
Line_15 $$ long trackid = getLocalID(m, _conn) --> Line_40 $$ s.setLong(5, trackid) [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_41 $$ s.executeUpdate() [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_41 $$ s.executeUpdate() [FD]
Line_16 $$ if (m.isBaseDirty()) --> Line_42 $$ s.close() [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_42 $$ s.close() [FD]
Line_2 $$ public void putMedia(Media m) --> Line_44 $$ if (m.isUserDirty()) [FD]
Line_44 $$ if (m.isUserDirty()) --> Line_45 $$ if (log.isTraceEnabled()) [CD]
Line_45 $$ if (log.isTraceEnabled()) --> Line_46 $$ log.trace("Need to update user " + m.getID() + " to database") [CD]
Line_2 $$ public void putMedia(Media m) --> Line_46 $$ log.trace("Need to update user " + m.getID() + " to database") [FD]
Line_44 $$ if (m.isUserDirty()) --> Line_48 $$ PreparedStatement s = _conn.prepareStatement("update media_track_rating set rating=?, play_count=? where track_id=? and user_id=?") [CD]
Line_44 $$ if (m.isUserDirty()) --> Line_49 $$ s.setFloat(1, m.getRating()) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_49 $$ s.setFloat(1, m.getRating()) [FD]
Line_2 $$ public void putMedia(Media m) --> Line_49 $$ s.setFloat(1, m.getRating()) [FD]
Line_44 $$ if (m.isUserDirty()) --> Line_50 $$ s.setLong(2, m.getPlayCount()) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_50 $$ s.setLong(2, m.getPlayCount()) [FD]
Line_2 $$ public void putMedia(Media m) --> Line_50 $$ s.setLong(2, m.getPlayCount()) [FD]
Line_44 $$ if (m.isUserDirty()) --> Line_51 $$ s.setLong(3, trackid) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_51 $$ s.setLong(3, trackid) [FD]
Line_15 $$ long trackid = getLocalID(m, _conn) --> Line_51 $$ s.setLong(3, trackid) [FD]
Line_44 $$ if (m.isUserDirty()) --> Line_52 $$ s.setLong(4, userid) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_52 $$ s.setLong(4, userid) [FD]
Line_44 $$ if (m.isUserDirty()) --> Line_53 $$ if (s.executeUpdate() != 1) [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_53 $$ if (s.executeUpdate() != 1) [FD]
Line_53 $$ if (s.executeUpdate() != 1) --> Line_54 $$ s.close() [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_54 $$ s.close() [FD]
Line_44 $$ if (m.isUserDirty()) --> Line_56 $$ s.close() [CD]
Line_23 $$ PreparedStatement s = _conn.prepareStatement("update media_track set track_name=?,track_artist_id=?,track_author_id=?,track_artist_alias_id=?,track_audit_timestamp=CURRENT_TIMESTAMP where track_id = ?") --> Line_56 $$ s.close() [FD]
Line_2 $$ public void putMedia(Media m) --> Line_58 $$ if (m.isContentDirty()) [FD]
Line_58 $$ if (m.isContentDirty()) --> Line_59 $$ updateLocation(m, _conn) [CD]
Line_2 $$ public void putMedia(Media m) --> Line_59 $$ updateLocation(m, _conn) [FD]
Line_2 $$ public void putMedia(Media m) --> Line_62 $$ m.resetDirty() [FD]
Line_63 $$ if (log.isTraceEnabled()) --> Line_64 $$ log.trace("Committed " + m.getID() + " to database") [CD]
Line_2 $$ public void putMedia(Media m) --> Line_64 $$ log.trace("Committed " + m.getID() + " to database") [FD]
