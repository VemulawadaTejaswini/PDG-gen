Line_2 $$ public void update(Channel channel) throws Exception --> Line_3 $$ DBOperation dbo = null [CD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_4 $$ Connection connection = null [CD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_5 $$ PreparedStatement preparedStatement = null [CD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_6 $$ ResultSet resultSet = null [CD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_7 $$ String exp = channel.getExtendParent() [CD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_7 $$ String exp = channel.getExtendParent() [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_8 $$ String path = channel.getPath() [CD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_8 $$ String path = channel.getPath() [FD]
Line_3 $$ DBOperation dbo = null --> Line_11 $$ dbo = createDBOperation() [FD]
Line_4 $$ Connection connection = null --> Line_12 $$ connection = dbo.getConnection() [FD]
Line_3 $$ DBOperation dbo = null --> Line_12 $$ connection = dbo.getConnection() [FD]
Line_11 $$ dbo = createDBOperation() --> Line_12 $$ connection = dbo.getConnection() [FD]
Line_4 $$ Connection connection = null --> Line_13 $$ connection.setAutoCommit(false) [FD]
Line_12 $$ connection = dbo.getConnection() --> Line_13 $$ connection.setAutoCommit(false) [FD]
Line_8 $$ String path = channel.getPath() --> Line_14 $$ String[] selfDefinePath = getSelfDefinePath(path, exp, connection, preparedStatement, resultSet) [FD]
Line_7 $$ String exp = channel.getExtendParent() --> Line_14 $$ String[] selfDefinePath = getSelfDefinePath(path, exp, connection, preparedStatement, resultSet) [FD]
Line_4 $$ Connection connection = null --> Line_14 $$ String[] selfDefinePath = getSelfDefinePath(path, exp, connection, preparedStatement, resultSet) [FD]
Line_12 $$ connection = dbo.getConnection() --> Line_14 $$ String[] selfDefinePath = getSelfDefinePath(path, exp, connection, preparedStatement, resultSet) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_14 $$ String[] selfDefinePath = getSelfDefinePath(path, exp, connection, preparedStatement, resultSet) [FD]
Line_6 $$ ResultSet resultSet = null --> Line_14 $$ String[] selfDefinePath = getSelfDefinePath(path, exp, connection, preparedStatement, resultSet) [FD]
Line_14 $$ String[] selfDefinePath = getSelfDefinePath(path, exp, connection, preparedStatement, resultSet) --> Line_15 $$ selfDefineDelete(selfDefinePath, connection, preparedStatement) [FD]
Line_4 $$ Connection connection = null --> Line_15 $$ selfDefineDelete(selfDefinePath, connection, preparedStatement) [FD]
Line_12 $$ connection = dbo.getConnection() --> Line_15 $$ selfDefineDelete(selfDefinePath, connection, preparedStatement) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_15 $$ selfDefineDelete(selfDefinePath, connection, preparedStatement) [FD]
Line_14 $$ String[] selfDefinePath = getSelfDefinePath(path, exp, connection, preparedStatement, resultSet) --> Line_16 $$ selfDefineAdd(selfDefinePath, channel, connection, preparedStatement) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_16 $$ selfDefineAdd(selfDefinePath, channel, connection, preparedStatement) [FD]
Line_4 $$ Connection connection = null --> Line_16 $$ selfDefineAdd(selfDefinePath, channel, connection, preparedStatement) [FD]
Line_12 $$ connection = dbo.getConnection() --> Line_16 $$ selfDefineAdd(selfDefinePath, channel, connection, preparedStatement) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_16 $$ selfDefineAdd(selfDefinePath, channel, connection, preparedStatement) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) [FD]
Line_4 $$ Connection connection = null --> Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) [FD]
Line_12 $$ connection = dbo.getConnection() --> Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) [FD]
Line_10 $$ String sqlStr = "UPDATE t_ip_channel SET id=?,name=?,description=?,ascii_name=?,site_id=?,type=?,data_url=?,template_id=?,use_status=?,order_no=?,style=?,creator=?,create_date=?,refresh_flag=?,page_num=? where channel_path=?" --> Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_18 $$ preparedStatement.setInt(1, channel.getChannelID()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_18 $$ preparedStatement.setInt(1, channel.getChannelID()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_18 $$ preparedStatement.setInt(1, channel.getChannelID()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_19 $$ preparedStatement.setString(2, channel.getName()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_19 $$ preparedStatement.setString(2, channel.getName()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_19 $$ preparedStatement.setString(2, channel.getName()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_20 $$ preparedStatement.setString(3, channel.getDescription()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_20 $$ preparedStatement.setString(3, channel.getDescription()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_20 $$ preparedStatement.setString(3, channel.getDescription()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_21 $$ preparedStatement.setString(4, channel.getAsciiName()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_21 $$ preparedStatement.setString(4, channel.getAsciiName()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_21 $$ preparedStatement.setString(4, channel.getAsciiName()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_22 $$ preparedStatement.setInt(5, channel.getSiteId()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_22 $$ preparedStatement.setInt(5, channel.getSiteId()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_22 $$ preparedStatement.setInt(5, channel.getSiteId()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_23 $$ preparedStatement.setString(6, channel.getChannelType()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_23 $$ preparedStatement.setString(6, channel.getChannelType()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_23 $$ preparedStatement.setString(6, channel.getChannelType()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_24 $$ preparedStatement.setString(7, channel.getDataUrl()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_24 $$ preparedStatement.setString(7, channel.getDataUrl()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_24 $$ preparedStatement.setString(7, channel.getDataUrl()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_25 $$ if (channel.getTemplateId() == null || channel.getTemplateId().trim().equals("")) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_25 $$ if (channel.getTemplateId() == null || channel.getTemplateId().trim().equals("")) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_25 $$ if (channel.getTemplateId() == null || channel.getTemplateId().trim().equals("")) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_26 $$ preparedStatement.setString(9, channel.getUseStatus()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_26 $$ preparedStatement.setString(9, channel.getUseStatus()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_26 $$ preparedStatement.setString(9, channel.getUseStatus()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_27 $$ preparedStatement.setInt(10, channel.getOrderNo()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_27 $$ preparedStatement.setInt(10, channel.getOrderNo()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_27 $$ preparedStatement.setInt(10, channel.getOrderNo()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_28 $$ preparedStatement.setString(11, channel.getStyle()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_28 $$ preparedStatement.setString(11, channel.getStyle()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_28 $$ preparedStatement.setString(11, channel.getStyle()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_29 $$ preparedStatement.setInt(12, channel.getCreator()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_29 $$ preparedStatement.setInt(12, channel.getCreator()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_29 $$ preparedStatement.setInt(12, channel.getCreator()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_30 $$ preparedStatement.setTimestamp(13, (Timestamp) channel.getCreateDate()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_30 $$ preparedStatement.setTimestamp(13, (Timestamp) channel.getCreateDate()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_30 $$ preparedStatement.setTimestamp(13, (Timestamp) channel.getCreateDate()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_31 $$ preparedStatement.setString(14, channel.getRefresh()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_31 $$ preparedStatement.setString(14, channel.getRefresh()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_31 $$ preparedStatement.setString(14, channel.getRefresh()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_32 $$ preparedStatement.setInt(15, channel.getPageNum()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_32 $$ preparedStatement.setInt(15, channel.getPageNum()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_32 $$ preparedStatement.setInt(15, channel.getPageNum()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_33 $$ preparedStatement.setString(16, channel.getPath()) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_33 $$ preparedStatement.setString(16, channel.getPath()) [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_33 $$ preparedStatement.setString(16, channel.getPath()) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_34 $$ preparedStatement.executeUpdate() [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_34 $$ preparedStatement.executeUpdate() [FD]
Line_4 $$ Connection connection = null --> Line_35 $$ connection.commit() [FD]
Line_12 $$ connection = dbo.getConnection() --> Line_35 $$ connection.commit() [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_36 $$ int resID = channel.getChannelID() + Const.CHANNEL_TYPE_RES [FD]
Line_37 $$ StructResource sr = new StructResource() --> Line_38 $$ sr.setResourceID(Integer.toString(resID)) [FD]
Line_36 $$ int resID = channel.getChannelID() + Const.CHANNEL_TYPE_RES --> Line_38 $$ sr.setResourceID(Integer.toString(resID)) [FD]
Line_37 $$ StructResource sr = new StructResource() --> Line_39 $$ sr.setOperateID(Integer.toString(1)) [FD]
Line_37 $$ StructResource sr = new StructResource() --> Line_40 $$ sr.setOperateTypeID(Const.OPERATE_TYPE_ID) [FD]
Line_37 $$ StructResource sr = new StructResource() --> Line_41 $$ sr.setTypeID(Const.RES_TYPE_ID) [FD]
Line_37 $$ StructResource sr = new StructResource() --> Line_42 $$ StructAuth sa = new AuthorityManager().getExternalAuthority(sr) [FD]
Line_42 $$ StructAuth sa = new AuthorityManager().getExternalAuthority(sr) --> Line_43 $$ int authID = sa.getAuthID() [FD]
Line_43 $$ int authID = sa.getAuthID() --> Line_44 $$ if (authID == 0) [FD]
Line_44 $$ if (authID == 0) --> Line_45 $$ String resName = channel.getName() [CD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_45 $$ String resName = channel.getName() [FD]
Line_44 $$ if (authID == 0) --> Line_46 $$ int resTypeID = Const.RES_TYPE_ID [CD]
Line_44 $$ if (authID == 0) --> Line_47 $$ int operateTypeID = Const.OPERATE_TYPE_ID [CD]
Line_44 $$ if (authID == 0) --> Line_48 $$ String remark = "" [CD]
Line_44 $$ if (authID == 0) --> Line_49 $$ AuthorityManager am = new AuthorityManager() [CD]
Line_44 $$ if (authID == 0) --> Line_50 $$ am.createExtResource(Integer.toString(resID), resName, resTypeID, operateTypeID, remark) [CD]
Line_49 $$ AuthorityManager am = new AuthorityManager() --> Line_50 $$ am.createExtResource(Integer.toString(resID), resName, resTypeID, operateTypeID, remark) [FD]
Line_45 $$ String resName = channel.getName() --> Line_50 $$ am.createExtResource(Integer.toString(resID), resName, resTypeID, operateTypeID, remark) [FD]
Line_46 $$ int resTypeID = Const.RES_TYPE_ID --> Line_50 $$ am.createExtResource(Integer.toString(resID), resName, resTypeID, operateTypeID, remark) [FD]
Line_47 $$ int operateTypeID = Const.OPERATE_TYPE_ID --> Line_50 $$ am.createExtResource(Integer.toString(resID), resName, resTypeID, operateTypeID, remark) [FD]
Line_48 $$ String remark = "" --> Line_50 $$ am.createExtResource(Integer.toString(resID), resName, resTypeID, operateTypeID, remark) [FD]
Line_36 $$ int resID = channel.getChannelID() + Const.CHANNEL_TYPE_RES --> Line_50 $$ am.createExtResource(Integer.toString(resID), resName, resTypeID, operateTypeID, remark) [FD]
Line_4 $$ Connection connection = null --> Line_53 $$ connection.rollback() [FD]
Line_12 $$ connection = dbo.getConnection() --> Line_53 $$ connection.rollback() [FD]
Line_2 $$ public void update(Channel channel) throws Exception --> Line_54 $$ log.error("����Ƶ��ʧ�ܣ�channelPath=" + channel.getPath()) [FD]
Line_6 $$ ResultSet resultSet = null --> Line_57 $$ close(resultSet, null, preparedStatement, connection, dbo) [FD]
Line_5 $$ PreparedStatement preparedStatement = null --> Line_57 $$ close(resultSet, null, preparedStatement, connection, dbo) [FD]
Line_17 $$ preparedStatement = connection.prepareStatement(sqlStr) --> Line_57 $$ close(resultSet, null, preparedStatement, connection, dbo) [FD]
Line_4 $$ Connection connection = null --> Line_57 $$ close(resultSet, null, preparedStatement, connection, dbo) [FD]
Line_12 $$ connection = dbo.getConnection() --> Line_57 $$ close(resultSet, null, preparedStatement, connection, dbo) [FD]
Line_3 $$ DBOperation dbo = null --> Line_57 $$ close(resultSet, null, preparedStatement, connection, dbo) [FD]
Line_11 $$ dbo = createDBOperation() --> Line_57 $$ close(resultSet, null, preparedStatement, connection, dbo) [FD]
