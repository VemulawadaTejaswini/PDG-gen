Line_2 $$ public void doDelete(Role role) throws Exception --> Line_3 $$ Connection con = null [CD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_4 $$ PreparedStatement ps = null [CD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_5 $$ ResultSet result = null [CD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_6 $$ String strEdQuery = "SELECT authority_id from " + Common.ROLE_AUTHORITY_TABLE + " WHERE role_id = ?" [CD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_7 $$ String strQuery = "DELETE FROM " + Common.ROLE_AUTHORITY_TABLE + " WHERE role_id = ?" [CD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_8 $$ DBOperation dbo = factory.createDBOperation(POOL_NAME) [CD]
Line_3 $$ Connection con = null --> Line_11 $$ con = dbo.getConnection() [FD]
Line_8 $$ DBOperation dbo = factory.createDBOperation(POOL_NAME) --> Line_11 $$ con = dbo.getConnection() [FD]
Line_3 $$ Connection con = null --> Line_12 $$ con.setAutoCommit(false) [FD]
Line_11 $$ con = dbo.getConnection() --> Line_12 $$ con.setAutoCommit(false) [FD]
Line_4 $$ PreparedStatement ps = null --> Line_13 $$ ps = con.prepareStatement(strEdQuery) [FD]
Line_3 $$ Connection con = null --> Line_13 $$ ps = con.prepareStatement(strEdQuery) [FD]
Line_11 $$ con = dbo.getConnection() --> Line_13 $$ ps = con.prepareStatement(strEdQuery) [FD]
Line_6 $$ String strEdQuery = "SELECT authority_id from " + Common.ROLE_AUTHORITY_TABLE + " WHERE role_id = ?" --> Line_13 $$ ps = con.prepareStatement(strEdQuery) [FD]
Line_4 $$ PreparedStatement ps = null --> Line_14 $$ ps.setInt(1, role.getRoleID()) [FD]
Line_13 $$ ps = con.prepareStatement(strEdQuery) --> Line_14 $$ ps.setInt(1, role.getRoleID()) [FD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_14 $$ ps.setInt(1, role.getRoleID()) [FD]
Line_5 $$ ResultSet result = null --> Line_15 $$ result = ps.executeQuery() [FD]
Line_4 $$ PreparedStatement ps = null --> Line_15 $$ result = ps.executeQuery() [FD]
Line_13 $$ ps = con.prepareStatement(strEdQuery) --> Line_15 $$ result = ps.executeQuery() [FD]
Line_5 $$ ResultSet result = null --> Line_16 $$ while (result.next()) [FD]
Line_15 $$ result = ps.executeQuery() --> Line_16 $$ while (result.next()) [FD]
Line_16 $$ while (result.next()) --> Line_17 $$ int authID = result.getInt("authority_id") [CD]
Line_5 $$ ResultSet result = null --> Line_17 $$ int authID = result.getInt("authority_id") [FD]
Line_15 $$ result = ps.executeQuery() --> Line_17 $$ int authID = result.getInt("authority_id") [FD]
Line_16 $$ while (result.next()) --> Line_18 $$ Authority auth = new Authority(authID) [CD]
Line_16 $$ while (result.next()) --> Line_19 $$ auth.load() [CD]
Line_18 $$ Authority auth = new Authority(authID) --> Line_19 $$ auth.load() [FD]
Line_16 $$ while (result.next()) --> Line_20 $$ AssignLog aLog = new AssignLog() [CD]
Line_16 $$ while (result.next()) --> Line_21 $$ aLog.setLogNO(aLog.getNewLogNo()) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_21 $$ aLog.setLogNO(aLog.getNewLogNo()) [FD]
Line_16 $$ while (result.next()) --> Line_22 $$ aLog.setID(authID) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_22 $$ aLog.setID(authID) [FD]
Line_17 $$ int authID = result.getInt("authority_id") --> Line_22 $$ aLog.setID(authID) [FD]
Line_16 $$ while (result.next()) --> Line_23 $$ aLog.setName(auth.getAuthorityName()) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_23 $$ aLog.setName(auth.getAuthorityName()) [FD]
Line_18 $$ Authority auth = new Authority(authID) --> Line_23 $$ aLog.setName(auth.getAuthorityName()) [FD]
Line_16 $$ while (result.next()) --> Line_24 $$ aLog.setAssignType(AssignLog.ASSIGN_AUTHORITY) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_24 $$ aLog.setAssignType(AssignLog.ASSIGN_AUTHORITY) [FD]
Line_16 $$ while (result.next()) --> Line_25 $$ aLog.setAssignDate(Translate.getSysTime()) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_25 $$ aLog.setAssignDate(Translate.getSysTime()) [FD]
Line_16 $$ while (result.next()) --> Line_26 $$ aLog.setAssignFrom(this.provider.getUserID()) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_26 $$ aLog.setAssignFrom(this.provider.getUserID()) [FD]
Line_16 $$ while (result.next()) --> Line_27 $$ aLog.setAssignFromName(this.provider.getUserName()) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_27 $$ aLog.setAssignFromName(this.provider.getUserName()) [FD]
Line_16 $$ while (result.next()) --> Line_28 $$ aLog.setAssignTo(role.getRoleID()) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_28 $$ aLog.setAssignTo(role.getRoleID()) [FD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_28 $$ aLog.setAssignTo(role.getRoleID()) [FD]
Line_16 $$ while (result.next()) --> Line_29 $$ aLog.setAssignToName(role.getRoleName()) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_29 $$ aLog.setAssignToName(role.getRoleName()) [FD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_29 $$ aLog.setAssignToName(role.getRoleName()) [FD]
Line_16 $$ while (result.next()) --> Line_30 $$ aLog.setReceiverType(AssignLog.RECEIVER_ROLE) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_30 $$ aLog.setReceiverType(AssignLog.RECEIVER_ROLE) [FD]
Line_16 $$ while (result.next()) --> Line_31 $$ aLog.setInfo("ɾ���ɫ�е�Ȩ��") [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_31 $$ aLog.setInfo("ɾ���ɫ�е�Ȩ��") [FD]
Line_16 $$ while (result.next()) --> Line_32 $$ aLog.setPath("") [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_32 $$ aLog.setPath("") [FD]
Line_16 $$ while (result.next()) --> Line_33 $$ aLog.setPathName("") [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_33 $$ aLog.setPathName("") [FD]
Line_16 $$ while (result.next()) --> Line_34 $$ aLog.doUpdateOrNew(con) [CD]
Line_20 $$ AssignLog aLog = new AssignLog() --> Line_34 $$ aLog.doUpdateOrNew(con) [FD]
Line_3 $$ Connection con = null --> Line_34 $$ aLog.doUpdateOrNew(con) [FD]
Line_11 $$ con = dbo.getConnection() --> Line_34 $$ aLog.doUpdateOrNew(con) [FD]
Line_4 $$ PreparedStatement ps = null --> Line_36 $$ ps = con.prepareStatement(strQuery) [FD]
Line_13 $$ ps = con.prepareStatement(strEdQuery) --> Line_36 $$ ps = con.prepareStatement(strQuery) [FD]
Line_3 $$ Connection con = null --> Line_36 $$ ps = con.prepareStatement(strQuery) [FD]
Line_11 $$ con = dbo.getConnection() --> Line_36 $$ ps = con.prepareStatement(strQuery) [FD]
Line_7 $$ String strQuery = "DELETE FROM " + Common.ROLE_AUTHORITY_TABLE + " WHERE role_id = ?" --> Line_36 $$ ps = con.prepareStatement(strQuery) [FD]
Line_4 $$ PreparedStatement ps = null --> Line_37 $$ ps.setInt(1, role.getRoleID()) [FD]
Line_13 $$ ps = con.prepareStatement(strEdQuery) --> Line_37 $$ ps.setInt(1, role.getRoleID()) [FD]
Line_36 $$ ps = con.prepareStatement(strQuery) --> Line_37 $$ ps.setInt(1, role.getRoleID()) [FD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_37 $$ ps.setInt(1, role.getRoleID()) [FD]
Line_4 $$ PreparedStatement ps = null --> Line_38 $$ int resultCount = ps.executeUpdate() [FD]
Line_13 $$ ps = con.prepareStatement(strEdQuery) --> Line_38 $$ int resultCount = ps.executeUpdate() [FD]
Line_36 $$ ps = con.prepareStatement(strQuery) --> Line_38 $$ int resultCount = ps.executeUpdate() [FD]
Line_38 $$ int resultCount = ps.executeUpdate() --> Line_39 $$ if (resultCount < 0) [FD]
Line_39 $$ if (resultCount < 0) --> Line_40 $$ con.rollback() [CD]
Line_3 $$ Connection con = null --> Line_40 $$ con.rollback() [FD]
Line_11 $$ con = dbo.getConnection() --> Line_40 $$ con.rollback() [FD]
Line_3 $$ Connection con = null --> Line_43 $$ con.commit() [FD]
Line_11 $$ con = dbo.getConnection() --> Line_43 $$ con.commit() [FD]
Line_3 $$ Connection con = null --> Line_45 $$ con.rollback() [FD]
Line_11 $$ con = dbo.getConnection() --> Line_45 $$ con.rollback() [FD]
Line_2 $$ public void doDelete(Role role) throws Exception --> Line_46 $$ throw new CesSystemException("RoleAuthority.doDelete(role): SQLException while deleting Role_authority; " + " role_id = " + role.getRoleID() + " :\n\t" + se) [FD]
Line_3 $$ Connection con = null --> Line_48 $$ con.setAutoCommit(true) [FD]
Line_11 $$ con = dbo.getConnection() --> Line_48 $$ con.setAutoCommit(true) [FD]
Line_8 $$ DBOperation dbo = factory.createDBOperation(POOL_NAME) --> Line_49 $$ close(dbo, ps, result) [FD]
Line_4 $$ PreparedStatement ps = null --> Line_49 $$ close(dbo, ps, result) [FD]
Line_13 $$ ps = con.prepareStatement(strEdQuery) --> Line_49 $$ close(dbo, ps, result) [FD]
Line_36 $$ ps = con.prepareStatement(strQuery) --> Line_49 $$ close(dbo, ps, result) [FD]
Line_5 $$ ResultSet result = null --> Line_49 $$ close(dbo, ps, result) [FD]
Line_15 $$ result = ps.executeQuery() --> Line_49 $$ close(dbo, ps, result) [FD]
