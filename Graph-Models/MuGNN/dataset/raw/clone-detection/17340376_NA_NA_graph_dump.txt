Line_2 $$ private static String fetchImageViaHttp(URL imgUrl) throws IOException --> Line_3 $$ String sURL = imgUrl.toString() [CD]
Line_2 $$ private static String fetchImageViaHttp(URL imgUrl) throws IOException --> Line_3 $$ String sURL = imgUrl.toString() [FD]
Line_2 $$ private static String fetchImageViaHttp(URL imgUrl) throws IOException --> Line_4 $$ String imgFile = imgUrl.getPath() [CD]
Line_2 $$ private static String fetchImageViaHttp(URL imgUrl) throws IOException --> Line_4 $$ String imgFile = imgUrl.getPath() [FD]
Line_2 $$ private static String fetchImageViaHttp(URL imgUrl) throws IOException --> Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() [CD]
Line_2 $$ private static String fetchImageViaHttp(URL imgUrl) throws IOException --> Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() [FD]
Line_2 $$ private static String fetchImageViaHttp(URL imgUrl) throws IOException --> Line_6 $$ String uri = null [CD]
Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() --> Line_8 $$ cnx.setAllowUserInteraction(false) [FD]
Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() --> Line_9 $$ cnx.setDoOutput(true) [FD]
Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() --> Line_10 $$ cnx.addRequestProperty("Cache-Control", "no-cache") [FD]
Line_11 $$ RequestContext ctx = RequestContext.get() --> Line_12 $$ cnx.addRequestProperty("User-Agent", ctx.header("user-agent")) [FD]
Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() --> Line_12 $$ cnx.addRequestProperty("User-Agent", ctx.header("user-agent")) [FD]
Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() --> Line_13 $$ cnx.addRequestProperty("Referer", sURL.substring(0, sURL.indexOf('/', sURL.indexOf('.')) + 1)) [FD]
Line_3 $$ String sURL = imgUrl.toString() --> Line_13 $$ cnx.addRequestProperty("Referer", sURL.substring(0, sURL.indexOf('/', sURL.indexOf('.')) + 1)) [FD]
Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() --> Line_14 $$ cnx.connect() [FD]
Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() --> Line_15 $$ if (cnx.getResponseCode() != HttpURLConnection.HTTP_OK) [FD]
Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() --> Line_16 $$ InputStream imgData = cnx.getInputStream() [FD]
Line_4 $$ String imgFile = imgUrl.getPath() --> Line_17 $$ String ext = FilenameUtils.getExtension(imgFile).toLowerCase() [FD]
Line_17 $$ String ext = FilenameUtils.getExtension(imgFile).toLowerCase() --> Line_18 $$ if (!Multimedia.isImageFile("aa." + ext)) [FD]
Line_6 $$ String uri = null --> Line_19 $$ uri = FMT_FN.format(new Date()) + RandomStringUtils.randomAlphanumeric(4) + '.' + ext [FD]
Line_17 $$ String ext = FilenameUtils.getExtension(imgFile).toLowerCase() --> Line_19 $$ uri = FMT_FN.format(new Date()) + RandomStringUtils.randomAlphanumeric(4) + '.' + ext [FD]
Line_18 $$ if (!Multimedia.isImageFile("aa." + ext)) --> Line_19 $$ uri = FMT_FN.format(new Date()) + RandomStringUtils.randomAlphanumeric(4) + '.' + ext [FD]
Line_20 $$ File fileDest = new File(img_path + uri) --> Line_21 $$ if (!fileDest.getParentFile().exists()) [FD]
Line_16 $$ InputStream imgData = cnx.getInputStream() --> Line_24 $$ IOUtils.copy(imgData, fos) [FD]
Line_22 $$ FileOutputStream fos = new FileOutputStream(fileDest) --> Line_24 $$ IOUtils.copy(imgData, fos) [FD]
Line_16 $$ InputStream imgData = cnx.getInputStream() --> Line_26 $$ IOUtils.closeQuietly(imgData) [FD]
Line_22 $$ FileOutputStream fos = new FileOutputStream(fileDest) --> Line_27 $$ IOUtils.closeQuietly(fos) [FD]
Line_5 $$ HttpURLConnection cnx = (HttpURLConnection) imgUrl.openConnection() --> Line_30 $$ cnx.disconnect() [FD]
Line_2 $$ private static String fetchImageViaHttp(URL imgUrl) throws IOException --> Line_32 $$ return RequestContext.get().contextPath() + "/uploads/img/" + uri [CD]
