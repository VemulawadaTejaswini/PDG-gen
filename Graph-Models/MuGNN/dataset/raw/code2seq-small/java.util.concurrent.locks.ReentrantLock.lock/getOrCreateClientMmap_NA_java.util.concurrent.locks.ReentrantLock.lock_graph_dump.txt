Line_23 $$ if (replica.mmapData instanceof Condition) -->Line_25 $$ cond.awaitUninterruptibly()[ CD ]
Line_38 $$ if (map == null) -->Line_41 $$ return null[ CD ]
Line_30 $$ newCond = lock.newCondition()-->Line_31 $$ replica.mmapData = newCond[ FD ]
Line_11 $$ if (replica.mmapData instanceof Long) -->Line_20 $$ if (LOG.isTraceEnabled()) [ CD ]
Line_2 $$ ClientMmap getOrCreateClientMmap(ShortCircuitReplica replica, boolean anchored) -->Line_35 $$ MappedByteBuffer map = replica.loadMmapInternal()[ FD ]
Line_2 $$ ClientMmap getOrCreateClientMmap(ShortCircuitReplica replica, boolean anchored) -->Line_3 $$ Condition newCond[ CD ]
Line_6 $$ while (replica.mmapData != null) -->Line_7 $$ if (replica.mmapData instanceof MappedByteBuffer) [ CD ]
Line_14 $$ if (delta < mmapRetryTimeoutMs) -->Line_15 $$ if (LOG.isTraceEnabled()) [ CD ]
Line_38 $$ if (map == null) -->Line_40 $$ newCond.signalAll()[ CD ]
Line_11 $$ if (replica.mmapData instanceof Long) -->Line_13 $$ long delta = Time.monotonicNow() - lastAttemptTimeMs[ CD ]
Line_24 $$ Condition cond = (Condition) replica.mmapData-->Line_25 $$ cond.awaitUninterruptibly()[ FD ]
Line_11 $$ if (replica.mmapData instanceof Long) -->Line_14 $$ if (delta < mmapRetryTimeoutMs) [ CD ]
Line_15 $$ if (LOG.isTraceEnabled()) -->Line_16 $$ LOG.trace(this + ": can't create client mmap for " + replica + " because we failed to " + "create one just " + delta + "ms ago.")[ CD ]
Line_23 $$ if (replica.mmapData instanceof Condition) -->Line_27 $$ Preconditions.checkState(false, "invalid mmapData type " + replica.mmapData.getClass().getName())[ CD ]
Line_30 $$ newCond = lock.newCondition()-->Line_40 $$ newCond.signalAll()[ FD ]
Line_11 $$ if (replica.mmapData instanceof Long) -->Line_12 $$ long lastAttemptTimeMs = (Long) replica.mmapData[ CD ]
Line_13 $$ long delta = Time.monotonicNow() - lastAttemptTimeMs-->Line_14 $$ if (delta < mmapRetryTimeoutMs) [ FD ]
Line_23 $$ if (replica.mmapData instanceof Condition) -->Line_24 $$ Condition cond = (Condition) replica.mmapData[ CD ]
Line_2 $$ ClientMmap getOrCreateClientMmap(ShortCircuitReplica replica, boolean anchored) -->Line_45 $$ ref(replica)[ FD ]
Line_35 $$ MappedByteBuffer map = replica.loadMmapInternal()-->Line_38 $$ if (map == null) [ FD ]
Line_30 $$ newCond = lock.newCondition()-->Line_46 $$ newCond.signalAll()[ FD ]
Line_3 $$ Condition newCond-->Line_30 $$ newCond = lock.newCondition()[ FD ]
Line_38 $$ if (map == null) -->Line_39 $$ replica.mmapData = Long.valueOf(Time.monotonicNow())[ CD ]
Line_38 $$ if (map == null) -->Line_45 $$ ref(replica)[ CD ]
Line_11 $$ if (replica.mmapData instanceof Long) -->Line_23 $$ if (replica.mmapData instanceof Condition) [ CD ]
Line_2 $$ ClientMmap getOrCreateClientMmap(ShortCircuitReplica replica, boolean anchored) -->Line_8 $$ ref(replica)[ FD ]
Line_7 $$ if (replica.mmapData instanceof MappedByteBuffer) -->Line_11 $$ if (replica.mmapData instanceof Long) [ CD ]
Line_3 $$ Condition newCond-->Line_46 $$ newCond.signalAll()[ FD ]
Line_2 $$ ClientMmap getOrCreateClientMmap(ShortCircuitReplica replica, boolean anchored) -->Line_36 $$ lock.lock()[ CD ]
Line_38 $$ if (map == null) -->Line_44 $$ replica.mmapData = map[ CD ]
Line_38 $$ if (map == null) -->Line_47 $$ return new ClientMmap(replica, map, anchored)[ CD ]
Line_3 $$ Condition newCond-->Line_31 $$ replica.mmapData = newCond[ FD ]
Line_20 $$ if (LOG.isTraceEnabled()) -->Line_21 $$ LOG.trace(this + ": retrying client mmap for " + replica + ", " + delta + " ms after the previous failure.")[ CD ]
Line_14 $$ if (delta < mmapRetryTimeoutMs) -->Line_18 $$ return null[ CD ]
Line_35 $$ MappedByteBuffer map = replica.loadMmapInternal()-->Line_44 $$ replica.mmapData = map[ FD ]
Line_7 $$ if (replica.mmapData instanceof MappedByteBuffer) -->Line_9 $$ MappedByteBuffer mmap = (MappedByteBuffer) replica.mmapData[ CD ]
Line_2 $$ ClientMmap getOrCreateClientMmap(ShortCircuitReplica replica, boolean anchored) -->Line_4 $$ lock.lock()[ CD ]
Line_2 $$ ClientMmap getOrCreateClientMmap(ShortCircuitReplica replica, boolean anchored) -->Line_35 $$ MappedByteBuffer map = replica.loadMmapInternal()[ CD ]
Line_3 $$ Condition newCond-->Line_40 $$ newCond.signalAll()[ FD ]
Line_7 $$ if (replica.mmapData instanceof MappedByteBuffer) -->Line_8 $$ ref(replica)[ CD ]
Line_38 $$ if (map == null) -->Line_46 $$ newCond.signalAll()[ CD ]
Line_7 $$ if (replica.mmapData instanceof MappedByteBuffer) -->Line_10 $$ return new ClientMmap(replica, mmap, anchored)[ CD ]
