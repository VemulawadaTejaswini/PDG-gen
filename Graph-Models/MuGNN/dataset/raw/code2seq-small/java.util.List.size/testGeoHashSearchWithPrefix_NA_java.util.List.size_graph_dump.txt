Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_8 $$ Settings settings = Settings.settingsBuilder().put(IndexMetaData.SETTING_VERSION_CREATED, version).build()[ CD ]
Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_9 $$ CreateIndexRequestBuilder mappingRequest = client().admin().indices().prepareCreate("test").setSettings(settings).addMapping("pin", mapping)[ CD ]
Line_15 $$ Map<String, SearchHitField> m = searchResponse.getHits().getAt(0).getFields()-->Line_16 $$ List<Object> hashes = m.get("location.geohash").values()[ FD ]
Line_16 $$ List<Object> hashes = m.get("location.geohash").values()-->Line_17 $$ final int numHashes = hashes.size()[ FD ]
Line_5 $$ String mapping = XContentFactory.jsonBuilder().startObject().startObject("pin").startObject("properties").startObject("location").field("type", "geo_point").field("geohash_prefix", true).field("geohash_precision", precision).field("store", true).endObject().endObject().endObject().endObject().string()-->Line_9 $$ CreateIndexRequestBuilder mappingRequest = client().admin().indices().prepareCreate("test").setSettings(settings).addMapping("pin", mapping)[ FD ]
Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_5 $$ String mapping = XContentFactory.jsonBuilder().startObject().startObject("pin").startObject("properties").startObject("location").field("type", "geo_point").field("geohash_prefix", true).field("geohash_precision", precision).field("store", true).endObject().endObject().endObject().endObject().string()[ CD ]
Line_8 $$ Settings settings = Settings.settingsBuilder().put(IndexMetaData.SETTING_VERSION_CREATED, version).build()-->Line_9 $$ CreateIndexRequestBuilder mappingRequest = client().admin().indices().prepareCreate("test").setSettings(settings).addMapping("pin", mapping)[ FD ]
Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_11 $$ client().admin().cluster().prepareHealth().setWaitForEvents(Priority.LANGUID).setWaitForGreenStatus().execute().actionGet()[ CD ]
Line_9 $$ CreateIndexRequestBuilder mappingRequest = client().admin().indices().prepareCreate("test").setSettings(settings).addMapping("pin", mapping)-->Line_10 $$ mappingRequest.execute().actionGet()[ FD ]
Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_10 $$ mappingRequest.execute().actionGet()[ CD ]
Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_18 $$ for (int i = 0; i < numHashes; ++i) [ CD ]
Line_16 $$ List<Object> hashes = m.get("location.geohash").values()-->Line_19 $$ assertEquals("dr5regy6rc6y".substring(0, numHashes - i), hashes.get(i))[ FD ]
Line_18 $$ for (int i = 0; i < numHashes; ++i) -->Line_19 $$ assertEquals("dr5regy6rc6y".substring(0, numHashes - i), hashes.get(i))[ FD ]
Line_18 $$ for (int i = 0; i < numHashes; ++i) -->Line_19 $$ assertEquals("dr5regy6rc6y".substring(0, numHashes - i), hashes.get(i))[ CD ]
Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_15 $$ Map<String, SearchHitField> m = searchResponse.getHits().getAt(0).getFields()[ CD ]
Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_12 $$ client().prepareIndex("test", "pin", "1").setSource(jsonBuilder().startObject().startObject("location").field("lat", 40.7143528).field("lon", -74.0059731).endObject().endObject()).setRefresh(true).execute().actionGet()[ CD ]
Line_17 $$ final int numHashes = hashes.size()-->Line_18 $$ for (int i = 0; i < numHashes; ++i) [ FD ]
Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_17 $$ final int numHashes = hashes.size()[ CD ]
Line_2 $$ public void testGeoHashSearchWithPrefix() throws Exception -->Line_16 $$ List<Object> hashes = m.get("location.geohash").values()[ CD ]
