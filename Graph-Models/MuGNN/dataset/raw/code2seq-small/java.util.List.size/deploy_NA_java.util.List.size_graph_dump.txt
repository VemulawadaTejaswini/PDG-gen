Line_2 $$ public void deploy(final DeploymentPhaseContext phaseContext) throws DeploymentUnitProcessingException -->Line_4 $$ final Module module = deploymentUnit.getAttachment(Attachments.MODULE)[ CD ]
Line_6 $$ if (module != null && servicesAttachment != null) -->Line_8 $$ final List<String> driverNames = servicesAttachment.getServiceImplementations(Driver.class.getName())[ CD ]
Line_2 $$ public void deploy(final DeploymentPhaseContext phaseContext) throws DeploymentUnitProcessingException -->Line_3 $$ final DeploymentUnit deploymentUnit = phaseContext.getDeploymentUnit()[ CD ]
Line_13 $$ final Driver driver = constructor.newInstance()-->Line_14 $$ final int majorVersion = driver.getMajorVersion()[ FD ]
Line_13 $$ final Driver driver = constructor.newInstance()-->Line_15 $$ final int minorVersion = driver.getMinorVersion()[ FD ]
Line_3 $$ final DeploymentUnit deploymentUnit = phaseContext.getDeploymentUnit()-->Line_22 $$ String driverName = deploymentUnit.getName()[ FD ]
Line_2 $$ public void deploy(final DeploymentPhaseContext phaseContext) throws DeploymentUnitProcessingException -->Line_28 $$ phaseContext.getServiceTarget().addService(ServiceName.JBOSS.append("jdbc-driver", driverName.replaceAll("\\.", "_")), driverService).addDependency(ConnectorServices.JDBC_DRIVER_REGISTRY_SERVICE, DriverRegistry.class, driverService.getDriverRegistryServiceInjector()).setInitialMode(Mode.ACTIVE).install()[ FD ]
Line_23 $$ if ((driverName.contains(".") && !driverName.endsWith(".jar")) || driverNames.size() != 1) -->Line_24 $$ driverName += "_" + driverClassName + "_" + majorVersion + "_" + minorVersion[ CD ]
Line_27 $$ DriverService driverService = new DriverService(driverMetadata, driver)-->Line_28 $$ phaseContext.getServiceTarget().addService(ServiceName.JBOSS.append("jdbc-driver", driverName.replaceAll("\\.", "_")), driverService).addDependency(ConnectorServices.JDBC_DRIVER_REGISTRY_SERVICE, DriverRegistry.class, driverService.getDriverRegistryServiceInjector()).setInitialMode(Mode.ACTIVE).install()[ FD ]
Line_2 $$ public void deploy(final DeploymentPhaseContext phaseContext) throws DeploymentUnitProcessingException -->Line_5 $$ final ServicesAttachment servicesAttachment = deploymentUnit.getAttachment(Attachments.SERVICES)[ CD ]
Line_15 $$ final int minorVersion = driver.getMinorVersion()-->Line_20 $$ DEPLOYER_JDBC_LOGGER.deployingNonCompliantJdbcDriver(driverClass, Integer.valueOf(majorVersion), Integer.valueOf(minorVersion))[ FD ]
Line_7 $$ final ModuleClassLoader classLoader = module.getClassLoader()-->Line_11 $$ final Class<? extends Driver> driverClass = classLoader.loadClass(driverClassName).asSubclass(Driver.class)[ FD ]
Line_11 $$ final Class<? extends Driver> driverClass = classLoader.loadClass(driverClassName).asSubclass(Driver.class)-->Line_20 $$ DEPLOYER_JDBC_LOGGER.deployingNonCompliantJdbcDriver(driverClass, Integer.valueOf(majorVersion), Integer.valueOf(minorVersion))[ FD ]
Line_22 $$ String driverName = deploymentUnit.getName()-->Line_23 $$ if ((driverName.contains(".") && !driverName.endsWith(".jar")) || driverNames.size() != 1) [ FD ]
Line_4 $$ final Module module = deploymentUnit.getAttachment(Attachments.MODULE)-->Line_7 $$ final ModuleClassLoader classLoader = module.getClassLoader()[ FD ]
Line_17 $$ if (compliant) -->Line_20 $$ DEPLOYER_JDBC_LOGGER.deployingNonCompliantJdbcDriver(driverClass, Integer.valueOf(majorVersion), Integer.valueOf(minorVersion))[ CD ]
Line_14 $$ final int majorVersion = driver.getMajorVersion()-->Line_20 $$ DEPLOYER_JDBC_LOGGER.deployingNonCompliantJdbcDriver(driverClass, Integer.valueOf(majorVersion), Integer.valueOf(minorVersion))[ FD ]
Line_12 $$ final Constructor<? extends Driver> constructor = driverClass.getConstructor()-->Line_13 $$ final Driver driver = constructor.newInstance()[ FD ]
Line_9 $$ for (String driverClassName : driverNames) -->Line_30 $$ DEPLOYER_JDBC_LOGGER.cannotInstantiateDriverClass(driverClassName, e)[ FD ]
Line_8 $$ final List<String> driverNames = servicesAttachment.getServiceImplementations(Driver.class.getName())-->Line_23 $$ if ((driverName.contains(".") && !driverName.endsWith(".jar")) || driverNames.size() != 1) [ FD ]
Line_22 $$ String driverName = deploymentUnit.getName()-->Line_28 $$ phaseContext.getServiceTarget().addService(ServiceName.JBOSS.append("jdbc-driver", driverName.replaceAll("\\.", "_")), driverService).addDependency(ConnectorServices.JDBC_DRIVER_REGISTRY_SERVICE, DriverRegistry.class, driverService.getDriverRegistryServiceInjector()).setInitialMode(Mode.ACTIVE).install()[ FD ]
Line_11 $$ final Class<? extends Driver> driverClass = classLoader.loadClass(driverClassName).asSubclass(Driver.class)-->Line_12 $$ final Constructor<? extends Driver> constructor = driverClass.getConstructor()[ FD ]
Line_14 $$ final int majorVersion = driver.getMajorVersion()-->Line_18 $$ DEPLOYER_JDBC_LOGGER.deployingCompliantJdbcDriver(driverClass, Integer.valueOf(majorVersion), Integer.valueOf(minorVersion))[ FD ]
Line_15 $$ final int minorVersion = driver.getMinorVersion()-->Line_24 $$ driverName += "_" + driverClassName + "_" + majorVersion + "_" + minorVersion[ FD ]
Line_11 $$ final Class<? extends Driver> driverClass = classLoader.loadClass(driverClassName).asSubclass(Driver.class)-->Line_26 $$ InstalledDriver driverMetadata = new InstalledDriver(driverName, driverClass.getName(), null, null, majorVersion, minorVersion, compliant)[ FD ]
Line_5 $$ final ServicesAttachment servicesAttachment = deploymentUnit.getAttachment(Attachments.SERVICES)-->Line_8 $$ final List<String> driverNames = servicesAttachment.getServiceImplementations(Driver.class.getName())[ FD ]
Line_9 $$ for (String driverClassName : driverNames) -->Line_11 $$ final Class<? extends Driver> driverClass = classLoader.loadClass(driverClassName).asSubclass(Driver.class)[ FD ]
Line_15 $$ final int minorVersion = driver.getMinorVersion()-->Line_18 $$ DEPLOYER_JDBC_LOGGER.deployingCompliantJdbcDriver(driverClass, Integer.valueOf(majorVersion), Integer.valueOf(minorVersion))[ FD ]
Line_13 $$ final Driver driver = constructor.newInstance()-->Line_16 $$ final boolean compliant = driver.jdbcCompliant()[ FD ]
Line_6 $$ if (module != null && servicesAttachment != null) -->Line_7 $$ final ModuleClassLoader classLoader = module.getClassLoader()[ CD ]
Line_24 $$ driverName += "_" + driverClassName + "_" + majorVersion + "_" + minorVersion-->Line_28 $$ phaseContext.getServiceTarget().addService(ServiceName.JBOSS.append("jdbc-driver", driverName.replaceAll("\\.", "_")), driverService).addDependency(ConnectorServices.JDBC_DRIVER_REGISTRY_SERVICE, DriverRegistry.class, driverService.getDriverRegistryServiceInjector()).setInitialMode(Mode.ACTIVE).install()[ FD ]
Line_3 $$ final DeploymentUnit deploymentUnit = phaseContext.getDeploymentUnit()-->Line_5 $$ final ServicesAttachment servicesAttachment = deploymentUnit.getAttachment(Attachments.SERVICES)[ FD ]
Line_2 $$ public void deploy(final DeploymentPhaseContext phaseContext) throws DeploymentUnitProcessingException -->Line_3 $$ final DeploymentUnit deploymentUnit = phaseContext.getDeploymentUnit()[ FD ]
Line_11 $$ final Class<? extends Driver> driverClass = classLoader.loadClass(driverClassName).asSubclass(Driver.class)-->Line_18 $$ DEPLOYER_JDBC_LOGGER.deployingCompliantJdbcDriver(driverClass, Integer.valueOf(majorVersion), Integer.valueOf(minorVersion))[ FD ]
Line_17 $$ if (compliant) -->Line_18 $$ DEPLOYER_JDBC_LOGGER.deployingCompliantJdbcDriver(driverClass, Integer.valueOf(majorVersion), Integer.valueOf(minorVersion))[ CD ]
Line_22 $$ String driverName = deploymentUnit.getName()-->Line_24 $$ driverName += "_" + driverClassName + "_" + majorVersion + "_" + minorVersion[ FD ]
Line_2 $$ public void deploy(final DeploymentPhaseContext phaseContext) throws DeploymentUnitProcessingException -->Line_6 $$ if (module != null && servicesAttachment != null) [ CD ]
Line_3 $$ final DeploymentUnit deploymentUnit = phaseContext.getDeploymentUnit()-->Line_4 $$ final Module module = deploymentUnit.getAttachment(Attachments.MODULE)[ FD ]
