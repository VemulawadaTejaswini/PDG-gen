Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_5 $$ int from = 0-->Line_9 $$ int nextMarker = findNextMarker(marker, from, data, length)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_142 $$ return this[ CD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_70 $$ if ("op_type".equals(currentFieldName) || "opType".equals(currentFieldName)) [ FD ]
Line_8 $$ while (true) -->Line_9 $$ int nextMarker = findNextMarker(marker, from, data, length)[ CD ]
Line_75 $$ versionType = VersionType.fromString(parser.text())-->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ FD ]
Line_36 $$ String opType = null-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_116 $$ if ("update".equals(action)) -->Line_118 $$ if (fields != null) [ CD ]
Line_32 $$ String parent = null-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_9 $$ int nextMarker = findNextMarker(marker, from, data, length)-->Line_101 $$ if (nextMarker == -1) [ FD ]
Line_3 $$ XContent xContent = XContentFactory.xContent(data)-->Line_7 $$ byte marker = xContent.streamSeparator()[ FD ]
Line_32 $$ String parent = null-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_44 $$ String currentFieldName = null-->Line_47 $$ currentFieldName = parser.currentName()[ FD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_58 $$ if ("_routing".equals(currentFieldName) || "routing".equals(currentFieldName)) [ FD ]
Line_83 $$ if (token == XContentParser.Token.START_ARRAY) -->Line_84 $$ if ("fields".equals(currentFieldName)) [ CD ]
Line_61 $$ parent = parser.text()-->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ FD ]
Line_44 $$ String currentFieldName = null-->Line_49 $$ if ("_index".equals(currentFieldName)) [ FD ]
Line_74 $$ if ("_version_type".equals(currentFieldName) || "_versionType".equals(currentFieldName) || "version_type".equals(currentFieldName) || "versionType".equals(currentFieldName)) -->Line_76 $$ if ("_retry_on_conflict".equals(currentFieldName) || "_retryOnConflict".equals(currentFieldName)) [ CD ]
Line_45 $$ while ((token = parser.nextToken()) != XContentParser.Token.END_OBJECT) -->Line_83 $$ if (token == XContentParser.Token.START_ARRAY) [ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_31 $$ String routing = defaultRouting-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_6 $$ int length = data.length()[ FD ]
Line_122 $$ if (upsertRequest != null) -->Line_123 $$ upsertRequest.timestamp(timestamp)[ CD ]
Line_46 $$ if (token == XContentParser.Token.FIELD_NAME) -->Line_48 $$ if (token.isValue()) [ CD ]
Line_44 $$ String currentFieldName = null-->Line_64 $$ if ("_ttl".equals(currentFieldName) || "ttl".equals(currentFieldName)) [ FD ]
Line_27 $$ String action = parser.currentName()-->Line_97 $$ if ("delete".equals(action)) [ FD ]
Line_62 $$ if ("_timestamp".equals(currentFieldName) || "timestamp".equals(currentFieldName)) -->Line_64 $$ if ("_ttl".equals(currentFieldName) || "ttl".equals(currentFieldName)) [ CD ]
Line_60 $$ if ("_parent".equals(currentFieldName) || "parent".equals(currentFieldName)) -->Line_62 $$ if ("_timestamp".equals(currentFieldName) || "timestamp".equals(currentFieldName)) [ CD ]
Line_75 $$ versionType = VersionType.fromString(parser.text())-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_39 $$ int retryOnConflict = 0-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_100 $$ nextMarker = findNextMarker(marker, from, data, length)[ FD ]
Line_37 $$ long version = Versions.MATCH_ANY-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_31 $$ String routing = defaultRouting-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_100 $$ nextMarker = findNextMarker(marker, from, data, length)-->Line_10 $$ if (nextMarker == -1) [ FD ]
Line_68 $$ ttl = new TimeValue(parser.longValue())-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_36 $$ String opType = null-->Line_109 $$ if (opType == null) [ FD ]
Line_97 $$ if ("delete".equals(action)) -->Line_101 $$ if (nextMarker == -1) [ CD ]
Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)-->Line_131 $$ doc.ttl(ttl)[ FD ]
Line_65 $$ if (parser.currentToken() == XContentParser.Token.VALUE_STRING) -->Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)[ CD ]
Line_109 $$ if (opType == null) -->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ CD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_7 $$ byte marker = xContent.streamSeparator()[ CD ]
Line_5 $$ int from = 0-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_75 $$ versionType = VersionType.fromString(parser.text())-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_35 $$ TimeValue ttl = null-->Line_124 $$ upsertRequest.ttl(ttl)[ FD ]
Line_34 $$ String timestamp = null-->Line_63 $$ timestamp = parser.text()[ FD ]
Line_54 $$ if ("_type".equals(currentFieldName)) -->Line_56 $$ if ("_id".equals(currentFieldName)) [ CD ]
Line_116 $$ if ("update".equals(action)) -->Line_122 $$ if (upsertRequest != null) [ CD ]
Line_73 $$ version = parser.longValue()-->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ FD ]
Line_38 $$ VersionType versionType = VersionType.INTERNAL-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_34 $$ String timestamp = null-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_49 $$ if ("_index".equals(currentFieldName)) -->Line_50 $$ if (!allowExplicitIndex) [ CD ]
Line_9 $$ int nextMarker = findNextMarker(marker, from, data, length)-->Line_10 $$ if (nextMarker == -1) [ FD ]
Line_68 $$ ttl = new TimeValue(parser.longValue())-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_28 $$ String index = defaultIndex-->Line_53 $$ index = parser.text()[ FD ]
Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_45 $$ while ((token = parser.nextToken()) != XContentParser.Token.END_OBJECT) -->Line_46 $$ if (token == XContentParser.Token.FIELD_NAME) [ CD ]
Line_8 $$ while (true) -->Line_10 $$ if (nextMarker == -1) [ CD ]
Line_122 $$ if (upsertRequest != null) -->Line_124 $$ upsertRequest.ttl(ttl)[ CD ]
Line_64 $$ if ("_ttl".equals(currentFieldName) || "ttl".equals(currentFieldName)) -->Line_70 $$ if ("op_type".equals(currentFieldName) || "opType".equals(currentFieldName)) [ CD ]
Line_31 $$ String routing = defaultRouting-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_5 $$ int from = 0-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_86 $$ fields = values.toArray(new String[values.size()])-->Line_118 $$ if (fields != null) [ FD ]
Line_84 $$ if ("fields".equals(currentFieldName)) -->Line_85 $$ List<Object> values = parser.list()[ CD ]
Line_58 $$ if ("_routing".equals(currentFieldName) || "routing".equals(currentFieldName)) -->Line_60 $$ if ("_parent".equals(currentFieldName) || "parent".equals(currentFieldName)) [ CD ]
Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)[ FD ]
Line_73 $$ version = parser.longValue()-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_44 $$ String currentFieldName = null-->Line_60 $$ if ("_parent".equals(currentFieldName) || "parent".equals(currentFieldName)) [ FD ]
Line_44 $$ String currentFieldName = null-->Line_58 $$ if ("_routing".equals(currentFieldName) || "routing".equals(currentFieldName)) [ FD ]
Line_35 $$ TimeValue ttl = null-->Line_68 $$ ttl = new TimeValue(parser.longValue())[ FD ]
Line_27 $$ String action = parser.currentName()-->Line_114 $$ if ("create".equals(action)) [ FD ]
Line_97 $$ if ("delete".equals(action)) -->Line_100 $$ nextMarker = findNextMarker(marker, from, data, length)[ CD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_60 $$ if ("_parent".equals(currentFieldName) || "parent".equals(currentFieldName)) [ FD ]
Line_56 $$ if ("_id".equals(currentFieldName)) -->Line_57 $$ id = parser.text()[ CD ]
Line_45 $$ while ((token = parser.nextToken()) != XContentParser.Token.END_OBJECT) -->Line_90 $$ if (token != XContentParser.Token.VALUE_NULL) [ FD ]
Line_35 $$ TimeValue ttl = null-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_116 $$ if ("update".equals(action)) -->Line_128 $$ IndexRequest doc = updateRequest.doc()[ CD ]
Line_33 $$ String[] fields = defaultFields-->Line_118 $$ if (fields != null) [ FD ]
Line_73 $$ version = parser.longValue()-->Line_132 $$ doc.version(version)[ FD ]
Line_114 $$ if ("create".equals(action)) -->Line_116 $$ if ("update".equals(action)) [ CD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_64 $$ if ("_ttl".equals(currentFieldName) || "ttl".equals(currentFieldName)) [ FD ]
Line_68 $$ ttl = new TimeValue(parser.longValue())-->Line_124 $$ upsertRequest.ttl(ttl)[ FD ]
Line_129 $$ if (doc != null) -->Line_132 $$ doc.version(version)[ CD ]
Line_44 $$ String currentFieldName = null-->Line_62 $$ if ("_timestamp".equals(currentFieldName) || "timestamp".equals(currentFieldName)) [ FD ]
Line_38 $$ VersionType versionType = VersionType.INTERNAL-->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ FD ]
Line_122 $$ if (upsertRequest != null) -->Line_125 $$ upsertRequest.version(version)[ CD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_4 $$ int line = 0[ CD ]
Line_32 $$ String parent = null-->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ FD ]
Line_59 $$ routing = parser.text()-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_54 $$ if ("_type".equals(currentFieldName)) [ FD ]
Line_109 $$ if (opType == null) -->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ CD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_56 $$ if ("_id".equals(currentFieldName)) [ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_6 $$ int length = data.length()[ CD ]
Line_5 $$ int from = 0-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_75 $$ versionType = VersionType.fromString(parser.text())-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_129 $$ if (doc != null) -->Line_130 $$ doc.timestamp(timestamp)[ CD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_76 $$ if ("_retry_on_conflict".equals(currentFieldName) || "_retryOnConflict".equals(currentFieldName)) [ FD ]
Line_86 $$ fields = values.toArray(new String[values.size()])-->Line_119 $$ updateRequest.fields(fields)[ FD ]
Line_45 $$ while ((token = parser.nextToken()) != XContentParser.Token.END_OBJECT) -->Line_46 $$ if (token == XContentParser.Token.FIELD_NAME) [ FD ]
Line_34 $$ String timestamp = null-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_34 $$ String timestamp = null-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_44 $$ String currentFieldName = null-->Line_56 $$ if ("_id".equals(currentFieldName)) [ FD ]
Line_45 $$ while ((token = parser.nextToken()) != XContentParser.Token.END_OBJECT) -->Line_94 $$ if (token != XContentParser.Token.END_OBJECT) [ FD ]
Line_63 $$ timestamp = parser.text()-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_37 $$ long version = Versions.MATCH_ANY-->Line_132 $$ doc.version(version)[ FD ]
Line_83 $$ if (token == XContentParser.Token.START_ARRAY) -->Line_90 $$ if (token != XContentParser.Token.VALUE_NULL) [ CD ]
Line_32 $$ String parent = null-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_63 $$ timestamp = parser.text()-->Line_123 $$ upsertRequest.timestamp(timestamp)[ FD ]
Line_64 $$ if ("_ttl".equals(currentFieldName) || "ttl".equals(currentFieldName)) -->Line_65 $$ if (parser.currentToken() == XContentParser.Token.VALUE_STRING) [ CD ]
Line_44 $$ String currentFieldName = null-->Line_84 $$ if ("fields".equals(currentFieldName)) [ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_8 $$ while (true) [ CD ]
Line_38 $$ VersionType versionType = VersionType.INTERNAL-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_43 $$ if (token == XContentParser.Token.START_OBJECT) -->Line_94 $$ if (token != XContentParser.Token.END_OBJECT) [ CD ]
Line_44 $$ String currentFieldName = null-->Line_54 $$ if ("_type".equals(currentFieldName)) [ FD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_84 $$ if ("fields".equals(currentFieldName)) [ FD ]
Line_46 $$ if (token == XContentParser.Token.FIELD_NAME) -->Line_47 $$ currentFieldName = parser.currentName()[ CD ]
Line_63 $$ timestamp = parser.text()-->Line_130 $$ doc.timestamp(timestamp)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_50 $$ if (!allowExplicitIndex) [ FD ]
Line_7 $$ byte marker = xContent.streamSeparator()-->Line_100 $$ nextMarker = findNextMarker(marker, from, data, length)[ FD ]
Line_71 $$ opType = parser.text()-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_62 $$ if ("_timestamp".equals(currentFieldName) || "timestamp".equals(currentFieldName)) [ FD ]
Line_84 $$ if ("fields".equals(currentFieldName)) -->Line_86 $$ fields = values.toArray(new String[values.size()])[ CD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ FD ]
Line_31 $$ String routing = defaultRouting-->Line_59 $$ routing = parser.text()[ FD ]
Line_38 $$ VersionType versionType = VersionType.INTERNAL-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_3 $$ XContent xContent = XContentFactory.xContent(data)[ FD ]
Line_70 $$ if ("op_type".equals(currentFieldName) || "opType".equals(currentFieldName)) -->Line_71 $$ opType = parser.text()[ CD ]
Line_38 $$ VersionType versionType = VersionType.INTERNAL-->Line_126 $$ upsertRequest.versionType(versionType)[ FD ]
Line_38 $$ VersionType versionType = VersionType.INTERNAL-->Line_133 $$ doc.versionType(versionType)[ FD ]
Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)-->Line_68 $$ ttl = new TimeValue(parser.longValue())[ FD ]
Line_71 $$ opType = parser.text()-->Line_109 $$ if (opType == null) [ FD ]
Line_61 $$ parent = parser.text()-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_129 $$ if (doc != null) -->Line_133 $$ doc.versionType(versionType)[ CD ]
Line_34 $$ String timestamp = null-->Line_123 $$ upsertRequest.timestamp(timestamp)[ FD ]
Line_31 $$ String routing = defaultRouting-->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ FD ]
Line_118 $$ if (fields != null) -->Line_119 $$ updateRequest.fields(fields)[ CD ]
Line_44 $$ String currentFieldName = null-->Line_74 $$ if ("_version_type".equals(currentFieldName) || "_versionType".equals(currentFieldName) || "version_type".equals(currentFieldName) || "versionType".equals(currentFieldName)) [ FD ]
Line_116 $$ if ("update".equals(action)) -->Line_129 $$ if (doc != null) [ CD ]
Line_72 $$ if ("_version".equals(currentFieldName) || "version".equals(currentFieldName)) -->Line_73 $$ version = parser.longValue()[ CD ]
Line_48 $$ if (token.isValue()) -->Line_49 $$ if ("_index".equals(currentFieldName)) [ CD ]
Line_77 $$ retryOnConflict = parser.intValue()-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_100 $$ nextMarker = findNextMarker(marker, from, data, length)-->Line_101 $$ if (nextMarker == -1) [ FD ]
Line_37 $$ long version = Versions.MATCH_ANY-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_33 $$ String[] fields = defaultFields-->Line_119 $$ updateRequest.fields(fields)[ FD ]
Line_68 $$ ttl = new TimeValue(parser.longValue())-->Line_131 $$ doc.ttl(ttl)[ FD ]
Line_60 $$ if ("_parent".equals(currentFieldName) || "parent".equals(currentFieldName)) -->Line_61 $$ parent = parser.text()[ CD ]
Line_38 $$ VersionType versionType = VersionType.INTERNAL-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_63 $$ timestamp = parser.text()-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_7 $$ byte marker = xContent.streamSeparator()-->Line_9 $$ int nextMarker = findNextMarker(marker, from, data, length)[ FD ]
Line_6 $$ int length = data.length()-->Line_9 $$ int nextMarker = findNextMarker(marker, from, data, length)[ FD ]
Line_5 $$ int from = 0-->Line_100 $$ nextMarker = findNextMarker(marker, from, data, length)[ FD ]
Line_35 $$ TimeValue ttl = null-->Line_131 $$ doc.ttl(ttl)[ FD ]
Line_39 $$ int retryOnConflict = 0-->Line_77 $$ retryOnConflict = parser.intValue()[ FD ]
Line_43 $$ if (token == XContentParser.Token.START_OBJECT) -->Line_44 $$ String currentFieldName = null[ CD ]
Line_59 $$ routing = parser.text()-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_36 $$ String opType = null-->Line_71 $$ opType = parser.text()[ FD ]
Line_43 $$ if (token == XContentParser.Token.START_OBJECT) -->Line_45 $$ while ((token = parser.nextToken()) != XContentParser.Token.END_OBJECT) [ CD ]
Line_4 $$ int line = 0-->Line_104 $$ line++[ FD ]
Line_35 $$ TimeValue ttl = null-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_5 $$ int from = 0[ CD ]
Line_9 $$ int nextMarker = findNextMarker(marker, from, data, length)-->Line_100 $$ nextMarker = findNextMarker(marker, from, data, length)[ FD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_74 $$ if ("_version_type".equals(currentFieldName) || "_versionType".equals(currentFieldName) || "version_type".equals(currentFieldName) || "versionType".equals(currentFieldName)) [ FD ]
Line_73 $$ version = parser.longValue()-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_97 $$ if ("delete".equals(action)) -->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ CD ]
Line_73 $$ version = parser.longValue()-->Line_125 $$ upsertRequest.version(version)[ FD ]
Line_8 $$ while (true) -->Line_13 $$ line++[ CD ]
Line_73 $$ version = parser.longValue()-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_114 $$ if ("create".equals(action)) -->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ CD ]
Line_6 $$ int length = data.length()-->Line_100 $$ nextMarker = findNextMarker(marker, from, data, length)[ FD ]
Line_44 $$ String currentFieldName = null-->Line_76 $$ if ("_retry_on_conflict".equals(currentFieldName) || "_retryOnConflict".equals(currentFieldName)) [ FD ]
Line_37 $$ long version = Versions.MATCH_ANY-->Line_125 $$ upsertRequest.version(version)[ FD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_72 $$ if ("_version".equals(currentFieldName) || "version".equals(currentFieldName)) [ FD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_78 $$ if ("fields".equals(currentFieldName)) [ FD ]
Line_35 $$ TimeValue ttl = null-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_37 $$ long version = Versions.MATCH_ANY-->Line_73 $$ version = parser.longValue()[ FD ]
Line_74 $$ if ("_version_type".equals(currentFieldName) || "_versionType".equals(currentFieldName) || "version_type".equals(currentFieldName) || "versionType".equals(currentFieldName)) -->Line_75 $$ versionType = VersionType.fromString(parser.text())[ CD ]
Line_65 $$ if (parser.currentToken() == XContentParser.Token.VALUE_STRING) -->Line_68 $$ ttl = new TimeValue(parser.longValue())[ CD ]
Line_75 $$ versionType = VersionType.fromString(parser.text())-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_129 $$ if (doc != null) -->Line_131 $$ doc.ttl(ttl)[ CD ]
Line_38 $$ VersionType versionType = VersionType.INTERNAL-->Line_75 $$ versionType = VersionType.fromString(parser.text())[ FD ]
Line_32 $$ String parent = null-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_49 $$ if ("_index".equals(currentFieldName)) -->Line_53 $$ index = parser.text()[ CD ]
Line_33 $$ String[] fields = defaultFields-->Line_86 $$ fields = values.toArray(new String[values.size()])[ FD ]
Line_34 $$ String timestamp = null-->Line_130 $$ doc.timestamp(timestamp)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_135 $$ internalAdd(updateRequest, payload)[ FD ]
Line_85 $$ List<Object> values = parser.list()-->Line_86 $$ fields = values.toArray(new String[values.size()])[ FD ]
Line_44 $$ String currentFieldName = null-->Line_70 $$ if ("op_type".equals(currentFieldName) || "opType".equals(currentFieldName)) [ FD ]
Line_116 $$ if ("update".equals(action)) -->Line_121 $$ IndexRequest upsertRequest = updateRequest.upsertRequest()[ CD ]
Line_49 $$ if ("_index".equals(currentFieldName)) -->Line_54 $$ if ("_type".equals(currentFieldName)) [ CD ]
Line_68 $$ ttl = new TimeValue(parser.longValue())-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_9 $$ int nextMarker = findNextMarker(marker, from, data, length)[ FD ]
Line_35 $$ TimeValue ttl = null-->Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)[ FD ]
Line_54 $$ if ("_type".equals(currentFieldName)) -->Line_55 $$ type = parser.text()[ CD ]
Line_61 $$ parent = parser.text()-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_47 $$ currentFieldName = parser.currentName()-->Line_49 $$ if ("_index".equals(currentFieldName)) [ FD ]
Line_56 $$ if ("_id".equals(currentFieldName)) -->Line_58 $$ if ("_routing".equals(currentFieldName) || "routing".equals(currentFieldName)) [ CD ]
Line_72 $$ if ("_version".equals(currentFieldName) || "version".equals(currentFieldName)) -->Line_74 $$ if ("_version_type".equals(currentFieldName) || "_versionType".equals(currentFieldName) || "version_type".equals(currentFieldName) || "versionType".equals(currentFieldName)) [ CD ]
Line_59 $$ routing = parser.text()-->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ FD ]
Line_37 $$ long version = Versions.MATCH_ANY-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_59 $$ routing = parser.text()-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_48 $$ if (token.isValue()) -->Line_83 $$ if (token == XContentParser.Token.START_ARRAY) [ CD ]
Line_27 $$ String action = parser.currentName()-->Line_116 $$ if ("update".equals(action)) [ FD ]
Line_59 $$ routing = parser.text()-->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)-->Line_124 $$ upsertRequest.ttl(ttl)[ FD ]
Line_75 $$ versionType = VersionType.fromString(parser.text())-->Line_126 $$ upsertRequest.versionType(versionType)[ FD ]
Line_44 $$ String currentFieldName = null-->Line_66 $$ ttl = TimeValue.parseTimeValue(parser.text(), null, currentFieldName)[ FD ]
Line_76 $$ if ("_retry_on_conflict".equals(currentFieldName) || "_retryOnConflict".equals(currentFieldName)) -->Line_77 $$ retryOnConflict = parser.intValue()[ CD ]
Line_97 $$ if ("delete".equals(action)) -->Line_104 $$ line++[ CD ]
Line_44 $$ String currentFieldName = null-->Line_72 $$ if ("_version".equals(currentFieldName) || "version".equals(currentFieldName)) [ FD ]
Line_122 $$ if (upsertRequest != null) -->Line_126 $$ upsertRequest.versionType(versionType)[ CD ]
Line_5 $$ int from = 0-->Line_112 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create("create".equals(opType)).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_3 $$ XContent xContent = XContentFactory.xContent(data)[ CD ]
Line_37 $$ long version = Versions.MATCH_ANY-->Line_98 $$ add(new DeleteRequest(index, type, id).routing(routing).parent(parent).version(version).versionType(versionType), payload)[ FD ]
Line_63 $$ timestamp = parser.text()-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_116 $$ if ("update".equals(action)) -->Line_135 $$ internalAdd(updateRequest, payload)[ CD ]
Line_61 $$ parent = parser.text()-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_116 $$ if ("update".equals(action)) -->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ CD ]
Line_31 $$ String routing = defaultRouting-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_2 $$ public BulkRequest add(BytesReference data, @Nullable String defaultIndex, @Nullable String defaultType, @Nullable String defaultRouting, @Nullable String[] defaultFields, @Nullable Object payload, boolean allowExplicitIndex) throws Exception -->Line_115 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).create(true).source(data.slice(from, nextMarker - from)), payload)[ FD ]
Line_58 $$ if ("_routing".equals(currentFieldName) || "routing".equals(currentFieldName)) -->Line_59 $$ routing = parser.text()[ CD ]
Line_32 $$ String parent = null-->Line_61 $$ parent = parser.text()[ FD ]
Line_76 $$ if ("_retry_on_conflict".equals(currentFieldName) || "_retryOnConflict".equals(currentFieldName)) -->Line_78 $$ if ("fields".equals(currentFieldName)) [ CD ]
Line_62 $$ if ("_timestamp".equals(currentFieldName) || "timestamp".equals(currentFieldName)) -->Line_63 $$ timestamp = parser.text()[ CD ]
Line_45 $$ while ((token = parser.nextToken()) != XContentParser.Token.END_OBJECT) -->Line_48 $$ if (token.isValue()) [ FD ]
Line_30 $$ String id = null-->Line_57 $$ id = parser.text()[ FD ]
Line_37 $$ long version = Versions.MATCH_ANY-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_44 $$ String currentFieldName = null-->Line_78 $$ if ("fields".equals(currentFieldName)) [ FD ]
Line_4 $$ int line = 0-->Line_13 $$ line++[ FD ]
Line_75 $$ versionType = VersionType.fromString(parser.text())-->Line_133 $$ doc.versionType(versionType)[ FD ]
Line_29 $$ String type = defaultType-->Line_55 $$ type = parser.text()[ FD ]
Line_61 $$ parent = parser.text()-->Line_117 $$ UpdateRequest updateRequest = new UpdateRequest(index, type, id).routing(routing).parent(parent).retryOnConflict(retryOnConflict).version(version).versionType(versionType).routing(routing).parent(parent).source(data.slice(from, nextMarker - from))[ FD ]
Line_70 $$ if ("op_type".equals(currentFieldName) || "opType".equals(currentFieldName)) -->Line_72 $$ if ("_version".equals(currentFieldName) || "version".equals(currentFieldName)) [ CD ]
Line_73 $$ version = parser.longValue()-->Line_110 $$ internalAdd(new IndexRequest(index, type, id).routing(routing).parent(parent).timestamp(timestamp).ttl(ttl).version(version).versionType(versionType).source(data.slice(from, nextMarker - from)), payload)[ FD ]
