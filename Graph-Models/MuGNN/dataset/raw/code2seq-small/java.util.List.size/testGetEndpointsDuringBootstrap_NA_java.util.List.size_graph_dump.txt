Line_32 $$ if (i < RING_SIZE - replicationFactor)-->Line_35 $$ assertTrue(endpoints.contains(bootstrapEndpoint))[ CD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_38 $$ StorageServiceAccessor.setTokenMetadata(oldTmd)[ CD ]
Line_4 $$ TokenMetadata tmd = new TokenMetadata()-->Line_20 $$ tmd.addBootstrapToken(bsToken, bootstrapEndpoint)[ FD ]
Line_8 $$ for (int i = 0; i < RING_SIZE; i++) -->Line_26 $$ for (int i = 0; i < keyTokens.length; i++) [ FD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_6 $$ Token[] endpointTokens = new Token[RING_SIZE][ CD ]
Line_27 $$ Collection<InetAddress> endpoints = tmd.getWriteEndpoints(keyTokens[i], keyspaceName, strategy.getNaturalEndpoints(keyTokens[i]))-->Line_33 $$ assertFalse(endpoints.contains(bootstrapEndpoint))[ FD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_5 $$ TokenMetadata oldTmd = StorageServiceAccessor.setTokenMetadata(tmd)[ CD ]
Line_4 $$ TokenMetadata tmd = new TokenMetadata()-->Line_5 $$ TokenMetadata oldTmd = StorageServiceAccessor.setTokenMetadata(tmd)[ FD ]
Line_23 $$ strategy = getStrategy(keyspaceName, tmd)-->Line_25 $$ int replicationFactor = strategy.getReplicationFactor()[ FD ]
Line_18 $$ Token bsToken = new BigIntegerToken(String.valueOf(210))-->Line_20 $$ tmd.addBootstrapToken(bsToken, bootstrapEndpoint)[ FD ]
Line_14 $$ InetAddress ep = InetAddress.getByName("127.0.0." + String.valueOf(i + 1))-->Line_16 $$ hosts.add(ep)[ FD ]
Line_29 $$ for (int j = 0; j < replicationFactor; j++) -->Line_30 $$ assertTrue(endpoints.contains(hosts.get((i + j + 1) % hosts.size())))[ CD ]
Line_12 $$ List<InetAddress> hosts = new ArrayList<InetAddress>()-->Line_16 $$ hosts.add(ep)[ FD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_7 $$ Token[] keyTokens = new Token[RING_SIZE][ CD ]
Line_8 $$ for (int i = 0; i < RING_SIZE; i++) -->Line_9 $$ endpointTokens[i] = new BigIntegerToken(String.valueOf(RING_SIZE * 2 * i))[ CD ]
Line_23 $$ strategy = getStrategy(keyspaceName, tmd)-->Line_27 $$ Collection<InetAddress> endpoints = tmd.getWriteEndpoints(keyTokens[i], keyspaceName, strategy.getNaturalEndpoints(keyTokens[i]))[ FD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_13 $$ for (int i = 0; i < endpointTokens.length; i++) [ CD ]
Line_27 $$ Collection<InetAddress> endpoints = tmd.getWriteEndpoints(keyTokens[i], keyspaceName, strategy.getNaturalEndpoints(keyTokens[i]))-->Line_35 $$ assertTrue(endpoints.contains(bootstrapEndpoint))[ FD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_3 $$ final int RING_SIZE = 10[ CD ]
Line_4 $$ TokenMetadata tmd = new TokenMetadata()-->Line_23 $$ strategy = getStrategy(keyspaceName, tmd)[ FD ]
Line_8 $$ for (int i = 0; i < RING_SIZE; i++) -->Line_32 $$ if (i < RING_SIZE - replicationFactor)[ FD ]
Line_19 $$ InetAddress bootstrapEndpoint = InetAddress.getByName("127.0.0.11")-->Line_35 $$ assertTrue(endpoints.contains(bootstrapEndpoint))[ FD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_18 $$ Token bsToken = new BigIntegerToken(String.valueOf(210))[ CD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_4 $$ TokenMetadata tmd = new TokenMetadata()[ CD ]
Line_4 $$ TokenMetadata tmd = new TokenMetadata()-->Line_27 $$ Collection<InetAddress> endpoints = tmd.getWriteEndpoints(keyTokens[i], keyspaceName, strategy.getNaturalEndpoints(keyTokens[i]))[ FD ]
Line_8 $$ for (int i = 0; i < RING_SIZE; i++) -->Line_10 $$ keyTokens[i] = new BigIntegerToken(String.valueOf(RING_SIZE * 2 * i + RING_SIZE))[ CD ]
Line_13 $$ for (int i = 0; i < endpointTokens.length; i++) -->Line_14 $$ InetAddress ep = InetAddress.getByName("127.0.0." + String.valueOf(i + 1))[ CD ]
Line_26 $$ for (int i = 0; i < keyTokens.length; i++) -->Line_29 $$ for (int j = 0; j < replicationFactor; j++) [ CD ]
Line_8 $$ for (int i = 0; i < RING_SIZE; i++) -->Line_13 $$ for (int i = 0; i < endpointTokens.length; i++) [ FD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_21 $$ AbstractReplicationStrategy strategy = null[ CD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_8 $$ for (int i = 0; i < RING_SIZE; i++) [ CD ]
Line_27 $$ Collection<InetAddress> endpoints = tmd.getWriteEndpoints(keyTokens[i], keyspaceName, strategy.getNaturalEndpoints(keyTokens[i]))-->Line_30 $$ assertTrue(endpoints.contains(hosts.get((i + j + 1) % hosts.size())))[ FD ]
Line_12 $$ List<InetAddress> hosts = new ArrayList<InetAddress>()-->Line_30 $$ assertTrue(endpoints.contains(hosts.get((i + j + 1) % hosts.size())))[ FD ]
Line_26 $$ for (int i = 0; i < keyTokens.length; i++) -->Line_27 $$ Collection<InetAddress> endpoints = tmd.getWriteEndpoints(keyTokens[i], keyspaceName, strategy.getNaturalEndpoints(keyTokens[i]))[ CD ]
Line_19 $$ InetAddress bootstrapEndpoint = InetAddress.getByName("127.0.0.11")-->Line_20 $$ tmd.addBootstrapToken(bsToken, bootstrapEndpoint)[ FD ]
Line_26 $$ for (int i = 0; i < keyTokens.length; i++) -->Line_32 $$ if (i < RING_SIZE - replicationFactor)[ CD ]
Line_23 $$ strategy = getStrategy(keyspaceName, tmd)-->Line_24 $$ PendingRangeCalculatorService.calculatePendingRanges(strategy, keyspaceName)[ FD ]
Line_13 $$ for (int i = 0; i < endpointTokens.length; i++) -->Line_26 $$ for (int i = 0; i < keyTokens.length; i++) [ FD ]
Line_14 $$ InetAddress ep = InetAddress.getByName("127.0.0." + String.valueOf(i + 1))-->Line_15 $$ tmd.updateNormalToken(endpointTokens[i], ep)[ FD ]
Line_13 $$ for (int i = 0; i < endpointTokens.length; i++) -->Line_16 $$ hosts.add(ep)[ CD ]
Line_21 $$ AbstractReplicationStrategy strategy = null-->Line_25 $$ int replicationFactor = strategy.getReplicationFactor()[ FD ]
Line_22 $$ for (String keyspaceName : Schema.instance.getNonSystemKeyspaces()) -->Line_27 $$ Collection<InetAddress> endpoints = tmd.getWriteEndpoints(keyTokens[i], keyspaceName, strategy.getNaturalEndpoints(keyTokens[i]))[ FD ]
Line_26 $$ for (int i = 0; i < keyTokens.length; i++) -->Line_32 $$ if (i < RING_SIZE - replicationFactor)[ FD ]
Line_21 $$ AbstractReplicationStrategy strategy = null-->Line_24 $$ PendingRangeCalculatorService.calculatePendingRanges(strategy, keyspaceName)[ FD ]
Line_21 $$ AbstractReplicationStrategy strategy = null-->Line_27 $$ Collection<InetAddress> endpoints = tmd.getWriteEndpoints(keyTokens[i], keyspaceName, strategy.getNaturalEndpoints(keyTokens[i]))[ FD ]
Line_22 $$ for (String keyspaceName : Schema.instance.getNonSystemKeyspaces()) -->Line_24 $$ PendingRangeCalculatorService.calculatePendingRanges(strategy, keyspaceName)[ FD ]
Line_27 $$ Collection<InetAddress> endpoints = tmd.getWriteEndpoints(keyTokens[i], keyspaceName, strategy.getNaturalEndpoints(keyTokens[i]))-->Line_28 $$ assertTrue(endpoints.size() >= replicationFactor)[ FD ]
Line_22 $$ for (String keyspaceName : Schema.instance.getNonSystemKeyspaces()) -->Line_23 $$ strategy = getStrategy(keyspaceName, tmd)[ FD ]
Line_19 $$ InetAddress bootstrapEndpoint = InetAddress.getByName("127.0.0.11")-->Line_33 $$ assertFalse(endpoints.contains(bootstrapEndpoint))[ FD ]
Line_5 $$ TokenMetadata oldTmd = StorageServiceAccessor.setTokenMetadata(tmd)-->Line_38 $$ StorageServiceAccessor.setTokenMetadata(oldTmd)[ FD ]
Line_4 $$ TokenMetadata tmd = new TokenMetadata()-->Line_15 $$ tmd.updateNormalToken(endpointTokens[i], ep)[ FD ]
Line_13 $$ for (int i = 0; i < endpointTokens.length; i++) -->Line_15 $$ tmd.updateNormalToken(endpointTokens[i], ep)[ CD ]
Line_13 $$ for (int i = 0; i < endpointTokens.length; i++) -->Line_32 $$ if (i < RING_SIZE - replicationFactor)[ FD ]
Line_25 $$ int replicationFactor = strategy.getReplicationFactor()-->Line_29 $$ for (int j = 0; j < replicationFactor; j++) [ FD ]
Line_3 $$ final int RING_SIZE = 10-->Line_8 $$ for (int i = 0; i < RING_SIZE; i++) [ FD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_19 $$ InetAddress bootstrapEndpoint = InetAddress.getByName("127.0.0.11")[ CD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_12 $$ List<InetAddress> hosts = new ArrayList<InetAddress>()[ CD ]
Line_2 $$ public void testGetEndpointsDuringBootstrap() throws UnknownHostException -->Line_20 $$ tmd.addBootstrapToken(bsToken, bootstrapEndpoint)[ CD ]
Line_26 $$ for (int i = 0; i < keyTokens.length; i++) -->Line_28 $$ assertTrue(endpoints.size() >= replicationFactor)[ CD ]
Line_21 $$ AbstractReplicationStrategy strategy = null-->Line_23 $$ strategy = getStrategy(keyspaceName, tmd)[ FD ]
Line_32 $$ if (i < RING_SIZE - replicationFactor)-->Line_33 $$ assertFalse(endpoints.contains(bootstrapEndpoint))[ CD ]
