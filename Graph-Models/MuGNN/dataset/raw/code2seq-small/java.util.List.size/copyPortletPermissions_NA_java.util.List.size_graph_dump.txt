Line_13 $$ String roleName = role.getName()-->Line_14 $$ if (roleName.equals(RoleConstants.ADMINISTRATOR) || (targetLayout.isPrivateLayout() && roleName.equals(RoleConstants.GUEST))) [ FD ]
Line_5 $$ LayoutTypePortlet sourceLayoutTypePortlet = (LayoutTypePortlet) sourceLayout.getLayoutType()-->Line_6 $$ List<String> sourcePortletIds = sourceLayoutTypePortlet.getPortletIds()[ FD ]
Line_17 $$ List<String> actions = ResourcePermissionLocalServiceUtil.getAvailableResourcePermissionActionIds(targetLayout.getCompanyId(), resourceName, ResourceConstants.SCOPE_INDIVIDUAL, sourceResourcePrimKey, role.getRoleId(), actionIds)-->Line_18 $$ ResourcePermissionLocalServiceUtil.setResourcePermissions(targetLayout.getCompanyId(), resourceName, ResourceConstants.SCOPE_INDIVIDUAL, targetResourcePrimKey, role.getRoleId(), actions.toArray(new String[actions.size()]))[ FD ]
Line_8 $$ String resourceName = PortletConstants.getRootPortletId(sourcePortletId)-->Line_11 $$ List<String> actionIds = ResourceActionsUtil.getPortletResourceActions(resourceName)[ FD ]
Line_8 $$ String resourceName = PortletConstants.getRootPortletId(sourcePortletId)-->Line_17 $$ List<String> actions = ResourcePermissionLocalServiceUtil.getAvailableResourcePermissionActionIds(targetLayout.getCompanyId(), resourceName, ResourceConstants.SCOPE_INDIVIDUAL, sourceResourcePrimKey, role.getRoleId(), actionIds)[ FD ]
Line_12 $$ for (Role role : roles) -->Line_17 $$ List<String> actions = ResourcePermissionLocalServiceUtil.getAvailableResourcePermissionActionIds(targetLayout.getCompanyId(), resourceName, ResourceConstants.SCOPE_INDIVIDUAL, sourceResourcePrimKey, role.getRoleId(), actionIds)[ FD ]
Line_12 $$ for (Role role : roles) -->Line_18 $$ ResourcePermissionLocalServiceUtil.setResourcePermissions(targetLayout.getCompanyId(), resourceName, ResourceConstants.SCOPE_INDIVIDUAL, targetResourcePrimKey, role.getRoleId(), actions.toArray(new String[actions.size()]))[ FD ]
Line_7 $$ for (String sourcePortletId : sourcePortletIds) -->Line_8 $$ String resourceName = PortletConstants.getRootPortletId(sourcePortletId)[ FD ]
Line_11 $$ List<String> actionIds = ResourceActionsUtil.getPortletResourceActions(resourceName)-->Line_17 $$ List<String> actions = ResourcePermissionLocalServiceUtil.getAvailableResourcePermissionActionIds(targetLayout.getCompanyId(), resourceName, ResourceConstants.SCOPE_INDIVIDUAL, sourceResourcePrimKey, role.getRoleId(), actionIds)[ FD ]
Line_7 $$ for (String sourcePortletId : sourcePortletIds) -->Line_10 $$ String targetResourcePrimKey = PortletPermissionUtil.getPrimaryKey(targetLayout.getPlid(), sourcePortletId)[ FD ]
Line_9 $$ String sourceResourcePrimKey = PortletPermissionUtil.getPrimaryKey(sourceLayout.getPlid(), sourcePortletId)-->Line_17 $$ List<String> actions = ResourcePermissionLocalServiceUtil.getAvailableResourcePermissionActionIds(targetLayout.getCompanyId(), resourceName, ResourceConstants.SCOPE_INDIVIDUAL, sourceResourcePrimKey, role.getRoleId(), actionIds)[ FD ]
Line_12 $$ for (Role role : roles) -->Line_13 $$ String roleName = role.getName()[ FD ]
Line_8 $$ String resourceName = PortletConstants.getRootPortletId(sourcePortletId)-->Line_18 $$ ResourcePermissionLocalServiceUtil.setResourcePermissions(targetLayout.getCompanyId(), resourceName, ResourceConstants.SCOPE_INDIVIDUAL, targetResourcePrimKey, role.getRoleId(), actions.toArray(new String[actions.size()]))[ FD ]
Line_10 $$ String targetResourcePrimKey = PortletPermissionUtil.getPrimaryKey(targetLayout.getPlid(), sourcePortletId)-->Line_18 $$ ResourcePermissionLocalServiceUtil.setResourcePermissions(targetLayout.getCompanyId(), resourceName, ResourceConstants.SCOPE_INDIVIDUAL, targetResourcePrimKey, role.getRoleId(), actions.toArray(new String[actions.size()]))[ FD ]
Line_7 $$ for (String sourcePortletId : sourcePortletIds) -->Line_9 $$ String sourceResourcePrimKey = PortletPermissionUtil.getPrimaryKey(sourceLayout.getPlid(), sourcePortletId)[ FD ]
