Line_22 $$ if ("simple".equals(field.fieldOptions().fragmenter())) -->Line_24 $$ if ("span".equals(field.fieldOptions().fragmenter())) [ CD ]
Line_5 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_12 $$ Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter> cache = (Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter>) hitContext.cache().get(CACHE_KEY)[ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_23 $$ fragmenter = new SimpleFragmenter(field.fieldOptions().fragmentCharSize())[ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_24 $$ if ("span".equals(field.fieldOptions().fragmenter())) [ FD ]
Line_14 $$ if (entry == null) -->Line_33 $$ cache.put(mapper, entry)[ CD ]
Line_13 $$ org.apache.lucene.search.highlight.Highlighter entry = cache.get(mapper)-->Line_33 $$ cache.put(mapper, entry)[ FD ]
Line_40 $$ textsToHighlight = HighlightUtils.loadFieldValues(field, mapper, context, hitContext)-->Line_87 $$ String fieldContents = textsToHighlight.get(0).toString()[ FD ]
Line_62 $$ if (field.fieldOptions().scoreOrdered()) -->Line_63 $$ CollectionUtil.introSort(fragsList, new Comparator<TextFragment>() [ CD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_25 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ FD ]
Line_5 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_38 $$ Analyzer analyzer = context.mapperService().documentMapper(hitContext.hit().type()).mappers().indexAnalyzer()[ FD ]
Line_37 $$ List<Object> textsToHighlight-->Line_40 $$ textsToHighlight = HighlightUtils.loadFieldValues(field, mapper, context, hitContext)[ FD ]
Line_14 $$ if (entry == null) -->Line_15 $$ QueryScorer queryScorer = new CustomQueryScorer(highlighterContext.query, field.fieldOptions().requireFieldMatch() ? mapper.fieldType().name() : null)[ CD ]
Line_40 $$ textsToHighlight = HighlightUtils.loadFieldValues(field, mapper, context, hitContext)-->Line_70 $$ if (field.fieldOptions().numberOfFragments() == 0 && textsToHighlight.size() > 1 && fragsList.size() > 0) [ FD ]
Line_86 $$ if (noMatchSize > 0 && textsToHighlight.size() > 0) -->Line_94 $$ if (end > 0) [ CD ]
Line_36 $$ ArrayList<TextFragment> fragsList = new ArrayList()-->Line_63 $$ CollectionUtil.introSort(fragsList, new Comparator<TextFragment>() [ FD ]
Line_14 $$ if (entry == null) -->Line_29 $$ Formatter formatter = new SimpleHTMLFormatter(field.fieldOptions().preTags()[0], field.fieldOptions().postTags()[0])[ CD ]
Line_37 $$ List<Object> textsToHighlight-->Line_87 $$ String fieldContents = textsToHighlight.get(0).toString()[ FD ]
Line_36 $$ ArrayList<TextFragment> fragsList = new ArrayList()-->Line_50 $$ fragsList.add(bestTextFragment)[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_36 $$ ArrayList<TextFragment> fragsList = new ArrayList()[ CD ]
Line_30 $$ entry = new org.apache.lucene.search.highlight.Highlighter(formatter, encoder, queryScorer)-->Line_33 $$ cache.put(mapper, entry)[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_35 $$ int numberOfFragments = field.fieldOptions().numberOfFragments() == 0 ? 1 : field.fieldOptions().numberOfFragments()[ CD ]
Line_72 $$ for (int i = 0; i < fragsList.size(); i++) -->Line_73 $$ fragments[i] = fragsList.get(i).toString()[ CD ]
Line_21 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())-->Line_31 $$ entry.setTextFragmenter(fragmenter)[ FD ]
Line_14 $$ if (entry == null) -->Line_31 $$ entry.setTextFragmenter(fragmenter)[ CD ]
Line_24 $$ if ("span".equals(field.fieldOptions().fragmenter())) -->Line_25 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ CD ]
Line_12 $$ Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter> cache = (Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter>) hitContext.cache().get(CACHE_KEY)-->Line_13 $$ org.apache.lucene.search.highlight.Highlighter entry = cache.get(mapper)[ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_29 $$ Formatter formatter = new SimpleHTMLFormatter(field.fieldOptions().preTags()[0], field.fieldOptions().postTags()[0])[ FD ]
Line_78 $$ for (int i = 0; i < fragments.length; i++) -->Line_79 $$ fragments[i] = fragsList.get(i).toString()[ CD ]
Line_19 $$ fragmenter = new NullFragmenter()-->Line_31 $$ entry.setTextFragmenter(fragmenter)[ FD ]
Line_13 $$ org.apache.lucene.search.highlight.Highlighter entry = cache.get(mapper)-->Line_31 $$ entry.setTextFragmenter(fragmenter)[ FD ]
Line_70 $$ if (field.fieldOptions().numberOfFragments() == 0 && textsToHighlight.size() > 1 && fragsList.size() > 0) -->Line_72 $$ for (int i = 0; i < fragsList.size(); i++) [ CD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_6 $$ FieldMapper mapper = highlighterContext.mapper[ CD ]
Line_21 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())-->Line_23 $$ fragmenter = new SimpleFragmenter(field.fieldOptions().fragmentCharSize())[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_8 $$ if (!hitContext.cache().containsKey(CACHE_KEY)) [ CD ]
Line_72 $$ for (int i = 0; i < fragsList.size(); i++) -->Line_73 $$ fragments[i] = fragsList.get(i).toString()[ FD ]
Line_13 $$ org.apache.lucene.search.highlight.Highlighter entry = cache.get(mapper)-->Line_47 $$ TextFragment[] bestTextFragments = entry.getBestTextFragments(tokenStream, text, false, numberOfFragments)[ FD ]
Line_9 $$ Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter> mappers = new HashMap()-->Line_10 $$ hitContext.cache().put(CACHE_KEY, mappers)[ FD ]
Line_43 $$ try (TokenStream tokenStream = analyzer.tokenStream(mapper.fieldType().name(), text)) -->Line_44 $$ if (!tokenStream.hasAttribute(CharTermAttribute.class) || !tokenStream.hasAttribute(OffsetAttribute.class)) [ FD ]
Line_5 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_40 $$ textsToHighlight = HighlightUtils.loadFieldValues(field, mapper, context, hitContext)[ FD ]
Line_17 $$ Fragmenter fragmenter-->Line_21 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ FD ]
Line_17 $$ Fragmenter fragmenter-->Line_23 $$ fragmenter = new SimpleFragmenter(field.fieldOptions().fragmentCharSize())[ FD ]
Line_14 $$ if (entry == null) -->Line_30 $$ entry = new org.apache.lucene.search.highlight.Highlighter(formatter, encoder, queryScorer)[ CD ]
Line_30 $$ entry = new org.apache.lucene.search.highlight.Highlighter(formatter, encoder, queryScorer)-->Line_32 $$ entry.setMaxDocCharsToAnalyze(Integer.MAX_VALUE)[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_38 $$ Analyzer analyzer = context.mapperService().documentMapper(hitContext.hit().type()).mappers().indexAnalyzer()[ CD ]
Line_6 $$ FieldMapper mapper = highlighterContext.mapper-->Line_13 $$ org.apache.lucene.search.highlight.Highlighter entry = cache.get(mapper)[ FD ]
Line_6 $$ FieldMapper mapper = highlighterContext.mapper-->Line_90 $$ end = findGoodEndForNoHighlightExcerpt(noMatchSize, analyzer, mapper.fieldType().name(), fieldContents)[ FD ]
Line_8 $$ if (!hitContext.cache().containsKey(CACHE_KEY)) -->Line_9 $$ Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter> mappers = new HashMap()[ CD ]
Line_13 $$ org.apache.lucene.search.highlight.Highlighter entry = cache.get(mapper)-->Line_30 $$ entry = new org.apache.lucene.search.highlight.Highlighter(formatter, encoder, queryScorer)[ FD ]
Line_37 $$ List<Object> textsToHighlight-->Line_86 $$ if (noMatchSize > 0 && textsToHighlight.size() > 0) [ FD ]
Line_42 $$ String text = textToHighlight.toString()-->Line_47 $$ TextFragment[] bestTextFragments = entry.getBestTextFragments(tokenStream, text, false, numberOfFragments)[ FD ]
Line_20 $$ if (field.fieldOptions().fragmenter() == null) -->Line_21 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ CD ]
Line_14 $$ if (entry == null) -->Line_18 $$ if (field.fieldOptions().numberOfFragments() == 0) [ CD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_14 $$ if (entry == null) [ CD ]
Line_17 $$ Fragmenter fragmenter-->Line_25 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ FD ]
Line_40 $$ textsToHighlight = HighlightUtils.loadFieldValues(field, mapper, context, hitContext)-->Line_86 $$ if (noMatchSize > 0 && textsToHighlight.size() > 0) [ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_18 $$ if (field.fieldOptions().numberOfFragments() == 0) [ FD ]
Line_19 $$ fragmenter = new NullFragmenter()-->Line_23 $$ fragmenter = new SimpleFragmenter(field.fieldOptions().fragmentCharSize())[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_82 $$ if (fragments.length > 0) [ CD ]
Line_6 $$ FieldMapper mapper = highlighterContext.mapper-->Line_40 $$ textsToHighlight = HighlightUtils.loadFieldValues(field, mapper, context, hitContext)[ FD ]
Line_70 $$ if (field.fieldOptions().numberOfFragments() == 0 && textsToHighlight.size() > 1 && fragsList.size() > 0) -->Line_78 $$ for (int i = 0; i < fragments.length; i++) [ CD ]
Line_6 $$ FieldMapper mapper = highlighterContext.mapper-->Line_33 $$ cache.put(mapper, entry)[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_62 $$ if (field.fieldOptions().scoreOrdered()) [ CD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_35 $$ int numberOfFragments = field.fieldOptions().numberOfFragments() == 0 ? 1 : field.fieldOptions().numberOfFragments()[ FD ]
Line_43 $$ try (TokenStream tokenStream = analyzer.tokenStream(mapper.fieldType().name(), text)) -->Line_47 $$ TextFragment[] bestTextFragments = entry.getBestTextFragments(tokenStream, text, false, numberOfFragments)[ FD ]
Line_42 $$ String text = textToHighlight.toString()-->Line_43 $$ try (TokenStream tokenStream = analyzer.tokenStream(mapper.fieldType().name(), text)) [ FD ]
Line_63 $$ CollectionUtil.introSort(fragsList, new Comparator<TextFragment>() -->Line_65 $$ return Math.round(o2.getScore() - o1.getScore())[ CD ]
Line_19 $$ fragmenter = new NullFragmenter()-->Line_21 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ FD ]
Line_56 $$ if (ExceptionsHelper.unwrap(e, BytesRefHash.MaxBytesLengthExceededException.class) != null) -->Line_57 $$ return null[ CD ]
Line_5 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_8 $$ if (!hitContext.cache().containsKey(CACHE_KEY)) [ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_86 $$ if (noMatchSize > 0 && textsToHighlight.size() > 0) [ CD ]
Line_17 $$ Fragmenter fragmenter-->Line_31 $$ entry.setTextFragmenter(fragmenter)[ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_27 $$ throw new IllegalArgumentException("unknown fragmenter option [" + field.fieldOptions().fragmenter() + "] for the field [" + highlighterContext.fieldName + "]")[ FD ]
Line_13 $$ org.apache.lucene.search.highlight.Highlighter entry = cache.get(mapper)-->Line_32 $$ entry.setMaxDocCharsToAnalyze(Integer.MAX_VALUE)[ FD ]
Line_23 $$ fragmenter = new SimpleFragmenter(field.fieldOptions().fragmentCharSize())-->Line_25 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_7 $$ Encoder encoder = field.fieldOptions().encoder().equals("html") ? HighlightUtils.Encoders.HTML : HighlightUtils.Encoders.DEFAULT[ FD ]
Line_38 $$ Analyzer analyzer = context.mapperService().documentMapper(hitContext.hit().type()).mappers().indexAnalyzer()-->Line_90 $$ end = findGoodEndForNoHighlightExcerpt(noMatchSize, analyzer, mapper.fieldType().name(), fieldContents)[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_12 $$ Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter> cache = (Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter>) hitContext.cache().get(CACHE_KEY)[ CD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_7 $$ Encoder encoder = field.fieldOptions().encoder().equals("html") ? HighlightUtils.Encoders.HTML : HighlightUtils.Encoders.DEFAULT[ CD ]
Line_86 $$ if (noMatchSize > 0 && textsToHighlight.size() > 0) -->Line_87 $$ String fieldContents = textsToHighlight.get(0).toString()[ CD ]
Line_8 $$ if (!hitContext.cache().containsKey(CACHE_KEY)) -->Line_10 $$ hitContext.cache().put(CACHE_KEY, mappers)[ CD ]
Line_14 $$ if (entry == null) -->Line_17 $$ Fragmenter fragmenter[ CD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_21 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_98 $$ return null[ CD ]
Line_36 $$ ArrayList<TextFragment> fragsList = new ArrayList()-->Line_73 $$ fragments[i] = fragsList.get(i).toString()[ FD ]
Line_72 $$ for (int i = 0; i < fragsList.size(); i++) -->Line_78 $$ for (int i = 0; i < fragments.length; i++) [ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_37 $$ List<Object> textsToHighlight[ CD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_40 $$ textsToHighlight = HighlightUtils.loadFieldValues(field, mapper, context, hitContext)[ FD ]
Line_48 $$ for (TextFragment bestTextFragment : bestTextFragments) -->Line_49 $$ if (bestTextFragment != null && bestTextFragment.getScore() > 0) [ FD ]
Line_30 $$ entry = new org.apache.lucene.search.highlight.Highlighter(formatter, encoder, queryScorer)-->Line_31 $$ entry.setTextFragmenter(fragmenter)[ FD ]
Line_4 $$ SearchContext context = highlighterContext.context-->Line_40 $$ textsToHighlight = HighlightUtils.loadFieldValues(field, mapper, context, hitContext)[ FD ]
Line_30 $$ entry = new org.apache.lucene.search.highlight.Highlighter(formatter, encoder, queryScorer)-->Line_47 $$ TextFragment[] bestTextFragments = entry.getBestTextFragments(tokenStream, text, false, numberOfFragments)[ FD ]
Line_14 $$ if (entry == null) -->Line_16 $$ queryScorer.setExpandMultiTermQuery(true)[ CD ]
Line_14 $$ if (entry == null) -->Line_32 $$ entry.setMaxDocCharsToAnalyze(Integer.MAX_VALUE)[ CD ]
Line_35 $$ int numberOfFragments = field.fieldOptions().numberOfFragments() == 0 ? 1 : field.fieldOptions().numberOfFragments()-->Line_47 $$ TextFragment[] bestTextFragments = entry.getBestTextFragments(tokenStream, text, false, numberOfFragments)[ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_70 $$ if (field.fieldOptions().numberOfFragments() == 0 && textsToHighlight.size() > 1 && fragsList.size() > 0) [ FD ]
Line_5 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_10 $$ hitContext.cache().put(CACHE_KEY, mappers)[ FD ]
Line_38 $$ Analyzer analyzer = context.mapperService().documentMapper(hitContext.hit().type()).mappers().indexAnalyzer()-->Line_43 $$ try (TokenStream tokenStream = analyzer.tokenStream(mapper.fieldType().name(), text)) [ FD ]
Line_18 $$ if (field.fieldOptions().numberOfFragments() == 0) -->Line_19 $$ fragmenter = new NullFragmenter()[ CD ]
Line_17 $$ Fragmenter fragmenter-->Line_19 $$ fragmenter = new NullFragmenter()[ FD ]
Line_15 $$ QueryScorer queryScorer = new CustomQueryScorer(highlighterContext.query, field.fieldOptions().requireFieldMatch() ? mapper.fieldType().name() : null)-->Line_16 $$ queryScorer.setExpandMultiTermQuery(true)[ FD ]
Line_21 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())-->Line_25 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ FD ]
Line_22 $$ if ("simple".equals(field.fieldOptions().fragmenter())) -->Line_23 $$ fragmenter = new SimpleFragmenter(field.fieldOptions().fragmentCharSize())[ CD ]
Line_82 $$ if (fragments.length > 0) -->Line_83 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ CD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_70 $$ if (field.fieldOptions().numberOfFragments() == 0 && textsToHighlight.size() > 1 && fragsList.size() > 0) [ CD ]
Line_25 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())-->Line_31 $$ entry.setTextFragmenter(fragmenter)[ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_15 $$ QueryScorer queryScorer = new CustomQueryScorer(highlighterContext.query, field.fieldOptions().requireFieldMatch() ? mapper.fieldType().name() : null)[ FD ]
Line_12 $$ Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter> cache = (Map<FieldMapper, org.apache.lucene.search.highlight.Highlighter>) hitContext.cache().get(CACHE_KEY)-->Line_33 $$ cache.put(mapper, entry)[ FD ]
Line_49 $$ if (bestTextFragment != null && bestTextFragment.getScore() > 0) -->Line_50 $$ fragsList.add(bestTextFragment)[ CD ]
Line_19 $$ fragmenter = new NullFragmenter()-->Line_25 $$ fragmenter = new SimpleSpanFragmenter(queryScorer, field.fieldOptions().fragmentCharSize())[ FD ]
Line_23 $$ fragmenter = new SimpleFragmenter(field.fieldOptions().fragmentCharSize())-->Line_31 $$ entry.setTextFragmenter(fragmenter)[ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_62 $$ if (field.fieldOptions().scoreOrdered()) [ FD ]
Line_37 $$ List<Object> textsToHighlight-->Line_70 $$ if (field.fieldOptions().numberOfFragments() == 0 && textsToHighlight.size() > 1 && fragsList.size() > 0) [ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_85 $$ int noMatchSize = highlighterContext.field.fieldOptions().noMatchSize()[ CD ]
Line_18 $$ if (field.fieldOptions().numberOfFragments() == 0) -->Line_20 $$ if (field.fieldOptions().fragmenter() == null) [ CD ]
Line_72 $$ for (int i = 0; i < fragsList.size(); i++) -->Line_79 $$ fragments[i] = fragsList.get(i).toString()[ FD ]
Line_36 $$ ArrayList<TextFragment> fragsList = new ArrayList()-->Line_76 $$ numberOfFragments = fragsList.size() < numberOfFragments ? fragsList.size() : numberOfFragments[ FD ]
Line_4 $$ SearchContext context = highlighterContext.context-->Line_38 $$ Analyzer analyzer = context.mapperService().documentMapper(hitContext.hit().type()).mappers().indexAnalyzer()[ FD ]
Line_36 $$ ArrayList<TextFragment> fragsList = new ArrayList()-->Line_71 $$ fragments = new String[fragsList.size()][ FD ]
Line_78 $$ for (int i = 0; i < fragments.length; i++) -->Line_79 $$ fragments[i] = fragsList.get(i).toString()[ FD ]
Line_13 $$ org.apache.lucene.search.highlight.Highlighter entry = cache.get(mapper)-->Line_14 $$ if (entry == null) [ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_13 $$ org.apache.lucene.search.highlight.Highlighter entry = cache.get(mapper)[ CD ]
Line_48 $$ for (TextFragment bestTextFragment : bestTextFragments) -->Line_50 $$ fragsList.add(bestTextFragment)[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_4 $$ SearchContext context = highlighterContext.context[ CD ]
Line_94 $$ if (end > 0) -->Line_95 $$ return new HighlightField(highlighterContext.fieldName, new Text[] [ CD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_22 $$ if ("simple".equals(field.fieldOptions().fragmenter())) [ FD ]
Line_6 $$ FieldMapper mapper = highlighterContext.mapper-->Line_43 $$ try (TokenStream tokenStream = analyzer.tokenStream(mapper.fieldType().name(), text)) [ FD ]
Line_36 $$ ArrayList<TextFragment> fragsList = new ArrayList()-->Line_79 $$ fragments[i] = fragsList.get(i).toString()[ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_5 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext[ CD ]
Line_36 $$ ArrayList<TextFragment> fragsList = new ArrayList()-->Line_70 $$ if (field.fieldOptions().numberOfFragments() == 0 && textsToHighlight.size() > 1 && fragsList.size() > 0) [ FD ]
Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_20 $$ if (field.fieldOptions().fragmenter() == null) [ FD ]
Line_41 $$ for (Object textToHighlight : textsToHighlight) -->Line_42 $$ String text = textToHighlight.toString()[ FD ]
Line_6 $$ FieldMapper mapper = highlighterContext.mapper-->Line_15 $$ QueryScorer queryScorer = new CustomQueryScorer(highlighterContext.query, field.fieldOptions().requireFieldMatch() ? mapper.fieldType().name() : null)[ FD ]
Line_20 $$ if (field.fieldOptions().fragmenter() == null) -->Line_22 $$ if ("simple".equals(field.fieldOptions().fragmenter())) [ CD ]
Line_36 $$ ArrayList<TextFragment> fragsList = new ArrayList()-->Line_72 $$ for (int i = 0; i < fragsList.size(); i++) [ FD ]
Line_2 $$ public HighlightField highlight(HighlighterContext highlighterContext) -->Line_3 $$ SearchContextHighlight.Field field = highlighterContext.field[ CD ]
Line_63 $$ CollectionUtil.introSort(fragsList, new Comparator<TextFragment>() -->Line_65 $$ return Math.round(o2.getScore() - o1.getScore())[ FD ]
