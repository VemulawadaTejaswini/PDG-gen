Line_22 $$ if (child.isDirectory()) -->Line_23 $$ final String childName = child.getName()[ CD ]
Line_11 $$ final String prefix = folder.getPackagePrefix().replaceAll("\\.", "/")-->Line_12 $$ final VirtualFile relativeSrcRoot = file.findFileByRelativePath(StringUtil.trimStart(packageVMName, prefix))[ FD ]
Line_21 $$ for (File child : children) -->Line_75 $$ if (extension.keepCoverageInfoForClassWithoutSource(suitesBundle, child)) [ FD ]
Line_39 $$ if (isClassFile(child)) -->Line_67 $$ String classCoverageKey = classFqVMName.replace('/', '.')[ CD ]
Line_7 $$ for (SourceFolder folder : contentEntry.getSourceFolders(isTestHierarchy ? JavaSourceRootType.TEST_SOURCE : JavaSourceRootType.SOURCE)) -->Line_8 $$ final VirtualFile file = folder.getFile()[ FD ]
Line_24 $$ final String childPackageVMName = packageVMName.length() > 0 ? packageVMName + "/" + childName : childName-->Line_25 $$ final DirCoverageInfo[] childCoverageInfo = collectCoverageInformation(child, packageCoverageMap, flattenPackageCoverageMap, projectInfo, childPackageVMName, annotator, module, trackTestFolders, isTestHierarchy)[ FD ]
Line_21 $$ for (File child : children) -->Line_22 $$ if (child.isDirectory()) [ FD ]
Line_39 $$ if (isClassFile(child)) -->Line_79 $$ if (ignoreClass) [ CD ]
Line_42 $$ final String toplevelClassSrcFQName = getSourceToplevelFQName(classFqVMName)-->Line_53 $$ final PsiClass aClass = JavaPsiFacade.getInstance(myManager.getProject()).findClass(toplevelClassSrcFQName, GlobalSearchScope.moduleScope(module))[ FD ]
Line_39 $$ if (isClassFile(child)) -->Line_41 $$ final String classFqVMName = packageVMName.length() > 0 ? packageVMName + "/" + childName : childName[ CD ]
Line_39 $$ if (isClassFile(child)) -->Line_45 $$ final CoverageSuitesBundle suitesBundle = myCoverageManager.getCurrentSuitesBundle()[ CD ]
Line_62 $$ final ModuleFileIndex fileIndex = ModuleRootManager.getInstance(module).getFileIndex()-->Line_63 $$ return fileIndex.isUnderSourceRootOfType(containingFileRef.get(), JavaModuleSourceRootTypes.SOURCES) && (trackTestFolders || !fileIndex.isInTestSourceContent(containingFileRef.get()))[ FD ]
Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) -->Line_31 $$ parentDir.coveredClassCount += coverageInfo.coveredClassCount[ CD ]
Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() -->Line_82 $$ if (isInSource != null && isInSource.booleanValue()) [ FD ]
Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) -->Line_29 $$ final DirCoverageInfo parentDir = dirs.get(i)[ CD ]
Line_22 $$ if (child.isDirectory()) -->Line_26 $$ if (childCoverageInfo != null) [ CD ]
Line_39 $$ if (isClassFile(child)) -->Line_82 $$ if (isInSource != null && isInSource.booleanValue()) [ CD ]
Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() -->Line_51 $$ if (myProject.isDisposed())[ CD ]
Line_21 $$ for (File child : children) -->Line_71 $$ if (extension.ignoreCoverageForClass(suitesBundle, child)) [ FD ]
Line_39 $$ if (isClassFile(child)) -->Line_46 $$ if (suitesBundle == null)[ CD ]
Line_22 $$ if (child.isDirectory()) -->Line_25 $$ final DirCoverageInfo[] childCoverageInfo = collectCoverageInformation(child, packageCoverageMap, flattenPackageCoverageMap, projectInfo, childPackageVMName, annotator, module, trackTestFolders, isTestHierarchy)[ CD ]
Line_41 $$ final String classFqVMName = packageVMName.length() > 0 ? packageVMName + "/" + childName : childName-->Line_67 $$ String classCoverageKey = classFqVMName.replace('/', '.')[ FD ]
Line_39 $$ if (isClassFile(child)) -->Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() [ CD ]
Line_17 $$ final File[] children = packageOutputRoot.listFiles()-->Line_18 $$ if (children == null)[ FD ]
Line_54 $$ if (aClass == null || !aClass.isValid())-->Line_55 $$ return Boolean.FALSE[ CD ]
Line_43 $$ final Ref<VirtualFile> containingFileRef = new Ref<VirtualFile>()-->Line_58 $$ if (containingFileRef.isNull()) [ FD ]
Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) -->Line_29 $$ final DirCoverageInfo parentDir = dirs.get(i)[ FD ]
Line_21 $$ for (File child : children) -->Line_95 $$ collectClassCoverageInformation(child, psiClassRef.get(), coverageInfoForClass, projectInfo, toplevelClassCoverage, classFqVMName.replace("/", "."), classCoverageKey)[ FD ]
Line_16 $$ final PackageCoverageInfo classWithoutSourceCoverageInfo = new PackageCoverageInfo()-->Line_119 $$ packageCoverageInfo.append(classWithoutSourceCoverageInfo)[ FD ]
Line_21 $$ for (File child : children) -->Line_23 $$ final String childName = child.getName()[ FD ]
Line_53 $$ final PsiClass aClass = JavaPsiFacade.getInstance(myManager.getProject()).findClass(toplevelClassSrcFQName, GlobalSearchScope.moduleScope(module))-->Line_54 $$ if (aClass == null || !aClass.isValid())[ FD ]
Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() -->Line_63 $$ return fileIndex.isUnderSourceRootOfType(containingFileRef.get(), JavaModuleSourceRootTypes.SOURCES) && (trackTestFolders || !fileIndex.isInTestSourceContent(containingFileRef.get()))[ CD ]
Line_20 $$ Map<String, ClassCoverageInfo> toplevelClassCoverage = new HashMap<String, ClassCoverageInfo>()-->Line_100 $$ for (Map.Entry<String, ClassCoverageInfo> entry : toplevelClassCoverage.entrySet()) [ FD ]
Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) -->Line_30 $$ parentDir.totalClassCount += coverageInfo.totalClassCount[ CD ]
Line_6 $$ for (ContentEntry contentEntry : contentEntries) -->Line_7 $$ for (SourceFolder folder : contentEntry.getSourceFolders(isTestHierarchy ? JavaSourceRootType.TEST_SOURCE : JavaSourceRootType.SOURCE)) [ FD ]
Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() -->Line_54 $$ if (aClass == null || !aClass.isValid())[ CD ]
Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) -->Line_34 $$ parentDir.totalMethodCount += coverageInfo.totalMethodCount[ CD ]
Line_21 $$ for (File child : children) -->Line_39 $$ if (isClassFile(child)) [ FD ]
Line_39 $$ if (isClassFile(child)) -->Line_43 $$ final Ref<VirtualFile> containingFileRef = new Ref<VirtualFile>()[ CD ]
Line_39 $$ if (isClassFile(child)) -->Line_94 $$ if (coverageInfoForClass != null) [ CD ]
Line_25 $$ final DirCoverageInfo[] childCoverageInfo = collectCoverageInformation(child, packageCoverageMap, flattenPackageCoverageMap, projectInfo, childPackageVMName, annotator, module, trackTestFolders, isTestHierarchy)-->Line_26 $$ if (childCoverageInfo != null) [ FD ]
Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() -->Line_56 $$ psiClassRef.set(aClass)[ CD ]
Line_7 $$ for (SourceFolder folder : contentEntry.getSourceFolders(isTestHierarchy ? JavaSourceRootType.TEST_SOURCE : JavaSourceRootType.SOURCE)) -->Line_11 $$ final String prefix = folder.getPackagePrefix().replaceAll("\\.", "/")[ FD ]
Line_22 $$ if (child.isDirectory()) -->Line_24 $$ final String childPackageVMName = packageVMName.length() > 0 ? packageVMName + "/" + childName : childName[ CD ]
Line_45 $$ final CoverageSuitesBundle suitesBundle = myCoverageManager.getCurrentSuitesBundle()-->Line_46 $$ if (suitesBundle == null)[ FD ]
Line_22 $$ if (child.isDirectory()) -->Line_39 $$ if (isClassFile(child)) [ CD ]
Line_21 $$ for (File child : children) -->Line_25 $$ final DirCoverageInfo[] childCoverageInfo = collectCoverageInformation(child, packageCoverageMap, flattenPackageCoverageMap, projectInfo, childPackageVMName, annotator, module, trackTestFolders, isTestHierarchy)[ FD ]
Line_8 $$ final VirtualFile file = folder.getFile()-->Line_12 $$ final VirtualFile relativeSrcRoot = file.findFileByRelativePath(StringUtil.trimStart(packageVMName, prefix))[ FD ]
Line_51 $$ if (myProject.isDisposed())-->Line_52 $$ return null[ CD ]
Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() -->Line_58 $$ if (containingFileRef.isNull()) [ CD ]
Line_94 $$ if (coverageInfoForClass != null) -->Line_95 $$ collectClassCoverageInformation(child, psiClassRef.get(), coverageInfoForClass, projectInfo, toplevelClassCoverage, classFqVMName.replace("/", "."), classCoverageKey)[ CD ]
Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() -->Line_57 $$ containingFileRef.set(aClass.getNavigationElement().getContainingFile().getVirtualFile())[ CD ]
Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) -->Line_28 $$ DirCoverageInfo coverageInfo = childCoverageInfo[i][ CD ]
Line_53 $$ final PsiClass aClass = JavaPsiFacade.getInstance(myManager.getProject()).findClass(toplevelClassSrcFQName, GlobalSearchScope.moduleScope(module))-->Line_57 $$ containingFileRef.set(aClass.getNavigationElement().getContainingFile().getVirtualFile())[ FD ]
Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) -->Line_32 $$ parentDir.totalLineCount += coverageInfo.totalLineCount[ CD ]
Line_26 $$ if (childCoverageInfo != null) -->Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) [ CD ]
Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) -->Line_33 $$ parentDir.coveredLineCount += coverageInfo.coveredLineCount[ CD ]
Line_28 $$ DirCoverageInfo coverageInfo = childCoverageInfo[i]-->Line_108 $$ flattenPackageCoverageInfo.append(coverageInfo)[ FD ]
Line_44 $$ final Ref<PsiClass> psiClassRef = new Ref<PsiClass>()-->Line_56 $$ psiClassRef.set(aClass)[ FD ]
Line_20 $$ Map<String, ClassCoverageInfo> toplevelClassCoverage = new HashMap<String, ClassCoverageInfo>()-->Line_106 $$ for (Map.Entry<String, ClassCoverageInfo> entry : toplevelClassCoverage.entrySet()) [ FD ]
Line_21 $$ for (File child : children) -->Line_40 $$ final String childName = getClassName(child)[ FD ]
Line_39 $$ if (isClassFile(child)) -->Line_40 $$ final String childName = getClassName(child)[ CD ]
Line_4 $$ final List<DirCoverageInfo> dirs = new ArrayList<DirCoverageInfo>()-->Line_29 $$ final DirCoverageInfo parentDir = dirs.get(i)[ FD ]
Line_20 $$ Map<String, ClassCoverageInfo> toplevelClassCoverage = new HashMap<String, ClassCoverageInfo>()-->Line_95 $$ collectClassCoverageInformation(child, psiClassRef.get(), coverageInfoForClass, projectInfo, toplevelClassCoverage, classFqVMName.replace("/", "."), classCoverageKey)[ FD ]
Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() -->Line_53 $$ final PsiClass aClass = JavaPsiFacade.getInstance(myManager.getProject()).findClass(toplevelClassSrcFQName, GlobalSearchScope.moduleScope(module))[ CD ]
Line_45 $$ final CoverageSuitesBundle suitesBundle = myCoverageManager.getCurrentSuitesBundle()-->Line_71 $$ if (extension.ignoreCoverageForClass(suitesBundle, child)) [ FD ]
Line_28 $$ DirCoverageInfo coverageInfo = childCoverageInfo[i]-->Line_103 $$ annotator.annotateClass(toplevelClassName, coverageInfo)[ FD ]
Line_39 $$ if (isClassFile(child)) -->Line_42 $$ final String toplevelClassSrcFQName = getSourceToplevelFQName(classFqVMName)[ CD ]
Line_45 $$ final CoverageSuitesBundle suitesBundle = myCoverageManager.getCurrentSuitesBundle()-->Line_75 $$ if (extension.keepCoverageInfoForClassWithoutSource(suitesBundle, child)) [ FD ]
Line_44 $$ final Ref<PsiClass> psiClassRef = new Ref<PsiClass>()-->Line_95 $$ collectClassCoverageInformation(child, psiClassRef.get(), coverageInfoForClass, projectInfo, toplevelClassCoverage, classFqVMName.replace("/", "."), classCoverageKey)[ FD ]
Line_43 $$ final Ref<VirtualFile> containingFileRef = new Ref<VirtualFile>()-->Line_63 $$ return fileIndex.isUnderSourceRootOfType(containingFileRef.get(), JavaModuleSourceRootTypes.SOURCES) && (trackTestFolders || !fileIndex.isInTestSourceContent(containingFileRef.get()))[ FD ]
Line_43 $$ final Ref<VirtualFile> containingFileRef = new Ref<VirtualFile>()-->Line_84 $$ if (dirCoverageInfo.sourceRoot != null && VfsUtil.isAncestor(dirCoverageInfo.sourceRoot, containingFileRef.get(), false)) [ FD ]
Line_58 $$ if (containingFileRef.isNull()) -->Line_60 $$ return null[ CD ]
Line_18 $$ if (children == null)-->Line_19 $$ return null[ CD ]
Line_41 $$ final String classFqVMName = packageVMName.length() > 0 ? packageVMName + "/" + childName : childName-->Line_42 $$ final String toplevelClassSrcFQName = getSourceToplevelFQName(classFqVMName)[ FD ]
Line_4 $$ final List<DirCoverageInfo> dirs = new ArrayList<DirCoverageInfo>()-->Line_120 $$ return dirs.toArray(new DirCoverageInfo[dirs.size()])[ FD ]
Line_48 $$ final Boolean isInSource = DumbService.getInstance(myProject).runReadActionInSmartMode(new Computable<Boolean>() -->Line_62 $$ final ModuleFileIndex fileIndex = ModuleRootManager.getInstance(module).getFileIndex()[ CD ]
Line_43 $$ final Ref<VirtualFile> containingFileRef = new Ref<VirtualFile>()-->Line_57 $$ containingFileRef.set(aClass.getNavigationElement().getContainingFile().getVirtualFile())[ FD ]
Line_113 $$ if (isTestHierarchy) -->Line_116 $$ annotator.annotateSourceDirectory(dir.sourceRoot, dir, module)[ CD ]
Line_53 $$ final PsiClass aClass = JavaPsiFacade.getInstance(myManager.getProject()).findClass(toplevelClassSrcFQName, GlobalSearchScope.moduleScope(module))-->Line_56 $$ psiClassRef.set(aClass)[ FD ]
Line_113 $$ if (isTestHierarchy) -->Line_114 $$ annotator.annotateTestDirectory(dir.sourceRoot, dir, module)[ CD ]
Line_27 $$ for (int i = 0; i < childCoverageInfo.length; i++) -->Line_35 $$ parentDir.coveredMethodCount += coverageInfo.coveredMethodCount[ CD ]
Line_41 $$ final String classFqVMName = packageVMName.length() > 0 ? packageVMName + "/" + childName : childName-->Line_95 $$ collectClassCoverageInformation(child, psiClassRef.get(), coverageInfoForClass, projectInfo, toplevelClassCoverage, classFqVMName.replace("/", "."), classCoverageKey)[ FD ]
Line_39 $$ if (isClassFile(child)) -->Line_44 $$ final Ref<PsiClass> psiClassRef = new Ref<PsiClass>()[ CD ]
Line_58 $$ if (containingFileRef.isNull()) -->Line_59 $$ LOG.info("No virtual file found for: " + aClass)[ CD ]
Line_39 $$ if (isClassFile(child)) -->Line_91 $$ if (coverageInfoForClass == null && keepWithoutSource) [ CD ]
Line_4 $$ final List<DirCoverageInfo> dirs = new ArrayList<DirCoverageInfo>()-->Line_13 $$ dirs.add(new DirCoverageInfo(relativeSrcRoot))[ FD ]
Line_8 $$ final VirtualFile file = folder.getFile()-->Line_9 $$ if (file == null)[ FD ]
