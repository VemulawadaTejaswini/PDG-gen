Line_12 $$ if (viewEndpoint.equals(FBUtilities.getBroadcastAddress()))-->Line_13 $$ return Optional.of(viewEndpoint)[ CD ]
Line_5 $$ List<InetAddress> baseEndpoints = new ArrayList()-->Line_15 $$ baseEndpoints.remove(viewEndpoint)[ FD ]
Line_16 $$ if (!(replicationStrategy instanceof NetworkTopologyStrategy) || DatabaseDescriptor.getEndpointSnitch().getDatacenter(viewEndpoint).equals(localDataCenter))-->Line_17 $$ viewEndpoints.add(viewEndpoint)[ CD ]
Line_5 $$ List<InetAddress> baseEndpoints = new ArrayList()-->Line_9 $$ baseEndpoints.add(baseEndpoint)[ FD ]
Line_5 $$ List<InetAddress> baseEndpoints = new ArrayList()-->Line_14 $$ if (baseEndpoints.contains(viewEndpoint))[ FD ]
Line_6 $$ List<InetAddress> viewEndpoints = new ArrayList()-->Line_23 $$ return Optional.of(viewEndpoints.get(baseIdx))[ FD ]
Line_11 $$ for (InetAddress viewEndpoint : replicationStrategy.getNaturalEndpoints(viewToken)) -->Line_17 $$ viewEndpoints.add(viewEndpoint)[ FD ]
Line_5 $$ List<InetAddress> baseEndpoints = new ArrayList()-->Line_20 $$ int baseIdx = baseEndpoints.indexOf(FBUtilities.getBroadcastAddress())[ FD ]
Line_4 $$ String localDataCenter = DatabaseDescriptor.getEndpointSnitch().getDatacenter(FBUtilities.getBroadcastAddress())-->Line_8 $$ if (!(replicationStrategy instanceof NetworkTopologyStrategy) || DatabaseDescriptor.getEndpointSnitch().getDatacenter(baseEndpoint).equals(localDataCenter))[ FD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_3 $$ AbstractReplicationStrategy replicationStrategy = Keyspace.open(keyspaceName).getReplicationStrategy()[ CD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_21 $$ if (baseIdx < 0)[ CD ]
Line_11 $$ for (InetAddress viewEndpoint : replicationStrategy.getNaturalEndpoints(viewToken)) -->Line_13 $$ return Optional.of(viewEndpoint)[ FD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_23 $$ return Optional.of(viewEndpoints.get(baseIdx))[ CD ]
Line_7 $$ for (InetAddress baseEndpoint : replicationStrategy.getNaturalEndpoints(baseToken)) -->Line_8 $$ if (!(replicationStrategy instanceof NetworkTopologyStrategy) || DatabaseDescriptor.getEndpointSnitch().getDatacenter(baseEndpoint).equals(localDataCenter))[ FD ]
Line_6 $$ List<InetAddress> viewEndpoints = new ArrayList()-->Line_19 $$ assert baseEndpoints.size() == viewEndpoints.size() : "Replication strategy should have the same number of endpoints for the base and the view"[ FD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_5 $$ List<InetAddress> baseEndpoints = new ArrayList()[ CD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_4 $$ String localDataCenter = DatabaseDescriptor.getEndpointSnitch().getDatacenter(FBUtilities.getBroadcastAddress())[ CD ]
Line_8 $$ if (!(replicationStrategy instanceof NetworkTopologyStrategy) || DatabaseDescriptor.getEndpointSnitch().getDatacenter(baseEndpoint).equals(localDataCenter))-->Line_9 $$ baseEndpoints.add(baseEndpoint)[ CD ]
Line_21 $$ if (baseIdx < 0)-->Line_22 $$ return Optional.empty()[ CD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_20 $$ int baseIdx = baseEndpoints.indexOf(FBUtilities.getBroadcastAddress())[ CD ]
Line_6 $$ List<InetAddress> viewEndpoints = new ArrayList()-->Line_17 $$ viewEndpoints.add(viewEndpoint)[ FD ]
Line_11 $$ for (InetAddress viewEndpoint : replicationStrategy.getNaturalEndpoints(viewToken)) -->Line_16 $$ if (!(replicationStrategy instanceof NetworkTopologyStrategy) || DatabaseDescriptor.getEndpointSnitch().getDatacenter(viewEndpoint).equals(localDataCenter))[ FD ]
Line_14 $$ if (baseEndpoints.contains(viewEndpoint))-->Line_15 $$ baseEndpoints.remove(viewEndpoint)[ CD ]
Line_11 $$ for (InetAddress viewEndpoint : replicationStrategy.getNaturalEndpoints(viewToken)) -->Line_14 $$ if (baseEndpoints.contains(viewEndpoint))[ FD ]
Line_5 $$ List<InetAddress> baseEndpoints = new ArrayList()-->Line_19 $$ assert baseEndpoints.size() == viewEndpoints.size() : "Replication strategy should have the same number of endpoints for the base and the view"[ FD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_11 $$ for (InetAddress viewEndpoint : replicationStrategy.getNaturalEndpoints(viewToken)) [ FD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_7 $$ for (InetAddress baseEndpoint : replicationStrategy.getNaturalEndpoints(baseToken)) [ FD ]
Line_20 $$ int baseIdx = baseEndpoints.indexOf(FBUtilities.getBroadcastAddress())-->Line_23 $$ return Optional.of(viewEndpoints.get(baseIdx))[ FD ]
Line_7 $$ for (InetAddress baseEndpoint : replicationStrategy.getNaturalEndpoints(baseToken)) -->Line_9 $$ baseEndpoints.add(baseEndpoint)[ FD ]
Line_3 $$ AbstractReplicationStrategy replicationStrategy = Keyspace.open(keyspaceName).getReplicationStrategy()-->Line_7 $$ for (InetAddress baseEndpoint : replicationStrategy.getNaturalEndpoints(baseToken)) [ FD ]
Line_14 $$ if (baseEndpoints.contains(viewEndpoint))-->Line_16 $$ if (!(replicationStrategy instanceof NetworkTopologyStrategy) || DatabaseDescriptor.getEndpointSnitch().getDatacenter(viewEndpoint).equals(localDataCenter))[ CD ]
Line_3 $$ AbstractReplicationStrategy replicationStrategy = Keyspace.open(keyspaceName).getReplicationStrategy()-->Line_11 $$ for (InetAddress viewEndpoint : replicationStrategy.getNaturalEndpoints(viewToken)) [ FD ]
Line_4 $$ String localDataCenter = DatabaseDescriptor.getEndpointSnitch().getDatacenter(FBUtilities.getBroadcastAddress())-->Line_16 $$ if (!(replicationStrategy instanceof NetworkTopologyStrategy) || DatabaseDescriptor.getEndpointSnitch().getDatacenter(viewEndpoint).equals(localDataCenter))[ FD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_3 $$ AbstractReplicationStrategy replicationStrategy = Keyspace.open(keyspaceName).getReplicationStrategy()[ FD ]
Line_11 $$ for (InetAddress viewEndpoint : replicationStrategy.getNaturalEndpoints(viewToken)) -->Line_12 $$ if (viewEndpoint.equals(FBUtilities.getBroadcastAddress()))[ FD ]
Line_2 $$ public static Optional<InetAddress> getViewNaturalEndpoint(String keyspaceName, Token baseToken, Token viewToken) -->Line_6 $$ List<InetAddress> viewEndpoints = new ArrayList()[ CD ]
Line_20 $$ int baseIdx = baseEndpoints.indexOf(FBUtilities.getBroadcastAddress())-->Line_21 $$ if (baseIdx < 0)[ FD ]
Line_11 $$ for (InetAddress viewEndpoint : replicationStrategy.getNaturalEndpoints(viewToken)) -->Line_15 $$ baseEndpoints.remove(viewEndpoint)[ FD ]
