Line_3 $$ for (int i = 0; i < 10; i++) -->Line_4 $$ client().prepareIndex("test", "type", Integer.toString(i)).setSource("field", "1").get()[ FD ]
Line_6 $$ int numberOfAsyncOps = randomIntBetween(200, 700)-->Line_9 $$ for (int i = 0; i < numberOfAsyncOps; i++) [ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_17 $$ latch.countDown()[ CD ]
Line_7 $$ final CountDownLatch latch = new CountDownLatch(numberOfAsyncOps)-->Line_21 $$ latch.await()[ FD ]
Line_3 $$ for (int i = 0; i < 10; i++) -->Line_4 $$ client().prepareIndex("test", "type", Integer.toString(i)).setSource("field", "1").get()[ CD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_21 $$ latch.await()[ CD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_8 $$ final CopyOnWriteArrayList<Object> responses = new CopyOnWriteArrayList()[ CD ]
Line_3 $$ for (int i = 0; i < 10; i++) -->Line_9 $$ for (int i = 0; i < numberOfAsyncOps; i++) [ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_13 $$ latch.countDown()[ CD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_12 $$ responses.add(searchResponse)[ CD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_6 $$ int numberOfAsyncOps = randomIntBetween(200, 700)[ CD ]
Line_8 $$ final CopyOnWriteArrayList<Object> responses = new CopyOnWriteArrayList()-->Line_22 $$ assertThat(responses.size(), equalTo(numberOfAsyncOps))[ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_12 $$ responses.add(searchResponse)[ FD ]
Line_9 $$ for (int i = 0; i < numberOfAsyncOps; i++) -->Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() [ CD ]
Line_8 $$ final CopyOnWriteArrayList<Object> responses = new CopyOnWriteArrayList()-->Line_12 $$ responses.add(searchResponse)[ FD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_7 $$ final CountDownLatch latch = new CountDownLatch(numberOfAsyncOps)[ CD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_26 $$ for (ShardSearchFailure failure : searchResponse.getShardFailures()) [ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_34 $$ for (ShardSearchFailure failure : e.shardFailures()) [ FD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_3 $$ for (int i = 0; i < 10; i++) [ CD ]
Line_24 $$ if (response instanceof SearchResponse) -->Line_31 $$ Throwable unwrap = ExceptionsHelper.unwrapCause(t)[ CD ]
Line_24 $$ if (response instanceof SearchResponse) -->Line_32 $$ if (unwrap instanceof SearchPhaseExecutionException) [ CD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_22 $$ assertThat(responses.size(), equalTo(numberOfAsyncOps))[ CD ]
Line_7 $$ final CountDownLatch latch = new CountDownLatch(numberOfAsyncOps)-->Line_13 $$ latch.countDown()[ FD ]
Line_32 $$ if (unwrap instanceof SearchPhaseExecutionException) -->Line_37 $$ if ((unwrap instanceof EsRejectedExecutionException) == false) [ CD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_9 $$ for (int i = 0; i < numberOfAsyncOps; i++) [ CD ]
Line_8 $$ final CopyOnWriteArrayList<Object> responses = new CopyOnWriteArrayList()-->Line_16 $$ responses.add(e)[ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_16 $$ responses.add(e)[ FD ]
Line_6 $$ int numberOfAsyncOps = randomIntBetween(200, 700)-->Line_22 $$ assertThat(responses.size(), equalTo(numberOfAsyncOps))[ FD ]
Line_7 $$ final CountDownLatch latch = new CountDownLatch(numberOfAsyncOps)-->Line_17 $$ latch.countDown()[ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_16 $$ responses.add(e)[ CD ]
