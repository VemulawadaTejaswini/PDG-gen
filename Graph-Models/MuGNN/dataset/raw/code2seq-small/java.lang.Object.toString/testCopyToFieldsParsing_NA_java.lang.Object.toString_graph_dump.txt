Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_38 $$ assertNotNull(parsedDoc.dynamicMappingsUpdate())[ CD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_33 $$ assertThat(doc.getFields("cyclic_test")[1].stringValue(), equalTo("bar"))[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_7 $$ FieldMapper fieldMapper = docMapper.mappers().getMapper("copy_test")[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_18 $$ List<String> copyToList = (List<String>) copyTestMap.get("copy_to")[ CD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_32 $$ assertThat(doc.getFields("cyclic_test")[0].stringValue(), equalTo("foo"))[ FD ]
Line_13 $$ try (XContentParser parser = JsonXContent.jsonXContent.createParser(builder.bytes())) -->Line_14 $$ serializedMap = parser.map()[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_33 $$ assertThat(doc.getFields("cyclic_test")[1].stringValue(), equalTo("bar"))[ CD ]
Line_9 $$ XContentBuilder builder = jsonBuilder().startObject()-->Line_13 $$ try (XContentParser parser = JsonXContent.jsonXContent.createParser(builder.bytes())) [ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_6 $$ DocumentMapper docMapper = index.mapperService().documentMapper("type1")[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_22 $$ BytesReference json = jsonBuilder().startObject().field("copy_test", "foo").field("cyclic_test", "bar").field("int_to_str_test", 42).endObject().bytes()[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_8 $$ StringFieldMapper stringFieldMapper = (StringFieldMapper) fieldMapper[ CD ]
Line_6 $$ DocumentMapper docMapper = index.mapperService().documentMapper("type1")-->Line_40 $$ docMapper = index.mapperService().documentMapper("type1")[ FD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_37 $$ assertThat(doc.getFields("new_field")[0].numericValue().intValue(), equalTo(42))[ FD ]
Line_23 $$ ParsedDocument parsedDoc = docMapper.parse("test", "type1", "1", json)-->Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_20 $$ assertThat(copyToList.get(0).toString(), equalTo("another_field"))[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_35 $$ assertThat(doc.getFields("int_to_str_test")[0].numericValue().intValue(), equalTo(42))[ CD ]
Line_40 $$ docMapper = index.mapperService().documentMapper("type1")-->Line_41 $$ fieldMapper = docMapper.mappers().getMapper("new_field")[ FD ]
Line_4 $$ IndexService index = createIndex("test")-->Line_6 $$ DocumentMapper docMapper = index.mapperService().documentMapper("type1")[ FD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_36 $$ assertThat(doc.getFields("new_field").length, equalTo(2))[ FD ]
Line_6 $$ DocumentMapper docMapper = index.mapperService().documentMapper("type1")-->Line_7 $$ FieldMapper fieldMapper = docMapper.mappers().getMapper("copy_test")[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_39 $$ client().admin().indices().preparePutMapping("test").setType("type1").setSource(parsedDoc.dynamicMappingsUpdate().toString()).get()[ CD ]
Line_3 $$ String mapping = jsonBuilder().startObject().startObject("type1").startObject("properties").startObject("copy_test").field("type", "string").array("copy_to", "another_field", "cyclic_test").endObject().startObject("another_field").field("type", "string").endObject().startObject("cyclic_test").field("type", "string").array("copy_to", "copy_test").endObject().startObject("int_to_str_test").field("type", "integer").field("doc_values", false).array("copy_to", "another_field", "new_field").endObject().endObject().endObject().endObject().string()-->Line_5 $$ client().admin().indices().preparePutMapping("test").setType("type1").setSource(mapping).get()[ FD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_29 $$ assertThat(doc.getFields("another_field")[0].stringValue(), equalTo("foo"))[ FD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_28 $$ assertThat(doc.getFields("another_field").length, equalTo(2))[ FD ]
Line_6 $$ DocumentMapper docMapper = index.mapperService().documentMapper("type1")-->Line_23 $$ ParsedDocument parsedDoc = docMapper.parse("test", "type1", "1", json)[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_21 $$ assertThat(copyToList.get(1).toString(), equalTo("cyclic_test"))[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_9 $$ XContentBuilder builder = jsonBuilder().startObject()[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_42 $$ assertThat(fieldMapper, instanceOf(LongFieldMapper.class))[ CD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_25 $$ assertThat(doc.getFields("copy_test").length, equalTo(2))[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_26 $$ assertThat(doc.getFields("copy_test")[0].stringValue(), equalTo("foo"))[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_34 $$ assertThat(doc.getFields("int_to_str_test").length, equalTo(1))[ CD ]
Line_12 $$ Map<String, Object> serializedMap-->Line_16 $$ Map<String, Object> copyTestMap = (Map<String, Object>) serializedMap.get("copy_test")[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_11 $$ builder.close()[ CD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_34 $$ assertThat(doc.getFields("int_to_str_test").length, equalTo(1))[ FD ]
Line_8 $$ StringFieldMapper stringFieldMapper = (StringFieldMapper) fieldMapper-->Line_10 $$ stringFieldMapper.toXContent(builder, ToXContent.EMPTY_PARAMS).endObject()[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_40 $$ docMapper = index.mapperService().documentMapper("type1")[ CD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_27 $$ assertThat(doc.getFields("copy_test")[1].stringValue(), equalTo("bar"))[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_4 $$ IndexService index = createIndex("test")[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_31 $$ assertThat(doc.getFields("cyclic_test").length, equalTo(2))[ CD ]
Line_7 $$ FieldMapper fieldMapper = docMapper.mappers().getMapper("copy_test")-->Line_42 $$ assertThat(fieldMapper, instanceOf(LongFieldMapper.class))[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_41 $$ fieldMapper = docMapper.mappers().getMapper("new_field")[ CD ]
Line_41 $$ fieldMapper = docMapper.mappers().getMapper("new_field")-->Line_42 $$ assertThat(fieldMapper, instanceOf(LongFieldMapper.class))[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_27 $$ assertThat(doc.getFields("copy_test")[1].stringValue(), equalTo("bar"))[ CD ]
Line_6 $$ DocumentMapper docMapper = index.mapperService().documentMapper("type1")-->Line_41 $$ fieldMapper = docMapper.mappers().getMapper("new_field")[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_25 $$ assertThat(doc.getFields("copy_test").length, equalTo(2))[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_30 $$ assertThat(doc.getFields("another_field")[1].stringValue(), equalTo("42"))[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_12 $$ Map<String, Object> serializedMap[ CD ]
Line_14 $$ serializedMap = parser.map()-->Line_16 $$ Map<String, Object> copyTestMap = (Map<String, Object>) serializedMap.get("copy_test")[ FD ]
Line_18 $$ List<String> copyToList = (List<String>) copyTestMap.get("copy_to")-->Line_19 $$ assertThat(copyToList.size(), equalTo(2))[ FD ]
Line_18 $$ List<String> copyToList = (List<String>) copyTestMap.get("copy_to")-->Line_21 $$ assertThat(copyToList.get(1).toString(), equalTo("cyclic_test"))[ FD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_35 $$ assertThat(doc.getFields("int_to_str_test")[0].numericValue().intValue(), equalTo(42))[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_32 $$ assertThat(doc.getFields("cyclic_test")[0].stringValue(), equalTo("foo"))[ CD ]
Line_4 $$ IndexService index = createIndex("test")-->Line_40 $$ docMapper = index.mapperService().documentMapper("type1")[ FD ]
Line_18 $$ List<String> copyToList = (List<String>) copyTestMap.get("copy_to")-->Line_20 $$ assertThat(copyToList.get(0).toString(), equalTo("another_field"))[ FD ]
Line_7 $$ FieldMapper fieldMapper = docMapper.mappers().getMapper("copy_test")-->Line_41 $$ fieldMapper = docMapper.mappers().getMapper("new_field")[ FD ]
Line_23 $$ ParsedDocument parsedDoc = docMapper.parse("test", "type1", "1", json)-->Line_38 $$ assertNotNull(parsedDoc.dynamicMappingsUpdate())[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_5 $$ client().admin().indices().preparePutMapping("test").setType("type1").setSource(mapping).get()[ CD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_31 $$ assertThat(doc.getFields("cyclic_test").length, equalTo(2))[ FD ]
Line_22 $$ BytesReference json = jsonBuilder().startObject().field("copy_test", "foo").field("cyclic_test", "bar").field("int_to_str_test", 42).endObject().bytes()-->Line_23 $$ ParsedDocument parsedDoc = docMapper.parse("test", "type1", "1", json)[ FD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_30 $$ assertThat(doc.getFields("another_field")[1].stringValue(), equalTo("42"))[ FD ]
Line_23 $$ ParsedDocument parsedDoc = docMapper.parse("test", "type1", "1", json)-->Line_39 $$ client().admin().indices().preparePutMapping("test").setType("type1").setSource(parsedDoc.dynamicMappingsUpdate().toString()).get()[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_37 $$ assertThat(doc.getFields("new_field")[0].numericValue().intValue(), equalTo(42))[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_10 $$ stringFieldMapper.toXContent(builder, ToXContent.EMPTY_PARAMS).endObject()[ CD ]
Line_12 $$ Map<String, Object> serializedMap-->Line_14 $$ serializedMap = parser.map()[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_3 $$ String mapping = jsonBuilder().startObject().startObject("type1").startObject("properties").startObject("copy_test").field("type", "string").array("copy_to", "another_field", "cyclic_test").endObject().startObject("another_field").field("type", "string").endObject().startObject("cyclic_test").field("type", "string").array("copy_to", "copy_test").endObject().startObject("int_to_str_test").field("type", "integer").field("doc_values", false).array("copy_to", "another_field", "new_field").endObject().endObject().endObject().endObject().string()[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_28 $$ assertThat(doc.getFields("another_field").length, equalTo(2))[ CD ]
Line_16 $$ Map<String, Object> copyTestMap = (Map<String, Object>) serializedMap.get("copy_test")-->Line_18 $$ List<String> copyToList = (List<String>) copyTestMap.get("copy_to")[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_19 $$ assertThat(copyToList.size(), equalTo(2))[ CD ]
Line_9 $$ XContentBuilder builder = jsonBuilder().startObject()-->Line_10 $$ stringFieldMapper.toXContent(builder, ToXContent.EMPTY_PARAMS).endObject()[ FD ]
Line_9 $$ XContentBuilder builder = jsonBuilder().startObject()-->Line_11 $$ builder.close()[ FD ]
Line_16 $$ Map<String, Object> copyTestMap = (Map<String, Object>) serializedMap.get("copy_test")-->Line_17 $$ assertThat(copyTestMap.get("type").toString(), is("string"))[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_29 $$ assertThat(doc.getFields("another_field")[0].stringValue(), equalTo("foo"))[ CD ]
Line_24 $$ ParseContext.Document doc = parsedDoc.rootDoc()-->Line_26 $$ assertThat(doc.getFields("copy_test")[0].stringValue(), equalTo("foo"))[ FD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_16 $$ Map<String, Object> copyTestMap = (Map<String, Object>) serializedMap.get("copy_test")[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_17 $$ assertThat(copyTestMap.get("type").toString(), is("string"))[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_36 $$ assertThat(doc.getFields("new_field").length, equalTo(2))[ CD ]
Line_2 $$ public void testCopyToFieldsParsing() throws Exception -->Line_23 $$ ParsedDocument parsedDoc = docMapper.parse("test", "type1", "1", json)[ CD ]
