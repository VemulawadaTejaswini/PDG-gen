Line_7 $$ final CountDownLatch latch = new CountDownLatch(numberOfAsyncOps)-->Line_25 $$ latch.await()[ FD ]
Line_7 $$ final CountDownLatch latch = new CountDownLatch(numberOfAsyncOps)-->Line_21 $$ latch.countDown()[ FD ]
Line_7 $$ final CountDownLatch latch = new CountDownLatch(numberOfAsyncOps)-->Line_15 $$ latch.countDown()[ FD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_8 $$ final CopyOnWriteArrayList<Object> responses = new CopyOnWriteArrayList()[ CD ]
Line_9 $$ for (int i = 0; i < numberOfAsyncOps; i++) -->Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() [ CD ]
Line_6 $$ int numberOfAsyncOps = randomIntBetween(200, 700)-->Line_26 $$ assertThat(responses.size(), equalTo(numberOfAsyncOps))[ FD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_6 $$ int numberOfAsyncOps = randomIntBetween(200, 700)[ CD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_3 $$ for (int i = 0; i < 10; i++) [ CD ]
Line_3 $$ for (int i = 0; i < 10; i++) -->Line_4 $$ client().prepareIndex("test", "type", Integer.toString(i)).setSource("field", "1").get()[ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_20 $$ responses.add(e)[ CD ]
Line_8 $$ final CopyOnWriteArrayList<Object> responses = new CopyOnWriteArrayList()-->Line_20 $$ responses.add(e)[ FD ]
Line_29 $$ if (response instanceof SearchResponse) -->Line_37 $$ if (unwrap instanceof SearchPhaseExecutionException) [ CD ]
Line_8 $$ final CopyOnWriteArrayList<Object> responses = new CopyOnWriteArrayList()-->Line_14 $$ responses.add(searchResponse)[ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_31 $$ for (ShardSearchFailure failure : searchResponse.getShardFailures()) [ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_20 $$ responses.add(e)[ FD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_7 $$ final CountDownLatch latch = new CountDownLatch(numberOfAsyncOps)[ CD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_9 $$ for (int i = 0; i < numberOfAsyncOps; i++) [ CD ]
Line_8 $$ final CopyOnWriteArrayList<Object> responses = new CopyOnWriteArrayList()-->Line_26 $$ assertThat(responses.size(), equalTo(numberOfAsyncOps))[ FD ]
Line_3 $$ for (int i = 0; i < 10; i++) -->Line_4 $$ client().prepareIndex("test", "type", Integer.toString(i)).setSource("field", "1").get()[ CD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_15 $$ latch.countDown()[ CD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_14 $$ responses.add(searchResponse)[ CD ]
Line_3 $$ for (int i = 0; i < 10; i++) -->Line_9 $$ for (int i = 0; i < numberOfAsyncOps; i++) [ FD ]
Line_37 $$ if (unwrap instanceof SearchPhaseExecutionException) -->Line_42 $$ if ((unwrap instanceof EsRejectedExecutionException) == false) [ CD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_21 $$ latch.countDown()[ CD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_39 $$ for (ShardSearchFailure failure : e.shardFailures()) [ FD ]
Line_6 $$ int numberOfAsyncOps = randomIntBetween(200, 700)-->Line_9 $$ for (int i = 0; i < numberOfAsyncOps; i++) [ FD ]
Line_10 $$ client().prepareSearch("test").setSearchType(SearchType.QUERY_THEN_FETCH).setQuery(QueryBuilders.matchQuery("field", "1")).execute(new ActionListener<SearchResponse>() -->Line_14 $$ responses.add(searchResponse)[ FD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_25 $$ latch.await()[ CD ]
Line_29 $$ if (response instanceof SearchResponse) -->Line_36 $$ Throwable unwrap = ExceptionsHelper.unwrapCause(t)[ CD ]
Line_2 $$ public void testSimulatedSearchRejectionLoad() throws Throwable -->Line_26 $$ assertThat(responses.size(), equalTo(numberOfAsyncOps))[ CD ]
