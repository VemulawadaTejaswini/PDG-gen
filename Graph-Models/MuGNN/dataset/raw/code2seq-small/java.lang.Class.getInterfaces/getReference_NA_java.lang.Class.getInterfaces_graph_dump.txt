Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_29 $$ if (entityManager1 == null) [ FD ]
Line_76 $$ for (int interfaceIndex = 0; interfaceIndex < targetInterfaces.length; interfaceIndex++) -->Line_84 $$ proxyInterfaces[1 + interfaceIndex] = interfaceClass[ CD ]
Line_13 $$ entityManager = new TransactionScopedEntityManager(unitName, properties, emf, synchronizationType, tsr, transactionManager)-->Line_43 $$ entityManager = entityManager1[ FD ]
Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_50 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_6 $$ EntityManager entityManager-->Line_13 $$ entityManager = new TransactionScopedEntityManager(unitName, properties, emf, synchronizationType, tsr, transactionManager)[ FD ]
Line_18 $$ if (jpaDeploymentSettings != null) -->Line_19 $$ useDeepInheritance = ExtendedPersistenceInheritance.DEEP.equals(jpaDeploymentSettings.getExtendedPersistenceInheritanceType())[ CD ]
Line_77 $$ Class<?> interfaceClass = targetInterfaces[interfaceIndex]-->Line_84 $$ proxyInterfaces[1 + interfaceIndex] = interfaceClass[ FD ]
Line_12 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_29 $$ if (entityManager1 == null) [ CD ]
Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_50 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_52 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_92 $$ if (ROOT_LOGGER.isDebugEnabled())-->Line_93 $$ ROOT_LOGGER.debugf("injecting entity manager into a '%s' (unit name=%s)", extensionClass.getName(), unitName)[ CD ]
Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_29 $$ if (entityManager1 == null) [ FD ]
Line_36 $$ if (ROOT_LOGGER.isDebugEnabled())-->Line_37 $$ ROOT_LOGGER.debugf("created new ExtendedEntityManager for unit name=%s, useDeepInheritance = %b", unitName, useDeepInheritance)[ CD ]
Line_78 $$ if (interfaceClass.equals(extensionClass)) -->Line_81 $$ alreadyHasInterfaceClass = true[ CD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)[ FD ]
Line_77 $$ Class<?> interfaceClass = targetInterfaces[interfaceIndex]-->Line_78 $$ if (interfaceClass.equals(extensionClass)) [ FD ]
Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_39 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_30 $$ if (SynchronizationType.UNSYNCHRONIZED.equals(synchronizationType)) -->Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ CD ]
Line_12 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_14 $$ if (ROOT_LOGGER.isDebugEnabled())[ CD ]
Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_41 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_29 $$ if (entityManager1 == null) [ FD ]
Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_43 $$ entityManager = entityManager1[ FD ]
Line_29 $$ if (entityManager1 == null) -->Line_36 $$ if (ROOT_LOGGER.isDebugEnabled())[ CD ]
Line_5 $$ EntityManagerFactory emf = service.getEntityManagerFactory()-->Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_17 $$ boolean useDeepInheritance = !ExtendedPersistenceInheritance.SHALLOW.equals(JPAService.getDefaultExtendedPersistenceInheritance())-->Line_37 $$ ROOT_LOGGER.debugf("created new ExtendedEntityManager for unit name=%s, useDeepInheritance = %b", unitName, useDeepInheritance)[ FD ]
Line_29 $$ if (entityManager1 == null) -->Line_35 $$ createdNewExtendedPersistence = true[ CD ]
Line_29 $$ if (entityManager1 == null) -->Line_39 $$ entityManager1.increaseReferenceCount()[ CD ]
Line_56 $$ if (!standardEntityManager) -->Line_90 $$ Object proxyForUnwrappedObject = //use the target classloader so the proxy has the same scope[ CD ]
Line_40 $$ if (ROOT_LOGGER.isDebugEnabled())-->Line_41 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ CD ]
Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_43 $$ entityManager = entityManager1[ FD ]
Line_7 $$ boolean standardEntityManager = ENTITY_MANAGER_CLASS.equals(injectionTypeName)-->Line_56 $$ if (!standardEntityManager) [ FD ]
Line_12 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_18 $$ if (jpaDeploymentSettings != null) [ CD ]
Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_50 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_75 $$ boolean alreadyHasInterfaceClass = false-->Line_86 $$ if (!alreadyHasInterfaceClass) [ FD ]
Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_41 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_5 $$ EntityManagerFactory emf = service.getEntityManagerFactory()-->Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_41 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_41 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_76 $$ for (int interfaceIndex = 0; interfaceIndex < targetInterfaces.length; interfaceIndex++) -->Line_78 $$ if (interfaceClass.equals(extensionClass)) [ CD ]
Line_19 $$ useDeepInheritance = ExtendedPersistenceInheritance.DEEP.equals(jpaDeploymentSettings.getExtendedPersistenceInheritanceType())-->Line_37 $$ ROOT_LOGGER.debugf("created new ExtendedEntityManager for unit name=%s, useDeepInheritance = %b", unitName, useDeepInheritance)[ FD ]
Line_29 $$ if (entityManager1 == null) -->Line_30 $$ if (SynchronizationType.UNSYNCHRONIZED.equals(synchronizationType)) [ CD ]
Line_30 $$ if (SynchronizationType.UNSYNCHRONIZED.equals(synchronizationType)) -->Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ CD ]
Line_75 $$ boolean alreadyHasInterfaceClass = false-->Line_81 $$ alreadyHasInterfaceClass = true[ FD ]
Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_41 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_56 $$ if (!standardEntityManager) -->Line_75 $$ boolean alreadyHasInterfaceClass = false[ CD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_12 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_17 $$ boolean useDeepInheritance = !ExtendedPersistenceInheritance.SHALLOW.equals(JPAService.getDefaultExtendedPersistenceInheritance())[ CD ]
Line_81 $$ alreadyHasInterfaceClass = true-->Line_86 $$ if (!alreadyHasInterfaceClass) [ FD ]
Line_4 $$ PersistenceUnitServiceImpl service = (PersistenceUnitServiceImpl) serviceRegistry.getRequiredService(puServiceName).getValue()-->Line_5 $$ EntityManagerFactory emf = service.getEntityManagerFactory()[ FD ]
Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_14 $$ if (ROOT_LOGGER.isDebugEnabled())-->Line_15 $$ ROOT_LOGGER.debugf("created new TransactionScopedEntityManager for unit name=%s", unitName)[ CD ]
Line_29 $$ if (entityManager1 == null) -->Line_40 $$ if (ROOT_LOGGER.isDebugEnabled())[ CD ]
Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_39 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_56 $$ if (!standardEntityManager) -->Line_89 $$ EntityManagerUnwrappedTargetInvocationHandler entityManagerUnwrappedTargetInvocationHandler = new EntityManagerUnwrappedTargetInvocationHandler(entityManager, extensionClass)[ CD ]
Line_12 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_43 $$ entityManager = entityManager1[ CD ]
Line_89 $$ EntityManagerUnwrappedTargetInvocationHandler entityManagerUnwrappedTargetInvocationHandler = new EntityManagerUnwrappedTargetInvocationHandler(entityManager, extensionClass)-->Line_90 $$ Object proxyForUnwrappedObject = //use the target classloader so the proxy has the same scope[ FD ]
Line_12 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_13 $$ entityManager = new TransactionScopedEntityManager(unitName, properties, emf, synchronizationType, tsr, transactionManager)[ CD ]
Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_50 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_52 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_12 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_21 $$ boolean createdNewExtendedPersistence = false[ CD ]
Line_21 $$ boolean createdNewExtendedPersistence = false-->Line_35 $$ createdNewExtendedPersistence = true[ FD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_39 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_52 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_56 $$ if (!standardEntityManager) -->Line_94 $$ return new ValueManagedReference(new ImmediateValue<Object>(proxyForUnwrappedObject))[ CD ]
Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_50 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_17 $$ boolean useDeepInheritance = !ExtendedPersistenceInheritance.SHALLOW.equals(JPAService.getDefaultExtendedPersistenceInheritance())-->Line_19 $$ useDeepInheritance = ExtendedPersistenceInheritance.DEEP.equals(jpaDeploymentSettings.getExtendedPersistenceInheritanceType())[ FD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)[ FD ]
Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_39 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_56 $$ if (!standardEntityManager) -->Line_92 $$ if (ROOT_LOGGER.isDebugEnabled())[ CD ]
Line_76 $$ for (int interfaceIndex = 0; interfaceIndex < targetInterfaces.length; interfaceIndex++) -->Line_77 $$ Class<?> interfaceClass = targetInterfaces[interfaceIndex][ CD ]
Line_56 $$ if (!standardEntityManager) -->Line_76 $$ for (int interfaceIndex = 0; interfaceIndex < targetInterfaces.length; interfaceIndex++) [ CD ]
Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_39 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_31 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_33 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_6 $$ EntityManager entityManager-->Line_43 $$ entityManager = entityManager1[ FD ]
Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_43 $$ entityManager = entityManager1[ FD ]
Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_52 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_17 $$ boolean useDeepInheritance = !ExtendedPersistenceInheritance.SHALLOW.equals(JPAService.getDefaultExtendedPersistenceInheritance())-->Line_41 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_86 $$ if (!alreadyHasInterfaceClass) -->Line_87 $$ proxyInterfaces[0] = extensionClass[ CD ]
Line_19 $$ useDeepInheritance = ExtendedPersistenceInheritance.DEEP.equals(jpaDeploymentSettings.getExtendedPersistenceInheritanceType())-->Line_41 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_56 $$ if (!standardEntityManager) -->Line_86 $$ if (!alreadyHasInterfaceClass) [ CD ]
Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_27 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)[ FD ]
Line_12 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_22 $$ ExtendedEntityManager entityManager1[ CD ]
Line_25 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_43 $$ entityManager = entityManager1[ FD ]
Line_12 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_47 $$ if (createdNewExtendedPersistence) [ CD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_43 $$ entityManager = entityManager1[ FD ]
Line_22 $$ ExtendedEntityManager entityManager1-->Line_52 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
