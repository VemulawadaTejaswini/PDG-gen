Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_4 $$ int testKeyRange = (int) (perTestCount * testKeyRatio)[ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_11 $$ int maxRunLength = modificationBatchSize == 1 ? 1 : ThreadLocalRandom.current().nextInt(1, modificationBatchSize)[ FD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_30 $$ Snapshot snap = BTREE_TIMER.getSnapshot()[ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_8 $$ for (int chunk = 0; chunk < tests; chunk += chunkSize) [ FD ]
Line_4 $$ int testKeyRange = (int) (perTestCount * testKeyRatio)-->Line_12 $$ outer.add(doOneTestInsertions(testKeyRange, maxRunLength, modificationBatchSize, batchesPerTest, quickEquality))[ FD ]
Line_11 $$ int maxRunLength = modificationBatchSize == 1 ? 1 : ThreadLocalRandom.current().nextInt(1, modificationBatchSize)-->Line_12 $$ outer.add(doOneTestInsertions(testKeyRange, maxRunLength, modificationBatchSize, batchesPerTest, quickEquality))[ FD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_12 $$ outer.add(doOneTestInsertions(testKeyRange, maxRunLength, modificationBatchSize, batchesPerTest, quickEquality))[ FD ]
Line_8 $$ for (int chunk = 0; chunk < tests; chunk += chunkSize) -->Line_16 $$ int reportInterval = Math.max(1000, (int) (totalCount / 10000))[ CD ]
Line_30 $$ Snapshot snap = BTREE_TIMER.getSnapshot()-->Line_31 $$ log("btree: %.2fns, %.2fns, %.2fns", snap.getMedian(), snap.get95thPercentile(), snap.get999thPercentile())[ FD ]
Line_7 $$ int chunkSize = quickEquality ? tests : (int) (100000 / Math.pow(perTestCount, 2))-->Line_8 $$ for (int chunk = 0; chunk < tests; chunk += chunkSize) [ FD ]
Line_8 $$ for (int chunk = 0; chunk < tests; chunk += chunkSize) -->Line_9 $$ final List<ListenableFutureTask<List<ListenableFuture<?>>>> outer = new ArrayList()[ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_33 $$ log("java: %.2fns, %.2fns, %.2fns", snap.getMedian(), snap.get95thPercentile(), snap.get999thPercentile())[ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_7 $$ int chunkSize = quickEquality ? tests : (int) (100000 / Math.pow(perTestCount, 2))[ FD ]
Line_10 $$ for (int i = 0; i < chunkSize; i++) -->Line_12 $$ outer.add(doOneTestInsertions(testKeyRange, maxRunLength, modificationBatchSize, batchesPerTest, quickEquality))[ CD ]
Line_3 $$ int batchesPerTest = perTestCount / modificationBatchSize-->Line_12 $$ outer.add(doOneTestInsertions(testKeyRange, maxRunLength, modificationBatchSize, batchesPerTest, quickEquality))[ FD ]
Line_8 $$ for (int chunk = 0; chunk < tests; chunk += chunkSize) -->Line_28 $$ Futures.allAsList(inner).get()[ CD ]
Line_9 $$ final List<ListenableFutureTask<List<ListenableFuture<?>>>> outer = new ArrayList()-->Line_12 $$ outer.add(doOneTestInsertions(testKeyRange, maxRunLength, modificationBatchSize, batchesPerTest, quickEquality))[ FD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_6 $$ log("Performing %d tests of %d operations, with %.2f max size/key-range ratio in batches of ~%d ops", tests, perTestCount, 1 / testKeyRatio, modificationBatchSize)[ FD ]
Line_32 $$ snap = TREE_TIMER.getSnapshot()-->Line_33 $$ log("java: %.2fns, %.2fns, %.2fns", snap.getMedian(), snap.get95thPercentile(), snap.get999thPercentile())[ FD ]
Line_21 $$ if (complete - lastReportAt >= reportInterval) -->Line_24 $$ log("Completed %.1f%% (%d of %d operations)", ratio * 100, done, totalCount)[ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_31 $$ log("btree: %.2fns, %.2fns, %.2fns", snap.getMedian(), snap.get95thPercentile(), snap.get999thPercentile())[ CD ]
Line_30 $$ Snapshot snap = BTREE_TIMER.getSnapshot()-->Line_33 $$ log("java: %.2fns, %.2fns, %.2fns", snap.getMedian(), snap.get95thPercentile(), snap.get999thPercentile())[ FD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_6 $$ log("Performing %d tests of %d operations, with %.2f max size/key-range ratio in batches of ~%d ops", tests, perTestCount, 1 / testKeyRatio, modificationBatchSize)[ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_7 $$ int chunkSize = quickEquality ? tests : (int) (100000 / Math.pow(perTestCount, 2))[ CD ]
Line_8 $$ for (int chunk = 0; chunk < tests; chunk += chunkSize) -->Line_10 $$ for (int i = 0; i < chunkSize; i++) [ CD ]
Line_7 $$ int chunkSize = quickEquality ? tests : (int) (100000 / Math.pow(perTestCount, 2))-->Line_10 $$ for (int i = 0; i < chunkSize; i++) [ FD ]
Line_10 $$ for (int i = 0; i < chunkSize; i++) -->Line_11 $$ int maxRunLength = modificationBatchSize == 1 ? 1 : ThreadLocalRandom.current().nextInt(1, modificationBatchSize)[ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_5 $$ long totalCount = (long) perTestCount * tests[ CD ]
Line_5 $$ long totalCount = (long) perTestCount * tests-->Line_24 $$ log("Completed %.1f%% (%d of %d operations)", ratio * 100, done, totalCount)[ FD ]
Line_30 $$ Snapshot snap = BTREE_TIMER.getSnapshot()-->Line_32 $$ snap = TREE_TIMER.getSnapshot()[ FD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_34 $$ log("Done")[ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_32 $$ snap = TREE_TIMER.getSnapshot()[ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_8 $$ for (int chunk = 0; chunk < tests; chunk += chunkSize) [ CD ]
Line_2 $$ private static void testInsertions(int tests, int perTestCount, float testKeyRatio, int modificationBatchSize, boolean quickEquality) throws ExecutionException, InterruptedException -->Line_3 $$ int batchesPerTest = perTestCount / modificationBatchSize[ CD ]
