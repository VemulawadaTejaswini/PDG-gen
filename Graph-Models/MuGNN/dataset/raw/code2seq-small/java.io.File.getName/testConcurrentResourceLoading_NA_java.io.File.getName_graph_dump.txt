Line_4 $$ List<URL> urls = ContainerUtil.newArrayList()-->Line_7 $$ urls.add(file.toURI().toURL())[ FD ]
Line_21 $$ final int resourceCount = 20-->Line_33 $$ for (int j = 0; j < resourceCount; j++) [ FD ]
Line_27 $$ final UrlClassLoader loader = UrlClassLoader.build().urls(urls).parent(null).useCache(pool, new UrlClassLoader.CachingCondition() -->Line_60 $$ return loader.findResource(name)[ FD ]
Line_2 $$ public void testConcurrentResourceLoading() throws Exception -->Line_3 $$ final List<String> resourceNames = ContainerUtil.newArrayList()[ CD ]
Line_6 $$ if (file.getName().endsWith(".jar")) -->Line_7 $$ urls.add(file.toURI().toURL())[ CD ]
Line_2 $$ public void testConcurrentResourceLoading() throws Exception -->Line_19 $$ int attemptCount = 1000[ CD ]
Line_6 $$ if (file.getName().endsWith(".jar")) -->Line_8 $$ ZipFile zipFile = new ZipFile(file)[ CD ]
Line_27 $$ final UrlClassLoader loader = UrlClassLoader.build().urls(urls).parent(null).useCache(pool, new UrlClassLoader.CachingCondition() -->Line_29 $$ return true[ CD ]
Line_10 $$ Enumeration<? extends ZipEntry> entries = zipFile.entries()-->Line_12 $$ resourceNames.add(entries.nextElement().getName())[ FD ]
Line_26 $$ for (int attempt = 0; attempt < attemptCount; attempt++) -->Line_37 $$ for (int i = 0; i < threadCount; i++) [ CD ]
Line_38 $$ futures.add(executor.submit(new Runnable() -->Line_60 $$ return loader.findResource(name)[ FD ]
Line_25 $$ UrlClassLoader.CachePool pool = UrlClassLoader.createCachePool()-->Line_27 $$ final UrlClassLoader loader = UrlClassLoader.build().urls(urls).parent(null).useCache(pool, new UrlClassLoader.CachingCondition() [ FD ]
Line_3 $$ final List<String> resourceNames = ContainerUtil.newArrayList()-->Line_34 $$ namesToLoad.add(resourceNames.get(random.nextInt(resourceNames.size())))[ FD ]
Line_10 $$ Enumeration<? extends ZipEntry> entries = zipFile.entries()-->Line_11 $$ while (entries.hasMoreElements()) [ FD ]
Line_22 $$ ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(threadCount, ConcurrencyUtil.newNamedThreadFactory("conc loading"))-->Line_38 $$ futures.add(executor.submit(new Runnable() [ FD ]
Line_53 $$ Enumeration<URL> resources = loader.getResources(name)-->Line_54 $$ assertTrue(resources.hasMoreElements())[ FD ]
Line_38 $$ futures.add(executor.submit(new Runnable() -->Line_51 $$ if (findResourceOrFindResourcesChooser.nextBoolean()) [ CD ]
Line_5 $$ for (File file : new File(PathManager.getHomePathFor(UrlClassLoader.class) + "/lib").listFiles()) -->Line_7 $$ urls.add(file.toURI().toURL())[ FD ]
Line_53 $$ Enumeration<URL> resources = loader.getResources(name)-->Line_55 $$ return resources.nextElement()[ FD ]
Line_32 $$ final List<String> namesToLoad = ContainerUtil.newArrayList()-->Line_34 $$ namesToLoad.add(resourceNames.get(random.nextInt(resourceNames.size())))[ FD ]
Line_40 $$ for (String name : namesToLoad) -->Line_60 $$ return loader.findResource(name)[ FD ]
Line_3 $$ final List<String> resourceNames = ContainerUtil.newArrayList()-->Line_12 $$ resourceNames.add(entries.nextElement().getName())[ FD ]
Line_33 $$ for (int j = 0; j < resourceCount; j++) -->Line_34 $$ namesToLoad.add(resourceNames.get(random.nextInt(resourceNames.size())))[ CD ]
Line_20 $$ int threadCount = 3-->Line_37 $$ for (int i = 0; i < threadCount; i++) [ FD ]
Line_2 $$ public void testConcurrentResourceLoading() throws Exception -->Line_4 $$ List<URL> urls = ContainerUtil.newArrayList()[ CD ]
Line_22 $$ ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(threadCount, ConcurrencyUtil.newNamedThreadFactory("conc loading"))-->Line_69 $$ executor.shutdownNow()[ FD ]
Line_4 $$ List<URL> urls = ContainerUtil.newArrayList()-->Line_27 $$ final UrlClassLoader loader = UrlClassLoader.build().urls(urls).parent(null).useCache(pool, new UrlClassLoader.CachingCondition() [ FD ]
Line_26 $$ for (int attempt = 0; attempt < attemptCount; attempt++) -->Line_36 $$ List<Future> futures = ContainerUtil.newArrayList()[ CD ]
Line_38 $$ futures.add(executor.submit(new Runnable() -->Line_60 $$ return loader.findResource(name)[ CD ]
Line_19 $$ int attemptCount = 1000-->Line_26 $$ for (int attempt = 0; attempt < attemptCount; attempt++) [ FD ]
Line_8 $$ ZipFile zipFile = new ZipFile(file)-->Line_10 $$ Enumeration<? extends ZipEntry> entries = zipFile.entries()[ FD ]
Line_11 $$ while (entries.hasMoreElements()) -->Line_12 $$ resourceNames.add(entries.nextElement().getName())[ CD ]
Line_2 $$ public void testConcurrentResourceLoading() throws Exception -->Line_22 $$ ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(threadCount, ConcurrencyUtil.newNamedThreadFactory("conc loading"))[ CD ]
Line_2 $$ public void testConcurrentResourceLoading() throws Exception -->Line_21 $$ final int resourceCount = 20[ CD ]
Line_26 $$ for (int attempt = 0; attempt < attemptCount; attempt++) -->Line_33 $$ for (int j = 0; j < resourceCount; j++) [ CD ]
Line_27 $$ final UrlClassLoader loader = UrlClassLoader.build().urls(urls).parent(null).useCache(pool, new UrlClassLoader.CachingCondition() -->Line_53 $$ Enumeration<URL> resources = loader.getResources(name)[ FD ]
Line_26 $$ for (int attempt = 0; attempt < attemptCount; attempt++) -->Line_32 $$ final List<String> namesToLoad = ContainerUtil.newArrayList()[ CD ]
Line_2 $$ public void testConcurrentResourceLoading() throws Exception -->Line_20 $$ int threadCount = 3[ CD ]
Line_24 $$ final Random random = new Random()-->Line_34 $$ namesToLoad.add(resourceNames.get(random.nextInt(resourceNames.size())))[ FD ]
Line_22 $$ ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(threadCount, ConcurrencyUtil.newNamedThreadFactory("conc loading"))-->Line_70 $$ executor.awaitTermination(1000, TimeUnit.SECONDS)[ FD ]
Line_8 $$ ZipFile zipFile = new ZipFile(file)-->Line_15 $$ zipFile.close()[ FD ]
Line_26 $$ for (int attempt = 0; attempt < attemptCount; attempt++) -->Line_27 $$ final UrlClassLoader loader = UrlClassLoader.build().urls(urls).parent(null).useCache(pool, new UrlClassLoader.CachingCondition() [ CD ]
Line_5 $$ for (File file : new File(PathManager.getHomePathFor(UrlClassLoader.class) + "/lib").listFiles()) -->Line_6 $$ if (file.getName().endsWith(".jar")) [ FD ]
Line_37 $$ for (int i = 0; i < threadCount; i++) -->Line_38 $$ futures.add(executor.submit(new Runnable() [ CD ]
Line_38 $$ futures.add(executor.submit(new Runnable() -->Line_53 $$ Enumeration<URL> resources = loader.getResources(name)[ FD ]
Line_40 $$ for (String name : namesToLoad) -->Line_42 $$ assertNotNull(findResource(name))[ FD ]
Line_40 $$ for (String name : namesToLoad) -->Line_53 $$ Enumeration<URL> resources = loader.getResources(name)[ FD ]
