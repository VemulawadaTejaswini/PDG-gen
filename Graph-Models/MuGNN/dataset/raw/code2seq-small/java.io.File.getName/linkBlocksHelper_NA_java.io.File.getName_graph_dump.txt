Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_40 $$ File blockLocation = DatanodeUtil.idToBlockDir(blockRoot, blockId)[ FD ]
Line_27 $$ String[] blockNames = from.list(new java.io.FilenameFilter() -->Line_29 $$ return name.startsWith(BLOCK_FILE_PREFIX)[ FD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_6 $$ if (!from.isDirectory()) [ FD ]
Line_36 $$ if (blockNames.length > 0) -->Line_37 $$ if (upgradeToIdBasedLayout) [ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_6 $$ if (!from.isDirectory()) [ CD ]
Line_7 $$ if (from.getName().startsWith(COPY_FILE_PREFIX)) -->Line_21 $$ HardLink.createHardLink(from, to)[ CD ]
Line_37 $$ if (upgradeToIdBasedLayout) -->Line_51 $$ hl.linkStats.countMultLinks++[ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_7 $$ if (from.getName().startsWith(COPY_FILE_PREFIX)) [ FD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_33 $$ if (!to.mkdirs())[ FD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_62 $$ for (int i = 0; i < otherNames.length; i++) linkBlocksHelper(new File(from, otherNames[i]), new File(to, otherNames[i]), oldLV, hl, upgradeToIdBasedLayout, blockRoot, idBasedLayoutSingleLinks)[ CD ]
Line_32 $$ if (!upgradeToIdBasedLayout || !to.getName().startsWith(BLOCK_SUBDIR_PREFIX)) -->Line_33 $$ if (!to.mkdirs())[ CD ]
Line_57 $$ String[] otherNames = from.list(new java.io.FilenameFilter() -->Line_59 $$ return name.startsWith(BLOCK_SUBDIR_PREFIX) || name.startsWith(COPY_FILE_PREFIX)[ FD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_3 $$ if (!from.exists()) [ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_46 $$ idBasedLayoutSingleLinks.add(new LinkArgs(new File(from, blockName), new File(blockLocation, blockName)))[ FD ]
Line_10 $$ FileOutputStream out = new FileOutputStream(to)-->Line_15 $$ out.close()[ FD ]
Line_41 $$ if (!blockLocation.exists()) -->Line_42 $$ if (!blockLocation.mkdirs()) [ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_27 $$ String[] blockNames = from.list(new java.io.FilenameFilter() [ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_27 $$ String[] blockNames = from.list(new java.io.FilenameFilter() [ FD ]
Line_37 $$ if (upgradeToIdBasedLayout) -->Line_52 $$ hl.linkStats.countFilesMultLinks += blockNames.length[ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_21 $$ HardLink.createHardLink(from, to)[ FD ]
Line_27 $$ String[] blockNames = from.list(new java.io.FilenameFilter() -->Line_59 $$ return name.startsWith(BLOCK_SUBDIR_PREFIX) || name.startsWith(COPY_FILE_PREFIX)[ FD ]
Line_6 $$ if (!from.isDirectory()) -->Line_24 $$ return[ CD ]
Line_7 $$ if (from.getName().startsWith(COPY_FILE_PREFIX)) -->Line_22 $$ hl.linkStats.countSingleLinks++[ CD ]
Line_6 $$ if (!from.isDirectory()) -->Line_7 $$ if (from.getName().startsWith(COPY_FILE_PREFIX)) [ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_32 $$ if (!upgradeToIdBasedLayout || !to.getName().startsWith(BLOCK_SUBDIR_PREFIX)) [ FD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_62 $$ linkBlocksHelper(new File(from, otherNames[i]), new File(to, otherNames[i]), oldLV, hl, upgradeToIdBasedLayout, blockRoot, idBasedLayoutSingleLinks)[ FD ]
Line_27 $$ String[] blockNames = from.list(new java.io.FilenameFilter() -->Line_29 $$ return name.startsWith(BLOCK_FILE_PREFIX)[ CD ]
Line_8 $$ FileInputStream in = new FileInputStream(from)-->Line_12 $$ IOUtils.copyBytes(in, out, 16 * 1024)[ FD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_57 $$ String[] otherNames = from.list(new java.io.FilenameFilter() [ FD ]
Line_8 $$ FileInputStream in = new FileInputStream(from)-->Line_18 $$ in.close()[ FD ]
Line_27 $$ String[] blockNames = from.list(new java.io.FilenameFilter() -->Line_50 $$ HardLink.createHardLinkMult(from, blockNames, to)[ FD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_32 $$ if (!upgradeToIdBasedLayout || !to.getName().startsWith(BLOCK_SUBDIR_PREFIX)) [ CD ]
Line_10 $$ FileOutputStream out = new FileOutputStream(to)-->Line_12 $$ IOUtils.copyBytes(in, out, 16 * 1024)[ FD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_36 $$ if (blockNames.length > 0) [ CD ]
Line_3 $$ if (!from.exists()) -->Line_4 $$ return[ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_26 $$ hl.linkStats.countDirs++[ CD ]
Line_7 $$ if (from.getName().startsWith(COPY_FILE_PREFIX)) -->Line_8 $$ FileInputStream in = new FileInputStream(from)[ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_3 $$ if (!from.exists()) [ FD ]
Line_36 $$ if (blockNames.length > 0) -->Line_55 $$ hl.linkStats.countEmptyDirs++[ CD ]
Line_37 $$ if (upgradeToIdBasedLayout) -->Line_50 $$ HardLink.createHardLinkMult(from, blockNames, to)[ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_57 $$ String[] otherNames = from.list(new java.io.FilenameFilter() [ CD ]
Line_57 $$ String[] otherNames = from.list(new java.io.FilenameFilter() -->Line_59 $$ return name.startsWith(BLOCK_SUBDIR_PREFIX) || name.startsWith(COPY_FILE_PREFIX)[ CD ]
Line_2 $$ static void linkBlocksHelper(File from, File to, int oldLV, HardLink hl, boolean upgradeToIdBasedLayout, File blockRoot, List<LinkArgs> idBasedLayoutSingleLinks) throws IOException -->Line_50 $$ HardLink.createHardLinkMult(from, blockNames, to)[ FD ]
