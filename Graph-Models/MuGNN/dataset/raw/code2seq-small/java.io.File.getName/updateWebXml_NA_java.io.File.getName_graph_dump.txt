Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_30 $$ boolean securityManagerEnabled = false[ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_51 $$ newContent = WebXMLBuilder.organizeWebXML(newContent)[ CD ]
Line_35 $$ if (hasCustomServletListener || securityManagerEnabled) -->Line_36 $$ sb.append(SecurePluginContextListener.class.getName())[ CD ]
Line_3 $$ String content = FileUtil.read(webXml)-->Line_46 $$ pos = content.indexOf("</web-app>")[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_35 $$ if (hasCustomServletListener || securityManagerEnabled) [ CD ]
Line_31 $$ Properties properties = getPluginPackageProperties(srcFile)-->Line_32 $$ if (properties != null) [ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_13 $$ double webXmlVersion = GetterUtil.getDouble(rootElement.attributeValue("version"), 2.3)[ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_43 $$ String extraContent = getExtraContent(webXmlVersion, srcFile, displayName)[ CD ]
Line_49 $$ newContent = updateLiferayWebXml(webXmlVersion, srcFile, newContent)-->Line_50 $$ newContent = secureWebXml(newContent, hasCustomServletListener, securityManagerEnabled)[ FD ]
Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)-->Line_11 $$ Document document = UnsecureSAXReaderUtil.read(content)[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_50 $$ newContent = secureWebXml(newContent, hasCustomServletListener, securityManagerEnabled)[ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)[ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_40 $$ sb.append("</listener-class>")[ CD ]
Line_8 $$ y = content.indexOf(">", y) + 1-->Line_9 $$ content = content.substring(0, x) + content.substring(y)[ FD ]
Line_13 $$ double webXmlVersion = GetterUtil.getDouble(rootElement.attributeValue("version"), 2.3)-->Line_43 $$ String extraContent = getExtraContent(webXmlVersion, srcFile, displayName)[ FD ]
Line_30 $$ boolean securityManagerEnabled = false-->Line_50 $$ newContent = secureWebXml(newContent, hasCustomServletListener, securityManagerEnabled)[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_6 $$ if (x != -1) [ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_42 $$ String pluginContextListenerContent = sb.toString()[ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_49 $$ newContent = updateLiferayWebXml(webXmlVersion, srcFile, newContent)[ FD ]
Line_20 $$ boolean hasCustomServletListener = false-->Line_35 $$ if (hasCustomServletListener || securityManagerEnabled) [ FD ]
Line_17 $$ StringBundler sb = new StringBundler(5)-->Line_40 $$ sb.append("</listener-class>")[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_19 $$ sb.append("<listener-class>")[ CD ]
Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)-->Line_51 $$ newContent = WebXMLBuilder.organizeWebXML(newContent)[ FD ]
Line_17 $$ StringBundler sb = new StringBundler(5)-->Line_19 $$ sb.append("<listener-class>")[ FD ]
Line_6 $$ if (x != -1) -->Line_7 $$ int y = content.indexOf("</display-name>", x)[ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_45 $$ if (pos == -1) [ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_3 $$ String content = FileUtil.read(webXml)[ CD ]
Line_22 $$ for (Element listenerElement : listenerElements) -->Line_23 $$ String listenerClass = GetterUtil.getString(listenerElement.elementText("listener-class"))[ FD ]
Line_13 $$ double webXmlVersion = GetterUtil.getDouble(rootElement.attributeValue("version"), 2.3)-->Line_14 $$ if (webXmlVersion <= 2.3) [ FD ]
Line_9 $$ content = content.substring(0, x) + content.substring(y)-->Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)[ FD ]
Line_3 $$ String content = FileUtil.read(webXml)-->Line_7 $$ int y = content.indexOf("</display-name>", x)[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_21 $$ List<Element> listenerElements = rootElement.elements("listener")[ CD ]
Line_44 $$ int pos = content.indexOf("<listener>")-->Line_45 $$ if (pos == -1) [ FD ]
Line_50 $$ newContent = secureWebXml(newContent, hasCustomServletListener, securityManagerEnabled)-->Line_52 $$ FileUtil.write(webXml, newContent, true)[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_3 $$ String content = FileUtil.read(webXml)[ FD ]
Line_6 $$ if (x != -1) -->Line_9 $$ content = content.substring(0, x) + content.substring(y)[ CD ]
Line_32 $$ if (properties != null) -->Line_33 $$ securityManagerEnabled = GetterUtil.getBoolean(properties.getProperty("security-manager-enabled"))[ CD ]
Line_17 $$ StringBundler sb = new StringBundler(5)-->Line_42 $$ String pluginContextListenerContent = sb.toString()[ FD ]
Line_3 $$ String content = FileUtil.read(webXml)-->Line_8 $$ y = content.indexOf(">", y) + 1[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_31 $$ Properties properties = getPluginPackageProperties(srcFile)[ CD ]
Line_17 $$ StringBundler sb = new StringBundler(5)-->Line_41 $$ sb.append("</listener>")[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)[ CD ]
Line_5 $$ int x = content.indexOf("<display-name>")-->Line_6 $$ if (x != -1) [ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_52 $$ FileUtil.write(webXml, newContent, true)[ CD ]
Line_13 $$ double webXmlVersion = GetterUtil.getDouble(rootElement.attributeValue("version"), 2.3)-->Line_49 $$ newContent = updateLiferayWebXml(webXmlVersion, srcFile, newContent)[ FD ]
Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)-->Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)[ FD ]
Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)-->Line_7 $$ int y = content.indexOf("</display-name>", x)[ FD ]
Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)-->Line_50 $$ newContent = secureWebXml(newContent, hasCustomServletListener, securityManagerEnabled)[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_49 $$ newContent = updateLiferayWebXml(webXmlVersion, srcFile, newContent)[ CD ]
Line_45 $$ if (pos == -1) -->Line_46 $$ pos = content.indexOf("</web-app>")[ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_11 $$ Document document = UnsecureSAXReaderUtil.read(content)[ CD ]
Line_31 $$ Properties properties = getPluginPackageProperties(srcFile)-->Line_33 $$ securityManagerEnabled = GetterUtil.getBoolean(properties.getProperty("security-manager-enabled"))[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_41 $$ sb.append("</listener>")[ CD ]
Line_17 $$ StringBundler sb = new StringBundler(5)-->Line_18 $$ sb.append("<listener>")[ FD ]
Line_49 $$ newContent = updateLiferayWebXml(webXmlVersion, srcFile, newContent)-->Line_51 $$ newContent = WebXMLBuilder.organizeWebXML(newContent)[ FD ]
Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)-->Line_8 $$ y = content.indexOf(">", y) + 1[ FD ]
Line_50 $$ newContent = secureWebXml(newContent, hasCustomServletListener, securityManagerEnabled)-->Line_51 $$ newContent = WebXMLBuilder.organizeWebXML(newContent)[ FD ]
Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)-->Line_49 $$ newContent = updateLiferayWebXml(webXmlVersion, srcFile, newContent)[ FD ]
Line_6 $$ if (x != -1) -->Line_8 $$ y = content.indexOf(">", y) + 1[ CD ]
Line_51 $$ newContent = WebXMLBuilder.organizeWebXML(newContent)-->Line_52 $$ FileUtil.write(webXml, newContent, true)[ FD ]
Line_7 $$ int y = content.indexOf("</display-name>", x)-->Line_9 $$ content = content.substring(0, x) + content.substring(y)[ FD ]
Line_33 $$ securityManagerEnabled = GetterUtil.getBoolean(properties.getProperty("security-manager-enabled"))-->Line_35 $$ if (hasCustomServletListener || securityManagerEnabled) [ FD ]
Line_7 $$ int y = content.indexOf("</display-name>", x)-->Line_8 $$ y = content.indexOf(">", y) + 1[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_44 $$ int pos = content.indexOf("<listener>")[ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_17 $$ StringBundler sb = new StringBundler(5)[ CD ]
Line_49 $$ newContent = updateLiferayWebXml(webXmlVersion, srcFile, newContent)-->Line_52 $$ FileUtil.write(webXml, newContent, true)[ FD ]
Line_44 $$ int pos = content.indexOf("<listener>")-->Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)[ FD ]
Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)-->Line_52 $$ FileUtil.write(webXml, newContent, true)[ FD ]
Line_20 $$ boolean hasCustomServletListener = false-->Line_27 $$ hasCustomServletListener = true[ FD ]
Line_3 $$ String content = FileUtil.read(webXml)-->Line_44 $$ int pos = content.indexOf("<listener>")[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_15 $$ throw new AutoDeployException(webXml.getName() + " must be updated to the Servlet 2.4 specification")[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_52 $$ FileUtil.write(webXml, newContent, true)[ FD ]
Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)-->Line_9 $$ content = content.substring(0, x) + content.substring(y)[ FD ]
Line_23 $$ String listenerClass = GetterUtil.getString(listenerElement.elementText("listener-class"))-->Line_24 $$ if (listenerClass.equals(PluginContextListener.class.getName()) || listenerClass.equals(SerializableSessionAttributeListener.class.getName()) || listenerClass.equals(SecurePluginContextListener.class.getName())) [ FD ]
Line_17 $$ StringBundler sb = new StringBundler(5)-->Line_36 $$ sb.append(SecurePluginContextListener.class.getName())[ FD ]
Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)-->Line_44 $$ int pos = content.indexOf("<listener>")[ FD ]
Line_27 $$ hasCustomServletListener = true-->Line_50 $$ newContent = secureWebXml(newContent, hasCustomServletListener, securityManagerEnabled)[ FD ]
Line_3 $$ String content = FileUtil.read(webXml)-->Line_5 $$ int x = content.indexOf("<display-name>")[ FD ]
Line_11 $$ Document document = UnsecureSAXReaderUtil.read(content)-->Line_12 $$ Element rootElement = document.getRootElement()[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_18 $$ sb.append("<listener>")[ CD ]
Line_35 $$ if (hasCustomServletListener || securityManagerEnabled) -->Line_38 $$ sb.append(PluginContextListener.class.getName())[ CD ]
Line_9 $$ content = content.substring(0, x) + content.substring(y)-->Line_11 $$ Document document = UnsecureSAXReaderUtil.read(content)[ FD ]
Line_30 $$ boolean securityManagerEnabled = false-->Line_33 $$ securityManagerEnabled = GetterUtil.getBoolean(properties.getProperty("security-manager-enabled"))[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_43 $$ String extraContent = getExtraContent(webXmlVersion, srcFile, displayName)[ FD ]
Line_5 $$ int x = content.indexOf("<display-name>")-->Line_7 $$ int y = content.indexOf("</display-name>", x)[ FD ]
Line_12 $$ Element rootElement = document.getRootElement()-->Line_13 $$ double webXmlVersion = GetterUtil.getDouble(rootElement.attributeValue("version"), 2.3)[ FD ]
Line_3 $$ String content = FileUtil.read(webXml)-->Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)[ FD ]
Line_46 $$ pos = content.indexOf("</web-app>")-->Line_48 $$ String newContent = content.substring(0, pos) + pluginContextListenerContent + extraContent + content.substring(pos)[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_20 $$ boolean hasCustomServletListener = false[ CD ]
Line_30 $$ boolean securityManagerEnabled = false-->Line_35 $$ if (hasCustomServletListener || securityManagerEnabled) [ FD ]
Line_27 $$ hasCustomServletListener = true-->Line_35 $$ if (hasCustomServletListener || securityManagerEnabled) [ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_31 $$ Properties properties = getPluginPackageProperties(srcFile)[ FD ]
Line_9 $$ content = content.substring(0, x) + content.substring(y)-->Line_46 $$ pos = content.indexOf("</web-app>")[ FD ]
Line_53 $$ if (_log.isInfoEnabled()) -->Line_54 $$ _log.info("Modifying Servlet " + webXmlVersion + " " + webXml)[ CD ]
Line_12 $$ Element rootElement = document.getRootElement()-->Line_21 $$ List<Element> listenerElements = rootElement.elements("listener")[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_32 $$ if (properties != null) [ CD ]
Line_3 $$ String content = FileUtil.read(webXml)-->Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)[ FD ]
Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)-->Line_46 $$ pos = content.indexOf("</web-app>")[ FD ]
Line_3 $$ String content = FileUtil.read(webXml)-->Line_11 $$ Document document = UnsecureSAXReaderUtil.read(content)[ FD ]
Line_44 $$ int pos = content.indexOf("<listener>")-->Line_46 $$ pos = content.indexOf("</web-app>")[ FD ]
Line_20 $$ boolean hasCustomServletListener = false-->Line_50 $$ newContent = secureWebXml(newContent, hasCustomServletListener, securityManagerEnabled)[ FD ]
Line_3 $$ String content = FileUtil.read(webXml)-->Line_9 $$ content = content.substring(0, x) + content.substring(y)[ FD ]
Line_17 $$ StringBundler sb = new StringBundler(5)-->Line_38 $$ sb.append(PluginContextListener.class.getName())[ FD ]
Line_9 $$ content = content.substring(0, x) + content.substring(y)-->Line_44 $$ int pos = content.indexOf("<listener>")[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_14 $$ if (webXmlVersion <= 2.3) [ CD ]
Line_5 $$ int x = content.indexOf("<display-name>")-->Line_9 $$ content = content.substring(0, x) + content.substring(y)[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_12 $$ Element rootElement = document.getRootElement()[ CD ]
Line_4 $$ content = WebXMLBuilder.organizeWebXML(content)-->Line_5 $$ int x = content.indexOf("<display-name>")[ FD ]
Line_33 $$ securityManagerEnabled = GetterUtil.getBoolean(properties.getProperty("security-manager-enabled"))-->Line_50 $$ newContent = secureWebXml(newContent, hasCustomServletListener, securityManagerEnabled)[ FD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_53 $$ if (_log.isInfoEnabled()) [ CD ]
Line_2 $$ public void updateWebXml(File webXml, File srcFile, String displayName, PluginPackage pluginPackage) throws Exception -->Line_5 $$ int x = content.indexOf("<display-name>")[ CD ]
