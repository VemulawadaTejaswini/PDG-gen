Line_8 $$ UpdateResponse updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()-->Line_9 $$ assertTrue(updateResponse.isCreated())[ FD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_3 $$ createTestIndex()[ CD ]
Line_11 $$ for (int i = 0; i < 5; i++) -->Line_18 $$ for (int i = 0; i < 5; i++) [ FD ]
Line_8 $$ UpdateResponse updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()-->Line_15 $$ updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()[ FD ]
Line_18 $$ for (int i = 0; i < 5; i++) -->Line_19 $$ GetResponse getResponse = client().prepareGet("test", "type1", "1").execute().actionGet()[ CD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_16 $$ assertFalse(updateResponse.isCreated())[ CD ]
Line_8 $$ UpdateResponse updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()-->Line_10 $$ assertThat(updateResponse.getIndex(), equalTo("test"))[ FD ]
Line_15 $$ updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()-->Line_17 $$ assertThat(updateResponse.getIndex(), equalTo("test"))[ FD ]
Line_12 $$ GetResponse getResponse = client().prepareGet("test", "type1", "1").execute().actionGet()-->Line_13 $$ assertThat(getResponse.getSourceAsMap().get("balance").toString(), equalTo("9"))[ FD ]
Line_8 $$ UpdateResponse updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()-->Line_17 $$ assertThat(updateResponse.getIndex(), equalTo("test"))[ FD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_7 $$ params.put("payment", 2)[ CD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_5 $$ int openingBalance = 10[ CD ]
Line_19 $$ GetResponse getResponse = client().prepareGet("test", "type1", "1").execute().actionGet()-->Line_20 $$ assertThat(getResponse.getSourceAsMap().get("balance").toString(), equalTo("7"))[ FD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_15 $$ updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()[ CD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_10 $$ assertThat(updateResponse.getIndex(), equalTo("test"))[ CD ]
Line_8 $$ UpdateResponse updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()-->Line_16 $$ assertFalse(updateResponse.isCreated())[ FD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_6 $$ Map<String, Object> params = new HashMap()[ CD ]
Line_5 $$ int openingBalance = 10-->Line_8 $$ UpdateResponse updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()[ FD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_17 $$ assertThat(updateResponse.getIndex(), equalTo("test"))[ CD ]
Line_6 $$ Map<String, Object> params = new HashMap()-->Line_7 $$ params.put("payment", 2)[ FD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_8 $$ UpdateResponse updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()[ CD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_9 $$ assertTrue(updateResponse.isCreated())[ CD ]
Line_5 $$ int openingBalance = 10-->Line_15 $$ updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()[ FD ]
Line_12 $$ GetResponse getResponse = client().prepareGet("test", "type1", "1").execute().actionGet()-->Line_20 $$ assertThat(getResponse.getSourceAsMap().get("balance").toString(), equalTo("7"))[ FD ]
Line_11 $$ for (int i = 0; i < 5; i++) -->Line_12 $$ GetResponse getResponse = client().prepareGet("test", "type1", "1").execute().actionGet()[ CD ]
Line_15 $$ updateResponse = client().prepareUpdate(indexOrAlias(), "type1", "1").setUpsert(XContentFactory.jsonBuilder().startObject().field("balance", openingBalance).endObject()).setScriptedUpsert(true).setScript(new Script("", ScriptService.ScriptType.INLINE, "scripted_upsert", params)).execute().actionGet()-->Line_16 $$ assertFalse(updateResponse.isCreated())[ FD ]
Line_18 $$ for (int i = 0; i < 5; i++) -->Line_20 $$ assertThat(getResponse.getSourceAsMap().get("balance").toString(), equalTo("7"))[ CD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_4 $$ ensureGreen()[ CD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_11 $$ for (int i = 0; i < 5; i++) [ CD ]
Line_11 $$ for (int i = 0; i < 5; i++) -->Line_13 $$ assertThat(getResponse.getSourceAsMap().get("balance").toString(), equalTo("9"))[ CD ]
Line_2 $$ public void testScriptedUpsert() throws Exception -->Line_18 $$ for (int i = 0; i < 5; i++) [ CD ]
