Line_6 $$ ServiceContext serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())-->Line_7 $$ Folder folder = DLAppServiceUtil.addFolder(_group.getGroupId(), DLFolderConstants.DEFAULT_PARENT_FOLDER_ID, RandomTestUtil.randomString(), RandomTestUtil.randomString(), serviceContext)[ FD ]
Line_6 $$ ServiceContext serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())-->Line_12 $$ FileEntry fileEntry = DLAppLocalServiceUtil.addFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), folder.getFolderId(), RandomTestUtil.randomString(), ContentTypes.TEXT_PLAIN, RandomTestUtil.randomBytes(TikaSafeRandomizerBumper.INSTANCE), serviceContext)[ FD ]
Line_6 $$ ServiceContext serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())-->Line_8 $$ long fileEntryTypeId = populateServiceContextFileEntryType(serviceContext)[ FD ]
Line_2 $$ public void testCopyFileEntry() throws Exception -->Line_4 $$ ExpandoColumnLocalServiceUtil.addColumn(expandoTable.getTableId(), "ExpandoAttributeName", ExpandoColumnConstants.STRING, StringPool.BLANK)[ CD ]
Line_2 $$ public void testCopyFileEntry() throws Exception -->Line_3 $$ ExpandoTable expandoTable = ExpandoTableLocalServiceUtil.addDefaultTable(PortalUtil.getDefaultCompanyId(), DLFileEntry.class.getName())[ CD ]
Line_15 $$ DLFileEntry copyFileEntry = DLFileEntryLocalServiceUtil.copyFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), _group.getGroupId(), fileEntry.getFileEntryId(), destinationFolder.getFolderId(), serviceContext)-->Line_16 $$ ExpandoBridge expandoBridge = copyFileEntry.getExpandoBridge()[ FD ]
Line_21 $$ List<DDMStructure> copyDDMStructures = copyDLFileVersion.getDDMStructures()-->Line_22 $$ DDMStructure copyDDMStructure = copyDDMStructures.get(0)[ FD ]
Line_15 $$ DLFileEntry copyFileEntry = DLFileEntryLocalServiceUtil.copyFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), _group.getGroupId(), fileEntry.getFileEntryId(), destinationFolder.getFolderId(), serviceContext)-->Line_19 $$ Assert.assertEquals(fileEntryTypeId, copyFileEntry.getFileEntryTypeId())[ FD ]
Line_20 $$ DLFileVersion copyDLFileVersion = copyFileEntry.getFileVersion()-->Line_23 $$ DLFileEntryMetadata dlFileEntryMetadata = DLFileEntryMetadataLocalServiceUtil.getFileEntryMetadata(copyDDMStructure.getStructureId(), copyDLFileVersion.getFileVersionId())[ FD ]
Line_26 $$ DDMFormFieldValue ddmFormFieldValue = ddmFormFieldValues.get(0)-->Line_27 $$ Value value = ddmFormFieldValue.getValue()[ FD ]
Line_23 $$ DLFileEntryMetadata dlFileEntryMetadata = DLFileEntryMetadataLocalServiceUtil.getFileEntryMetadata(copyDDMStructure.getStructureId(), copyDLFileVersion.getFileVersionId())-->Line_24 $$ DDMFormValues copyDDMFormValues = StorageEngineManagerUtil.getDDMFormValues(dlFileEntryMetadata.getDDMStorageId())[ FD ]
Line_7 $$ Folder folder = DLAppServiceUtil.addFolder(_group.getGroupId(), DLFolderConstants.DEFAULT_PARENT_FOLDER_ID, RandomTestUtil.randomString(), RandomTestUtil.randomString(), serviceContext)-->Line_12 $$ FileEntry fileEntry = DLAppLocalServiceUtil.addFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), folder.getFolderId(), RandomTestUtil.randomString(), ContentTypes.TEXT_PLAIN, RandomTestUtil.randomBytes(TikaSafeRandomizerBumper.INSTANCE), serviceContext)[ FD ]
Line_6 $$ ServiceContext serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())-->Line_11 $$ serviceContext.setExpandoBridgeAttributes(expandoBridgeAttributes)[ FD ]
Line_16 $$ ExpandoBridge expandoBridge = copyFileEntry.getExpandoBridge()-->Line_17 $$ String attributeValue = GetterUtil.getString(expandoBridge.getAttribute("ExpandoAttributeName"))[ FD ]
Line_12 $$ FileEntry fileEntry = DLAppLocalServiceUtil.addFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), folder.getFolderId(), RandomTestUtil.randomString(), ContentTypes.TEXT_PLAIN, RandomTestUtil.randomBytes(TikaSafeRandomizerBumper.INSTANCE), serviceContext)-->Line_15 $$ DLFileEntry copyFileEntry = DLFileEntryLocalServiceUtil.copyFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), _group.getGroupId(), fileEntry.getFileEntryId(), destinationFolder.getFolderId(), serviceContext)[ FD ]
Line_6 $$ ServiceContext serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())-->Line_13 $$ serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())[ FD ]
Line_26 $$ DDMFormFieldValue ddmFormFieldValue = ddmFormFieldValues.get(0)-->Line_28 $$ Assert.assertEquals("Text1", ddmFormFieldValue.getName())[ FD ]
Line_22 $$ DDMStructure copyDDMStructure = copyDDMStructures.get(0)-->Line_23 $$ DLFileEntryMetadata dlFileEntryMetadata = DLFileEntryMetadataLocalServiceUtil.getFileEntryMetadata(copyDDMStructure.getStructureId(), copyDLFileVersion.getFileVersionId())[ FD ]
Line_20 $$ DLFileVersion copyDLFileVersion = copyFileEntry.getFileVersion()-->Line_21 $$ List<DDMStructure> copyDDMStructures = copyDLFileVersion.getDDMStructures()[ FD ]
Line_3 $$ ExpandoTable expandoTable = ExpandoTableLocalServiceUtil.addDefaultTable(PortalUtil.getDefaultCompanyId(), DLFileEntry.class.getName())-->Line_4 $$ ExpandoColumnLocalServiceUtil.addColumn(expandoTable.getTableId(), "ExpandoAttributeName", ExpandoColumnConstants.STRING, StringPool.BLANK)[ FD ]
Line_14 $$ Folder destinationFolder = DLAppServiceUtil.addFolder(_group.getGroupId(), DLFolderConstants.DEFAULT_PARENT_FOLDER_ID, RandomTestUtil.randomString(), RandomTestUtil.randomString(), serviceContext)-->Line_15 $$ DLFileEntry copyFileEntry = DLFileEntryLocalServiceUtil.copyFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), _group.getGroupId(), fileEntry.getFileEntryId(), destinationFolder.getFolderId(), serviceContext)[ FD ]
Line_13 $$ serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())-->Line_15 $$ DLFileEntry copyFileEntry = DLFileEntryLocalServiceUtil.copyFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), _group.getGroupId(), fileEntry.getFileEntryId(), destinationFolder.getFolderId(), serviceContext)[ FD ]
Line_25 $$ List<DDMFormFieldValue> ddmFormFieldValues = copyDDMFormValues.getDDMFormFieldValues()-->Line_26 $$ DDMFormFieldValue ddmFormFieldValue = ddmFormFieldValues.get(0)[ FD ]
Line_6 $$ ServiceContext serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())-->Line_15 $$ DLFileEntry copyFileEntry = DLFileEntryLocalServiceUtil.copyFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), _group.getGroupId(), fileEntry.getFileEntryId(), destinationFolder.getFolderId(), serviceContext)[ FD ]
Line_13 $$ serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())-->Line_14 $$ Folder destinationFolder = DLAppServiceUtil.addFolder(_group.getGroupId(), DLFolderConstants.DEFAULT_PARENT_FOLDER_ID, RandomTestUtil.randomString(), RandomTestUtil.randomString(), serviceContext)[ FD ]
Line_17 $$ String attributeValue = GetterUtil.getString(expandoBridge.getAttribute("ExpandoAttributeName"))-->Line_18 $$ Assert.assertEquals("ExpandoAttributeValue", attributeValue)[ FD ]
Line_24 $$ DDMFormValues copyDDMFormValues = StorageEngineManagerUtil.getDDMFormValues(dlFileEntryMetadata.getDDMStorageId())-->Line_25 $$ List<DDMFormFieldValue> ddmFormFieldValues = copyDDMFormValues.getDDMFormFieldValues()[ FD ]
Line_9 $$ Map<String, Serializable> expandoBridgeAttributes = new HashMap()-->Line_10 $$ expandoBridgeAttributes.put("ExpandoAttributeName", "ExpandoAttributeValue")[ FD ]
Line_27 $$ Value value = ddmFormFieldValue.getValue()-->Line_29 $$ Assert.assertEquals("Text 1 Value", value.getString(LocaleUtil.US))[ FD ]
Line_6 $$ ServiceContext serviceContext = ServiceContextTestUtil.getServiceContext(_group.getGroupId(), TestPropsValues.getUserId())-->Line_14 $$ Folder destinationFolder = DLAppServiceUtil.addFolder(_group.getGroupId(), DLFolderConstants.DEFAULT_PARENT_FOLDER_ID, RandomTestUtil.randomString(), RandomTestUtil.randomString(), serviceContext)[ FD ]
Line_3 $$ ExpandoTable expandoTable = ExpandoTableLocalServiceUtil.addDefaultTable(PortalUtil.getDefaultCompanyId(), DLFileEntry.class.getName())-->Line_31 $$ ExpandoTableLocalServiceUtil.deleteTable(expandoTable)[ FD ]
Line_8 $$ long fileEntryTypeId = populateServiceContextFileEntryType(serviceContext)-->Line_19 $$ Assert.assertEquals(fileEntryTypeId, copyFileEntry.getFileEntryTypeId())[ FD ]
Line_15 $$ DLFileEntry copyFileEntry = DLFileEntryLocalServiceUtil.copyFileEntry(TestPropsValues.getUserId(), _group.getGroupId(), _group.getGroupId(), fileEntry.getFileEntryId(), destinationFolder.getFolderId(), serviceContext)-->Line_20 $$ DLFileVersion copyDLFileVersion = copyFileEntry.getFileVersion()[ FD ]
Line_9 $$ Map<String, Serializable> expandoBridgeAttributes = new HashMap()-->Line_11 $$ serviceContext.setExpandoBridgeAttributes(expandoBridgeAttributes)[ FD ]
