Line_10 $$ if (firstAggregation.reduceScript != null) -->Line_17 $$ ExecutableScript script = reduceContext.scriptService().executable(compiledScript, vars)[ CD ]
Line_10 $$ if (firstAggregation.reduceScript != null) -->Line_11 $$ Map<String, Object> vars = new HashMap()[ CD ]
Line_2 $$ public InternalAggregation doReduce(List<InternalAggregation> aggregations, ReduceContext reduceContext) -->Line_8 $$ InternalScriptedMetric firstAggregation = ((InternalScriptedMetric) aggregations.get(0))[ CD ]
Line_2 $$ public InternalAggregation doReduce(List<InternalAggregation> aggregations, ReduceContext reduceContext) -->Line_3 $$ List<Object> aggregationObjects = new ArrayList()[ CD ]
Line_3 $$ List<Object> aggregationObjects = new ArrayList()-->Line_20 $$ aggregation = aggregationObjects[ FD ]
Line_4 $$ for (InternalAggregation aggregation : aggregations) -->Line_20 $$ aggregation = aggregationObjects[ FD ]
Line_4 $$ for (InternalAggregation aggregation : aggregations) -->Line_18 $$ aggregation = script.run()[ FD ]
Line_10 $$ if (firstAggregation.reduceScript != null) -->Line_16 $$ CompiledScript compiledScript = reduceContext.scriptService().compile(firstAggregation.reduceScript, ScriptContext.Standard.AGGS, reduceContext, Collections.emptyMap())[ CD ]
Line_5 $$ InternalScriptedMetric mapReduceAggregation = (InternalScriptedMetric) aggregation-->Line_6 $$ aggregationObjects.add(mapReduceAggregation.aggregation())[ FD ]
Line_3 $$ List<Object> aggregationObjects = new ArrayList()-->Line_6 $$ aggregationObjects.add(mapReduceAggregation.aggregation())[ FD ]
Line_11 $$ Map<String, Object> vars = new HashMap()-->Line_17 $$ ExecutableScript script = reduceContext.scriptService().executable(compiledScript, vars)[ FD ]
Line_18 $$ aggregation = script.run()-->Line_20 $$ aggregation = aggregationObjects[ FD ]
Line_10 $$ if (firstAggregation.reduceScript != null) -->Line_20 $$ aggregation = aggregationObjects[ CD ]
Line_2 $$ public InternalAggregation doReduce(List<InternalAggregation> aggregations, ReduceContext reduceContext) -->Line_8 $$ InternalScriptedMetric firstAggregation = ((InternalScriptedMetric) aggregations.get(0))[ FD ]
Line_2 $$ public InternalAggregation doReduce(List<InternalAggregation> aggregations, ReduceContext reduceContext) -->Line_17 $$ ExecutableScript script = reduceContext.scriptService().executable(compiledScript, vars)[ FD ]
Line_3 $$ List<Object> aggregationObjects = new ArrayList()-->Line_12 $$ vars.put("_aggs", aggregationObjects)[ FD ]
Line_10 $$ if (firstAggregation.reduceScript != null) -->Line_13 $$ if (firstAggregation.reduceScript.getParams() != null) [ CD ]
Line_2 $$ public InternalAggregation doReduce(List<InternalAggregation> aggregations, ReduceContext reduceContext) -->Line_16 $$ CompiledScript compiledScript = reduceContext.scriptService().compile(firstAggregation.reduceScript, ScriptContext.Standard.AGGS, reduceContext, Collections.emptyMap())[ FD ]
Line_10 $$ if (firstAggregation.reduceScript != null) -->Line_12 $$ vars.put("_aggs", aggregationObjects)[ CD ]
Line_2 $$ public InternalAggregation doReduce(List<InternalAggregation> aggregations, ReduceContext reduceContext) -->Line_10 $$ if (firstAggregation.reduceScript != null) [ CD ]
Line_11 $$ Map<String, Object> vars = new HashMap()-->Line_14 $$ vars.putAll(firstAggregation.reduceScript.getParams())[ FD ]
Line_17 $$ ExecutableScript script = reduceContext.scriptService().executable(compiledScript, vars)-->Line_18 $$ aggregation = script.run()[ FD ]
Line_2 $$ public InternalAggregation doReduce(List<InternalAggregation> aggregations, ReduceContext reduceContext) -->Line_22 $$ return new InternalScriptedMetric(firstAggregation.getName(), aggregation, firstAggregation.reduceScript, pipelineAggregators(), getMetaData())[ CD ]
Line_13 $$ if (firstAggregation.reduceScript.getParams() != null) -->Line_14 $$ vars.putAll(firstAggregation.reduceScript.getParams())[ CD ]
Line_16 $$ CompiledScript compiledScript = reduceContext.scriptService().compile(firstAggregation.reduceScript, ScriptContext.Standard.AGGS, reduceContext, Collections.emptyMap())-->Line_17 $$ ExecutableScript script = reduceContext.scriptService().executable(compiledScript, vars)[ FD ]
Line_11 $$ Map<String, Object> vars = new HashMap()-->Line_12 $$ vars.put("_aggs", aggregationObjects)[ FD ]
Line_8 $$ InternalScriptedMetric firstAggregation = ((InternalScriptedMetric) aggregations.get(0))-->Line_22 $$ return new InternalScriptedMetric(firstAggregation.getName(), aggregation, firstAggregation.reduceScript, pipelineAggregators(), getMetaData())[ FD ]
Line_10 $$ if (firstAggregation.reduceScript != null) -->Line_18 $$ aggregation = script.run()[ CD ]
