Line_2 $$ public void testInlineScriptWithParams() -->Line_6 $$ assertSearchResponse(response)[ CD ]
Line_14 $$ SimpleValue seriesArithmetic = bucket.getAggregations().get("seriesArithmetic")-->Line_28 $$ double seriesArithmeticValue = seriesArithmetic.value()[ FD ]
Line_5 $$ SearchResponse response = client().prepareSearch("idx").addAggregation(histogram("histo").field(FIELD_1_NAME).interval(interval).subAggregation(sum("field2Sum").field(FIELD_2_NAME)).subAggregation(sum("field3Sum").field(FIELD_3_NAME)).subAggregation(sum("field4Sum").field(FIELD_4_NAME)).subAggregation(bucketScript("seriesArithmetic").setBucketsPaths("field2Sum", "field3Sum", "field4Sum").script(new Script("(_value0 + _value1 + _value2) * factor", ScriptType.INLINE, null, params)))).execute().actionGet()-->Line_7 $$ InternalHistogram<Bucket> histo = response.getAggregations().get("histo")[ FD ]
Line_2 $$ public void testInlineScriptWithParams() -->Line_10 $$ List<? extends Bucket> buckets = histo.getBuckets()[ CD ]
Line_20 $$ Sum field3Sum = bucket.getAggregations().get("field3Sum")-->Line_22 $$ double field3SumValue = field3Sum.getValue()[ FD ]
Line_3 $$ Map<String, Object> params = new HashMap()-->Line_4 $$ params.put("factor", 3)[ FD ]
Line_14 $$ SimpleValue seriesArithmetic = bucket.getAggregations().get("seriesArithmetic")-->Line_15 $$ assertThat(seriesArithmetic, nullValue())[ FD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_29 $$ assertThat(seriesArithmeticValue, equalTo((field2SumValue + field3SumValue + field4SumValue) * 3))[ CD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_15 $$ assertThat(seriesArithmetic, nullValue())[ CD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_18 $$ assertThat(field2Sum, notNullValue())[ CD ]
Line_12 $$ Histogram.Bucket bucket = buckets.get(i)-->Line_17 $$ Sum field2Sum = bucket.getAggregations().get("field2Sum")[ FD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_23 $$ Sum field4Sum = bucket.getAggregations().get("field4Sum")[ CD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_17 $$ Sum field2Sum = bucket.getAggregations().get("field2Sum")[ CD ]
Line_23 $$ Sum field4Sum = bucket.getAggregations().get("field4Sum")-->Line_24 $$ assertThat(field4Sum, notNullValue())[ FD ]
Line_12 $$ Histogram.Bucket bucket = buckets.get(i)-->Line_23 $$ Sum field4Sum = bucket.getAggregations().get("field4Sum")[ FD ]
Line_2 $$ public void testInlineScriptWithParams() -->Line_4 $$ params.put("factor", 3)[ CD ]
Line_7 $$ InternalHistogram<Bucket> histo = response.getAggregations().get("histo")-->Line_10 $$ List<? extends Bucket> buckets = histo.getBuckets()[ FD ]
Line_2 $$ public void testInlineScriptWithParams() -->Line_11 $$ for (int i = 0; i < buckets.size(); ++i) [ CD ]
Line_12 $$ Histogram.Bucket bucket = buckets.get(i)-->Line_20 $$ Sum field3Sum = bucket.getAggregations().get("field3Sum")[ FD ]
Line_28 $$ double seriesArithmeticValue = seriesArithmetic.value()-->Line_29 $$ assertThat(seriesArithmeticValue, equalTo((field2SumValue + field3SumValue + field4SumValue) * 3))[ FD ]
Line_11 $$ for (int i = 0; i < buckets.size(); ++i) -->Line_13 $$ if (bucket.getDocCount() == 0) [ CD ]
Line_17 $$ Sum field2Sum = bucket.getAggregations().get("field2Sum")-->Line_18 $$ assertThat(field2Sum, notNullValue())[ FD ]
Line_20 $$ Sum field3Sum = bucket.getAggregations().get("field3Sum")-->Line_21 $$ assertThat(field3Sum, notNullValue())[ FD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_25 $$ double field4SumValue = field4Sum.getValue()[ CD ]
Line_12 $$ Histogram.Bucket bucket = buckets.get(i)-->Line_14 $$ SimpleValue seriesArithmetic = bucket.getAggregations().get("seriesArithmetic")[ FD ]
Line_10 $$ List<? extends Bucket> buckets = histo.getBuckets()-->Line_11 $$ for (int i = 0; i < buckets.size(); ++i) [ FD ]
Line_2 $$ public void testInlineScriptWithParams() -->Line_8 $$ assertThat(histo, notNullValue())[ CD ]
Line_14 $$ SimpleValue seriesArithmetic = bucket.getAggregations().get("seriesArithmetic")-->Line_27 $$ assertThat(seriesArithmetic, notNullValue())[ FD ]
Line_2 $$ public void testInlineScriptWithParams() -->Line_9 $$ assertThat(histo.getName(), equalTo("histo"))[ CD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_28 $$ double seriesArithmeticValue = seriesArithmetic.value()[ CD ]
Line_2 $$ public void testInlineScriptWithParams() -->Line_3 $$ Map<String, Object> params = new HashMap()[ CD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_22 $$ double field3SumValue = field3Sum.getValue()[ CD ]
Line_23 $$ Sum field4Sum = bucket.getAggregations().get("field4Sum")-->Line_25 $$ double field4SumValue = field4Sum.getValue()[ FD ]
Line_11 $$ for (int i = 0; i < buckets.size(); ++i) -->Line_12 $$ Histogram.Bucket bucket = buckets.get(i)[ CD ]
Line_7 $$ InternalHistogram<Bucket> histo = response.getAggregations().get("histo")-->Line_8 $$ assertThat(histo, notNullValue())[ FD ]
Line_11 $$ for (int i = 0; i < buckets.size(); ++i) -->Line_12 $$ Histogram.Bucket bucket = buckets.get(i)[ FD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_19 $$ double field2SumValue = field2Sum.getValue()[ CD ]
Line_17 $$ Sum field2Sum = bucket.getAggregations().get("field2Sum")-->Line_19 $$ double field2SumValue = field2Sum.getValue()[ FD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_26 $$ SimpleValue seriesArithmetic = bucket.getAggregations().get("seriesArithmetic")[ CD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_14 $$ SimpleValue seriesArithmetic = bucket.getAggregations().get("seriesArithmetic")[ CD ]
Line_12 $$ Histogram.Bucket bucket = buckets.get(i)-->Line_26 $$ SimpleValue seriesArithmetic = bucket.getAggregations().get("seriesArithmetic")[ FD ]
Line_2 $$ public void testInlineScriptWithParams() -->Line_7 $$ InternalHistogram<Bucket> histo = response.getAggregations().get("histo")[ CD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_24 $$ assertThat(field4Sum, notNullValue())[ CD ]
Line_12 $$ Histogram.Bucket bucket = buckets.get(i)-->Line_13 $$ if (bucket.getDocCount() == 0) [ FD ]
Line_2 $$ public void testInlineScriptWithParams() -->Line_5 $$ SearchResponse response = client().prepareSearch("idx").addAggregation(histogram("histo").field(FIELD_1_NAME).interval(interval).subAggregation(sum("field2Sum").field(FIELD_2_NAME)).subAggregation(sum("field3Sum").field(FIELD_3_NAME)).subAggregation(sum("field4Sum").field(FIELD_4_NAME)).subAggregation(bucketScript("seriesArithmetic").setBucketsPaths("field2Sum", "field3Sum", "field4Sum").script(new Script("(_value0 + _value1 + _value2) * factor", ScriptType.INLINE, null, params)))).execute().actionGet()[ CD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_21 $$ assertThat(field3Sum, notNullValue())[ CD ]
Line_10 $$ List<? extends Bucket> buckets = histo.getBuckets()-->Line_12 $$ Histogram.Bucket bucket = buckets.get(i)[ FD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_27 $$ assertThat(seriesArithmetic, notNullValue())[ CD ]
Line_7 $$ InternalHistogram<Bucket> histo = response.getAggregations().get("histo")-->Line_9 $$ assertThat(histo.getName(), equalTo("histo"))[ FD ]
Line_13 $$ if (bucket.getDocCount() == 0) -->Line_20 $$ Sum field3Sum = bucket.getAggregations().get("field3Sum")[ CD ]
Line_5 $$ SearchResponse response = client().prepareSearch("idx").addAggregation(histogram("histo").field(FIELD_1_NAME).interval(interval).subAggregation(sum("field2Sum").field(FIELD_2_NAME)).subAggregation(sum("field3Sum").field(FIELD_3_NAME)).subAggregation(sum("field4Sum").field(FIELD_4_NAME)).subAggregation(bucketScript("seriesArithmetic").setBucketsPaths("field2Sum", "field3Sum", "field4Sum").script(new Script("(_value0 + _value1 + _value2) * factor", ScriptType.INLINE, null, params)))).execute().actionGet()-->Line_6 $$ assertSearchResponse(response)[ FD ]
