Line_18 $$ InetAddress address = InetAddress.getByAddress(ipBytes)-->Line_20 $$ logger.debug("adding node [ FD ]
Line_26 $$ NetworkTopologyStrategy strategy = new NetworkTopologyStrategy(keyspaceName, metadata, snitch, configOptions)-->Line_28 $$ List<InetAddress> endpoints = strategy.calculateNaturalEndpoints(new StringToken(testToken), metadata)[ FD ]
Line_29 $$ Set<InetAddress> epSet = new HashSet<InetAddress>(endpoints)-->Line_31 $$ Assert.assertEquals(totalRF, epSet.size())[ FD ]
Line_16 $$ for (int ep = 1; ep <= dcEndpoints[dc] / dcRacks[dc]; ++ep) -->Line_17 $$ byte[] ipBytes = new byte[] [ CD ]
Line_19 $$ StringToken token = new StringToken(String.format("%02x%02x%02x", ep, rack, dc))-->Line_21 $$ tokens.put(address, token)[ FD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_10 $$ Multimap<InetAddress, Token> tokens = HashMultimap.create()[ CD ]
Line_12 $$ for (int dc = 0; dc < dcRacks.length; ++dc) -->Line_19 $$ StringToken token = new StringToken(String.format("%02x%02x%02x", ep, rack, dc))[ FD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_9 $$ Map<String, String> configOptions = new HashMap<String, String>()[ CD ]
Line_9 $$ Map<String, String> configOptions = new HashMap<String, String>()-->Line_14 $$ configOptions.put(Integer.toString(dc), Integer.toString(dcReplication[dc]))[ FD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_26 $$ NetworkTopologyStrategy strategy = new NetworkTopologyStrategy(keyspaceName, metadata, snitch, configOptions)[ CD ]
Line_11 $$ int totalRF = 0-->Line_31 $$ Assert.assertEquals(totalRF, epSet.size())[ FD ]
Line_13 $$ totalRF += dcReplication[dc]-->Line_31 $$ Assert.assertEquals(totalRF, epSet.size())[ FD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_7 $$ DatabaseDescriptor.setEndpointSnitch(snitch)[ CD ]
Line_28 $$ List<InetAddress> endpoints = strategy.calculateNaturalEndpoints(new StringToken(testToken), metadata)-->Line_32 $$ logger.debug("[ FD ]
Line_8 $$ TokenMetadata metadata = new TokenMetadata()-->Line_25 $$ metadata.updateNormalTokens(tokens)[ FD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_4 $$ int[] dcEndpoints = new int[] [ CD ]
Line_16 $$ for (int ep = 1; ep <= dcEndpoints[dc] / dcRacks[dc]; ++ep) -->Line_21 $$ tokens.put(address, token)[ CD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_3 $$ int[] dcRacks = new int[] [ CD ]
Line_28 $$ List<InetAddress> endpoints = strategy.calculateNaturalEndpoints(new StringToken(testToken), metadata)-->Line_30 $$ Assert.assertEquals(totalRF, endpoints.size())[ FD ]
Line_27 $$ for (String testToken : new String[] -->Line_32 $$ logger.debug("[ FD ]
Line_12 $$ for (int dc = 0; dc < dcRacks.length; ++dc) -->Line_14 $$ configOptions.put(Integer.toString(dc), Integer.toString(dcReplication[dc]))[ FD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_5 $$ int[] dcReplication = new int[] [ CD ]
Line_17 $$ byte[] ipBytes = new byte[] -->Line_18 $$ InetAddress address = InetAddress.getByAddress(ipBytes)[ FD ]
Line_12 $$ for (int dc = 0; dc < dcRacks.length; ++dc) -->Line_14 $$ configOptions.put(Integer.toString(dc), Integer.toString(dcReplication[dc]))[ CD ]
Line_11 $$ int totalRF = 0-->Line_30 $$ Assert.assertEquals(totalRF, endpoints.size())[ FD ]
Line_12 $$ for (int dc = 0; dc < dcRacks.length; ++dc) -->Line_13 $$ totalRF += dcReplication[dc][ CD ]
Line_10 $$ Multimap<InetAddress, Token> tokens = HashMultimap.create()-->Line_25 $$ metadata.updateNormalTokens(tokens)[ FD ]
Line_19 $$ StringToken token = new StringToken(String.format("%02x%02x%02x", ep, rack, dc))-->Line_20 $$ logger.debug("adding node [ FD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_6 $$ IEndpointSnitch snitch = new RackInferringSnitch()[ CD ]
Line_15 $$ for (int rack = 0; rack < dcRacks[dc]; ++rack) -->Line_19 $$ StringToken token = new StringToken(String.format("%02x%02x%02x", ep, rack, dc))[ FD ]
Line_8 $$ TokenMetadata metadata = new TokenMetadata()-->Line_28 $$ List<InetAddress> endpoints = strategy.calculateNaturalEndpoints(new StringToken(testToken), metadata)[ FD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_12 $$ for (int dc = 0; dc < dcRacks.length; ++dc) [ CD ]
Line_16 $$ for (int ep = 1; ep <= dcEndpoints[dc] / dcRacks[dc]; ++ep) -->Line_18 $$ InetAddress address = InetAddress.getByAddress(ipBytes)[ CD ]
Line_6 $$ IEndpointSnitch snitch = new RackInferringSnitch()-->Line_7 $$ DatabaseDescriptor.setEndpointSnitch(snitch)[ FD ]
Line_16 $$ for (int ep = 1; ep <= dcEndpoints[dc] / dcRacks[dc]; ++ep) -->Line_19 $$ StringToken token = new StringToken(String.format("%02x%02x%02x", ep, rack, dc))[ CD ]
Line_16 $$ for (int ep = 1; ep <= dcEndpoints[dc] / dcRacks[dc]; ++ep) -->Line_20 $$ logger.debug("adding node [ CD ]
Line_10 $$ Multimap<InetAddress, Token> tokens = HashMultimap.create()-->Line_21 $$ tokens.put(address, token)[ FD ]
Line_15 $$ for (int rack = 0; rack < dcRacks[dc]; ++rack) -->Line_16 $$ for (int ep = 1; ep <= dcEndpoints[dc] / dcRacks[dc]; ++ep) [ CD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_25 $$ metadata.updateNormalTokens(tokens)[ CD ]
Line_13 $$ totalRF += dcReplication[dc]-->Line_30 $$ Assert.assertEquals(totalRF, endpoints.size())[ FD ]
Line_12 $$ for (int dc = 0; dc < dcRacks.length; ++dc) -->Line_15 $$ for (int rack = 0; rack < dcRacks[dc]; ++rack) [ CD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_11 $$ int totalRF = 0[ CD ]
Line_18 $$ InetAddress address = InetAddress.getByAddress(ipBytes)-->Line_21 $$ tokens.put(address, token)[ FD ]
Line_16 $$ for (int ep = 1; ep <= dcEndpoints[dc] / dcRacks[dc]; ++ep) -->Line_19 $$ StringToken token = new StringToken(String.format("%02x%02x%02x", ep, rack, dc))[ FD ]
Line_2 $$ public void testLargeCluster() throws UnknownHostException, ConfigurationException -->Line_8 $$ TokenMetadata metadata = new TokenMetadata()[ CD ]
Line_11 $$ int totalRF = 0-->Line_13 $$ totalRF += dcReplication[dc][ FD ]
