Line_26 $$ Locale defaultLocale = getArticleDefaultLocale(content)-->Line_67 $$ article.setTitleMap(titleMap, defaultLocale)[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_3 $$ validateContent(content)[ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_35 $$ article.setUserName(user.getFullName())[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_43 $$ article.setUrlTitle(getUniqueUrlTitle(id, groupId, articleId, title, oldArticle.getUrlTitle(), serviceContext))[ FD ]
Line_26 $$ Locale defaultLocale = getArticleDefaultLocale(content)-->Line_42 $$ article.setTitleMap(oldArticle.getTitleMap(), defaultLocale)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_71 $$ content = format(user, groupId, articleId, article.getVersion(), !oldArticle.isDraft(), content, images)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_47 $$ article.setLayoutUuid(oldArticle.getLayoutUuid())[ FD ]
Line_68 $$ Map<Locale, String> descriptionMap = article.getDescriptionMap()-->Line_69 $$ descriptionMap.put(locale, description)[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_27 $$ if (incrementVersion) [ CD ]
Line_21 $$ JournalArticle article = null-->Line_43 $$ article.setUrlTitle(getUniqueUrlTitle(id, groupId, articleId, title, oldArticle.getUrlTitle(), serviceContext))[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_5 $$ double oldVersion = oldArticle.getVersion()[ FD ]
Line_24 $$ user = userPersistence.fetchByC_DU(oldArticle.getCompanyId(), true)-->Line_71 $$ content = format(user, groupId, articleId, article.getVersion(), !oldArticle.isDraft(), content, images)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_54 $$ if (article.getSmallImageId() == 0) [ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_52 $$ article.setSmallImage(oldArticle.getSmallImage())[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_51 $$ article.setIndexable(oldArticle.getIndexable())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_3 $$ validateContent(content)[ FD ]
Line_6 $$ if ((version > 0) && (version != oldVersion)) -->Line_8 $$ sb.append("Version ")[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_60 $$ ExpandoBridgeUtil.copyExpandoBridgeAttributes(oldArticle.getExpandoBridge(), article.getExpandoBridge())[ FD ]
Line_29 $$ long id = counterLocalService.increment()-->Line_43 $$ article.setUrlTitle(getUniqueUrlTitle(id, groupId, articleId, title, oldArticle.getUrlTitle(), serviceContext))[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_39 $$ article.setClassPK(oldArticle.getClassPK())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_34 $$ article.setUserId(oldArticle.getUserId())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_73 $$ journalArticlePersistence.update(article)[ CD ]
Line_21 $$ JournalArticle article = null-->Line_41 $$ article.setVersion(newVersion)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_63 $$ article = oldArticle[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_40 $$ article.setArticleId(articleId)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_72 $$ article.setContent(content)[ FD ]
Line_22 $$ User user = userPersistence.fetchByC_U(oldArticle.getCompanyId(), oldArticle.getUserId())-->Line_23 $$ if (user == null) [ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_67 $$ article.setTitleMap(titleMap, defaultLocale)[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_71 $$ content = format(user, groupId, articleId, article.getVersion(), !oldArticle.isDraft(), content, images)[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_24 $$ user = userPersistence.fetchByC_DU(oldArticle.getCompanyId(), true)[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_47 $$ article.setLayoutUuid(oldArticle.getLayoutUuid())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_30 $$ article = journalArticlePersistence.create(id)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_42 $$ article.setTitleMap(oldArticle.getTitleMap(), defaultLocale)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_39 $$ article.setClassPK(oldArticle.getClassPK())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_38 $$ article.setClassNameId(oldArticle.getClassNameId())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_59 $$ article.setStatusDate(new Date())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_44 $$ article.setDescriptionMap(oldArticle.getDescriptionMap())[ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_73 $$ journalArticlePersistence.update(article)[ FD ]
Line_27 $$ if (incrementVersion) -->Line_53 $$ article.setSmallImageId(oldArticle.getSmallImageId())[ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_66 $$ titleMap.put(locale, title)[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_38 $$ article.setClassNameId(oldArticle.getClassNameId())[ FD ]
Line_7 $$ StringBundler sb = new StringBundler(4)-->Line_11 $$ sb.append(oldVersion)[ FD ]
Line_63 $$ article = oldArticle-->Line_65 $$ Map<Locale, String> titleMap = article.getTitleMap()[ FD ]
Line_21 $$ JournalArticle article = null-->Line_57 $$ article.setSmallImageURL(oldArticle.getSmallImageURL())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_50 $$ article.setReviewDate(oldArticle.getReviewDate())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_57 $$ article.setSmallImageURL(oldArticle.getSmallImageURL())[ CD ]
Line_21 $$ JournalArticle article = null-->Line_40 $$ article.setArticleId(articleId)[ FD ]
Line_27 $$ if (incrementVersion) -->Line_34 $$ article.setUserId(oldArticle.getUserId())[ CD ]
Line_63 $$ article = oldArticle-->Line_71 $$ content = format(user, groupId, articleId, article.getVersion(), !oldArticle.isDraft(), content, images)[ FD ]
Line_14 $$ boolean incrementVersion = false-->Line_16 $$ incrementVersion = true[ FD ]
Line_27 $$ if (incrementVersion) -->Line_49 $$ article.setExpirationDate(oldArticle.getExpirationDate())[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_34 $$ article.setUserId(oldArticle.getUserId())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_54 $$ if (article.getSmallImageId() == 0) [ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_21 $$ JournalArticle article = null[ CD ]
Line_27 $$ if (incrementVersion) -->Line_46 $$ article.setDDMTemplateKey(oldArticle.getDDMTemplateKey())[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_44 $$ article.setDescriptionMap(oldArticle.getDescriptionMap())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_42 $$ article.setTitleMap(oldArticle.getTitleMap(), defaultLocale)[ CD ]
Line_65 $$ Map<Locale, String> titleMap = article.getTitleMap()-->Line_66 $$ titleMap.put(locale, title)[ FD ]
Line_68 $$ Map<Locale, String> descriptionMap = article.getDescriptionMap()-->Line_70 $$ article.setDescriptionMap(descriptionMap)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_49 $$ article.setExpirationDate(oldArticle.getExpirationDate())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_57 $$ article.setSmallImageURL(oldArticle.getSmallImageURL())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_9 $$ sb.append(version)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_34 $$ article.setUserId(oldArticle.getUserId())[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_71 $$ content = format(user, groupId, articleId, article.getVersion(), !oldArticle.isDraft(), content, images)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_49 $$ article.setExpirationDate(oldArticle.getExpirationDate())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_52 $$ article.setSmallImage(oldArticle.getSmallImage())[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_19 $$ serviceContext.validateModifiedDate(oldArticle, ArticleVersionException.class)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_48 $$ article.setDisplayDate(oldArticle.getDisplayDate())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_51 $$ article.setIndexable(oldArticle.getIndexable())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_55 $$ article.setSmallImageId(counterLocalService.increment())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_68 $$ Map<Locale, String> descriptionMap = article.getDescriptionMap()[ FD ]
Line_27 $$ if (incrementVersion) -->Line_48 $$ article.setDisplayDate(oldArticle.getDisplayDate())[ CD ]
Line_21 $$ JournalArticle article = null-->Line_32 $$ article.setGroupId(oldArticle.getGroupId())[ FD ]
Line_29 $$ long id = counterLocalService.increment()-->Line_30 $$ article = journalArticlePersistence.create(id)[ FD ]
Line_27 $$ if (incrementVersion) -->Line_32 $$ article.setGroupId(oldArticle.getGroupId())[ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_69 $$ descriptionMap.put(locale, description)[ CD ]
Line_7 $$ StringBundler sb = new StringBundler(4)-->Line_12 $$ throw new ArticleVersionException(sb.toString())[ FD ]
Line_63 $$ article = oldArticle-->Line_70 $$ article.setDescriptionMap(descriptionMap)[ FD ]
Line_6 $$ if ((version > 0) && (version != oldVersion)) -->Line_9 $$ sb.append(version)[ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_18 $$ if (serviceContext != null) [ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_72 $$ article.setContent(content)[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_15 $$ if (oldArticle.isApproved() || oldArticle.isExpired()) [ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_39 $$ article.setClassPK(oldArticle.getClassPK())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_44 $$ article.setDescriptionMap(oldArticle.getDescriptionMap())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_58 $$ article.setStatus(WorkflowConstants.STATUS_DRAFT)[ FD ]
Line_22 $$ User user = userPersistence.fetchByC_U(oldArticle.getCompanyId(), oldArticle.getUserId())-->Line_35 $$ article.setUserName(user.getFullName())[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_57 $$ article.setSmallImageURL(oldArticle.getSmallImageURL())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_33 $$ article.setCompanyId(oldArticle.getCompanyId())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_37 $$ article.setFolderId(oldArticle.getFolderId())[ CD ]
Line_21 $$ JournalArticle article = null-->Line_50 $$ article.setReviewDate(oldArticle.getReviewDate())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_67 $$ article.setTitleMap(titleMap, defaultLocale)[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_61 $$ updateDDMLinks(id, groupId, oldArticle.getDDMStructureKey(), oldArticle.getDDMTemplateKey(), true)[ FD ]
Line_71 $$ content = format(user, groupId, articleId, article.getVersion(), !oldArticle.isDraft(), content, images)-->Line_72 $$ article.setContent(content)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_71 $$ content = format(user, groupId, articleId, article.getVersion(), !oldArticle.isDraft(), content, images)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_42 $$ article.setTitleMap(oldArticle.getTitleMap(), defaultLocale)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_63 $$ article = oldArticle[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_22 $$ User user = userPersistence.fetchByC_U(oldArticle.getCompanyId(), oldArticle.getUserId())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_69 $$ descriptionMap.put(locale, description)[ FD ]
Line_6 $$ if ((version > 0) && (version != oldVersion)) -->Line_7 $$ StringBundler sb = new StringBundler(4)[ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_66 $$ titleMap.put(locale, title)[ CD ]
Line_63 $$ article = oldArticle-->Line_73 $$ journalArticlePersistence.update(article)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_43 $$ article.setUrlTitle(getUniqueUrlTitle(id, groupId, articleId, title, oldArticle.getUrlTitle(), serviceContext))[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_46 $$ article.setDDMTemplateKey(oldArticle.getDDMTemplateKey())[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_53 $$ article.setSmallImageId(oldArticle.getSmallImageId())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_45 $$ article.setDDMStructureKey(oldArticle.getDDMStructureKey())[ FD ]
Line_63 $$ article = oldArticle-->Line_68 $$ Map<Locale, String> descriptionMap = article.getDescriptionMap()[ FD ]
Line_27 $$ if (incrementVersion) -->Line_50 $$ article.setReviewDate(oldArticle.getReviewDate())[ CD ]
Line_63 $$ article = oldArticle-->Line_67 $$ article.setTitleMap(titleMap, defaultLocale)[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_14 $$ boolean incrementVersion = false[ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_6 $$ if ((version > 0) && (version != oldVersion)) [ CD ]
Line_27 $$ if (incrementVersion) -->Line_33 $$ article.setCompanyId(oldArticle.getCompanyId())[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_50 $$ article.setReviewDate(oldArticle.getReviewDate())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_53 $$ article.setSmallImageId(oldArticle.getSmallImageId())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_51 $$ article.setIndexable(oldArticle.getIndexable())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_72 $$ article.setContent(content)[ FD ]
Line_6 $$ if ((version > 0) && (version != oldVersion)) -->Line_11 $$ sb.append(oldVersion)[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_63 $$ article = oldArticle[ FD ]
Line_27 $$ if (incrementVersion) -->Line_58 $$ article.setStatus(WorkflowConstants.STATUS_DRAFT)[ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_45 $$ article.setDDMStructureKey(oldArticle.getDDMStructureKey())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_35 $$ article.setUserName(user.getFullName())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_45 $$ article.setDDMStructureKey(oldArticle.getDDMStructureKey())[ CD ]
Line_27 $$ if (incrementVersion) -->Line_61 $$ updateDDMLinks(id, groupId, oldArticle.getDDMStructureKey(), oldArticle.getDDMTemplateKey(), true)[ CD ]
Line_27 $$ if (incrementVersion) -->Line_41 $$ article.setVersion(newVersion)[ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_40 $$ article.setArticleId(articleId)[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_42 $$ article.setTitleMap(oldArticle.getTitleMap(), defaultLocale)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_37 $$ article.setFolderId(oldArticle.getFolderId())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_58 $$ article.setStatus(WorkflowConstants.STATUS_DRAFT)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_53 $$ article.setSmallImageId(oldArticle.getSmallImageId())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_63 $$ article = oldArticle[ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_31 $$ article.setResourcePrimKey(oldArticle.getResourcePrimKey())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_19 $$ serviceContext.validateModifiedDate(oldArticle, ArticleVersionException.class)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_36 $$ article.setCreateDate(oldArticle.getCreateDate())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)[ CD ]
Line_15 $$ if (oldArticle.isApproved() || oldArticle.isExpired()) -->Line_16 $$ incrementVersion = true[ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_41 $$ article.setVersion(newVersion)[ FD ]
Line_23 $$ if (user == null) -->Line_24 $$ user = userPersistence.fetchByC_DU(oldArticle.getCompanyId(), true)[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_31 $$ article.setResourcePrimKey(oldArticle.getResourcePrimKey())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_32 $$ article.setGroupId(oldArticle.getGroupId())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_39 $$ article.setClassPK(oldArticle.getClassPK())[ CD ]
Line_27 $$ if (incrementVersion) -->Line_51 $$ article.setIndexable(oldArticle.getIndexable())[ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_59 $$ article.setStatusDate(new Date())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_65 $$ Map<Locale, String> titleMap = article.getTitleMap()[ CD ]
Line_21 $$ JournalArticle article = null-->Line_60 $$ ExpandoBridgeUtil.copyExpandoBridgeAttributes(oldArticle.getExpandoBridge(), article.getExpandoBridge())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_70 $$ article.setDescriptionMap(descriptionMap)[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_33 $$ article.setCompanyId(oldArticle.getCompanyId())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_46 $$ article.setDDMTemplateKey(oldArticle.getDDMTemplateKey())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_60 $$ ExpandoBridgeUtil.copyExpandoBridgeAttributes(oldArticle.getExpandoBridge(), article.getExpandoBridge())[ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_18 $$ if (serviceContext != null) [ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_47 $$ article.setLayoutUuid(oldArticle.getLayoutUuid())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_26 $$ Locale defaultLocale = getArticleDefaultLocale(content)[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_48 $$ article.setDisplayDate(oldArticle.getDisplayDate())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_59 $$ article.setStatusDate(new Date())[ CD ]
Line_54 $$ if (article.getSmallImageId() == 0) -->Line_55 $$ article.setSmallImageId(counterLocalService.increment())[ CD ]
Line_7 $$ StringBundler sb = new StringBundler(4)-->Line_10 $$ sb.append(" is not the same as ")[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_23 $$ if (user == null) [ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_32 $$ article.setGroupId(oldArticle.getGroupId())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_68 $$ Map<Locale, String> descriptionMap = article.getDescriptionMap()[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_36 $$ article.setCreateDate(oldArticle.getCreateDate())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_22 $$ User user = userPersistence.fetchByC_U(oldArticle.getCompanyId(), oldArticle.getUserId())[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_37 $$ article.setFolderId(oldArticle.getFolderId())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_43 $$ article.setUrlTitle(getUniqueUrlTitle(id, groupId, articleId, title, oldArticle.getUrlTitle(), serviceContext))[ CD ]
Line_29 $$ long id = counterLocalService.increment()-->Line_61 $$ updateDDMLinks(id, groupId, oldArticle.getDDMStructureKey(), oldArticle.getDDMTemplateKey(), true)[ FD ]
Line_27 $$ if (incrementVersion) -->Line_47 $$ article.setLayoutUuid(oldArticle.getLayoutUuid())[ CD ]
Line_27 $$ if (incrementVersion) -->Line_29 $$ long id = counterLocalService.increment()[ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_71 $$ content = format(user, groupId, articleId, article.getVersion(), !oldArticle.isDraft(), content, images)[ CD ]
Line_5 $$ double oldVersion = oldArticle.getVersion()-->Line_11 $$ sb.append(oldVersion)[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_74 $$ return article[ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_46 $$ article.setDDMTemplateKey(oldArticle.getDDMTemplateKey())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_72 $$ article.setContent(content)[ FD ]
Line_27 $$ if (incrementVersion) -->Line_30 $$ article = journalArticlePersistence.create(id)[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_45 $$ article.setDDMStructureKey(oldArticle.getDDMStructureKey())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_43 $$ article.setUrlTitle(getUniqueUrlTitle(id, groupId, articleId, title, oldArticle.getUrlTitle(), serviceContext))[ FD ]
Line_27 $$ if (incrementVersion) -->Line_38 $$ article.setClassNameId(oldArticle.getClassNameId())[ CD ]
Line_27 $$ if (incrementVersion) -->Line_28 $$ double newVersion = MathUtil.format(oldVersion + 0.1, 1, 1)[ CD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_49 $$ article.setExpirationDate(oldArticle.getExpirationDate())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_38 $$ article.setClassNameId(oldArticle.getClassNameId())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_36 $$ article.setCreateDate(oldArticle.getCreateDate())[ FD ]
Line_27 $$ if (incrementVersion) -->Line_36 $$ article.setCreateDate(oldArticle.getCreateDate())[ CD ]
Line_24 $$ user = userPersistence.fetchByC_DU(oldArticle.getCompanyId(), true)-->Line_35 $$ article.setUserName(user.getFullName())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_65 $$ Map<Locale, String> titleMap = article.getTitleMap()[ FD ]
Line_7 $$ StringBundler sb = new StringBundler(4)-->Line_9 $$ sb.append(version)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_48 $$ article.setDisplayDate(oldArticle.getDisplayDate())[ FD ]
Line_28 $$ double newVersion = MathUtil.format(oldVersion + 0.1, 1, 1)-->Line_41 $$ article.setVersion(newVersion)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_33 $$ article.setCompanyId(oldArticle.getCompanyId())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_67 $$ article.setTitleMap(titleMap, defaultLocale)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_52 $$ article.setSmallImage(oldArticle.getSmallImage())[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_37 $$ article.setFolderId(oldArticle.getFolderId())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)[ FD ]
Line_18 $$ if (serviceContext != null) -->Line_19 $$ serviceContext.validateModifiedDate(oldArticle, ArticleVersionException.class)[ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_55 $$ article.setSmallImageId(counterLocalService.increment())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_15 $$ if (oldArticle.isApproved() || oldArticle.isExpired()) [ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_68 $$ Map<Locale, String> descriptionMap = article.getDescriptionMap()[ CD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_26 $$ Locale defaultLocale = getArticleDefaultLocale(content)[ FD ]
Line_7 $$ StringBundler sb = new StringBundler(4)-->Line_8 $$ sb.append("Version ")[ FD ]
Line_21 $$ JournalArticle article = null-->Line_44 $$ article.setDescriptionMap(oldArticle.getDescriptionMap())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_65 $$ Map<Locale, String> titleMap = article.getTitleMap()[ FD ]
Line_65 $$ Map<Locale, String> titleMap = article.getTitleMap()-->Line_67 $$ article.setTitleMap(titleMap, defaultLocale)[ FD ]
Line_4 $$ JournalArticle oldArticle = getLatestArticle(groupId, articleId, WorkflowConstants.STATUS_ANY)-->Line_52 $$ article.setSmallImage(oldArticle.getSmallImage())[ FD ]
Line_21 $$ JournalArticle article = null-->Line_70 $$ article.setDescriptionMap(descriptionMap)[ FD ]
Line_63 $$ article = oldArticle-->Line_72 $$ article.setContent(content)[ FD ]
Line_6 $$ if ((version > 0) && (version != oldVersion)) -->Line_10 $$ sb.append(" is not the same as ")[ CD ]
Line_27 $$ if (incrementVersion) -->Line_35 $$ article.setUserName(user.getFullName())[ CD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_60 $$ ExpandoBridgeUtil.copyExpandoBridgeAttributes(oldArticle.getExpandoBridge(), article.getExpandoBridge())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_61 $$ updateDDMLinks(id, groupId, oldArticle.getDDMStructureKey(), oldArticle.getDDMTemplateKey(), true)[ FD ]
Line_27 $$ if (incrementVersion) -->Line_40 $$ article.setArticleId(articleId)[ CD ]
Line_22 $$ User user = userPersistence.fetchByC_U(oldArticle.getCompanyId(), oldArticle.getUserId())-->Line_24 $$ user = userPersistence.fetchByC_DU(oldArticle.getCompanyId(), true)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_73 $$ journalArticlePersistence.update(article)[ FD ]
Line_30 $$ article = journalArticlePersistence.create(id)-->Line_70 $$ article.setDescriptionMap(descriptionMap)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_31 $$ article.setResourcePrimKey(oldArticle.getResourcePrimKey())[ FD ]
Line_2 $$ public JournalArticle updateArticleTranslation(long groupId, String articleId, double version, Locale locale, String title, String description, String content, Map<String, byte[]> images, ServiceContext serviceContext) throws PortalException -->Line_5 $$ double oldVersion = oldArticle.getVersion()[ CD ]
Line_27 $$ if (incrementVersion) -->Line_31 $$ article.setResourcePrimKey(oldArticle.getResourcePrimKey())[ CD ]
Line_22 $$ User user = userPersistence.fetchByC_U(oldArticle.getCompanyId(), oldArticle.getUserId())-->Line_71 $$ content = format(user, groupId, articleId, article.getVersion(), !oldArticle.isDraft(), content, images)[ FD ]
Line_21 $$ JournalArticle article = null-->Line_54 $$ if (article.getSmallImageId() == 0) [ FD ]
