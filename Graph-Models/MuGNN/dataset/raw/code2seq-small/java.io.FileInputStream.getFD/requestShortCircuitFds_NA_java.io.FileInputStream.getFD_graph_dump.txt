Line_41 $$ FileDescriptor[] fds = new FileDescriptor[fis.length]-->Line_46 $$ peer.getDomainSocket().sendFileDescriptors(fds, buf, 0, buf.length)[ FD ]
Line_45 $$ byte[] buf = new byte[] -->Line_46 $$ peer.getDomainSocket().sendFileDescriptors(fds, buf, 0, buf.length)[ FD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_25 $$ bld.setStatus(ERROR_UNSUPPORTED)[ FD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_27 $$ bld.setMessage(e.getMessage())[ FD ]
Line_6 $$ FileInputStream[] fis = null-->Line_54 $$ IOUtils.cleanup(LOG, fis)[ FD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_32 $$ bld.setStatus(ERROR_ACCESS_TOKEN)[ FD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_36 $$ bld.setMessage(e.getMessage())[ FD ]
Line_11 $$ if (slotId != null) -->Line_13 $$ datanode.shortCircuitRegistry.registerSlot(ExtendedBlockId.fromExtendedBlock(blk), slotId, isCached)[ CD ]
Line_16 $$ fis = datanode.requestShortCircuitFdsForRead(blk, token, maxVersion)-->Line_53 $$ if (fis != null) [ FD ]
Line_11 $$ if (slotId != null) -->Line_12 $$ boolean isCached = datanode.data.isCached(blk.getBlockPoolId(), blk.getBlockId())[ CD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_29 $$ bld.setStatus(ERROR_UNSUPPORTED)[ FD ]
Line_53 $$ if (fis != null) -->Line_54 $$ IOUtils.cleanup(LOG, fis)[ CD ]
Line_40 $$ if (fis != null) -->Line_46 $$ peer.getDomainSocket().sendFileDescriptors(fds, buf, 0, buf.length)[ CD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_39 $$ bld.build().writeDelimitedTo(socketOut)[ FD ]
Line_16 $$ fis = datanode.requestShortCircuitFdsForRead(blk, token, maxVersion)-->Line_40 $$ if (fis != null) [ FD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_26 $$ bld.setShortCircuitAccessVersion(DataNode.CURRENT_BLOCK_FORMAT_VERSION)[ FD ]
Line_6 $$ FileInputStream[] fis = null-->Line_16 $$ fis = datanode.requestShortCircuitFdsForRead(blk, token, maxVersion)[ FD ]
Line_50 $$ DatanodeRegistration dnR = datanode.getDNRegistrationForBP(blk.getBlockPoolId())-->Line_51 $$ BlockSender.ClientTraceLog.info(String.format("src: 127.0.0.1, dest: 127.0.0.1, op: REQUEST_SHORT_CIRCUIT_FDS," + " blockid: %s, srvID: %s, success: %b", blk.getBlockId(), dnR.getDatanodeUuid(), (fis != null)))[ FD ]
Line_49 $$ if (ClientTraceLog.isInfoEnabled()) -->Line_50 $$ DatanodeRegistration dnR = datanode.getDNRegistrationForBP(blk.getBlockPoolId())[ CD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_22 $$ bld.setStatus(SUCCESS)[ FD ]
Line_6 $$ FileInputStream[] fis = null-->Line_53 $$ if (fis != null) [ FD ]
Line_40 $$ if (fis != null) -->Line_41 $$ FileDescriptor[] fds = new FileDescriptor[fis.length][ CD ]
Line_40 $$ if (fis != null) -->Line_42 $$ for (int i = 0; i < fds.length; i++) [ CD ]
Line_18 $$ if ((fis == null) && (slotId != null)) -->Line_19 $$ datanode.shortCircuitRegistry.unregisterSlot(slotId)[ CD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_33 $$ bld.setMessage(e.getMessage())[ FD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_35 $$ bld.setStatus(ERROR)[ FD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_30 $$ bld.setMessage(e.getMessage())[ FD ]
Line_49 $$ if (ClientTraceLog.isInfoEnabled()) -->Line_51 $$ BlockSender.ClientTraceLog.info(String.format("src: 127.0.0.1, dest: 127.0.0.1, op: REQUEST_SHORT_CIRCUIT_FDS," + " blockid: %s, srvID: %s, success: %b", blk.getBlockId(), dnR.getDatanodeUuid(), (fis != null)))[ CD ]
Line_5 $$ BlockOpResponseProto.Builder bld = BlockOpResponseProto.newBuilder()-->Line_23 $$ bld.setShortCircuitAccessVersion(DataNode.CURRENT_BLOCK_FORMAT_VERSION)[ FD ]
Line_6 $$ FileInputStream[] fis = null-->Line_40 $$ if (fis != null) [ FD ]
Line_40 $$ if (fis != null) -->Line_45 $$ byte[] buf = new byte[] [ CD ]
Line_16 $$ fis = datanode.requestShortCircuitFdsForRead(blk, token, maxVersion)-->Line_54 $$ IOUtils.cleanup(LOG, fis)[ FD ]
Line_42 $$ for (int i = 0; i < fds.length; i++) -->Line_43 $$ fds[i] = fis[i].getFD()[ CD ]
Line_12 $$ boolean isCached = datanode.data.isCached(blk.getBlockPoolId(), blk.getBlockId())-->Line_13 $$ datanode.shortCircuitRegistry.registerSlot(ExtendedBlockId.fromExtendedBlock(blk), slotId, isCached)[ FD ]
