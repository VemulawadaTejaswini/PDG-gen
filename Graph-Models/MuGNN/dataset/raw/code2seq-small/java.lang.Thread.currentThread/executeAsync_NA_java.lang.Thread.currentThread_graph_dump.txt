Line_2 $$ private ByteBuffer executeAsync(int protocolVersion, List<ByteBuffer> parameters) -->Line_3 $$ ThreadIdAndCpuTime threadIdAndCpuTime = new ThreadIdAndCpuTime()[ CD ]
Line_4 $$ Future<ByteBuffer> future = executor().submit(() -> -->Line_11 $$ return future.get(DatabaseDescriptor.getUserDefinedFunctionWarnTimeout(), TimeUnit.MILLISECONDS)[ FD ]
Line_14 $$ String warn = String.format("User defined function %s ran longer than %dms", this, DatabaseDescriptor.getUserDefinedFunctionWarnTimeout())-->Line_15 $$ logger.warn(warn)[ FD ]
Line_2 $$ private ByteBuffer executeAsync(int protocolVersion, List<ByteBuffer> parameters) -->Line_6 $$ return executeUserDefined(protocolVersion, parameters)[ FD ]
Line_3 $$ ThreadIdAndCpuTime threadIdAndCpuTime = new ThreadIdAndCpuTime()-->Line_32 $$ threadIdAndCpuTime.get(1, TimeUnit.SECONDS)[ FD ]
Line_4 $$ Future<ByteBuffer> future = executor().submit(() -> -->Line_35 $$ return future.get(Math.max(DatabaseDescriptor.getUserDefinedFunctionFailTimeout() - cpuTimeMillis, 0L), TimeUnit.MILLISECONDS)[ FD ]
Line_24 $$ Throwable c = e.getCause()-->Line_25 $$ if (c instanceof RuntimeException)[ FD ]
Line_2 $$ private ByteBuffer executeAsync(int protocolVersion, List<ByteBuffer> parameters) -->Line_4 $$ Future<ByteBuffer> future = executor().submit(() -> [ CD ]
Line_33 $$ long cpuTimeMillis = threadMXBean.getThreadCpuTime(threadIdAndCpuTime.threadId) - threadIdAndCpuTime.cpuTime-->Line_34 $$ cpuTimeMillis /= 1000000L[ FD ]
Line_14 $$ String warn = String.format("User defined function %s ran longer than %dms", this, DatabaseDescriptor.getUserDefinedFunctionWarnTimeout())-->Line_16 $$ ClientWarn.warn(warn)[ FD ]
Line_45 $$ TimeoutException cause = new TimeoutException(String.format("User defined function %s ran longer than %dms%s", this, DatabaseDescriptor.getUserDefinedFunctionFailTimeout(), DatabaseDescriptor.getUserFunctionTimeoutPolicy() == Config.UserFunctionTimeoutPolicy.ignore ? "" : " - will stop Cassandra VM"))-->Line_47 $$ JVMStabilityInspector.userFunctionTimeout(cause)[ FD ]
Line_24 $$ Throwable c = e.getCause()-->Line_41 $$ if (c instanceof RuntimeException)[ FD ]
Line_45 $$ TimeoutException cause = new TimeoutException(String.format("User defined function %s ran longer than %dms%s", this, DatabaseDescriptor.getUserDefinedFunctionFailTimeout(), DatabaseDescriptor.getUserFunctionTimeoutPolicy() == Config.UserFunctionTimeoutPolicy.ignore ? "" : " - will stop Cassandra VM"))-->Line_46 $$ FunctionExecutionException fe = FunctionExecutionException.create(this, cause)[ FD ]
Line_3 $$ ThreadIdAndCpuTime threadIdAndCpuTime = new ThreadIdAndCpuTime()-->Line_5 $$ threadIdAndCpuTime.setup()[ FD ]
