Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_4 $$ replicaInfo.unlinkBlock(1)[ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_11 $$ File oldmeta = replicaInfo.getMetaFile()[ FD ]
Line_6 $$ FsVolumeImpl v = (FsVolumeImpl) replicaInfo.getVolume()-->Line_10 $$ File newBlkFile = new File(v.getRbwDir(bpid), replicaInfo.getBlockName())[ FD ]
Line_11 $$ File oldmeta = replicaInfo.getMetaFile()-->Line_18 $$ NativeIO.renameTo(oldmeta, newmeta)[ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_6 $$ FsVolumeImpl v = (FsVolumeImpl) replicaInfo.getVolume()[ FD ]
Line_6 $$ FsVolumeImpl v = (FsVolumeImpl) replicaInfo.getVolume()-->Line_7 $$ if (v.getAvailable() < estimateBlockLen - replicaInfo.getNumBytes()) [ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_13 $$ File newmeta = newReplicaInfo.getMetaFile()[ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_12 $$ ReplicaBeingWritten newReplicaInfo = new ReplicaBeingWritten(replicaInfo.getBlockId(), replicaInfo.getNumBytes(), newGS, v, newBlkFile.getParentFile(), Thread.currentThread())[ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_35 $$ volumeMap.add(bpid, newReplicaInfo)[ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_12 $$ ReplicaBeingWritten newReplicaInfo = new ReplicaBeingWritten(replicaInfo.getBlockId(), replicaInfo.getNumBytes(), newGS, v, newBlkFile.getParentFile(), Thread.currentThread())[ CD ]
Line_10 $$ File newBlkFile = new File(v.getRbwDir(bpid), replicaInfo.getBlockName())-->Line_26 $$ NativeIO.renameTo(blkfile, newBlkFile)[ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_35 $$ volumeMap.add(bpid, newReplicaInfo)[ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_3 $$ cacheManager.uncacheBlock(bpid, replicaInfo.getBlockId())[ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_36 $$ return newReplicaInfo[ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_6 $$ FsVolumeImpl v = (FsVolumeImpl) replicaInfo.getVolume()[ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_5 $$ File blkfile = replicaInfo.getBlockFile()[ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_11 $$ File oldmeta = replicaInfo.getMetaFile()[ CD ]
Line_5 $$ File blkfile = replicaInfo.getBlockFile()-->Line_23 $$ LOG.debug("Renaming " + blkfile + " to " + newBlkFile + ", file length=" + blkfile.length())[ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_4 $$ replicaInfo.unlinkBlock(1)[ FD ]
Line_13 $$ File newmeta = newReplicaInfo.getMetaFile()-->Line_29 $$ NativeIO.renameTo(newmeta, oldmeta)[ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_22 $$ if (LOG.isDebugEnabled()) [ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_10 $$ File newBlkFile = new File(v.getRbwDir(bpid), replicaInfo.getBlockName())[ FD ]
Line_12 $$ ReplicaBeingWritten newReplicaInfo = new ReplicaBeingWritten(replicaInfo.getBlockId(), replicaInfo.getNumBytes(), newGS, v, newBlkFile.getParentFile(), Thread.currentThread())-->Line_13 $$ File newmeta = newReplicaInfo.getMetaFile()[ FD ]
Line_12 $$ ReplicaBeingWritten newReplicaInfo = new ReplicaBeingWritten(replicaInfo.getBlockId(), replicaInfo.getNumBytes(), newGS, v, newBlkFile.getParentFile(), Thread.currentThread())-->Line_35 $$ volumeMap.add(bpid, newReplicaInfo)[ FD ]
Line_14 $$ if (LOG.isDebugEnabled()) -->Line_15 $$ LOG.debug("Renaming " + oldmeta + " to " + newmeta)[ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_5 $$ File blkfile = replicaInfo.getBlockFile()[ FD ]
Line_13 $$ File newmeta = newReplicaInfo.getMetaFile()-->Line_18 $$ NativeIO.renameTo(oldmeta, newmeta)[ FD ]
Line_5 $$ File blkfile = replicaInfo.getBlockFile()-->Line_26 $$ NativeIO.renameTo(blkfile, newBlkFile)[ FD ]
Line_10 $$ File newBlkFile = new File(v.getRbwDir(bpid), replicaInfo.getBlockName())-->Line_12 $$ ReplicaBeingWritten newReplicaInfo = new ReplicaBeingWritten(replicaInfo.getBlockId(), replicaInfo.getNumBytes(), newGS, v, newBlkFile.getParentFile(), Thread.currentThread())[ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_7 $$ if (v.getAvailable() < estimateBlockLen - replicaInfo.getNumBytes()) [ FD ]
Line_22 $$ if (LOG.isDebugEnabled()) -->Line_23 $$ LOG.debug("Renaming " + blkfile + " to " + newBlkFile + ", file length=" + blkfile.length())[ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_10 $$ File newBlkFile = new File(v.getRbwDir(bpid), replicaInfo.getBlockName())[ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_14 $$ if (LOG.isDebugEnabled()) [ CD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_3 $$ cacheManager.uncacheBlock(bpid, replicaInfo.getBlockId())[ CD ]
Line_11 $$ File oldmeta = replicaInfo.getMetaFile()-->Line_29 $$ NativeIO.renameTo(newmeta, oldmeta)[ FD ]
Line_2 $$ private synchronized ReplicaBeingWritten append(String bpid, FinalizedReplica replicaInfo, long newGS, long estimateBlockLen) throws IOException -->Line_7 $$ if (v.getAvailable() < estimateBlockLen - replicaInfo.getNumBytes()) [ CD ]
