Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_5 $$ final TimeValue publishTimeout = discoverySettings.getPublishTimeout()[ CD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_21 $$ sendingController.setPublishingTimedOut(!publishResponseHandler.awaitAllNodes(TimeValue.timeValueNanos(timeLeftInNanos)))[ FD ]
Line_20 $$ final BlockingClusterStatePublishResponseHandler publishResponseHandler = sendingController.getPublishResponseHandler()-->Line_21 $$ sendingController.setPublishingTimedOut(!publishResponseHandler.awaitAllNodes(TimeValue.timeValueNanos(timeLeftInNanos)))[ FD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_3 $$ final ClusterState clusterState = clusterChangedEvent.state()[ CD ]
Line_7 $$ for (final DiscoveryNode node : nodesToPublishTo) -->Line_14 $$ sendClusterStateDiff(clusterState, serializedDiffs, serializedStates, node, publishTimeout, sendingController)[ FD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_3 $$ final ClusterState clusterState = clusterChangedEvent.state()[ FD ]
Line_22 $$ if (sendingController.getPublishingTimedOut()) -->Line_23 $$ DiscoveryNode[] pendingNodes = publishResponseHandler.pendingNodes()[ CD ]
Line_5 $$ final TimeValue publishTimeout = discoverySettings.getPublishTimeout()-->Line_19 $$ long timeLeftInNanos = Math.max(0, publishTimeout.nanos() - (System.nanoTime() - publishingStartInNanos))[ FD ]
Line_5 $$ final TimeValue publishTimeout = discoverySettings.getPublishTimeout()-->Line_26 $$ logger.warn("timed out waiting for all nodes to process published state [[ FD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_4 $$ final ClusterState previousState = clusterChangedEvent.previousState()[ FD ]
Line_19 $$ long timeLeftInNanos = Math.max(0, publishTimeout.nanos() - (System.nanoTime() - publishingStartInNanos))-->Line_21 $$ sendingController.setPublishingTimedOut(!publishResponseHandler.awaitAllNodes(TimeValue.timeValueNanos(timeLeftInNanos)))[ FD ]
Line_5 $$ final TimeValue publishTimeout = discoverySettings.getPublishTimeout()-->Line_14 $$ sendClusterStateDiff(clusterState, serializedDiffs, serializedStates, node, publishTimeout, sendingController)[ FD ]
Line_20 $$ final BlockingClusterStatePublishResponseHandler publishResponseHandler = sendingController.getPublishResponseHandler()-->Line_23 $$ DiscoveryNode[] pendingNodes = publishResponseHandler.pendingNodes()[ FD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_14 $$ sendClusterStateDiff(clusterState, serializedDiffs, serializedStates, node, publishTimeout, sendingController)[ FD ]
Line_7 $$ for (final DiscoveryNode node : nodesToPublishTo) -->Line_12 $$ sendFullClusterState(clusterState, serializedStates, node, publishTimeout, sendingController)[ FD ]
Line_3 $$ final ClusterState clusterState = clusterChangedEvent.state()-->Line_14 $$ sendClusterStateDiff(clusterState, serializedDiffs, serializedStates, node, publishTimeout, sendingController)[ FD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_12 $$ sendFullClusterState(clusterState, serializedStates, node, publishTimeout, sendingController)[ FD ]
Line_3 $$ final ClusterState clusterState = clusterChangedEvent.state()-->Line_26 $$ logger.warn("timed out waiting for all nodes to process published state [[ FD ]
Line_3 $$ final ClusterState clusterState = clusterChangedEvent.state()-->Line_12 $$ sendFullClusterState(clusterState, serializedStates, node, publishTimeout, sendingController)[ FD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_20 $$ final BlockingClusterStatePublishResponseHandler publishResponseHandler = sendingController.getPublishResponseHandler()[ FD ]
Line_5 $$ final TimeValue publishTimeout = discoverySettings.getPublishTimeout()-->Line_12 $$ sendFullClusterState(clusterState, serializedStates, node, publishTimeout, sendingController)[ FD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_17 $$ sendingController.waitForCommit(discoverySettings.getCommitTimeout())[ FD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_4 $$ final ClusterState previousState = clusterChangedEvent.previousState()[ CD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_17 $$ sendingController.waitForCommit(discoverySettings.getCommitTimeout())[ CD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_22 $$ if (sendingController.getPublishingTimedOut()) [ FD ]
Line_23 $$ DiscoveryNode[] pendingNodes = publishResponseHandler.pendingNodes()-->Line_26 $$ logger.warn("timed out waiting for all nodes to process published state [[ FD ]
Line_2 $$ private void innerPublish(final ClusterChangedEvent clusterChangedEvent, final Set<DiscoveryNode> nodesToPublishTo, final SendingController sendingController, final boolean sendFullVersion, final Map<Version, BytesReference> serializedStates, final Map<Version, BytesReference> serializedDiffs) -->Line_6 $$ final long publishingStartInNanos = System.nanoTime()[ CD ]
