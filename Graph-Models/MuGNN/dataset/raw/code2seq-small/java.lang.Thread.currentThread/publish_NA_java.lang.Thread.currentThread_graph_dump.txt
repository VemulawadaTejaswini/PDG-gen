Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_81 $$ sendInitialStateEventIfNeeded()[ CD ]
Line_6 $$ byte[] clusterStateDiffBytes = null-->Line_25 $$ newNodeSpecificClusterState = discovery.lastProcessedClusterState.readDiffFrom(StreamInput.wrap(clusterStateDiffBytes)).apply(discovery.lastProcessedClusterState)[ FD ]
Line_12 $$ ClusterState newNodeSpecificClusterState = null-->Line_37 $$ discovery.lastProcessedClusterState = newNodeSpecificClusterState[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_49 $$ return false[ CD ]
Line_2 $$ private void publish(LocalDiscovery[] members, ClusterChangedEvent clusterChangedEvent, final BlockingClusterStatePublishResponseHandler publishResponseHandler) -->Line_94 $$ DiscoveryNode[] pendingNodes = publishResponseHandler.pendingNodes()[ FD ]
Line_62 $$ ClusterState.Builder builder = ClusterState.builder(nodeSpecificClusterState)-->Line_70 $$ return builder.build()[ FD ]
Line_2 $$ private void publish(LocalDiscovery[] members, ClusterChangedEvent clusterChangedEvent, final BlockingClusterStatePublishResponseHandler publishResponseHandler) -->Line_19 $$ Diff diff = clusterState.diff(clusterChangedEvent.previousState())[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_68 $$ builder.metaData(currentState.metaData())[ FD ]
Line_6 $$ byte[] clusterStateDiffBytes = null-->Line_22 $$ clusterStateDiffBytes = os.bytes().toBytes()[ FD ]
Line_54 $$ if (currentState.supersedes(nodeSpecificClusterState)) -->Line_55 $$ return currentState[ CD ]
Line_35 $$ newNodeSpecificClusterState = ClusterState.Builder.fromBytes(clusterStateBytes, discovery.localNode)-->Line_37 $$ discovery.lastProcessedClusterState = newNodeSpecificClusterState[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_76 $$ publishResponseHandler.onFailure(discovery.localNode, t)[ CD ]
Line_57 $$ if (currentState.blocks().hasGlobalBlock(discoverySettings.getNoMasterBlock())) -->Line_60 $$ return nodeSpecificClusterState[ CD ]
Line_7 $$ ClusterState clusterState = clusterChangedEvent.state()-->Line_28 $$ logger.warn("incompatible cluster state version [[ FD ]
Line_31 $$ if (newNodeSpecificClusterState == null) -->Line_35 $$ newNodeSpecificClusterState = ClusterState.Builder.fromBytes(clusterStateBytes, discovery.localNode)[ CD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_65 $$ builder.routingTable(currentState.routingTable())[ FD ]
Line_62 $$ ClusterState.Builder builder = ClusterState.builder(nodeSpecificClusterState)-->Line_68 $$ builder.metaData(currentState.metaData())[ FD ]
Line_39 $$ final ClusterState nodeSpecificClusterState = newNodeSpecificClusterState-->Line_62 $$ ClusterState.Builder builder = ClusterState.builder(nodeSpecificClusterState)[ FD ]
Line_2 $$ private void publish(LocalDiscovery[] members, ClusterChangedEvent clusterChangedEvent, final BlockingClusterStatePublishResponseHandler publishResponseHandler) -->Line_86 $$ publishResponseHandler.onResponse(discovery.localNode)[ FD ]
Line_2 $$ private void publish(LocalDiscovery[] members, ClusterChangedEvent clusterChangedEvent, final BlockingClusterStatePublishResponseHandler publishResponseHandler) -->Line_7 $$ ClusterState clusterState = clusterChangedEvent.state()[ FD ]
Line_25 $$ newNodeSpecificClusterState = discovery.lastProcessedClusterState.readDiffFrom(StreamInput.wrap(clusterStateDiffBytes)).apply(discovery.lastProcessedClusterState)-->Line_31 $$ if (newNodeSpecificClusterState == null) [ FD ]
Line_39 $$ final ClusterState nodeSpecificClusterState = newNodeSpecificClusterState-->Line_40 $$ nodeSpecificClusterState.status(ClusterState.ClusterStateStatus.RECEIVED)[ FD ]
Line_2 $$ private void publish(LocalDiscovery[] members, ClusterChangedEvent clusterChangedEvent, final BlockingClusterStatePublishResponseHandler publishResponseHandler) -->Line_82 $$ publishResponseHandler.onResponse(discovery.localNode)[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_82 $$ publishResponseHandler.onResponse(discovery.localNode)[ CD ]
Line_7 $$ ClusterState clusterState = clusterChangedEvent.state()-->Line_26 $$ logger.trace("sending diff cluster state version [[ FD ]
Line_2 $$ private void publish(LocalDiscovery[] members, ClusterChangedEvent clusterChangedEvent, final BlockingClusterStatePublishResponseHandler publishResponseHandler) -->Line_76 $$ publishResponseHandler.onFailure(discovery.localNode, t)[ FD ]
Line_7 $$ ClusterState clusterState = clusterChangedEvent.state()-->Line_33 $$ clusterStateBytes = Builder.toBytes(clusterState)[ FD ]
Line_8 $$ for (final LocalDiscovery discovery : members) -->Line_9 $$ if (discovery.master) [ FD ]
Line_32 $$ if (clusterStateBytes == null) -->Line_33 $$ clusterStateBytes = Builder.toBytes(clusterState)[ CD ]
Line_19 $$ Diff diff = clusterState.diff(clusterChangedEvent.previousState())-->Line_21 $$ diff.writeTo(os)[ FD ]
Line_62 $$ ClusterState.Builder builder = ClusterState.builder(nodeSpecificClusterState)-->Line_65 $$ builder.routingTable(currentState.routingTable())[ FD ]
Line_93 $$ if (!awaited) -->Line_94 $$ DiscoveryNode[] pendingNodes = publishResponseHandler.pendingNodes()[ CD ]
Line_67 $$ if (nodeSpecificClusterState.metaData().version() == currentState.metaData().version()) -->Line_68 $$ builder.metaData(currentState.metaData())[ CD ]
Line_39 $$ final ClusterState nodeSpecificClusterState = newNodeSpecificClusterState-->Line_67 $$ if (nodeSpecificClusterState.metaData().version() == currentState.metaData().version()) [ FD ]
Line_33 $$ clusterStateBytes = Builder.toBytes(clusterState)-->Line_35 $$ newNodeSpecificClusterState = ClusterState.Builder.fromBytes(clusterStateBytes, discovery.localNode)[ FD ]
Line_39 $$ final ClusterState nodeSpecificClusterState = newNodeSpecificClusterState-->Line_44 $$ assert !nodeSpecificClusterState.blocks().hasGlobalBlock(discoverySettings.getNoMasterBlock()) : "received a cluster state with a master block"[ FD ]
Line_20 $$ BytesStreamOutput os = new BytesStreamOutput()-->Line_22 $$ clusterStateDiffBytes = os.bytes().toBytes()[ FD ]
Line_12 $$ ClusterState newNodeSpecificClusterState = null-->Line_25 $$ newNodeSpecificClusterState = discovery.lastProcessedClusterState.readDiffFrom(StreamInput.wrap(clusterStateDiffBytes)).apply(discovery.lastProcessedClusterState)[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_70 $$ return builder.build()[ CD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_75 $$ logger.error("unexpected failure during [[ CD ]
Line_7 $$ ClusterState clusterState = clusterChangedEvent.state()-->Line_19 $$ Diff diff = clusterState.diff(clusterChangedEvent.previousState())[ FD ]
Line_7 $$ ClusterState clusterState = clusterChangedEvent.state()-->Line_97 $$ logger.warn("timed out waiting for all nodes to process published state [[ FD ]
Line_25 $$ newNodeSpecificClusterState = discovery.lastProcessedClusterState.readDiffFrom(StreamInput.wrap(clusterStateDiffBytes)).apply(discovery.lastProcessedClusterState)-->Line_35 $$ newNodeSpecificClusterState = ClusterState.Builder.fromBytes(clusterStateBytes, discovery.localNode)[ FD ]
Line_31 $$ if (newNodeSpecificClusterState == null) -->Line_32 $$ if (clusterStateBytes == null) [ CD ]
Line_12 $$ ClusterState newNodeSpecificClusterState = null-->Line_31 $$ if (newNodeSpecificClusterState == null) [ FD ]
Line_12 $$ ClusterState newNodeSpecificClusterState = null-->Line_35 $$ newNodeSpecificClusterState = ClusterState.Builder.fromBytes(clusterStateBytes, discovery.localNode)[ FD ]
Line_39 $$ final ClusterState nodeSpecificClusterState = newNodeSpecificClusterState-->Line_54 $$ if (currentState.supersedes(nodeSpecificClusterState)) [ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_57 $$ if (currentState.blocks().hasGlobalBlock(discoverySettings.getNoMasterBlock())) [ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_75 $$ logger.error("unexpected failure during [[ FD ]
Line_39 $$ final ClusterState nodeSpecificClusterState = newNodeSpecificClusterState-->Line_43 $$ assert nodeSpecificClusterState.nodes().masterNode() != null : "received a cluster state without a master"[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_76 $$ publishResponseHandler.onFailure(discovery.localNode, t)[ FD ]
Line_25 $$ newNodeSpecificClusterState = discovery.lastProcessedClusterState.readDiffFrom(StreamInput.wrap(clusterStateDiffBytes)).apply(discovery.lastProcessedClusterState)-->Line_37 $$ discovery.lastProcessedClusterState = newNodeSpecificClusterState[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_62 $$ ClusterState.Builder builder = ClusterState.builder(nodeSpecificClusterState)[ CD ]
Line_2 $$ private void publish(LocalDiscovery[] members, ClusterChangedEvent clusterChangedEvent, final BlockingClusterStatePublishResponseHandler publishResponseHandler) -->Line_92 $$ boolean awaited = publishResponseHandler.awaitAllNodes(publishTimeout)[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_67 $$ if (nodeSpecificClusterState.metaData().version() == currentState.metaData().version()) [ CD ]
Line_22 $$ clusterStateDiffBytes = os.bytes().toBytes()-->Line_25 $$ newNodeSpecificClusterState = discovery.lastProcessedClusterState.readDiffFrom(StreamInput.wrap(clusterStateDiffBytes)).apply(discovery.lastProcessedClusterState)[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_54 $$ if (currentState.supersedes(nodeSpecificClusterState)) [ CD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_54 $$ if (currentState.supersedes(nodeSpecificClusterState)) [ FD ]
Line_20 $$ BytesStreamOutput os = new BytesStreamOutput()-->Line_21 $$ diff.writeTo(os)[ FD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_57 $$ if (currentState.blocks().hasGlobalBlock(discoverySettings.getNoMasterBlock())) [ CD ]
Line_45 $$ discovery.clusterService.submitStateUpdateTask("local-disco-receive(from master)", new ClusterStateUpdateTask() -->Line_67 $$ if (nodeSpecificClusterState.metaData().version() == currentState.metaData().version()) [ FD ]
