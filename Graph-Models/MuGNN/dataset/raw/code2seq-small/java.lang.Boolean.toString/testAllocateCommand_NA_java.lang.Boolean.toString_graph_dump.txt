Line_2 $$ public void testAllocateCommand() -->Line_46 $$ assertThat(rerouteResult.changed(), equalTo(true))[ CD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_31 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ FD ]
Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ CD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))-->Line_27 $$ assertThat(rerouteResult.changed(), equalTo(true))[ FD ]
Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_31 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ CD ]
Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))-->Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_61 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node3", false)))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_40 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_37 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ FD ]
Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_58 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_58 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_55 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())-->Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_40 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))[ FD ]
Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))-->Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_35 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ CD ]
Line_2 $$ public void testAllocateCommand() -->Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ CD ]
Line_2 $$ public void testAllocateCommand() -->Line_37 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ CD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_31 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_12 $$ assertThat(clusterState.getRoutingNodes().shardsWithState(INITIALIZING).size(), equalTo(0))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_29 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_57 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_46 $$ assertThat(rerouteResult.changed(), equalTo(true))[ FD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_57 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_50 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ CD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()[ FD ]
Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())-->Line_40 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_48 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_36 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_49 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_49 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_50 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_51 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ CD ]
Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_61 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node3", false)))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_5 $$ MetaData metaData = MetaData.builder().put(IndexMetaData.builder("test").settings(settings(Version.CURRENT)).numberOfShards(1).numberOfReplicas(1)).build()[ CD ]
Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_49 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))[ FD ]
Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())-->Line_61 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node3", false)))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_5 $$ MetaData metaData = MetaData.builder().put(IndexMetaData.builder("test").settings(settings(Version.CURRENT)).numberOfShards(1).numberOfReplicas(1)).build()-->Line_6 $$ RoutingTable routingTable = RoutingTable.builder().addAsNew(metaData.index("test")).build()[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_50 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_55 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_58 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_29 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_48 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_49 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_49 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_46 $$ assertThat(rerouteResult.changed(), equalTo(true))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_57 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_29 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_55 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_56 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ CD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_55 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_50 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_51 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_55 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")[ CD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ CD ]
Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())-->Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_56 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_12 $$ assertThat(clusterState.getRoutingNodes().shardsWithState(INITIALIZING).size(), equalTo(0))[ CD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_27 $$ assertThat(rerouteResult.changed(), equalTo(true))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_56 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_57 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ CD ]
Line_2 $$ public void testAllocateCommand() -->Line_27 $$ assertThat(rerouteResult.changed(), equalTo(true))[ CD ]
Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))-->Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_50 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_40 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_51 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_36 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ CD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_61 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node3", false)))[ FD ]
Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_37 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_6 $$ RoutingTable routingTable = RoutingTable.builder().addAsNew(metaData.index("test")).build()[ CD ]
Line_2 $$ public void testAllocateCommand() -->Line_48 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ CD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_40 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_37 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_40 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_48 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_30 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(INITIALIZING).size(), equalTo(1))[ CD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_56 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())-->Line_15 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_50 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_56 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_55 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_30 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_12 $$ assertThat(clusterState.getRoutingNodes().shardsWithState(INITIALIZING).size(), equalTo(0))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_12 $$ assertThat(clusterState.getRoutingNodes().shardsWithState(INITIALIZING).size(), equalTo(0))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_51 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_5 $$ MetaData metaData = MetaData.builder().put(IndexMetaData.builder("test").settings(settings(Version.CURRENT)).numberOfShards(1).numberOfReplicas(1)).build()-->Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))[ FD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_36 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_56 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_36 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_51 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(INITIALIZING).size(), equalTo(1))[ CD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_31 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()[ CD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_35 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_48 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_48 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_6 $$ RoutingTable routingTable = RoutingTable.builder().addAsNew(metaData.index("test")).build()-->Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_15 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())-->Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_49 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ CD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_51 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_56 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_15 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_57 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_35 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_58 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_31 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_29 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_58 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_48 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_55 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_61 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node3", false)))[ FD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_27 $$ assertThat(rerouteResult.changed(), equalTo(true))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_35 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))-->Line_46 $$ assertThat(rerouteResult.changed(), equalTo(true))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_58 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_61 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node3", false)))[ FD ]
Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))-->Line_46 $$ assertThat(rerouteResult.changed(), equalTo(true))[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_50 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))-->Line_46 $$ assertThat(rerouteResult.changed(), equalTo(true))[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_49 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))[ CD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_30 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_30 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_37 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))[ CD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_61 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node3", false)))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ CD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_58 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(STARTED).size(), equalTo(1))[ CD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_36 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))[ FD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_30 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_57 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_55 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ CD ]
Line_2 $$ public void testAllocateCommand() -->Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ CD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")-->Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())[ CD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_36 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_26 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", true)))-->Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_45 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node2", false)))-->Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_3 $$ AllocationService allocation = createAllocationService(settingsBuilder().put(EnableAllocationDecider.CLUSTER_ROUTING_ALLOCATION_ENABLE_SETTING.getKey(), "none").put(EnableAllocationDecider.CLUSTER_ROUTING_REBALANCE_ENABLE_SETTING.getKey(), "none").build())-->Line_10 $$ RoutingAllocation.Result rerouteResult = allocation.reroute(clusterState, "reroute")[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()[ CD ]
Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ CD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_35 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_37 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(0))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_11 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_51 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(INITIALIZING).size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_61 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node3", false)))[ FD ]
Line_2 $$ public void testAllocateCommand() -->Line_29 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ CD ]
Line_54 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_57 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_35 $$ assertThat(clusterState.getRoutingNodes().node("node1").size(), equalTo(1))[ FD ]
Line_21 $$ rerouteResult = allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node4", true)))-->Line_53 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_58 $$ assertThat(clusterState.getRoutingNodes().node("node2").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_34 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_56 $$ assertThat(clusterState.getRoutingNodes().node("node1").shardsWithState(STARTED).size(), equalTo(1))[ FD ]
Line_7 $$ ClusterState clusterState = ClusterState.builder(org.elasticsearch.cluster.ClusterName.DEFAULT).metaData(metaData).routingTable(routingTable).build()-->Line_15 $$ allocation.reroute(clusterState, new AllocationCommands(new AllocateAllocationCommand(new ShardId("test", 0), "node1", false)))[ FD ]
Line_47 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()-->Line_57 $$ assertThat(clusterState.getRoutingNodes().node("node2").size(), equalTo(1))[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_28 $$ clusterState = ClusterState.builder(clusterState).routingTable(rerouteResult.routingTable()).build()[ FD ]
Line_9 $$ clusterState = ClusterState.builder(clusterState).nodes(DiscoveryNodes.builder().put(newNode("node1")).put(newNode("node2")).put(newNode("node3")).put(newNode("node4", singletonMap("data", Boolean.FALSE.toString())))).build()-->Line_33 $$ rerouteResult = allocation.applyStartedShards(clusterState, clusterState.getRoutingNodes().shardsWithState(INITIALIZING))[ FD ]
