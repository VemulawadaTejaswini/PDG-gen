Line_11 $$ boolean inSnapshot = false-->Line_27 $$ if (!inSnapshot) [ FD ]
Line_9 $$ String path = cons.getLocalName()-->Line_17 $$ final INodesInPath iip = fsDir.getLastINodeInPath(path)[ FD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_10 $$ INodeFile oldnode = null[ CD ]
Line_24 $$ BlockInfo info = namesystem.getBlockManager().addBlockCollection(ucBlock, oldnode)-->Line_25 $$ oldnode.setBlock(oldnode.numBlocks() - 1, info)[ FD ]
Line_16 $$ path = renameReservedPathsOnUpgrade(path, getLayoutVersion())-->Line_17 $$ final INodesInPath iip = fsDir.getLastINodeInPath(path)[ FD ]
Line_10 $$ INodeFile oldnode = null-->Line_24 $$ BlockInfo info = namesystem.getBlockManager().addBlockCollection(ucBlock, oldnode)[ FD ]
Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)-->Line_22 $$ if (oldnode.numBlocks() > 0) [ FD ]
Line_22 $$ if (oldnode.numBlocks() > 0) -->Line_25 $$ oldnode.setBlock(oldnode.numBlocks() - 1, info)[ CD ]
Line_7 $$ INodeFile cons = FSImageSerialization.readINodeUnderConstruction(in, namesystem, getLayoutVersion())-->Line_23 $$ BlockInfo ucBlock = cons.getLastBlock()[ FD ]
Line_27 $$ if (!inSnapshot) -->Line_28 $$ namesystem.leaseManager.addLease(cons.getFileUnderConstructionFeature().getClientName(), path)[ CD ]
Line_2 $$ private void loadFilesUnderConstruction(DataInput in, boolean supportSnapshot, Counter counter) throws IOException -->Line_7 $$ INodeFile cons = FSImageSerialization.readINodeUnderConstruction(in, namesystem, getLayoutVersion())[ FD ]
Line_16 $$ path = renameReservedPathsOnUpgrade(path, getLayoutVersion())-->Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)[ FD ]
Line_12 $$ if (path != null && FSDirectory.isReservedName(path) && NameNodeLayoutVersion.supports(LayoutVersion.Feature.ADD_INODE_ID, getLayoutVersion())) -->Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)[ CD ]
Line_12 $$ if (path != null && FSDirectory.isReservedName(path) && NameNodeLayoutVersion.supports(LayoutVersion.Feature.ADD_INODE_ID, getLayoutVersion())) -->Line_14 $$ inSnapshot = true[ CD ]
Line_9 $$ String path = cons.getLocalName()-->Line_16 $$ path = renameReservedPathsOnUpgrade(path, getLayoutVersion())[ FD ]
Line_10 $$ INodeFile oldnode = null-->Line_13 $$ oldnode = namesystem.dir.getInode(cons.getId()).asFile()[ FD ]
Line_17 $$ final INodesInPath iip = fsDir.getLastINodeInPath(path)-->Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)[ FD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_22 $$ if (oldnode.numBlocks() > 0) [ CD ]
Line_22 $$ if (oldnode.numBlocks() > 0) -->Line_24 $$ BlockInfo info = namesystem.getBlockManager().addBlockCollection(ucBlock, oldnode)[ CD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_8 $$ counter.increment()[ CD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_9 $$ String path = cons.getLocalName()[ CD ]
Line_7 $$ INodeFile cons = FSImageSerialization.readINodeUnderConstruction(in, namesystem, getLayoutVersion())-->Line_9 $$ String path = cons.getLocalName()[ FD ]
Line_2 $$ private void loadFilesUnderConstruction(DataInput in, boolean supportSnapshot, Counter counter) throws IOException -->Line_4 $$ int size = in.readInt()[ CD ]
Line_2 $$ private void loadFilesUnderConstruction(DataInput in, boolean supportSnapshot, Counter counter) throws IOException -->Line_8 $$ counter.increment()[ FD ]
Line_7 $$ INodeFile cons = FSImageSerialization.readINodeUnderConstruction(in, namesystem, getLayoutVersion())-->Line_20 $$ FileUnderConstructionFeature uc = cons.getFileUnderConstructionFeature()[ FD ]
Line_14 $$ inSnapshot = true-->Line_27 $$ if (!inSnapshot) [ FD ]
Line_9 $$ String path = cons.getLocalName()-->Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)[ FD ]
Line_9 $$ String path = cons.getLocalName()-->Line_12 $$ if (path != null && FSDirectory.isReservedName(path) && NameNodeLayoutVersion.supports(LayoutVersion.Feature.ADD_INODE_ID, getLayoutVersion())) [ FD ]
Line_10 $$ INodeFile oldnode = null-->Line_21 $$ oldnode.toUnderConstruction(uc.getClientName(), uc.getClientMachine())[ FD ]
Line_12 $$ if (path != null && FSDirectory.isReservedName(path) && NameNodeLayoutVersion.supports(LayoutVersion.Feature.ADD_INODE_ID, getLayoutVersion())) -->Line_17 $$ final INodesInPath iip = fsDir.getLastINodeInPath(path)[ CD ]
Line_7 $$ INodeFile cons = FSImageSerialization.readINodeUnderConstruction(in, namesystem, getLayoutVersion())-->Line_13 $$ oldnode = namesystem.dir.getInode(cons.getId()).asFile()[ FD ]
Line_13 $$ oldnode = namesystem.dir.getInode(cons.getId()).asFile()-->Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)[ FD ]
Line_13 $$ oldnode = namesystem.dir.getInode(cons.getId()).asFile()-->Line_21 $$ oldnode.toUnderConstruction(uc.getClientName(), uc.getClientMachine())[ FD ]
Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)-->Line_21 $$ oldnode.toUnderConstruction(uc.getClientName(), uc.getClientMachine())[ FD ]
Line_10 $$ INodeFile oldnode = null-->Line_25 $$ oldnode.setBlock(oldnode.numBlocks() - 1, info)[ FD ]
Line_9 $$ String path = cons.getLocalName()-->Line_28 $$ namesystem.leaseManager.addLease(cons.getFileUnderConstructionFeature().getClientName(), path)[ FD ]
Line_16 $$ path = renameReservedPathsOnUpgrade(path, getLayoutVersion())-->Line_12 $$ if (path != null && FSDirectory.isReservedName(path) && NameNodeLayoutVersion.supports(LayoutVersion.Feature.ADD_INODE_ID, getLayoutVersion())) [ FD ]
Line_12 $$ if (path != null && FSDirectory.isReservedName(path) && NameNodeLayoutVersion.supports(LayoutVersion.Feature.ADD_INODE_ID, getLayoutVersion())) -->Line_16 $$ path = renameReservedPathsOnUpgrade(path, getLayoutVersion())[ CD ]
Line_10 $$ INodeFile oldnode = null-->Line_22 $$ if (oldnode.numBlocks() > 0) [ FD ]
Line_12 $$ if (path != null && FSDirectory.isReservedName(path) && NameNodeLayoutVersion.supports(LayoutVersion.Feature.ADD_INODE_ID, getLayoutVersion())) -->Line_13 $$ oldnode = namesystem.dir.getInode(cons.getId()).asFile()[ CD ]
Line_7 $$ INodeFile cons = FSImageSerialization.readINodeUnderConstruction(in, namesystem, getLayoutVersion())-->Line_28 $$ namesystem.leaseManager.addLease(cons.getFileUnderConstructionFeature().getClientName(), path)[ FD ]
Line_16 $$ path = renameReservedPathsOnUpgrade(path, getLayoutVersion())-->Line_28 $$ namesystem.leaseManager.addLease(cons.getFileUnderConstructionFeature().getClientName(), path)[ FD ]
Line_3 $$ FSDirectory fsDir = namesystem.dir-->Line_17 $$ final INodesInPath iip = fsDir.getLastINodeInPath(path)[ FD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_7 $$ INodeFile cons = FSImageSerialization.readINodeUnderConstruction(in, namesystem, getLayoutVersion())[ CD ]
Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)-->Line_25 $$ oldnode.setBlock(oldnode.numBlocks() - 1, info)[ FD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_20 $$ FileUnderConstructionFeature uc = cons.getFileUnderConstructionFeature()[ CD ]
Line_2 $$ private void loadFilesUnderConstruction(DataInput in, boolean supportSnapshot, Counter counter) throws IOException -->Line_4 $$ int size = in.readInt()[ FD ]
Line_2 $$ private void loadFilesUnderConstruction(DataInput in, boolean supportSnapshot, Counter counter) throws IOException -->Line_6 $$ for (int i = 0; i < size; i++) [ CD ]
Line_20 $$ FileUnderConstructionFeature uc = cons.getFileUnderConstructionFeature()-->Line_21 $$ oldnode.toUnderConstruction(uc.getClientName(), uc.getClientMachine())[ FD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_12 $$ if (path != null && FSDirectory.isReservedName(path) && NameNodeLayoutVersion.supports(LayoutVersion.Feature.ADD_INODE_ID, getLayoutVersion())) [ CD ]
Line_13 $$ oldnode = namesystem.dir.getInode(cons.getId()).asFile()-->Line_24 $$ BlockInfo info = namesystem.getBlockManager().addBlockCollection(ucBlock, oldnode)[ FD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_11 $$ boolean inSnapshot = false[ CD ]
Line_2 $$ private void loadFilesUnderConstruction(DataInput in, boolean supportSnapshot, Counter counter) throws IOException -->Line_3 $$ FSDirectory fsDir = namesystem.dir[ CD ]
Line_22 $$ if (oldnode.numBlocks() > 0) -->Line_23 $$ BlockInfo ucBlock = cons.getLastBlock()[ CD ]
Line_11 $$ boolean inSnapshot = false-->Line_14 $$ inSnapshot = true[ FD ]
Line_23 $$ BlockInfo ucBlock = cons.getLastBlock()-->Line_24 $$ BlockInfo info = namesystem.getBlockManager().addBlockCollection(ucBlock, oldnode)[ FD ]
Line_13 $$ oldnode = namesystem.dir.getInode(cons.getId()).asFile()-->Line_25 $$ oldnode.setBlock(oldnode.numBlocks() - 1, info)[ FD ]
Line_10 $$ INodeFile oldnode = null-->Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)[ FD ]
Line_2 $$ private void loadFilesUnderConstruction(DataInput in, boolean supportSnapshot, Counter counter) throws IOException -->Line_5 $$ LOG.info("Number of files under construction = " + size)[ CD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_21 $$ oldnode.toUnderConstruction(uc.getClientName(), uc.getClientMachine())[ CD ]
Line_4 $$ int size = in.readInt()-->Line_6 $$ for (int i = 0; i < size; i++) [ FD ]
Line_13 $$ oldnode = namesystem.dir.getInode(cons.getId()).asFile()-->Line_22 $$ if (oldnode.numBlocks() > 0) [ FD ]
Line_18 $$ oldnode = INodeFile.valueOf(iip.getINode(0), path)-->Line_24 $$ BlockInfo info = namesystem.getBlockManager().addBlockCollection(ucBlock, oldnode)[ FD ]
Line_6 $$ for (int i = 0; i < size; i++) -->Line_27 $$ if (!inSnapshot) [ CD ]
