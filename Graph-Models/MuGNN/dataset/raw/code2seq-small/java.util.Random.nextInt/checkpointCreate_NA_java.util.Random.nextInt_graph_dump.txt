Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_13 $$ FSCheckpointService chk = new FSCheckpointService(fs, base, new SimpleNamingService("chk0"), (short) 1)[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_16 $$ final byte[] randBytes = new byte[BUFSIZE][ CD ]
Line_7 $$ DataOutputBuffer verif = new DataOutputBuffer()-->Line_31 $$ assertArrayEquals(Arrays.copyOfRange(verif.getData(), 0, verif.getLength()), Arrays.copyOfRange(dob.getData(), 0, dob.getLength()))[ FD ]
Line_15 $$ Random r = new Random()-->Line_20 $$ int e = r.nextInt(BUFSIZE - s) + 1[ FD ]
Line_13 $$ FSCheckpointService chk = new FSCheckpointService(fs, base, new SimpleNamingService("chk0"), (short) 1)-->Line_14 $$ CheckpointWriteChannel out = chk.create()[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_12 $$ Path tmp = FSCheckpointService.tmpfile(finalLoc)[ CD ]
Line_20 $$ int e = r.nextInt(BUFSIZE - s) + 1-->Line_21 $$ verif.write(randBytes, s, e)[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_9 $$ when(fs.rename(isA(Path.class), isA(Path.class))).thenReturn(true)[ CD ]
Line_17 $$ for (int i = 0; i < WRITES; ++i) -->Line_23 $$ b.put(randBytes).flip()[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_24 $$ b.position(s).limit(b.position() + e)[ FD ]
Line_15 $$ Random r = new Random()-->Line_19 $$ int s = r.nextInt(BUFSIZE - 1)[ FD ]
Line_19 $$ int s = r.nextInt(BUFSIZE - 1)-->Line_24 $$ b.position(s).limit(b.position() + e)[ FD ]
Line_14 $$ CheckpointWriteChannel out = chk.create()-->Line_28 $$ CheckpointID cid = chk.commit(out)[ FD ]
Line_5 $$ DataOutputBuffer dob = new DataOutputBuffer()-->Line_31 $$ assertArrayEquals(Arrays.copyOfRange(verif.getData(), 0, verif.getLength()), Arrays.copyOfRange(dob.getData(), 0, dob.getLength()))[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_11 $$ Path finalLoc = new Path("/chk/checkpoint_chk0")[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_25 $$ out.write(b)[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_7 $$ DataOutputBuffer verif = new DataOutputBuffer()[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_17 $$ for (int i = 0; i < WRITES; ++i) [ CD ]
Line_14 $$ CheckpointWriteChannel out = chk.create()-->Line_25 $$ out.write(b)[ FD ]
Line_12 $$ Path tmp = FSCheckpointService.tmpfile(finalLoc)-->Line_30 $$ verify(fs).rename(eq(tmp), eq(finalLoc))[ FD ]
Line_6 $$ FSDataOutputStream hdfs = spy(new FSDataOutputStream(dob, null))-->Line_29 $$ verify(hdfs).close()[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_4 $$ FileSystem fs = mock(FileSystem.class)[ CD ]
Line_6 $$ FSDataOutputStream hdfs = spy(new FSDataOutputStream(dob, null))-->Line_8 $$ when(fs.create(isA(Path.class), eq((short) 1))).thenReturn(hdfs)[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_27 $$ verify(fs, never()).rename(any(Path.class), eq(finalLoc))[ CD ]
Line_4 $$ FileSystem fs = mock(FileSystem.class)-->Line_30 $$ verify(fs).rename(eq(tmp), eq(finalLoc))[ FD ]
Line_17 $$ for (int i = 0; i < WRITES; ++i) -->Line_20 $$ int e = r.nextInt(BUFSIZE - s) + 1[ CD ]
Line_7 $$ DataOutputBuffer verif = new DataOutputBuffer()-->Line_21 $$ verif.write(randBytes, s, e)[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_14 $$ CheckpointWriteChannel out = chk.create()[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_28 $$ CheckpointID cid = chk.commit(out)[ CD ]
Line_13 $$ FSCheckpointService chk = new FSCheckpointService(fs, base, new SimpleNamingService("chk0"), (short) 1)-->Line_28 $$ CheckpointID cid = chk.commit(out)[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_29 $$ verify(hdfs).close()[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_22 $$ b.clear()[ FD ]
Line_17 $$ for (int i = 0; i < WRITES; ++i) -->Line_25 $$ out.write(b)[ CD ]
Line_17 $$ for (int i = 0; i < WRITES; ++i) -->Line_21 $$ verif.write(randBytes, s, e)[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_30 $$ verify(fs).rename(eq(tmp), eq(finalLoc))[ CD ]
Line_11 $$ Path finalLoc = new Path("/chk/checkpoint_chk0")-->Line_27 $$ verify(fs, never()).rename(any(Path.class), eq(finalLoc))[ FD ]
Line_15 $$ Random r = new Random()-->Line_18 $$ r.nextBytes(randBytes)[ FD ]
Line_16 $$ final byte[] randBytes = new byte[BUFSIZE]-->Line_21 $$ verif.write(randBytes, s, e)[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_5 $$ DataOutputBuffer dob = new DataOutputBuffer()[ CD ]
Line_17 $$ for (int i = 0; i < WRITES; ++i) -->Line_22 $$ b.clear()[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_23 $$ b.put(randBytes).flip()[ FD ]
Line_17 $$ for (int i = 0; i < WRITES; ++i) -->Line_24 $$ b.position(s).limit(b.position() + e)[ CD ]
Line_17 $$ for (int i = 0; i < WRITES; ++i) -->Line_18 $$ r.nextBytes(randBytes)[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_10 $$ Path base = new Path("/chk")[ CD ]
Line_16 $$ final byte[] randBytes = new byte[BUFSIZE]-->Line_23 $$ b.put(randBytes).flip()[ FD ]
Line_11 $$ Path finalLoc = new Path("/chk/checkpoint_chk0")-->Line_12 $$ Path tmp = FSCheckpointService.tmpfile(finalLoc)[ FD ]
Line_11 $$ Path finalLoc = new Path("/chk/checkpoint_chk0")-->Line_30 $$ verify(fs).rename(eq(tmp), eq(finalLoc))[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_6 $$ FSDataOutputStream hdfs = spy(new FSDataOutputStream(dob, null))[ CD ]
Line_4 $$ FileSystem fs = mock(FileSystem.class)-->Line_9 $$ when(fs.rename(isA(Path.class), isA(Path.class))).thenReturn(true)[ FD ]
Line_19 $$ int s = r.nextInt(BUFSIZE - 1)-->Line_21 $$ verif.write(randBytes, s, e)[ FD ]
Line_4 $$ FileSystem fs = mock(FileSystem.class)-->Line_8 $$ when(fs.create(isA(Path.class), eq((short) 1))).thenReturn(hdfs)[ FD ]
Line_16 $$ final byte[] randBytes = new byte[BUFSIZE]-->Line_18 $$ r.nextBytes(randBytes)[ FD ]
Line_3 $$ int WRITES = 128-->Line_17 $$ for (int i = 0; i < WRITES; ++i) [ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_3 $$ int WRITES = 128[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_8 $$ when(fs.create(isA(Path.class), eq((short) 1))).thenReturn(hdfs)[ CD ]
Line_17 $$ for (int i = 0; i < WRITES; ++i) -->Line_19 $$ int s = r.nextInt(BUFSIZE - 1)[ CD ]
Line_4 $$ FileSystem fs = mock(FileSystem.class)-->Line_27 $$ verify(fs, never()).rename(any(Path.class), eq(finalLoc))[ FD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_31 $$ assertArrayEquals(Arrays.copyOfRange(verif.getData(), 0, verif.getLength()), Arrays.copyOfRange(dob.getData(), 0, dob.getLength()))[ CD ]
Line_2 $$ public void checkpointCreate(ByteBuffer b) throws Exception -->Line_15 $$ Random r = new Random()[ CD ]
