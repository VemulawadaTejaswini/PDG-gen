Line_20 $$ final String poolId = firstBlock.getBlockPoolId()-->Line_37 $$ writeBlock(poolId, newBlockId, badChecksum)[ FD ]
Line_44 $$ PacketHeader hdr = new // size of packet-->Line_50 $$ hdr.write(sendOut)[ FD ]
Line_58 $$ hdr = new // size of packet-->Line_64 $$ hdr.write(sendOut)[ FD ]
Line_4 $$ Random random = new Random()-->Line_95 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", 0L, -1L - random.nextInt(oneMil), true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_20 $$ final String poolId = firstBlock.getBlockPoolId()-->Line_43 $$ writeBlock(poolId, ++newBlockId, DEFAULT_CHECKSUM)[ FD ]
Line_74 $$ ExtendedBlock blk = new ExtendedBlock(bpid, firstBlock.getLocalBlock())-->Line_75 $$ long blkid = blk.getBlockId()[ FD ]
Line_15 $$ FileSystem fileSys = cluster.getFileSystem()-->Line_17 $$ DFSTestUtil.createFile(fileSys, file, fileLen, fileLen, fileSys.getDefaultBlockSize(file), fileSys.getDefaultReplication(file), 0L)[ FD ]
Line_74 $$ ExtendedBlock blk = new ExtendedBlock(bpid, firstBlock.getLocalBlock())-->Line_80 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", 0L, fileLen, true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_74 $$ ExtendedBlock blk = new ExtendedBlock(bpid, firstBlock.getLocalBlock())-->Line_101 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", 0L, fileLen + 1, true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_4 $$ Random random = new Random()-->Line_44 $$ PacketHeader hdr = new // size of packet[ FD ]
Line_74 $$ ExtendedBlock blk = new ExtendedBlock(bpid, firstBlock.getLocalBlock())-->Line_79 $$ blk.setBlockId(blkid - 1)[ FD ]
Line_16 $$ int fileLen = Math.min(conf.getInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY, 4096), 4096)-->Line_89 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", fileLen, fileLen, true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_21 $$ long newBlockId = firstBlock.getBlockId() + 1-->Line_43 $$ writeBlock(poolId, ++newBlockId, DEFAULT_CHECKSUM)[ FD ]
Line_6 $$ Path file = new Path("dataprotocol.dat")-->Line_106 $$ readFile(fileSys, file, fileLen)[ FD ]
Line_35 $$ DataChecksum badChecksum = Mockito.spy(DEFAULT_CHECKSUM)-->Line_36 $$ Mockito.doReturn(-1).when(badChecksum).getBytesPerChecksum()[ FD ]
Line_16 $$ int fileLen = Math.min(conf.getInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY, 4096), 4096)-->Line_17 $$ DFSTestUtil.createFile(fileSys, file, fileLen, fileLen, fileSys.getDefaultBlockSize(file), fileSys.getDefaultReplication(file), 0L)[ FD ]
Line_7 $$ int numDataNodes = 1-->Line_10 $$ MiniDFSCluster cluster = new MiniDFSCluster.Builder(conf).numDataNodes(numDataNodes).build()[ FD ]
Line_74 $$ ExtendedBlock blk = new ExtendedBlock(bpid, firstBlock.getLocalBlock())-->Line_89 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", fileLen, fileLen, true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_74 $$ ExtendedBlock blk = new ExtendedBlock(bpid, firstBlock.getLocalBlock())-->Line_95 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", 0L, -1L - random.nextInt(oneMil), true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_10 $$ MiniDFSCluster cluster = new MiniDFSCluster.Builder(conf).numDataNodes(numDataNodes).build()-->Line_108 $$ cluster.shutdown()[ FD ]
Line_21 $$ long newBlockId = firstBlock.getBlockId() + 1-->Line_37 $$ writeBlock(poolId, newBlockId, badChecksum)[ FD ]
Line_21 $$ long newBlockId = firstBlock.getBlockId() + 1-->Line_57 $$ writeBlock(poolId, ++newBlockId, DEFAULT_CHECKSUM)[ FD ]
Line_6 $$ Path file = new Path("dataprotocol.dat")-->Line_17 $$ DFSTestUtil.createFile(fileSys, file, fileLen, fileLen, fileSys.getDefaultBlockSize(file), fileSys.getDefaultReplication(file), 0L)[ FD ]
Line_20 $$ final String poolId = firstBlock.getBlockPoolId()-->Line_57 $$ writeBlock(poolId, ++newBlockId, DEFAULT_CHECKSUM)[ FD ]
Line_15 $$ FileSystem fileSys = cluster.getFileSystem()-->Line_106 $$ readFile(fileSys, file, fileLen)[ FD ]
Line_74 $$ ExtendedBlock blk = new ExtendedBlock(bpid, firstBlock.getLocalBlock())-->Line_84 $$ blk.setBlockId(blkid)[ FD ]
Line_16 $$ int fileLen = Math.min(conf.getInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY, 4096), 4096)-->Line_85 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", -1L, fileLen, true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_10 $$ MiniDFSCluster cluster = new MiniDFSCluster.Builder(conf).numDataNodes(numDataNodes).build()-->Line_15 $$ FileSystem fileSys = cluster.getFileSystem()[ FD ]
Line_44 $$ PacketHeader hdr = new // size of packet-->Line_64 $$ hdr.write(sendOut)[ FD ]
Line_5 $$ int oneMil = 1024 * 1024-->Line_44 $$ PacketHeader hdr = new // size of packet[ FD ]
Line_10 $$ MiniDFSCluster cluster = new MiniDFSCluster.Builder(conf).numDataNodes(numDataNodes).build()-->Line_13 $$ datanode = cluster.getFileSystem().getDataNodeStats(DatanodeReportType.LIVE)[0][ FD ]
Line_35 $$ DataChecksum badChecksum = Mockito.spy(DEFAULT_CHECKSUM)-->Line_37 $$ writeBlock(poolId, newBlockId, badChecksum)[ FD ]
Line_16 $$ int fileLen = Math.min(conf.getInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY, 4096), 4096)-->Line_80 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", 0L, fileLen, true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_75 $$ long blkid = blk.getBlockId()-->Line_84 $$ blk.setBlockId(blkid)[ FD ]
Line_16 $$ int fileLen = Math.min(conf.getInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY, 4096), 4096)-->Line_105 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", 0L, fileLen, true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_5 $$ int oneMil = 1024 * 1024-->Line_95 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", 0L, -1L - random.nextInt(oneMil), true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_10 $$ MiniDFSCluster cluster = new MiniDFSCluster.Builder(conf).numDataNodes(numDataNodes).build()-->Line_12 $$ cluster.waitActive()[ FD ]
Line_44 $$ PacketHeader hdr = new // size of packet-->Line_58 $$ hdr = new // size of packet[ FD ]
Line_8 $$ Configuration conf = new HdfsConfiguration()-->Line_16 $$ int fileLen = Math.min(conf.getInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY, 4096), 4096)[ FD ]
Line_16 $$ int fileLen = Math.min(conf.getInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY, 4096), 4096)-->Line_106 $$ readFile(fileSys, file, fileLen)[ FD ]
Line_7 $$ int numDataNodes = 1-->Line_9 $$ conf.setInt(DFSConfigKeys.DFS_REPLICATION_KEY, numDataNodes)[ FD ]
Line_74 $$ ExtendedBlock blk = new ExtendedBlock(bpid, firstBlock.getLocalBlock())-->Line_85 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", -1L, fileLen, true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_74 $$ ExtendedBlock blk = new ExtendedBlock(bpid, firstBlock.getLocalBlock())-->Line_105 $$ sender.readBlock(blk, BlockTokenSecretManager.DUMMY_TOKEN, "cl", 0L, fileLen, true, CachingStrategy.newDefaultStrategy())[ FD ]
Line_8 $$ Configuration conf = new HdfsConfiguration()-->Line_9 $$ conf.setInt(DFSConfigKeys.DFS_REPLICATION_KEY, numDataNodes)[ FD ]
