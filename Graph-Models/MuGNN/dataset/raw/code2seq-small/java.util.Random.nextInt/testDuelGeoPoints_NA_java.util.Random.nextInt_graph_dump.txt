Line_12 $$ XContentBuilder doc = XContentFactory.jsonBuilder().startObject().startArray("geopoint")-->Line_20 $$ doc = doc.endArray().endObject()[ FD ]
Line_35 $$ Entry<FieldDataType, Type> right-->Line_45 $$ IndexGeoPointFieldData rightFieldData = getForField(right.getKey(), right.getValue().name().toLowerCase(Locale.ROOT))[ FD ]
Line_12 $$ XContentBuilder doc = XContentFactory.jsonBuilder().startObject().startArray("geopoint")-->Line_21 $$ final ParsedDocument d = mapper.parse("test", "type", Integer.toString(i), doc.bytes())[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_43 $$ IndexGeoPointFieldData leftFieldData = getForField(left.getKey(), left.getValue().name().toLowerCase(Locale.ROOT))[ CD ]
Line_32 $$ ArrayList<Entry<FieldDataType, Type>> list = new ArrayList(typeMap.entrySet())-->Line_36 $$ if (list.size() > 1) [ FD ]
Line_14 $$ if (randomBoolean()) -->Line_15 $$ doc.startObject().field("lat", defaultLat).field("lon", defaultLon).endObject()[ CD ]
Line_36 $$ if (list.size() > 1) -->Line_40 $$ right = left = list.remove(0)[ CD ]
Line_5 $$ Random random = getRandom()-->Line_38 $$ right = list.remove(random.nextInt(list.size()))[ FD ]
Line_5 $$ Random random = getRandom()-->Line_23 $$ if (random.nextInt(10) == 0) [ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_44 $$ ifdService.clear()[ CD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_6 $$ int atLeast = scaledRandomIntBetween(200, 1500)[ CD ]
Line_43 $$ IndexGeoPointFieldData leftFieldData = getForField(left.getKey(), left.getValue().name().toLowerCase(Locale.ROOT))-->Line_47 $$ duelFieldDataGeoPoint(random, context, rightFieldData, leftFieldData, precision)[ FD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_31 $$ typeMap.put(new FieldDataType("geo_point", Settings.builder().put("format", "doc_values")), Type.GeoPoint)[ CD ]
Line_36 $$ if (list.size() > 1) -->Line_37 $$ left = list.remove(random.nextInt(list.size()))[ CD ]
Line_33 $$ while (!list.isEmpty()) -->Line_54 $$ perSegment.close()[ CD ]
Line_43 $$ IndexGeoPointFieldData leftFieldData = getForField(left.getKey(), left.getValue().name().toLowerCase(Locale.ROOT))-->Line_52 $$ duelFieldDataGeoPoint(random, atomicReaderContext, leftFieldData, rightFieldData, precision)[ FD ]
Line_29 $$ final Distance precision = new Distance(1, randomFrom(DistanceUnit.values()))-->Line_46 $$ duelFieldDataGeoPoint(random, context, leftFieldData, rightFieldData, precision)[ FD ]
Line_27 $$ LeafReaderContext context = refreshReader()-->Line_47 $$ duelFieldDataGeoPoint(random, context, rightFieldData, leftFieldData, precision)[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_36 $$ if (list.size() > 1) [ CD ]
Line_5 $$ Random random = getRandom()-->Line_46 $$ duelFieldDataGeoPoint(random, context, leftFieldData, rightFieldData, precision)[ FD ]
Line_27 $$ LeafReaderContext context = refreshReader()-->Line_46 $$ duelFieldDataGeoPoint(random, context, leftFieldData, rightFieldData, precision)[ FD ]
Line_34 $$ Entry<FieldDataType, Type> left-->Line_40 $$ right = left = list.remove(0)[ FD ]
Line_23 $$ if (random.nextInt(10) == 0) -->Line_24 $$ refreshReader()[ CD ]
Line_11 $$ final int numValues = randomInt(maxValuesPerDoc)-->Line_13 $$ for (int j = 0; j < numValues; ++j) [ FD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_33 $$ while (!list.isEmpty()) [ CD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_4 $$ final DocumentMapper mapper = mapperService.documentMapperParser().parse("type", new CompressedXContent(mapping))[ CD ]
Line_10 $$ for (int i = 0; i < atLeast; i++) -->Line_13 $$ for (int j = 0; j < numValues; ++j) [ CD ]
Line_5 $$ Random random = getRandom()-->Line_47 $$ duelFieldDataGeoPoint(random, context, rightFieldData, leftFieldData, precision)[ FD ]
Line_45 $$ IndexGeoPointFieldData rightFieldData = getForField(right.getKey(), right.getValue().name().toLowerCase(Locale.ROOT))-->Line_52 $$ duelFieldDataGeoPoint(random, atomicReaderContext, leftFieldData, rightFieldData, precision)[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_42 $$ ifdService.clear()[ CD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_3 $$ final String mapping = XContentFactory.jsonBuilder().startObject().startObject("type").startObject("properties").startObject("geopoint").field("type", "geo_point").startObject("fielddata").field("format", "doc_values").endObject().endObject().endObject().endObject().endObject().string()[ CD ]
Line_38 $$ right = list.remove(random.nextInt(list.size()))-->Line_45 $$ IndexGeoPointFieldData rightFieldData = getForField(right.getKey(), right.getValue().name().toLowerCase(Locale.ROOT))[ FD ]
Line_8 $$ double defaultLat = randomDouble() * 180 - 90-->Line_15 $$ doc.startObject().field("lat", defaultLat).field("lon", defaultLon).endObject()[ FD ]
Line_10 $$ for (int i = 0; i < atLeast; i++) -->Line_11 $$ final int numValues = randomInt(maxValuesPerDoc)[ CD ]
Line_12 $$ XContentBuilder doc = XContentFactory.jsonBuilder().startObject().startArray("geopoint")-->Line_17 $$ doc.startObject().field("lat", randomDouble() * 180 - 90).field("lon", randomDouble() * 360 - 180).endObject()[ FD ]
Line_29 $$ final Distance precision = new Distance(1, randomFrom(DistanceUnit.values()))-->Line_52 $$ duelFieldDataGeoPoint(random, atomicReaderContext, leftFieldData, rightFieldData, precision)[ FD ]
Line_9 $$ double defaultLon = randomDouble() * 360 - 180-->Line_15 $$ doc.startObject().field("lat", defaultLat).field("lon", defaultLon).endObject()[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_48 $$ DirectoryReader perSegment = DirectoryReader.open(writer, true)[ CD ]
Line_13 $$ for (int j = 0; j < numValues; ++j) -->Line_14 $$ if (randomBoolean()) [ CD ]
Line_10 $$ for (int i = 0; i < atLeast; i++) -->Line_23 $$ if (random.nextInt(10) == 0) [ CD ]
Line_35 $$ Entry<FieldDataType, Type> right-->Line_38 $$ right = list.remove(random.nextInt(list.size()))[ FD ]
Line_45 $$ IndexGeoPointFieldData rightFieldData = getForField(right.getKey(), right.getValue().name().toLowerCase(Locale.ROOT))-->Line_47 $$ duelFieldDataGeoPoint(random, context, rightFieldData, leftFieldData, precision)[ FD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_5 $$ Random random = getRandom()[ CD ]
Line_43 $$ IndexGeoPointFieldData leftFieldData = getForField(left.getKey(), left.getValue().name().toLowerCase(Locale.ROOT))-->Line_46 $$ duelFieldDataGeoPoint(random, context, leftFieldData, rightFieldData, precision)[ FD ]
Line_28 $$ Map<FieldDataType, Type> typeMap = new HashMap()-->Line_32 $$ ArrayList<Entry<FieldDataType, Type>> list = new ArrayList(typeMap.entrySet())[ FD ]
Line_28 $$ Map<FieldDataType, Type> typeMap = new HashMap()-->Line_31 $$ typeMap.put(new FieldDataType("geo_point", Settings.builder().put("format", "doc_values")), Type.GeoPoint)[ FD ]
Line_4 $$ final DocumentMapper mapper = mapperService.documentMapperParser().parse("type", new CompressedXContent(mapping))-->Line_21 $$ final ParsedDocument d = mapper.parse("test", "type", Integer.toString(i), doc.bytes())[ FD ]
Line_29 $$ final Distance precision = new Distance(1, randomFrom(DistanceUnit.values()))-->Line_47 $$ duelFieldDataGeoPoint(random, context, rightFieldData, leftFieldData, precision)[ FD ]
Line_49 $$ CompositeReaderContext composite = perSegment.getContext()-->Line_50 $$ List<LeafReaderContext> leaves = composite.leaves()[ FD ]
Line_38 $$ right = list.remove(random.nextInt(list.size()))-->Line_40 $$ right = left = list.remove(0)[ FD ]
Line_32 $$ ArrayList<Entry<FieldDataType, Type>> list = new ArrayList(typeMap.entrySet())-->Line_37 $$ left = list.remove(random.nextInt(list.size()))[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_47 $$ duelFieldDataGeoPoint(random, context, rightFieldData, leftFieldData, precision)[ CD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_7 $$ int maxValuesPerDoc = randomBoolean() ? 1 : randomIntBetween(2, 10)[ CD ]
Line_10 $$ for (int i = 0; i < atLeast; i++) -->Line_21 $$ final ParsedDocument d = mapper.parse("test", "type", Integer.toString(i), doc.bytes())[ FD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_8 $$ double defaultLat = randomDouble() * 180 - 90[ CD ]
Line_37 $$ left = list.remove(random.nextInt(list.size()))-->Line_40 $$ right = left = list.remove(0)[ FD ]
Line_34 $$ Entry<FieldDataType, Type> left-->Line_43 $$ IndexGeoPointFieldData leftFieldData = getForField(left.getKey(), left.getValue().name().toLowerCase(Locale.ROOT))[ FD ]
Line_37 $$ left = list.remove(random.nextInt(list.size()))-->Line_43 $$ IndexGeoPointFieldData leftFieldData = getForField(left.getKey(), left.getValue().name().toLowerCase(Locale.ROOT))[ FD ]
Line_48 $$ DirectoryReader perSegment = DirectoryReader.open(writer, true)-->Line_49 $$ CompositeReaderContext composite = perSegment.getContext()[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_45 $$ IndexGeoPointFieldData rightFieldData = getForField(right.getKey(), right.getValue().name().toLowerCase(Locale.ROOT))[ CD ]
Line_34 $$ Entry<FieldDataType, Type> left-->Line_37 $$ left = list.remove(random.nextInt(list.size()))[ FD ]
Line_51 $$ for (LeafReaderContext atomicReaderContext : leaves) -->Line_52 $$ duelFieldDataGeoPoint(random, atomicReaderContext, leftFieldData, rightFieldData, precision)[ FD ]
Line_6 $$ int atLeast = scaledRandomIntBetween(200, 1500)-->Line_10 $$ for (int i = 0; i < atLeast; i++) [ FD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_10 $$ for (int i = 0; i < atLeast; i++) [ CD ]
Line_28 $$ Map<FieldDataType, Type> typeMap = new HashMap()-->Line_30 $$ typeMap.put(new FieldDataType("geo_point", Settings.builder().put("format", "array")), Type.GeoPoint)[ FD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_29 $$ final Distance precision = new Distance(1, randomFrom(DistanceUnit.values()))[ CD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_27 $$ LeafReaderContext context = refreshReader()[ CD ]
Line_14 $$ if (randomBoolean()) -->Line_17 $$ doc.startObject().field("lat", randomDouble() * 180 - 90).field("lon", randomDouble() * 360 - 180).endObject()[ CD ]
Line_10 $$ for (int i = 0; i < atLeast; i++) -->Line_22 $$ writer.addDocument(d.rootDoc())[ CD ]
Line_32 $$ ArrayList<Entry<FieldDataType, Type>> list = new ArrayList(typeMap.entrySet())-->Line_40 $$ right = left = list.remove(0)[ FD ]
Line_12 $$ XContentBuilder doc = XContentFactory.jsonBuilder().startObject().startArray("geopoint")-->Line_15 $$ doc.startObject().field("lat", defaultLat).field("lon", defaultLon).endObject()[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_50 $$ List<LeafReaderContext> leaves = composite.leaves()[ CD ]
Line_35 $$ Entry<FieldDataType, Type> right-->Line_40 $$ right = left = list.remove(0)[ FD ]
Line_48 $$ DirectoryReader perSegment = DirectoryReader.open(writer, true)-->Line_54 $$ perSegment.close()[ FD ]
Line_5 $$ Random random = getRandom()-->Line_37 $$ left = list.remove(random.nextInt(list.size()))[ FD ]
Line_10 $$ for (int i = 0; i < atLeast; i++) -->Line_21 $$ final ParsedDocument d = mapper.parse("test", "type", Integer.toString(i), doc.bytes())[ CD ]
Line_10 $$ for (int i = 0; i < atLeast; i++) -->Line_12 $$ XContentBuilder doc = XContentFactory.jsonBuilder().startObject().startArray("geopoint")[ CD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_28 $$ Map<FieldDataType, Type> typeMap = new HashMap()[ CD ]
Line_45 $$ IndexGeoPointFieldData rightFieldData = getForField(right.getKey(), right.getValue().name().toLowerCase(Locale.ROOT))-->Line_46 $$ duelFieldDataGeoPoint(random, context, leftFieldData, rightFieldData, precision)[ FD ]
Line_32 $$ ArrayList<Entry<FieldDataType, Type>> list = new ArrayList(typeMap.entrySet())-->Line_38 $$ right = list.remove(random.nextInt(list.size()))[ FD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_32 $$ ArrayList<Entry<FieldDataType, Type>> list = new ArrayList(typeMap.entrySet())[ CD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_30 $$ typeMap.put(new FieldDataType("geo_point", Settings.builder().put("format", "array")), Type.GeoPoint)[ CD ]
Line_5 $$ Random random = getRandom()-->Line_52 $$ duelFieldDataGeoPoint(random, atomicReaderContext, leftFieldData, rightFieldData, precision)[ FD ]
Line_40 $$ right = left = list.remove(0)-->Line_43 $$ IndexGeoPointFieldData leftFieldData = getForField(left.getKey(), left.getValue().name().toLowerCase(Locale.ROOT))[ FD ]
Line_32 $$ ArrayList<Entry<FieldDataType, Type>> list = new ArrayList(typeMap.entrySet())-->Line_33 $$ while (!list.isEmpty()) [ FD ]
Line_40 $$ right = left = list.remove(0)-->Line_45 $$ IndexGeoPointFieldData rightFieldData = getForField(right.getKey(), right.getValue().name().toLowerCase(Locale.ROOT))[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_34 $$ Entry<FieldDataType, Type> left[ CD ]
Line_36 $$ if (list.size() > 1) -->Line_38 $$ right = list.remove(random.nextInt(list.size()))[ CD ]
Line_20 $$ doc = doc.endArray().endObject()-->Line_21 $$ final ParsedDocument d = mapper.parse("test", "type", Integer.toString(i), doc.bytes())[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_35 $$ Entry<FieldDataType, Type> right[ CD ]
Line_10 $$ for (int i = 0; i < atLeast; i++) -->Line_20 $$ doc = doc.endArray().endObject()[ CD ]
Line_2 $$ public void testDuelGeoPoints() throws Exception -->Line_9 $$ double defaultLon = randomDouble() * 360 - 180[ CD ]
Line_7 $$ int maxValuesPerDoc = randomBoolean() ? 1 : randomIntBetween(2, 10)-->Line_11 $$ final int numValues = randomInt(maxValuesPerDoc)[ FD ]
Line_33 $$ while (!list.isEmpty()) -->Line_46 $$ duelFieldDataGeoPoint(random, context, leftFieldData, rightFieldData, precision)[ CD ]
Line_33 $$ while (!list.isEmpty()) -->Line_49 $$ CompositeReaderContext composite = perSegment.getContext()[ CD ]
