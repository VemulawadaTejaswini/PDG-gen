Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_16 $$ byte[] contents = DFSTestUtil.readFileBuffer(fs, new Path(TEST_FILE))[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_19 $$ final ShortCircuitCache cache = fs.dfs.getClientContext().getShortCircuitCache()[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_5 $$ Configuration serverConf = new Configuration(clientConf)[ CD ]
Line_13 $$ final int TEST_FILE_LEN = 4000-->Line_17 $$ byte[] expected = DFSTestUtil.calculateFileContentsFromSeed(SEED, TEST_FILE_LEN)[ FD ]
Line_7 $$ final MiniDFSCluster cluster = new MiniDFSCluster.Builder(serverConf).numDataNodes(1).build()-->Line_8 $$ cluster.waitActive()[ FD ]
Line_4 $$ Configuration clientConf = createShortCircuitConf("testShortCircuitReadWithoutShm", sockDir)-->Line_9 $$ clientConf.setInt(DFS_SHORT_CIRCUIT_SHARED_MEMORY_WATCHER_INTERRUPT_CHECK_MS, 0)[ FD ]
Line_4 $$ Configuration clientConf = createShortCircuitConf("testShortCircuitReadWithoutShm", sockDir)-->Line_10 $$ clientConf.set(DFS_CLIENT_CONTEXT, "testShortCircuitReadFromClientWithoutShm_clientContext")[ FD ]
Line_4 $$ Configuration clientConf = createShortCircuitConf("testShortCircuitReadWithoutShm", sockDir)-->Line_11 $$ final DistributedFileSystem fs = (DistributedFileSystem) FileSystem.get(cluster.getURI(0), clientConf)[ FD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_4 $$ Configuration clientConf = createShortCircuitConf("testShortCircuitReadWithoutShm", sockDir)[ CD ]
Line_7 $$ final MiniDFSCluster cluster = new MiniDFSCluster.Builder(serverConf).numDataNodes(1).build()-->Line_11 $$ final DistributedFileSystem fs = (DistributedFileSystem) FileSystem.get(cluster.getURI(0), clientConf)[ FD ]
Line_3 $$ TemporarySocketDirectory sockDir = new TemporarySocketDirectory()-->Line_4 $$ Configuration clientConf = createShortCircuitConf("testShortCircuitReadWithoutShm", sockDir)[ FD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_17 $$ byte[] expected = DFSTestUtil.calculateFileContentsFromSeed(SEED, TEST_FILE_LEN)[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_7 $$ final MiniDFSCluster cluster = new MiniDFSCluster.Builder(serverConf).numDataNodes(1).build()[ CD ]
Line_11 $$ final DistributedFileSystem fs = (DistributedFileSystem) FileSystem.get(cluster.getURI(0), clientConf)-->Line_16 $$ byte[] contents = DFSTestUtil.readFileBuffer(fs, new Path(TEST_FILE))[ FD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_11 $$ final DistributedFileSystem fs = (DistributedFileSystem) FileSystem.get(cluster.getURI(0), clientConf)[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_8 $$ cluster.waitActive()[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_18 $$ Assert.assertTrue(Arrays.equals(contents, expected))[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_9 $$ clientConf.setInt(DFS_SHORT_CIRCUIT_SHARED_MEMORY_WATCHER_INTERRUPT_CHECK_MS, 0)[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_15 $$ DFSTestUtil.createFile(fs, new Path(TEST_FILE), TEST_FILE_LEN, (short) 1, SEED)[ CD ]
Line_7 $$ final MiniDFSCluster cluster = new MiniDFSCluster.Builder(serverConf).numDataNodes(1).build()-->Line_21 $$ cluster.shutdown()[ FD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_14 $$ final int SEED = 0xFADEC[ CD ]
Line_14 $$ final int SEED = 0xFADEC-->Line_15 $$ DFSTestUtil.createFile(fs, new Path(TEST_FILE), TEST_FILE_LEN, (short) 1, SEED)[ FD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_20 $$ Assert.assertEquals(null, cache.getDfsClientShmManager())[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_6 $$ DFSInputStream.tcpReadsDisabledForTesting = true[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_12 $$ final String TEST_FILE = "/test_file"[ CD ]
Line_14 $$ final int SEED = 0xFADEC-->Line_17 $$ byte[] expected = DFSTestUtil.calculateFileContentsFromSeed(SEED, TEST_FILE_LEN)[ FD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_21 $$ cluster.shutdown()[ CD ]
Line_11 $$ final DistributedFileSystem fs = (DistributedFileSystem) FileSystem.get(cluster.getURI(0), clientConf)-->Line_15 $$ DFSTestUtil.createFile(fs, new Path(TEST_FILE), TEST_FILE_LEN, (short) 1, SEED)[ FD ]
Line_13 $$ final int TEST_FILE_LEN = 4000-->Line_15 $$ DFSTestUtil.createFile(fs, new Path(TEST_FILE), TEST_FILE_LEN, (short) 1, SEED)[ FD ]
Line_19 $$ final ShortCircuitCache cache = fs.dfs.getClientContext().getShortCircuitCache()-->Line_20 $$ Assert.assertEquals(null, cache.getDfsClientShmManager())[ FD ]
Line_16 $$ byte[] contents = DFSTestUtil.readFileBuffer(fs, new Path(TEST_FILE))-->Line_18 $$ Assert.assertTrue(Arrays.equals(contents, expected))[ FD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_13 $$ final int TEST_FILE_LEN = 4000[ CD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_3 $$ TemporarySocketDirectory sockDir = new TemporarySocketDirectory()[ CD ]
Line_17 $$ byte[] expected = DFSTestUtil.calculateFileContentsFromSeed(SEED, TEST_FILE_LEN)-->Line_18 $$ Assert.assertTrue(Arrays.equals(contents, expected))[ FD ]
Line_2 $$ public void testShortCircuitReadFromClientWithoutShm() throws Exception -->Line_10 $$ clientConf.set(DFS_CLIENT_CONTEXT, "testShortCircuitReadFromClientWithoutShm_clientContext")[ CD ]
