Line_4 $$ Configuration conf = new YarnConfiguration()-->Line_17 $$ dirsHandler.init(conf)[ FD ]
Line_14 $$ EventHandler<ApplicationEvent> appEventHandler = mock(EventHandler.class)-->Line_15 $$ dispatcher.register(ApplicationEventType.class, appEventHandler)[ FD ]
Line_21 $$ NonAggregatingLogHandler logHandler = new NonAggregatingLogHandlerWithMockExecutor(dispatcher, delService, dirsHandler)-->Line_23 $$ logHandler.start()[ FD ]
Line_4 $$ Configuration conf = new YarnConfiguration()-->Line_10 $$ conf.set(YarnConfiguration.NM_LOG_DIRS, localLogDirsString)[ FD ]
Line_21 $$ NonAggregatingLogHandler logHandler = new NonAggregatingLogHandlerWithMockExecutor(dispatcher, delService, dirsHandler)-->Line_24 $$ logHandler.handle(new LogHandlerAppStartedEvent(appId1, user, null, ContainerLogsRetentionPolicy.ALL_CONTAINERS, null))[ FD ]
Line_2 $$ public void testDelayedDelete() -->Line_8 $$ localLogDirs[1] = new File("target", this.getClass().getName() + "-localLogDir1").getAbsoluteFile()[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_16 $$ LocalDirsHandlerService dirsHandler = new LocalDirsHandlerService()[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_21 $$ NonAggregatingLogHandler logHandler = new NonAggregatingLogHandlerWithMockExecutor(dispatcher, delService, dirsHandler)[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_7 $$ localLogDirs[0] = new File("target", this.getClass().getName() + "-localLogDir0").getAbsoluteFile()[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_23 $$ logHandler.start()[ CD ]
Line_9 $$ String localLogDirsString = localLogDirs[0].getAbsolutePath() + "," + localLogDirs[1].getAbsolutePath()-->Line_10 $$ conf.set(YarnConfiguration.NM_LOG_DIRS, localLogDirsString)[ FD ]
Line_4 $$ Configuration conf = new YarnConfiguration()-->Line_22 $$ logHandler.init(conf)[ FD ]
Line_16 $$ LocalDirsHandlerService dirsHandler = new LocalDirsHandlerService()-->Line_17 $$ dirsHandler.init(conf)[ FD ]
Line_2 $$ public void testDelayedDelete() -->Line_27 $$ Path[] localAppLogDirs = new Path[2][ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_26 $$ logHandler.handle(new LogHandlerAppFinishedEvent(appId1))[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_28 $$ localAppLogDirs[0] = new Path(localLogDirs[0].getAbsolutePath(), appId1.toString())[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_10 $$ conf.set(YarnConfiguration.NM_LOG_DIRS, localLogDirsString)[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_18 $$ ApplicationId appId1 = BuilderUtils.newApplicationId(1234, 1)[ CD ]
Line_21 $$ NonAggregatingLogHandler logHandler = new NonAggregatingLogHandlerWithMockExecutor(dispatcher, delService, dirsHandler)-->Line_26 $$ logHandler.handle(new LogHandlerAppFinishedEvent(appId1))[ FD ]
Line_2 $$ public void testDelayedDelete() -->Line_31 $$ verify(mockSched).schedule(any(Runnable.class), eq(10800l), eq(TimeUnit.SECONDS))[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_6 $$ File[] localLogDirs = new File[2][ CD ]
Line_21 $$ NonAggregatingLogHandler logHandler = new NonAggregatingLogHandlerWithMockExecutor(dispatcher, delService, dirsHandler)-->Line_22 $$ logHandler.init(conf)[ FD ]
Line_18 $$ ApplicationId appId1 = BuilderUtils.newApplicationId(1234, 1)-->Line_29 $$ localAppLogDirs[1] = new Path(localLogDirs[1].getAbsolutePath(), appId1.toString())[ FD ]
Line_2 $$ public void testDelayedDelete() -->Line_24 $$ logHandler.handle(new LogHandlerAppStartedEvent(appId1, user, null, ContainerLogsRetentionPolicy.ALL_CONTAINERS, null))[ CD ]
Line_4 $$ Configuration conf = new YarnConfiguration()-->Line_13 $$ DrainDispatcher dispatcher = createDispatcher(conf)[ FD ]
Line_13 $$ DrainDispatcher dispatcher = createDispatcher(conf)-->Line_15 $$ dispatcher.register(ApplicationEventType.class, appEventHandler)[ FD ]
Line_2 $$ public void testDelayedDelete() -->Line_30 $$ ScheduledThreadPoolExecutor mockSched = ((NonAggregatingLogHandlerWithMockExecutor) logHandler).mockSched[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_19 $$ ApplicationAttemptId appAttemptId1 = BuilderUtils.newApplicationAttemptId(appId1, 1)[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_4 $$ Configuration conf = new YarnConfiguration()[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_14 $$ EventHandler<ApplicationEvent> appEventHandler = mock(EventHandler.class)[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_17 $$ dirsHandler.init(conf)[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_12 $$ conf.setLong(YarnConfiguration.NM_LOG_RETAIN_SECONDS, YarnConfiguration.DEFAULT_NM_LOG_RETAIN_SECONDS)[ CD ]
Line_19 $$ ApplicationAttemptId appAttemptId1 = BuilderUtils.newApplicationAttemptId(appId1, 1)-->Line_20 $$ ContainerId container11 = BuilderUtils.newContainerId(appAttemptId1, 1)[ FD ]
Line_4 $$ Configuration conf = new YarnConfiguration()-->Line_12 $$ conf.setLong(YarnConfiguration.NM_LOG_RETAIN_SECONDS, YarnConfiguration.DEFAULT_NM_LOG_RETAIN_SECONDS)[ FD ]
Line_2 $$ public void testDelayedDelete() -->Line_22 $$ logHandler.init(conf)[ CD ]
Line_30 $$ ScheduledThreadPoolExecutor mockSched = ((NonAggregatingLogHandlerWithMockExecutor) logHandler).mockSched-->Line_31 $$ verify(mockSched).schedule(any(Runnable.class), eq(10800l), eq(TimeUnit.SECONDS))[ FD ]
Line_2 $$ public void testDelayedDelete() -->Line_29 $$ localAppLogDirs[1] = new Path(localLogDirs[1].getAbsolutePath(), appId1.toString())[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_9 $$ String localLogDirsString = localLogDirs[0].getAbsolutePath() + "," + localLogDirs[1].getAbsolutePath()[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_20 $$ ContainerId container11 = BuilderUtils.newContainerId(appAttemptId1, 1)[ CD ]
Line_18 $$ ApplicationId appId1 = BuilderUtils.newApplicationId(1234, 1)-->Line_28 $$ localAppLogDirs[0] = new Path(localLogDirs[0].getAbsolutePath(), appId1.toString())[ FD ]
Line_18 $$ ApplicationId appId1 = BuilderUtils.newApplicationId(1234, 1)-->Line_19 $$ ApplicationAttemptId appAttemptId1 = BuilderUtils.newApplicationAttemptId(appId1, 1)[ FD ]
Line_2 $$ public void testDelayedDelete() -->Line_5 $$ String user = "testuser"[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_15 $$ dispatcher.register(ApplicationEventType.class, appEventHandler)[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_13 $$ DrainDispatcher dispatcher = createDispatcher(conf)[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_25 $$ logHandler.handle(new LogHandlerContainerFinishedEvent(container11, 0))[ CD ]
Line_4 $$ Configuration conf = new YarnConfiguration()-->Line_11 $$ conf.setBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED, false)[ FD ]
Line_2 $$ public void testDelayedDelete() -->Line_3 $$ DeletionService delService = mock(DeletionService.class)[ CD ]
Line_2 $$ public void testDelayedDelete() -->Line_11 $$ conf.setBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED, false)[ CD ]
Line_21 $$ NonAggregatingLogHandler logHandler = new NonAggregatingLogHandlerWithMockExecutor(dispatcher, delService, dirsHandler)-->Line_25 $$ logHandler.handle(new LogHandlerContainerFinishedEvent(container11, 0))[ FD ]
