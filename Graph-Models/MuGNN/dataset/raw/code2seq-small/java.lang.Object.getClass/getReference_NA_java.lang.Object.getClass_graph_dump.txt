Line_14 $$ boolean useDeepInheritance = !ExtendedPersistenceInheritance.SHALLOW.equals(JPAService.getDefaultExtendedPersistenceInheritance())-->Line_37 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_59 $$ boolean alreadyHasInterfaceClass = false-->Line_64 $$ alreadyHasInterfaceClass = true[ FD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_35 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_11 $$ if (ROOT_LOGGER.isDebugEnabled())[ CD ]
Line_49 $$ if (!standardEntityManager) -->Line_75 $$ if (ROOT_LOGGER.isDebugEnabled())[ CD ]
Line_36 $$ if (ROOT_LOGGER.isDebugEnabled())-->Line_37 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ CD ]
Line_64 $$ alreadyHasInterfaceClass = true-->Line_69 $$ if (!alreadyHasInterfaceClass) [ FD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_49 $$ if (!standardEntityManager) -->Line_72 $$ EntityManagerUnwrappedTargetInvocationHandler entityManagerUnwrappedTargetInvocationHandler = new EntityManagerUnwrappedTargetInvocationHandler(entityManager, extensionClass)[ CD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_39 $$ entityManager = entityManager1[ FD ]
Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_35 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_15 $$ if (jpaDeploymentSettings != null) -->Line_16 $$ useDeepInheritance = ExtendedPersistenceInheritance.DEEP.equals(jpaDeploymentSettings.getExtendedPersistenceInheritanceType())[ CD ]
Line_50 $$ Class<?> extensionClass-->Line_56 $$ Object targetValueToInject = entityManager.unwrap(extensionClass)[ FD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_25 $$ if (entityManager1 == null) [ CD ]
Line_16 $$ useDeepInheritance = ExtendedPersistenceInheritance.DEEP.equals(jpaDeploymentSettings.getExtendedPersistenceInheritanceType())-->Line_37 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_5 $$ EntityManager entityManager-->Line_10 $$ entityManager = new TransactionScopedEntityManager(unitName, properties, emf, synchronizationType, tsr, transactionManager)[ FD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_39 $$ entityManager = entityManager1[ FD ]
Line_2 $$ public ManagedReference getReference() -->Line_49 $$ if (!standardEntityManager) [ CD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_40 $$ CreatedEntityManagers.registerPersistenceContext(entityManager1)[ CD ]
Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_37 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_2 $$ public ManagedReference getReference() -->Line_8 $$ TransactionManager transactionManager = (TransactionManager) serviceRegistry.getRequiredService(TransactionManagerService.SERVICE_NAME).getValue()[ CD ]
Line_2 $$ public ManagedReference getReference() -->Line_3 $$ PersistenceUnitServiceImpl service = (PersistenceUnitServiceImpl) serviceRegistry.getRequiredService(puServiceName).getValue()[ CD ]
Line_63 $$ proxyInterfaces = targetInterfaces-->Line_73 $$ Object proxyForUnwrappedObject = Proxy.newProxyInstance(extensionClass.getClassLoader(), proxyInterfaces, entityManagerUnwrappedTargetInvocationHandler)[ FD ]
Line_18 $$ boolean createdNewExtendedPersistence = false-->Line_31 $$ createdNewExtendedPersistence = true[ FD ]
Line_42 $$ if (useDeepInheritance) -->Line_45 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ CD ]
Line_60 $$ for (int interfaceIndex = 0; interfaceIndex < targetInterfaces.length; interfaceIndex++) -->Line_62 $$ if (interfaceClass.equals(extensionClass)) [ CD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_40 $$ CreatedEntityManagers.registerPersistenceContext(entityManager1)[ FD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_35 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_15 $$ if (jpaDeploymentSettings != null) [ CD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_19 $$ ExtendedEntityManager entityManager1[ CD ]
Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_45 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_56 $$ Object targetValueToInject = entityManager.unwrap(extensionClass)-->Line_57 $$ Class<?>[] targetInterfaces = targetValueToInject.getClass().getInterfaces()[ FD ]
Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_49 $$ if (!standardEntityManager) -->Line_77 $$ return new ValueManagedReference(new ImmediateValue<Object>(proxyForUnwrappedObject))[ CD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_41 $$ if (createdNewExtendedPersistence) [ CD ]
Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_50 $$ Class<?> extensionClass-->Line_70 $$ proxyInterfaces[0] = extensionClass[ FD ]
Line_52 $$ extensionClass = pu.getClassLoader().loadClass(injectionTypeName)-->Line_73 $$ Object proxyForUnwrappedObject = Proxy.newProxyInstance(extensionClass.getClassLoader(), proxyInterfaces, entityManagerUnwrappedTargetInvocationHandler)[ FD ]
Line_25 $$ if (entityManager1 == null) -->Line_35 $$ entityManager1.increaseReferenceCount()[ CD ]
Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_40 $$ CreatedEntityManagers.registerPersistenceContext(entityManager1)[ FD ]
Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_35 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_50 $$ Class<?> extensionClass-->Line_52 $$ extensionClass = pu.getClassLoader().loadClass(injectionTypeName)[ FD ]
Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_45 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_60 $$ for (int interfaceIndex = 0; interfaceIndex < targetInterfaces.length; interfaceIndex++) -->Line_61 $$ Class<?> interfaceClass = targetInterfaces[interfaceIndex][ CD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_50 $$ Class<?> extensionClass-->Line_76 $$ ROOT_LOGGER.debugf("injecting entity manager into a '%s' (unit name=%s)", extensionClass.getName(), unitName)[ FD ]
Line_61 $$ Class<?> interfaceClass = targetInterfaces[interfaceIndex]-->Line_62 $$ if (interfaceClass.equals(extensionClass)) [ FD ]
Line_20 $$ if (useDeepInheritance) -->Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)[ CD ]
Line_25 $$ if (entityManager1 == null) -->Line_31 $$ createdNewExtendedPersistence = true[ CD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_18 $$ boolean createdNewExtendedPersistence = false[ CD ]
Line_57 $$ Class<?>[] targetInterfaces = targetValueToInject.getClass().getInterfaces()-->Line_63 $$ proxyInterfaces = targetInterfaces[ FD ]
Line_49 $$ if (!standardEntityManager) -->Line_58 $$ Class<?>[] proxyInterfaces = new Class[targetInterfaces.length + 1][ CD ]
Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_35 $$ entityManager1.increaseReferenceCount()[ FD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_43 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_25 $$ if (entityManager1 == null) [ FD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_39 $$ entityManager = entityManager1[ FD ]
Line_49 $$ if (!standardEntityManager) -->Line_56 $$ Object targetValueToInject = entityManager.unwrap(extensionClass)[ CD ]
Line_10 $$ entityManager = new TransactionScopedEntityManager(unitName, properties, emf, synchronizationType, tsr, transactionManager)-->Line_39 $$ entityManager = entityManager1[ FD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_20 $$ if (useDeepInheritance) [ CD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_37 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_39 $$ entityManager = entityManager1[ CD ]
Line_69 $$ if (!alreadyHasInterfaceClass) -->Line_70 $$ proxyInterfaces[0] = extensionClass[ CD ]
Line_11 $$ if (ROOT_LOGGER.isDebugEnabled())-->Line_12 $$ ROOT_LOGGER.debugf("created new TransactionScopedEntityManager for unit name=%s", unitName)[ CD ]
Line_14 $$ boolean useDeepInheritance = !ExtendedPersistenceInheritance.SHALLOW.equals(JPAService.getDefaultExtendedPersistenceInheritance())-->Line_16 $$ useDeepInheritance = ExtendedPersistenceInheritance.DEEP.equals(jpaDeploymentSettings.getExtendedPersistenceInheritanceType())[ FD ]
Line_16 $$ useDeepInheritance = ExtendedPersistenceInheritance.DEEP.equals(jpaDeploymentSettings.getExtendedPersistenceInheritanceType())-->Line_33 $$ ROOT_LOGGER.debugf("created new ExtendedEntityManager for unit name=%s, useDeepInheritance = %b", unitName, useDeepInheritance)[ FD ]
Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_39 $$ entityManager = entityManager1[ FD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)[ FD ]
Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_52 $$ extensionClass = pu.getClassLoader().loadClass(injectionTypeName)-->Line_62 $$ if (interfaceClass.equals(extensionClass)) [ FD ]
Line_59 $$ boolean alreadyHasInterfaceClass = false-->Line_69 $$ if (!alreadyHasInterfaceClass) [ FD ]
Line_20 $$ if (useDeepInheritance) -->Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)[ CD ]
Line_49 $$ if (!standardEntityManager) -->Line_59 $$ boolean alreadyHasInterfaceClass = false[ CD ]
Line_2 $$ public ManagedReference getReference() -->Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) [ CD ]
Line_58 $$ Class<?>[] proxyInterfaces = new Class[targetInterfaces.length + 1]-->Line_73 $$ Object proxyForUnwrappedObject = Proxy.newProxyInstance(extensionClass.getClassLoader(), proxyInterfaces, entityManagerUnwrappedTargetInvocationHandler)[ FD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)[ FD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_25 $$ if (entityManager1 == null) [ FD ]
Line_49 $$ if (!standardEntityManager) -->Line_73 $$ Object proxyForUnwrappedObject = Proxy.newProxyInstance(extensionClass.getClassLoader(), proxyInterfaces, entityManagerUnwrappedTargetInvocationHandler)[ CD ]
Line_42 $$ if (useDeepInheritance) -->Line_43 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ CD ]
Line_49 $$ if (!standardEntityManager) -->Line_69 $$ if (!alreadyHasInterfaceClass) [ CD ]
Line_3 $$ PersistenceUnitServiceImpl service = (PersistenceUnitServiceImpl) serviceRegistry.getRequiredService(puServiceName).getValue()-->Line_4 $$ EntityManagerFactory emf = service.getEntityManagerFactory()[ FD ]
Line_4 $$ EntityManagerFactory emf = service.getEntityManagerFactory()-->Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_40 $$ CreatedEntityManagers.registerPersistenceContext(entityManager1)[ FD ]
Line_5 $$ EntityManager entityManager-->Line_39 $$ entityManager = entityManager1[ FD ]
Line_25 $$ if (entityManager1 == null) -->Line_26 $$ if (SynchronizationType.UNSYNCHRONIZED.equals(synchronizationType)) [ CD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_43 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_43 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_25 $$ if (entityManager1 == null) -->Line_36 $$ if (ROOT_LOGGER.isDebugEnabled())[ CD ]
Line_49 $$ if (!standardEntityManager) -->Line_50 $$ Class<?> extensionClass[ CD ]
Line_10 $$ entityManager = new TransactionScopedEntityManager(unitName, properties, emf, synchronizationType, tsr, transactionManager)-->Line_56 $$ Object targetValueToInject = entityManager.unwrap(extensionClass)[ FD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)[ FD ]
Line_50 $$ Class<?> extensionClass-->Line_73 $$ Object proxyForUnwrappedObject = Proxy.newProxyInstance(extensionClass.getClassLoader(), proxyInterfaces, entityManagerUnwrappedTargetInvocationHandler)[ FD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_40 $$ CreatedEntityManagers.registerPersistenceContext(entityManager1)[ FD ]
Line_62 $$ if (interfaceClass.equals(extensionClass)) -->Line_64 $$ alreadyHasInterfaceClass = true[ CD ]
Line_61 $$ Class<?> interfaceClass = targetInterfaces[interfaceIndex]-->Line_67 $$ proxyInterfaces[1 + interfaceIndex] = interfaceClass[ FD ]
Line_52 $$ extensionClass = pu.getClassLoader().loadClass(injectionTypeName)-->Line_70 $$ proxyInterfaces[0] = extensionClass[ FD ]
Line_5 $$ EntityManager entityManager-->Line_56 $$ Object targetValueToInject = entityManager.unwrap(extensionClass)[ FD ]
Line_72 $$ EntityManagerUnwrappedTargetInvocationHandler entityManagerUnwrappedTargetInvocationHandler = new EntityManagerUnwrappedTargetInvocationHandler(entityManager, extensionClass)-->Line_73 $$ Object proxyForUnwrappedObject = Proxy.newProxyInstance(extensionClass.getClassLoader(), proxyInterfaces, entityManagerUnwrappedTargetInvocationHandler)[ FD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_37 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_49 $$ if (!standardEntityManager) -->Line_60 $$ for (int interfaceIndex = 0; interfaceIndex < targetInterfaces.length; interfaceIndex++) [ CD ]
Line_32 $$ if (ROOT_LOGGER.isDebugEnabled())-->Line_33 $$ ROOT_LOGGER.debugf("created new ExtendedEntityManager for unit name=%s, useDeepInheritance = %b", unitName, useDeepInheritance)[ CD ]
Line_26 $$ if (SynchronizationType.UNSYNCHRONIZED.equals(synchronizationType)) -->Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)[ CD ]
Line_2 $$ public ManagedReference getReference() -->Line_79 $$ return new ValueManagedReference(new ImmediateValue<Object>(entityManager))[ CD ]
Line_14 $$ boolean useDeepInheritance = !ExtendedPersistenceInheritance.SHALLOW.equals(JPAService.getDefaultExtendedPersistenceInheritance())-->Line_33 $$ ROOT_LOGGER.debugf("created new ExtendedEntityManager for unit name=%s, useDeepInheritance = %b", unitName, useDeepInheritance)[ FD ]
Line_4 $$ EntityManagerFactory emf = service.getEntityManagerFactory()-->Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ FD ]
Line_2 $$ public ManagedReference getReference() -->Line_4 $$ EntityManagerFactory emf = service.getEntityManagerFactory()[ CD ]
Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_39 $$ entityManager = entityManager1[ FD ]
Line_58 $$ Class<?>[] proxyInterfaces = new Class[targetInterfaces.length + 1]-->Line_63 $$ proxyInterfaces = targetInterfaces[ FD ]
Line_26 $$ if (SynchronizationType.UNSYNCHRONIZED.equals(synchronizationType)) -->Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)[ CD ]
Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_43 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_19 $$ ExtendedEntityManager entityManager1-->Line_45 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_37 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_2 $$ public ManagedReference getReference() -->Line_5 $$ EntityManager entityManager[ CD ]
Line_52 $$ extensionClass = pu.getClassLoader().loadClass(injectionTypeName)-->Line_76 $$ ROOT_LOGGER.debugf("injecting entity manager into a '%s' (unit name=%s)", extensionClass.getName(), unitName)[ FD ]
Line_39 $$ entityManager = entityManager1-->Line_56 $$ Object targetValueToInject = entityManager.unwrap(extensionClass)[ FD ]
Line_49 $$ if (!standardEntityManager) -->Line_57 $$ Class<?>[] targetInterfaces = targetValueToInject.getClass().getInterfaces()[ CD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_14 $$ boolean useDeepInheritance = !ExtendedPersistenceInheritance.SHALLOW.equals(JPAService.getDefaultExtendedPersistenceInheritance())[ CD ]
Line_62 $$ if (interfaceClass.equals(extensionClass)) -->Line_63 $$ proxyInterfaces = targetInterfaces[ CD ]
Line_23 $$ entityManager1 = ExtendedPersistenceShallowInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_25 $$ if (entityManager1 == null) [ FD ]
Line_25 $$ if (entityManager1 == null) -->Line_32 $$ if (ROOT_LOGGER.isDebugEnabled())[ CD ]
Line_21 $$ entityManager1 = ExtendedPersistenceDeepInheritance.INSTANCE.findExtendedPersistenceContext(unitName)-->Line_45 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_52 $$ extensionClass = pu.getClassLoader().loadClass(injectionTypeName)-->Line_56 $$ Object targetValueToInject = entityManager.unwrap(extensionClass)[ FD ]
Line_2 $$ public ManagedReference getReference() -->Line_7 $$ TransactionSynchronizationRegistry tsr = (TransactionSynchronizationRegistry) serviceRegistry.getRequiredService(TransactionSynchronizationRegistryService.SERVICE_NAME).getValue()[ CD ]
Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_40 $$ CreatedEntityManagers.registerPersistenceContext(entityManager1)[ FD ]
Line_75 $$ if (ROOT_LOGGER.isDebugEnabled())-->Line_76 $$ ROOT_LOGGER.debugf("injecting entity manager into a '%s' (unit name=%s)", extensionClass.getName(), unitName)[ CD ]
Line_2 $$ public ManagedReference getReference() -->Line_6 $$ boolean standardEntityManager = ENTITY_MANAGER_CLASS.equals(injectionTypeName)[ CD ]
Line_29 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(properties), synchronizationType, tsr, transactionManager)-->Line_43 $$ ExtendedPersistenceDeepInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_45 $$ ExtendedPersistenceShallowInheritance.INSTANCE.registerExtendedPersistenceContext(unitName, entityManager1)[ FD ]
Line_6 $$ boolean standardEntityManager = ENTITY_MANAGER_CLASS.equals(injectionTypeName)-->Line_49 $$ if (!standardEntityManager) [ FD ]
Line_41 $$ if (createdNewExtendedPersistence) -->Line_42 $$ if (useDeepInheritance) [ CD ]
Line_60 $$ for (int interfaceIndex = 0; interfaceIndex < targetInterfaces.length; interfaceIndex++) -->Line_67 $$ proxyInterfaces[1 + interfaceIndex] = interfaceClass[ CD ]
Line_9 $$ if (type.equals(PersistenceContextType.TRANSACTION)) -->Line_10 $$ entityManager = new TransactionScopedEntityManager(unitName, properties, emf, synchronizationType, tsr, transactionManager)[ CD ]
Line_27 $$ entityManager1 = new ExtendedEntityManager(unitName, emf.createEntityManager(synchronizationType, properties), synchronizationType, tsr, transactionManager)-->Line_37 $$ ROOT_LOGGER.debugf("inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, " + "%d beans sharing ExtendedEntityManager, useDeepInheritance = %b", unitName, entityManager1.getReferenceCount(), useDeepInheritance)[ FD ]
Line_50 $$ Class<?> extensionClass-->Line_62 $$ if (interfaceClass.equals(extensionClass)) [ FD ]
