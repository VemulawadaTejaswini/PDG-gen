Line_8 $$ if (discardedRun) -->Line_20 $$ commitLog.discardCompletedSegments(Schema.instance.getCFMetaData("Keyspace1", "Standard1").cfId, discardedPos)[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_42 $$ File[] files = new File(location).listFiles()[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_24 $$ scheduled = startThreads(commitLog, threads)[ FD ]
Line_24 $$ scheduled = startThreads(commitLog, threads)-->Line_28 $$ scheduled.shutdown()[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_37 $$ verifySizes(commitLog)[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_38 $$ commitLog.shutdownBlocking()[ FD ]
Line_14 $$ for (CommitlogExecutor t : threads) -->Line_15 $$ t.join()[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_43 $$ repl.recover(files)[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_29 $$ scheduled.awaitTermination(2, TimeUnit.SECONDS)[ CD ]
Line_46 $$ if (hash == repl.hash && cells == repl.cells)-->Line_47 $$ System.out.println("Test success.")[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_40 $$ System.out.flush()[ CD ]
Line_24 $$ scheduled = startThreads(commitLog, threads)-->Line_29 $$ scheduled.awaitTermination(2, TimeUnit.SECONDS)[ FD ]
Line_31 $$ int cells = 0-->Line_49 $$ System.out.format("Test failed. Cells %d expected %d, hash %d expected %d.\n", repl.cells, cells, repl.hash, hash)[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_20 $$ commitLog.discardCompletedSegments(Schema.instance.getCFMetaData("Keyspace1", "Standard1").cfId, discardedPos)[ FD ]
Line_30 $$ int hash = 0-->Line_34 $$ hash += t.hash[ FD ]
Line_6 $$ ScheduledExecutorService scheduled = startThreads(commitLog, threads)-->Line_12 $$ scheduled.shutdown()[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_4 $$ commitLog.allocator.enableReserveSegmentCreation()[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_37 $$ verifySizes(commitLog)[ FD ]
Line_42 $$ File[] files = new File(location).listFiles()-->Line_43 $$ repl.recover(files)[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_6 $$ ScheduledExecutorService scheduled = startThreads(commitLog, threads)[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_5 $$ final List<CommitlogExecutor> threads = new ArrayList()[ CD ]
Line_8 $$ if (discardedRun) -->Line_19 $$ verifySizes(commitLog)[ CD ]
Line_30 $$ int hash = 0-->Line_49 $$ System.out.format("Test failed. Cells %d expected %d, hash %d expected %d.\n", repl.cells, cells, repl.hash, hash)[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_26 $$ Thread.sleep(runTimeMs)[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_23 $$ verifySizes(commitLog)[ FD ]
Line_41 $$ Replayer repl = new Replayer(commitLog)-->Line_43 $$ repl.recover(files)[ FD ]
Line_31 $$ int cells = 0-->Line_35 $$ cells += t.cells[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_3 $$ System.out.format("\nTesting commit log size %.0fmb, compressor %s, sync %s%s%s\n", mb(DatabaseDescriptor.getCommitLogSegmentSize()), commitLog.compressor != null ? commitLog.compressor.getClass().getSimpleName() : "none", commitLog.executor.getClass().getSimpleName(), randomSize ? " random size" : "", discardedRun ? " with discarded run" : "")[ CD ]
Line_35 $$ cells += t.cells-->Line_49 $$ System.out.format("Test failed. Cells %d expected %d, hash %d expected %d.\n", repl.cells, cells, repl.hash, hash)[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_8 $$ if (discardedRun) [ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_46 $$ if (hash == repl.hash && cells == repl.cells)[ CD ]
Line_5 $$ final List<CommitlogExecutor> threads = new ArrayList()-->Line_6 $$ ScheduledExecutorService scheduled = startThreads(commitLog, threads)[ FD ]
Line_8 $$ if (discardedRun) -->Line_13 $$ scheduled.awaitTermination(2, TimeUnit.SECONDS)[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_41 $$ Replayer repl = new Replayer(commitLog)[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_39 $$ System.out.print("Stopped. Replaying... ")[ CD ]
Line_34 $$ hash += t.hash-->Line_49 $$ System.out.format("Test failed. Cells %d expected %d, hash %d expected %d.\n", repl.cells, cells, repl.hash, hash)[ FD ]
Line_8 $$ if (discardedRun) -->Line_24 $$ scheduled = startThreads(commitLog, threads)[ CD ]
Line_44 $$ if (!f.delete())-->Line_45 $$ Assert.fail("Failed to delete " + f)[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_6 $$ ScheduledExecutorService scheduled = startThreads(commitLog, threads)[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_38 $$ commitLog.shutdownBlocking()[ CD ]
Line_8 $$ if (discardedRun) -->Line_12 $$ scheduled.shutdown()[ CD ]
Line_6 $$ ScheduledExecutorService scheduled = startThreads(commitLog, threads)-->Line_13 $$ scheduled.awaitTermination(2, TimeUnit.SECONDS)[ FD ]
Line_8 $$ if (discardedRun) -->Line_23 $$ verifySizes(commitLog)[ CD ]
Line_6 $$ ScheduledExecutorService scheduled = startThreads(commitLog, threads)-->Line_24 $$ scheduled = startThreads(commitLog, threads)[ FD ]
Line_6 $$ ScheduledExecutorService scheduled = startThreads(commitLog, threads)-->Line_29 $$ scheduled.awaitTermination(2, TimeUnit.SECONDS)[ FD ]
Line_8 $$ if (discardedRun) -->Line_22 $$ System.out.format("Discarded at %s\n", discardedPos)[ CD ]
Line_46 $$ if (hash == repl.hash && cells == repl.cells)-->Line_49 $$ System.out.format("Test failed. Cells %d expected %d, hash %d expected %d.\n", repl.cells, cells, repl.hash, hash)[ CD ]
Line_5 $$ final List<CommitlogExecutor> threads = new ArrayList()-->Line_21 $$ threads.clear()[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_31 $$ int cells = 0[ CD ]
Line_6 $$ ScheduledExecutorService scheduled = startThreads(commitLog, threads)-->Line_28 $$ scheduled.shutdown()[ FD ]
Line_8 $$ if (discardedRun) -->Line_21 $$ threads.clear()[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_19 $$ verifySizes(commitLog)[ FD ]
Line_5 $$ final List<CommitlogExecutor> threads = new ArrayList()-->Line_24 $$ scheduled = startThreads(commitLog, threads)[ FD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_30 $$ int hash = 0[ CD ]
Line_2 $$ public void testLog(CommitLog commitLog) throws IOException, InterruptedException -->Line_28 $$ scheduled.shutdown()[ CD ]
Line_14 $$ for (CommitlogExecutor t : threads) -->Line_33 $$ t.join()[ FD ]
