Line_3 $$ Session session = null-->Line_33 $$ _jcrFactoryWrapper.closeSession(session)[ FD ]
Line_10 $$ if (fileName.contains(StringPool.SLASH)) -->Line_12 $$ fileName = fileName.substring(path.length() + 1)[ CD ]
Line_28 $$ VersionHistory versionHistory = versionManager.getVersionHistory(contentNode.getPath())-->Line_29 $$ versionHistory.addVersionLabel(version.getName(), VERSION_DEFAULT, false)[ FD ]
Line_3 $$ Session session = null-->Line_5 $$ session = _jcrFactoryWrapper.createSession()[ FD ]
Line_9 $$ Node repositoryNode = getFolderNode(rootNode, repositoryId)-->Line_13 $$ repositoryNode = getFolderNode(repositoryNode, path)[ FD ]
Line_2 $$ public void addFile(long companyId, long repositoryId, String fileName, InputStream is) throws DuplicateFileException -->Line_3 $$ Session session = null[ CD ]
Line_13 $$ repositoryNode = getFolderNode(repositoryNode, path)-->Line_15 $$ if (repositoryNode.hasNode(fileName)) [ FD ]
Line_12 $$ fileName = fileName.substring(path.length() + 1)-->Line_15 $$ if (repositoryNode.hasNode(fileName)) [ FD ]
Line_22 $$ ValueFactory valueFactory = session.getValueFactory()-->Line_23 $$ Binary binary = valueFactory.createBinary(is)[ FD ]
Line_8 $$ Node rootNode = getRootNode(session, companyId)-->Line_9 $$ Node repositoryNode = getFolderNode(rootNode, repositoryId)[ FD ]
Line_3 $$ Session session = null-->Line_6 $$ Workspace workspace = session.getWorkspace()[ FD ]
Line_2 $$ public void addFile(long companyId, long repositoryId, String fileName, InputStream is) throws DuplicateFileException -->Line_18 $$ Node fileNode = repositoryNode.addNode(fileName, JCRConstants.NT_FILE)[ FD ]
Line_19 $$ Node contentNode = fileNode.addNode(JCRConstants.JCR_CONTENT, JCRConstants.NT_RESOURCE)-->Line_21 $$ contentNode.setProperty(JCRConstants.JCR_MIME_TYPE, ContentTypes.TEXT_PLAIN)[ FD ]
Line_19 $$ Node contentNode = fileNode.addNode(JCRConstants.JCR_CONTENT, JCRConstants.NT_RESOURCE)-->Line_20 $$ contentNode.addMixin(JCRConstants.MIX_VERSIONABLE)[ FD ]
Line_19 $$ Node contentNode = fileNode.addNode(JCRConstants.JCR_CONTENT, JCRConstants.NT_RESOURCE)-->Line_25 $$ contentNode.setProperty(JCRConstants.JCR_LAST_MODIFIED, Calendar.getInstance())[ FD ]
Line_2 $$ public void addFile(long companyId, long repositoryId, String fileName, InputStream is) throws DuplicateFileException -->Line_8 $$ Node rootNode = getRootNode(session, companyId)[ FD ]
Line_5 $$ session = _jcrFactoryWrapper.createSession()-->Line_33 $$ _jcrFactoryWrapper.closeSession(session)[ FD ]
Line_12 $$ fileName = fileName.substring(path.length() + 1)-->Line_18 $$ Node fileNode = repositoryNode.addNode(fileName, JCRConstants.NT_FILE)[ FD ]
Line_19 $$ Node contentNode = fileNode.addNode(JCRConstants.JCR_CONTENT, JCRConstants.NT_RESOURCE)-->Line_28 $$ VersionHistory versionHistory = versionManager.getVersionHistory(contentNode.getPath())[ FD ]
Line_6 $$ Workspace workspace = session.getWorkspace()-->Line_7 $$ VersionManager versionManager = workspace.getVersionManager()[ FD ]
Line_13 $$ repositoryNode = getFolderNode(repositoryNode, path)-->Line_18 $$ Node fileNode = repositoryNode.addNode(fileName, JCRConstants.NT_FILE)[ FD ]
Line_5 $$ session = _jcrFactoryWrapper.createSession()-->Line_8 $$ Node rootNode = getRootNode(session, companyId)[ FD ]
Line_5 $$ session = _jcrFactoryWrapper.createSession()-->Line_22 $$ ValueFactory valueFactory = session.getValueFactory()[ FD ]
Line_19 $$ Node contentNode = fileNode.addNode(JCRConstants.JCR_CONTENT, JCRConstants.NT_RESOURCE)-->Line_24 $$ contentNode.setProperty(JCRConstants.JCR_DATA, binary)[ FD ]
Line_3 $$ Session session = null-->Line_26 $$ session.save()[ FD ]
Line_2 $$ public void addFile(long companyId, long repositoryId, String fileName, InputStream is) throws DuplicateFileException -->Line_9 $$ Node repositoryNode = getFolderNode(rootNode, repositoryId)[ FD ]
Line_27 $$ Version version = versionManager.checkin(contentNode.getPath())-->Line_29 $$ versionHistory.addVersionLabel(version.getName(), VERSION_DEFAULT, false)[ FD ]
Line_10 $$ if (fileName.contains(StringPool.SLASH)) -->Line_13 $$ repositoryNode = getFolderNode(repositoryNode, path)[ CD ]
Line_2 $$ public void addFile(long companyId, long repositoryId, String fileName, InputStream is) throws DuplicateFileException -->Line_12 $$ fileName = fileName.substring(path.length() + 1)[ FD ]
Line_23 $$ Binary binary = valueFactory.createBinary(is)-->Line_24 $$ contentNode.setProperty(JCRConstants.JCR_DATA, binary)[ FD ]
Line_5 $$ session = _jcrFactoryWrapper.createSession()-->Line_6 $$ Workspace workspace = session.getWorkspace()[ FD ]
Line_11 $$ String path = fileName.substring(0, fileName.lastIndexOf(StringPool.SLASH))-->Line_13 $$ repositoryNode = getFolderNode(repositoryNode, path)[ FD ]
Line_2 $$ public void addFile(long companyId, long repositoryId, String fileName, InputStream is) throws DuplicateFileException -->Line_10 $$ if (fileName.contains(StringPool.SLASH)) [ FD ]
Line_7 $$ VersionManager versionManager = workspace.getVersionManager()-->Line_27 $$ Version version = versionManager.checkin(contentNode.getPath())[ FD ]
Line_2 $$ public void addFile(long companyId, long repositoryId, String fileName, InputStream is) throws DuplicateFileException -->Line_11 $$ String path = fileName.substring(0, fileName.lastIndexOf(StringPool.SLASH))[ FD ]
Line_3 $$ Session session = null-->Line_22 $$ ValueFactory valueFactory = session.getValueFactory()[ FD ]
Line_2 $$ public void addFile(long companyId, long repositoryId, String fileName, InputStream is) throws DuplicateFileException -->Line_15 $$ if (repositoryNode.hasNode(fileName)) [ FD ]
Line_7 $$ VersionManager versionManager = workspace.getVersionManager()-->Line_28 $$ VersionHistory versionHistory = versionManager.getVersionHistory(contentNode.getPath())[ FD ]
Line_11 $$ String path = fileName.substring(0, fileName.lastIndexOf(StringPool.SLASH))-->Line_12 $$ fileName = fileName.substring(path.length() + 1)[ FD ]
Line_10 $$ if (fileName.contains(StringPool.SLASH)) -->Line_11 $$ String path = fileName.substring(0, fileName.lastIndexOf(StringPool.SLASH))[ CD ]
Line_9 $$ Node repositoryNode = getFolderNode(rootNode, repositoryId)-->Line_15 $$ if (repositoryNode.hasNode(fileName)) [ FD ]
Line_3 $$ Session session = null-->Line_8 $$ Node rootNode = getRootNode(session, companyId)[ FD ]
Line_9 $$ Node repositoryNode = getFolderNode(rootNode, repositoryId)-->Line_18 $$ Node fileNode = repositoryNode.addNode(fileName, JCRConstants.NT_FILE)[ FD ]
Line_2 $$ public void addFile(long companyId, long repositoryId, String fileName, InputStream is) throws DuplicateFileException -->Line_23 $$ Binary binary = valueFactory.createBinary(is)[ FD ]
Line_5 $$ session = _jcrFactoryWrapper.createSession()-->Line_26 $$ session.save()[ FD ]
Line_19 $$ Node contentNode = fileNode.addNode(JCRConstants.JCR_CONTENT, JCRConstants.NT_RESOURCE)-->Line_27 $$ Version version = versionManager.checkin(contentNode.getPath())[ FD ]
Line_18 $$ Node fileNode = repositoryNode.addNode(fileName, JCRConstants.NT_FILE)-->Line_19 $$ Node contentNode = fileNode.addNode(JCRConstants.JCR_CONTENT, JCRConstants.NT_RESOURCE)[ FD ]
