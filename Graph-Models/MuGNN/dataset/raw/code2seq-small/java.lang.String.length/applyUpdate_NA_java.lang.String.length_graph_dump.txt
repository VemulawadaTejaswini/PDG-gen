Line_54 $$ if (!droppedIndices.contains(tribeIndex.getIndex())) -->Line_57 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ CD ]
Line_4 $$ ClusterState tribeState = task.state()-->Line_41 $$ routingTable.add(tribeState.routingTable().index(index.getIndex()))[ FD ]
Line_55 $$ clusterStateChanged = true-->Line_71 $$ clusterStateChanged = true[ FD ]
Line_55 $$ clusterStateChanged = true-->Line_80 $$ if (!clusterStateChanged) [ FD ]
Line_55 $$ clusterStateChanged = true-->Line_64 $$ clusterStateChanged = true[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_52 $$ final IndexMetaData indexMetaData = currentState.metaData().index(tribeIndex.getIndex())[ FD ]
Line_63 $$ if (ON_CONFLICT_DROP.equals(onConflict)) -->Line_67 $$ droppedIndices.add(tribeIndex.getIndex())[ CD ]
Line_3 $$ boolean clusterStateChanged = false-->Line_10 $$ clusterStateChanged = true[ FD ]
Line_29 $$ ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks())-->Line_57 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_37 $$ if (tribeIndex == null || tribeIndex.getState() == IndexMetaData.State.CLOSE) -->Line_39 $$ removeIndex(blocks, metaData, routingTable, index)[ CD ]
Line_17 $$ if (currentState.nodes().get(tribe.id()) == null) -->Line_24 $$ clusterStateChanged = true[ CD ]
Line_60 $$ String existingFromTribe = indexMetaData.getSettings().get(TRIBE_NAME)-->Line_72 $$ logger.info("[[ FD ]
Line_10 $$ clusterStateChanged = true-->Line_64 $$ clusterStateChanged = true[ FD ]
Line_63 $$ if (ON_CONFLICT_DROP.equals(onConflict)) -->Line_64 $$ clusterStateChanged = true[ CD ]
Line_68 $$ if (onConflict.startsWith(ON_CONFLICT_PREFER)) -->Line_70 $$ if (tribeName.equals(preferredTribeName)) [ CD ]
Line_9 $$ if (tribeState.nodes().get(discoNode.id()) == null) -->Line_11 $$ logger.info("[[ CD ]
Line_7 $$ String markedTribeName = discoNode.attributes().get(TRIBE_NAME)-->Line_34 $$ if (markedTribeName != null && markedTribeName.equals(tribeName)) [ FD ]
Line_30 $$ MetaData.Builder metaData = MetaData.builder(currentState.metaData())-->Line_39 $$ removeIndex(blocks, metaData, routingTable, index)[ FD ]
Line_32 $$ for (IndexMetaData index : currentState.metaData()) -->Line_41 $$ routingTable.add(tribeState.routingTable().index(index.getIndex()))[ FD ]
Line_37 $$ if (tribeIndex == null || tribeIndex.getState() == IndexMetaData.State.CLOSE) -->Line_38 $$ logger.info("[[ CD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_83 $$ return ClusterState.builder(currentState).incrementVersion().blocks(blocks).nodes(nodes).metaData(metaData).routingTable(routingTable.build()).build()[ FD ]
Line_30 $$ MetaData.Builder metaData = MetaData.builder(currentState.metaData())-->Line_74 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_30 $$ MetaData.Builder metaData = MetaData.builder(currentState.metaData())-->Line_83 $$ return ClusterState.builder(currentState).incrementVersion().blocks(blocks).nodes(nodes).metaData(metaData).routingTable(routingTable.build()).build()[ FD ]
Line_29 $$ ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks())-->Line_66 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_30 $$ MetaData.Builder metaData = MetaData.builder(currentState.metaData())-->Line_57 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_3 $$ boolean clusterStateChanged = false-->Line_80 $$ if (!clusterStateChanged) [ FD ]
Line_63 $$ if (ON_CONFLICT_DROP.equals(onConflict)) -->Line_65 $$ logger.info("[[ CD ]
Line_18 $$ Map<String, String> tribeAttr = new HashMap()-->Line_23 $$ DiscoveryNode discoNode = new DiscoveryNode(tribe.name(), tribe.id(), tribe.getHostName(), tribe.getHostAddress(), tribe.address(), unmodifiableMap(tribeAttr), tribe.version())[ FD ]
Line_3 $$ boolean clusterStateChanged = false-->Line_71 $$ clusterStateChanged = true[ FD ]
Line_3 $$ boolean clusterStateChanged = false-->Line_24 $$ clusterStateChanged = true[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_56 $$ logger.info("[[ FD ]
Line_10 $$ clusterStateChanged = true-->Line_55 $$ clusterStateChanged = true[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_29 $$ ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks())[ FD ]
Line_3 $$ boolean clusterStateChanged = false-->Line_36 $$ clusterStateChanged = true[ FD ]
Line_30 $$ MetaData.Builder metaData = MetaData.builder(currentState.metaData())-->Line_43 $$ metaData.put(IndexMetaData.builder(tribeIndex).settings(tribeSettings))[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_67 $$ droppedIndices.add(tribeIndex.getIndex())[ FD ]
Line_48 $$ IndexRoutingTable table = tribeState.routingTable().index(tribeIndex.getIndex())-->Line_49 $$ if (table == null) [ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_37 $$ if (tribeIndex == null || tribeIndex.getState() == IndexMetaData.State.CLOSE) [ FD ]
Line_16 $$ for (DiscoveryNode tribe : tribeState.nodes()) -->Line_23 $$ DiscoveryNode discoNode = new DiscoveryNode(tribe.name(), tribe.id(), tribe.getHostName(), tribe.getHostAddress(), tribe.address(), unmodifiableMap(tribeAttr), tribe.version())[ FD ]
Line_42 $$ Settings tribeSettings = Settings.builder().put(tribeIndex.getSettings()).put(TRIBE_NAME, tribeName).build()-->Line_43 $$ metaData.put(IndexMetaData.builder(tribeIndex).settings(tribeSettings))[ FD ]
Line_53 $$ if (indexMetaData == null) -->Line_61 $$ if (!tribeName.equals(existingFromTribe)) [ CD ]
Line_70 $$ if (tribeName.equals(preferredTribeName)) -->Line_71 $$ clusterStateChanged = true[ CD ]
Line_4 $$ ClusterState tribeState = task.state()-->Line_9 $$ if (tribeState.nodes().get(discoNode.id()) == null) [ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_31 $$ RoutingTable.Builder routingTable = RoutingTable.builder(currentState.routingTable())[ FD ]
Line_10 $$ clusterStateChanged = true-->Line_80 $$ if (!clusterStateChanged) [ FD ]
Line_17 $$ if (currentState.nodes().get(tribe.id()) == null) -->Line_26 $$ nodes.put(discoNode)[ CD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_5 $$ DiscoveryNodes.Builder nodes = DiscoveryNodes.builder(currentState.nodes())[ FD ]
Line_52 $$ final IndexMetaData indexMetaData = currentState.metaData().index(tribeIndex.getIndex())-->Line_53 $$ if (indexMetaData == null) [ FD ]
Line_70 $$ if (tribeName.equals(preferredTribeName)) -->Line_72 $$ logger.info("[[ CD ]
Line_70 $$ if (tribeName.equals(preferredTribeName)) -->Line_73 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ CD ]
Line_34 $$ if (markedTribeName != null && markedTribeName.equals(tribeName)) -->Line_37 $$ if (tribeIndex == null || tribeIndex.getState() == IndexMetaData.State.CLOSE) [ CD ]
Line_24 $$ clusterStateChanged = true-->Line_71 $$ clusterStateChanged = true[ FD ]
Line_16 $$ for (DiscoveryNode tribe : tribeState.nodes()) -->Line_19 $$ for (ObjectObjectCursor<String, String> attr : tribe.attributes()) [ FD ]
Line_4 $$ ClusterState tribeState = task.state()-->Line_16 $$ for (DiscoveryNode tribe : tribeState.nodes()) [ FD ]
Line_60 $$ String existingFromTribe = indexMetaData.getSettings().get(TRIBE_NAME)-->Line_65 $$ logger.info("[[ FD ]
Line_37 $$ if (tribeIndex == null || tribeIndex.getState() == IndexMetaData.State.CLOSE) -->Line_42 $$ Settings tribeSettings = Settings.builder().put(tribeIndex.getSettings()).put(TRIBE_NAME, tribeName).build()[ CD ]
Line_6 $$ for (DiscoveryNode discoNode : currentState.nodes()) -->Line_9 $$ if (tribeState.nodes().get(discoNode.id()) == null) [ FD ]
Line_34 $$ if (markedTribeName != null && markedTribeName.equals(tribeName)) -->Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())[ CD ]
Line_34 $$ if (markedTribeName != null && markedTribeName.equals(tribeName)) -->Line_36 $$ clusterStateChanged = true[ CD ]
Line_63 $$ if (ON_CONFLICT_DROP.equals(onConflict)) -->Line_66 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ CD ]
Line_64 $$ clusterStateChanged = true-->Line_80 $$ if (!clusterStateChanged) [ FD ]
Line_10 $$ clusterStateChanged = true-->Line_24 $$ clusterStateChanged = true[ FD ]
Line_36 $$ clusterStateChanged = true-->Line_71 $$ clusterStateChanged = true[ FD ]
Line_17 $$ if (currentState.nodes().get(tribe.id()) == null) -->Line_25 $$ logger.info("[[ CD ]
Line_36 $$ clusterStateChanged = true-->Line_55 $$ clusterStateChanged = true[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_57 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_31 $$ RoutingTable.Builder routingTable = RoutingTable.builder(currentState.routingTable())-->Line_66 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_3 $$ boolean clusterStateChanged = false-->Line_55 $$ clusterStateChanged = true[ FD ]
Line_31 $$ RoutingTable.Builder routingTable = RoutingTable.builder(currentState.routingTable())-->Line_39 $$ removeIndex(blocks, metaData, routingTable, index)[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_3 $$ boolean clusterStateChanged = false[ CD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_42 $$ Settings tribeSettings = Settings.builder().put(tribeIndex.getSettings()).put(TRIBE_NAME, tribeName).build()[ FD ]
Line_70 $$ if (tribeName.equals(preferredTribeName)) -->Line_74 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ CD ]
Line_69 $$ String preferredTribeName = onConflict.substring(ON_CONFLICT_PREFER.length())-->Line_70 $$ if (tribeName.equals(preferredTribeName)) [ FD ]
Line_68 $$ if (onConflict.startsWith(ON_CONFLICT_PREFER)) -->Line_69 $$ String preferredTribeName = onConflict.substring(ON_CONFLICT_PREFER.length())[ CD ]
Line_37 $$ if (tribeIndex == null || tribeIndex.getState() == IndexMetaData.State.CLOSE) -->Line_43 $$ metaData.put(IndexMetaData.builder(tribeIndex).settings(tribeSettings))[ CD ]
Line_6 $$ for (DiscoveryNode discoNode : currentState.nodes()) -->Line_11 $$ logger.info("[[ FD ]
Line_7 $$ String markedTribeName = discoNode.attributes().get(TRIBE_NAME)-->Line_8 $$ if (markedTribeName != null && markedTribeName.equals(tribeName)) [ FD ]
Line_54 $$ if (!droppedIndices.contains(tribeIndex.getIndex())) -->Line_55 $$ clusterStateChanged = true[ CD ]
Line_80 $$ if (!clusterStateChanged) -->Line_81 $$ return currentState[ CD ]
Line_29 $$ ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks())-->Line_83 $$ return ClusterState.builder(currentState).incrementVersion().blocks(blocks).nodes(nodes).metaData(metaData).routingTable(routingTable.build()).build()[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_72 $$ logger.info("[[ FD ]
Line_6 $$ for (DiscoveryNode discoNode : currentState.nodes()) -->Line_12 $$ nodes.remove(discoNode.id())[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_80 $$ if (!clusterStateChanged) [ CD ]
Line_4 $$ ClusterState tribeState = task.state()-->Line_57 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_30 $$ MetaData.Builder metaData = MetaData.builder(currentState.metaData())[ FD ]
Line_31 $$ RoutingTable.Builder routingTable = RoutingTable.builder(currentState.routingTable())-->Line_83 $$ return ClusterState.builder(currentState).incrementVersion().blocks(blocks).nodes(nodes).metaData(metaData).routingTable(routingTable.build()).build()[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_65 $$ logger.info("[[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_52 $$ final IndexMetaData indexMetaData = currentState.metaData().index(tribeIndex.getIndex())[ FD ]
Line_6 $$ for (DiscoveryNode discoNode : currentState.nodes()) -->Line_26 $$ nodes.put(discoNode)[ FD ]
Line_60 $$ String existingFromTribe = indexMetaData.getSettings().get(TRIBE_NAME)-->Line_61 $$ if (!tribeName.equals(existingFromTribe)) [ FD ]
Line_32 $$ for (IndexMetaData index : currentState.metaData()) -->Line_38 $$ logger.info("[[ FD ]
Line_16 $$ for (DiscoveryNode tribe : tribeState.nodes()) -->Line_17 $$ if (currentState.nodes().get(tribe.id()) == null) [ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_30 $$ MetaData.Builder metaData = MetaData.builder(currentState.metaData())[ CD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_29 $$ ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks())[ CD ]
Line_24 $$ clusterStateChanged = true-->Line_55 $$ clusterStateChanged = true[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_54 $$ if (!droppedIndices.contains(tribeIndex.getIndex())) [ FD ]
Line_29 $$ ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks())-->Line_74 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_8 $$ if (markedTribeName != null && markedTribeName.equals(tribeName)) -->Line_9 $$ if (tribeState.nodes().get(discoNode.id()) == null) [ CD ]
Line_9 $$ if (tribeState.nodes().get(discoNode.id()) == null) -->Line_10 $$ clusterStateChanged = true[ CD ]
Line_29 $$ ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks())-->Line_73 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_61 $$ if (!tribeName.equals(existingFromTribe)) -->Line_62 $$ if (ON_CONFLICT_ANY.equals(onConflict)) [ CD ]
Line_18 $$ Map<String, String> tribeAttr = new HashMap()-->Line_22 $$ tribeAttr.put(TRIBE_NAME, tribeName)[ FD ]
Line_3 $$ boolean clusterStateChanged = false-->Line_64 $$ clusterStateChanged = true[ FD ]
Line_30 $$ MetaData.Builder metaData = MetaData.builder(currentState.metaData())-->Line_66 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_36 $$ clusterStateChanged = true-->Line_64 $$ clusterStateChanged = true[ FD ]
Line_71 $$ clusterStateChanged = true-->Line_80 $$ if (!clusterStateChanged) [ FD ]
Line_17 $$ if (currentState.nodes().get(tribe.id()) == null) -->Line_18 $$ Map<String, String> tribeAttr = new HashMap()[ CD ]
Line_6 $$ for (DiscoveryNode discoNode : currentState.nodes()) -->Line_7 $$ String markedTribeName = discoNode.attributes().get(TRIBE_NAME)[ FD ]
Line_5 $$ DiscoveryNodes.Builder nodes = DiscoveryNodes.builder(currentState.nodes())-->Line_12 $$ nodes.remove(discoNode.id())[ FD ]
Line_6 $$ for (DiscoveryNode discoNode : currentState.nodes()) -->Line_25 $$ logger.info("[[ FD ]
Line_18 $$ Map<String, String> tribeAttr = new HashMap()-->Line_20 $$ tribeAttr.put(attr.key, attr.value)[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_6 $$ for (DiscoveryNode discoNode : currentState.nodes()) [ FD ]
Line_32 $$ for (IndexMetaData index : currentState.metaData()) -->Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())[ FD ]
Line_24 $$ clusterStateChanged = true-->Line_36 $$ clusterStateChanged = true[ FD ]
Line_80 $$ if (!clusterStateChanged) -->Line_83 $$ return ClusterState.builder(currentState).incrementVersion().blocks(blocks).nodes(nodes).metaData(metaData).routingTable(routingTable.build()).build()[ CD ]
Line_54 $$ if (!droppedIndices.contains(tribeIndex.getIndex())) -->Line_56 $$ logger.info("[[ CD ]
Line_31 $$ RoutingTable.Builder routingTable = RoutingTable.builder(currentState.routingTable())-->Line_41 $$ routingTable.add(tribeState.routingTable().index(index.getIndex()))[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_73 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_30 $$ MetaData.Builder metaData = MetaData.builder(currentState.metaData())-->Line_73 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_24 $$ clusterStateChanged = true-->Line_80 $$ if (!clusterStateChanged) [ FD ]
Line_10 $$ clusterStateChanged = true-->Line_71 $$ clusterStateChanged = true[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_48 $$ IndexRoutingTable table = tribeState.routingTable().index(tribeIndex.getIndex())[ FD ]
Line_9 $$ if (tribeState.nodes().get(discoNode.id()) == null) -->Line_12 $$ nodes.remove(discoNode.id())[ CD ]
Line_31 $$ RoutingTable.Builder routingTable = RoutingTable.builder(currentState.routingTable())-->Line_73 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_43 $$ metaData.put(IndexMetaData.builder(tribeIndex).settings(tribeSettings))[ FD ]
Line_52 $$ final IndexMetaData indexMetaData = currentState.metaData().index(tribeIndex.getIndex())-->Line_60 $$ String existingFromTribe = indexMetaData.getSettings().get(TRIBE_NAME)[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_31 $$ RoutingTable.Builder routingTable = RoutingTable.builder(currentState.routingTable())[ CD ]
Line_4 $$ ClusterState tribeState = task.state()-->Line_74 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_5 $$ DiscoveryNodes.Builder nodes = DiscoveryNodes.builder(currentState.nodes())-->Line_26 $$ nodes.put(discoNode)[ FD ]
Line_31 $$ RoutingTable.Builder routingTable = RoutingTable.builder(currentState.routingTable())-->Line_74 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_31 $$ RoutingTable.Builder routingTable = RoutingTable.builder(currentState.routingTable())-->Line_57 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_5 $$ DiscoveryNodes.Builder nodes = DiscoveryNodes.builder(currentState.nodes())-->Line_83 $$ return ClusterState.builder(currentState).incrementVersion().blocks(blocks).nodes(nodes).metaData(metaData).routingTable(routingTable.build()).build()[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_5 $$ DiscoveryNodes.Builder nodes = DiscoveryNodes.builder(currentState.nodes())[ CD ]
Line_64 $$ clusterStateChanged = true-->Line_71 $$ clusterStateChanged = true[ FD ]
Line_37 $$ if (tribeIndex == null || tribeIndex.getState() == IndexMetaData.State.CLOSE) -->Line_41 $$ routingTable.add(tribeState.routingTable().index(index.getIndex()))[ CD ]
Line_32 $$ for (IndexMetaData index : currentState.metaData()) -->Line_33 $$ String markedTribeName = index.getSettings().get(TRIBE_NAME)[ FD ]
Line_10 $$ clusterStateChanged = true-->Line_36 $$ clusterStateChanged = true[ FD ]
Line_36 $$ clusterStateChanged = true-->Line_80 $$ if (!clusterStateChanged) [ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_32 $$ for (IndexMetaData index : currentState.metaData()) [ FD ]
Line_24 $$ clusterStateChanged = true-->Line_64 $$ clusterStateChanged = true[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_74 $$ addNewIndex(tribeState, blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_62 $$ if (ON_CONFLICT_ANY.equals(onConflict)) -->Line_63 $$ if (ON_CONFLICT_DROP.equals(onConflict)) [ CD ]
Line_4 $$ ClusterState tribeState = task.state()-->Line_48 $$ IndexRoutingTable table = tribeState.routingTable().index(tribeIndex.getIndex())[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_17 $$ if (currentState.nodes().get(tribe.id()) == null) [ FD ]
Line_32 $$ for (IndexMetaData index : currentState.metaData()) -->Line_39 $$ removeIndex(blocks, metaData, routingTable, index)[ FD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_4 $$ ClusterState tribeState = task.state()[ FD ]
Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())-->Line_66 $$ removeIndex(blocks, metaData, routingTable, tribeIndex)[ FD ]
Line_17 $$ if (currentState.nodes().get(tribe.id()) == null) -->Line_22 $$ tribeAttr.put(TRIBE_NAME, tribeName)[ CD ]
Line_29 $$ ClusterBlocks.Builder blocks = ClusterBlocks.builder().blocks(currentState.blocks())-->Line_39 $$ removeIndex(blocks, metaData, routingTable, index)[ FD ]
Line_63 $$ if (ON_CONFLICT_DROP.equals(onConflict)) -->Line_68 $$ if (onConflict.startsWith(ON_CONFLICT_PREFER)) [ CD ]
Line_53 $$ if (indexMetaData == null) -->Line_54 $$ if (!droppedIndices.contains(tribeIndex.getIndex())) [ CD ]
Line_4 $$ ClusterState tribeState = task.state()-->Line_47 $$ for (IndexMetaData tribeIndex : tribeState.metaData()) [ FD ]
Line_4 $$ ClusterState tribeState = task.state()-->Line_35 $$ IndexMetaData tribeIndex = tribeState.metaData().index(index.getIndex())[ FD ]
Line_53 $$ if (indexMetaData == null) -->Line_60 $$ String existingFromTribe = indexMetaData.getSettings().get(TRIBE_NAME)[ CD ]
Line_2 $$ private ClusterState applyUpdate(ClusterState currentState, ClusterChangedEvent task) -->Line_4 $$ ClusterState tribeState = task.state()[ CD ]
