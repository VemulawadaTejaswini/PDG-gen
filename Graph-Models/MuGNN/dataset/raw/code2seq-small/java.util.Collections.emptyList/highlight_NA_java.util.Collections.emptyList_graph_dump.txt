Line_17 $$ FieldQuery fieldQuery-->Line_23 $$ fieldQuery = cache.fieldMatchFieldQuery[ FD ]
Line_80 $$ int fragmentCharSize = field.fieldOptions().numberOfFragments() == 0 ? Integer.MAX_VALUE : field.fieldOptions().fragmentCharSize()-->Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_63 $$ fragmentsBuilder.setDiscreteMultiValueHighlighting(termVectorMultiValue)[ FD ]
Line_48 $$ fragListBuilder = field.fieldOptions().fragmentOffset() == -1 ? new SimpleFragListBuilder() : new SimpleFragListBuilder(field.fieldOptions().fragmentOffset())-->Line_65 $$ entry.fragListBuilder = fragListBuilder[ FD ]
Line_17 $$ FieldQuery fieldQuery-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_42 $$ if (!forceSource && mapper.fieldType().stored()) -->Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ CD ]
Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_63 $$ fragmentsBuilder.setDiscreteMultiValueHighlighting(termVectorMultiValue)[ FD ]
Line_40 $$ if (field.fieldOptions().numberOfFragments() == 0) -->Line_41 $$ fragListBuilder = new SingleFragListBuilder()[ CD ]
Line_6 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_48 $$ fragListBuilder = field.fieldOptions().fragmentOffset() == -1 ? new SimpleFragListBuilder() : new SimpleFragListBuilder(field.fieldOptions().fragmentOffset())[ FD ]
Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_40 $$ if (field.fieldOptions().numberOfFragments() == 0) [ FD ]
Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_66 $$ entry.fragmentsBuilder = fragmentsBuilder[ FD ]
Line_50 $$ if (!forceSource && mapper.fieldType().stored()) -->Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ CD ]
Line_29 $$ fieldQuery = cache.noFieldMatchFieldQuery-->Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)-->Line_96 $$ fragments = entry.fragmentsBuilder.createFragments(hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fieldFragList, 1, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_50 $$ if (!forceSource && mapper.fieldType().stored()) -->Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ CD ]
Line_42 $$ if (!forceSource && mapper.fieldType().stored()) -->Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ CD ]
Line_91 $$ int noMatchSize = highlighterContext.field.fieldOptions().noMatchSize()-->Line_95 $$ fieldFragList.add(0, noMatchSize, Collections.<WeightedPhraseInfo>emptyList())[ FD ]
Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)-->Line_96 $$ fragments = entry.fragmentsBuilder.createFragments(hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fieldFragList, 1, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_63 $$ fragmentsBuilder.setDiscreteMultiValueHighlighting(termVectorMultiValue)[ FD ]
Line_32 $$ if (entry == null) -->Line_39 $$ boolean forceSource = context.highlight().forceSource(field)[ CD ]
Line_34 $$ BaseFragmentsBuilder fragmentsBuilder-->Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_23 $$ fieldQuery = cache.fieldMatchFieldQuery-->Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_77 $$ String[] fragments-->Line_96 $$ fragments = entry.fragmentsBuilder.createFragments(hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fieldFragList, 1, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_92 $$ if (noMatchSize > 0) -->Line_96 $$ fragments = entry.fragmentsBuilder.createFragments(hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fieldFragList, 1, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ CD ]
Line_39 $$ boolean forceSource = context.highlight().forceSource(field)-->Line_56 $$ if (!forceSource && mapper.fieldType().stored()) [ FD ]
Line_23 $$ fieldQuery = cache.fieldMatchFieldQuery-->Line_29 $$ fieldQuery = cache.noFieldMatchFieldQuery[ FD ]
Line_32 $$ if (entry == null) -->Line_36 $$ if (field.fieldOptions().boundaryMaxScan() != SimpleBoundaryScanner.DEFAULT_MAX_SCAN || field.fieldOptions().boundaryChars() != SimpleBoundaryScanner.DEFAULT_BOUNDARY_CHARS) [ CD ]
Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_66 $$ entry.fragmentsBuilder = fragmentsBuilder[ FD ]
Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)-->Line_98 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ FD ]
Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_66 $$ entry.fragmentsBuilder = fragmentsBuilder[ FD ]
Line_41 $$ fragListBuilder = new SingleFragListBuilder()-->Line_48 $$ fragListBuilder = field.fieldOptions().fragmentOffset() == -1 ? new SimpleFragListBuilder() : new SimpleFragListBuilder(field.fieldOptions().fragmentOffset())[ FD ]
Line_41 $$ fragListBuilder = new SingleFragListBuilder()-->Line_65 $$ entry.fragListBuilder = fragListBuilder[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_6 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_88 $$ if (fragments != null && fragments.length > 0) -->Line_89 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ CD ]
Line_77 $$ String[] fragments-->Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_32 $$ if (entry == null) -->Line_64 $$ entry = new MapperHighlightEntry()[ CD ]
Line_18 $$ if (field.fieldOptions().requireFieldMatch()) -->Line_23 $$ fieldQuery = cache.fieldMatchFieldQuery[ CD ]
Line_77 $$ String[] fragments-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_33 $$ FragListBuilder fragListBuilder-->Line_41 $$ fragListBuilder = new SingleFragListBuilder()[ FD ]
Line_11 $$ Encoder encoder = field.fieldOptions().encoder().equals("html") ? HighlightUtils.Encoders.HTML : HighlightUtils.Encoders.DEFAULT-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_91 $$ int noMatchSize = highlighterContext.field.fieldOptions().noMatchSize()-->Line_92 $$ if (noMatchSize > 0) [ FD ]
Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_6 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_96 $$ fragments = entry.fragmentsBuilder.createFragments(hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fieldFragList, 1, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_33 $$ FragListBuilder fragListBuilder-->Line_48 $$ fragListBuilder = field.fieldOptions().fragmentOffset() == -1 ? new SimpleFragListBuilder() : new SimpleFragListBuilder(field.fieldOptions().fragmentOffset())[ FD ]
Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_39 $$ boolean forceSource = context.highlight().forceSource(field)-->Line_50 $$ if (!forceSource && mapper.fieldType().stored()) [ FD ]
Line_29 $$ fieldQuery = cache.noFieldMatchFieldQuery-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_34 $$ BaseFragmentsBuilder fragmentsBuilder-->Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_32 $$ if (entry == null) -->Line_35 $$ BoundaryScanner boundaryScanner = DEFAULT_BOUNDARY_SCANNER[ CD ]
Line_34 $$ BaseFragmentsBuilder fragmentsBuilder-->Line_63 $$ fragmentsBuilder.setDiscreteMultiValueHighlighting(termVectorMultiValue)[ FD ]
Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_63 $$ fragmentsBuilder.setDiscreteMultiValueHighlighting(termVectorMultiValue)[ FD ]
Line_7 $$ FieldMapper mapper = highlighterContext.mapper-->Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_6 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_12 $$ if (!hitContext.cache().containsKey(CACHE_KEY)) [ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_18 $$ if (field.fieldOptions().requireFieldMatch()) [ FD ]
Line_34 $$ BaseFragmentsBuilder fragmentsBuilder-->Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_37 $$ boundaryScanner = new SimpleBoundaryScanner(field.fieldOptions().boundaryMaxScan(), field.fieldOptions().boundaryChars())[ FD ]
Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)-->Line_98 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ FD ]
Line_31 $$ MapperHighlightEntry entry = cache.mappers.get(mapper)-->Line_64 $$ entry = new MapperHighlightEntry()[ FD ]
Line_32 $$ if (entry == null) -->Line_40 $$ if (field.fieldOptions().numberOfFragments() == 0) [ CD ]
Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_66 $$ entry.fragmentsBuilder = fragmentsBuilder[ FD ]
Line_7 $$ FieldMapper mapper = highlighterContext.mapper-->Line_42 $$ if (!forceSource && mapper.fieldType().stored()) [ FD ]
Line_33 $$ FragListBuilder fragListBuilder-->Line_65 $$ entry.fragListBuilder = fragListBuilder[ FD ]
Line_32 $$ if (entry == null) -->Line_74 $$ cache.mappers.put(mapper, entry)[ CD ]
Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_39 $$ boolean forceSource = context.highlight().forceSource(field)-->Line_42 $$ if (!forceSource && mapper.fieldType().stored()) [ FD ]
Line_7 $$ FieldMapper mapper = highlighterContext.mapper-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_49 $$ if (field.fieldOptions().scoreOrdered()) [ FD ]
Line_6 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_15 $$ HighlighterEntry cache = (HighlighterEntry) hitContext.cache().get(CACHE_KEY)[ FD ]
Line_77 $$ String[] fragments-->Line_89 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ FD ]
Line_32 $$ if (entry == null) -->Line_33 $$ FragListBuilder fragListBuilder[ CD ]
Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)-->Line_89 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ FD ]
Line_18 $$ if (field.fieldOptions().requireFieldMatch()) -->Line_25 $$ if (cache.noFieldMatchFieldQuery == null) [ CD ]
Line_40 $$ if (field.fieldOptions().numberOfFragments() == 0) -->Line_49 $$ if (field.fieldOptions().scoreOrdered()) [ CD ]
Line_64 $$ entry = new MapperHighlightEntry()-->Line_74 $$ cache.mappers.put(mapper, entry)[ FD ]
Line_34 $$ BaseFragmentsBuilder fragmentsBuilder-->Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_34 $$ BaseFragmentsBuilder fragmentsBuilder-->Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_92 $$ if (noMatchSize > 0) -->Line_95 $$ fieldFragList.add(0, noMatchSize, Collections.<WeightedPhraseInfo>emptyList())[ CD ]
Line_32 $$ if (entry == null) -->Line_63 $$ fragmentsBuilder.setDiscreteMultiValueHighlighting(termVectorMultiValue)[ CD ]
Line_6 $$ FetchSubPhase.HitContext hitContext = highlighterContext.hitContext-->Line_13 $$ hitContext.cache().put(CACHE_KEY, new HighlighterEntry())[ FD ]
Line_49 $$ if (field.fieldOptions().scoreOrdered()) -->Line_50 $$ if (!forceSource && mapper.fieldType().stored()) [ CD ]
Line_11 $$ Encoder encoder = field.fieldOptions().encoder().equals("html") ? HighlightUtils.Encoders.HTML : HighlightUtils.Encoders.DEFAULT-->Line_96 $$ fragments = entry.fragmentsBuilder.createFragments(hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fieldFragList, 1, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_56 $$ if (!forceSource && mapper.fieldType().stored()) -->Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ CD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_76 $$ cache.fvh.setPhraseLimit(field.fieldOptions().phraseLimit())[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_18 $$ if (field.fieldOptions().requireFieldMatch()) -->Line_29 $$ fieldQuery = cache.noFieldMatchFieldQuery[ CD ]
Line_36 $$ if (field.fieldOptions().boundaryMaxScan() != SimpleBoundaryScanner.DEFAULT_MAX_SCAN || field.fieldOptions().boundaryChars() != SimpleBoundaryScanner.DEFAULT_BOUNDARY_CHARS) -->Line_37 $$ boundaryScanner = new SimpleBoundaryScanner(field.fieldOptions().boundaryMaxScan(), field.fieldOptions().boundaryChars())[ CD ]
Line_31 $$ MapperHighlightEntry entry = cache.mappers.get(mapper)-->Line_32 $$ if (entry == null) [ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_66 $$ entry.fragmentsBuilder = fragmentsBuilder[ FD ]
Line_17 $$ FieldQuery fieldQuery-->Line_29 $$ fieldQuery = cache.noFieldMatchFieldQuery[ FD ]
Line_32 $$ if (entry == null) -->Line_65 $$ entry.fragListBuilder = fragListBuilder[ CD ]
Line_7 $$ FieldMapper mapper = highlighterContext.mapper-->Line_50 $$ if (!forceSource && mapper.fieldType().stored()) [ FD ]
Line_35 $$ BoundaryScanner boundaryScanner = DEFAULT_BOUNDARY_SCANNER-->Line_37 $$ boundaryScanner = new SimpleBoundaryScanner(field.fieldOptions().boundaryMaxScan(), field.fieldOptions().boundaryChars())[ FD ]
Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_34 $$ BaseFragmentsBuilder fragmentsBuilder-->Line_66 $$ entry.fragmentsBuilder = fragmentsBuilder[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_39 $$ boolean forceSource = context.highlight().forceSource(field)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_96 $$ fragments = entry.fragmentsBuilder.createFragments(hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fieldFragList, 1, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_17 $$ FieldQuery fieldQuery-->Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_7 $$ FieldMapper mapper = highlighterContext.mapper-->Line_74 $$ cache.mappers.put(mapper, entry)[ FD ]
Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_18 $$ if (field.fieldOptions().requireFieldMatch()) -->Line_19 $$ if (cache.fieldMatchFieldQuery == null) [ CD ]
Line_32 $$ if (entry == null) -->Line_66 $$ entry.fragmentsBuilder = fragmentsBuilder[ CD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_36 $$ if (field.fieldOptions().boundaryMaxScan() != SimpleBoundaryScanner.DEFAULT_MAX_SCAN || field.fieldOptions().boundaryChars() != SimpleBoundaryScanner.DEFAULT_BOUNDARY_CHARS) [ FD ]
Line_11 $$ Encoder encoder = field.fieldOptions().encoder().equals("html") ? HighlightUtils.Encoders.HTML : HighlightUtils.Encoders.DEFAULT-->Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_32 $$ if (entry == null) -->Line_67 $$ if (cache.fvh == null) [ CD ]
Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_63 $$ fragmentsBuilder.setDiscreteMultiValueHighlighting(termVectorMultiValue)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_73 $$ CustomFieldQuery.highlightFilters.set(field.fieldOptions().highlightFilter())[ FD ]
Line_40 $$ if (field.fieldOptions().numberOfFragments() == 0) -->Line_48 $$ fragListBuilder = field.fieldOptions().fragmentOffset() == -1 ? new SimpleFragListBuilder() : new SimpleFragListBuilder(field.fieldOptions().fragmentOffset())[ CD ]
Line_5 $$ SearchContext context = highlighterContext.context-->Line_39 $$ boolean forceSource = context.highlight().forceSource(field)[ FD ]
Line_92 $$ if (noMatchSize > 0) -->Line_97 $$ if (fragments != null && fragments.length > 0) [ CD ]
Line_49 $$ if (field.fieldOptions().scoreOrdered()) -->Line_56 $$ if (!forceSource && mapper.fieldType().stored()) [ CD ]
Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_40 $$ if (field.fieldOptions().numberOfFragments() == 0) -->Line_42 $$ if (!forceSource && mapper.fieldType().stored()) [ CD ]
Line_23 $$ fieldQuery = cache.fieldMatchFieldQuery-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_11 $$ Encoder encoder = field.fieldOptions().encoder().equals("html") ? HighlightUtils.Encoders.HTML : HighlightUtils.Encoders.DEFAULT[ FD ]
Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_66 $$ entry.fragmentsBuilder = fragmentsBuilder[ FD ]
Line_56 $$ if (!forceSource && mapper.fieldType().stored()) -->Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ CD ]
Line_45 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_59 $$ fragmentsBuilder = new SourceSimpleFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_7 $$ FieldMapper mapper = highlighterContext.mapper-->Line_56 $$ if (!forceSource && mapper.fieldType().stored()) [ FD ]
Line_96 $$ fragments = entry.fragmentsBuilder.createFragments(hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fieldFragList, 1, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)-->Line_98 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ FD ]
Line_7 $$ FieldMapper mapper = highlighterContext.mapper-->Line_31 $$ MapperHighlightEntry entry = cache.mappers.get(mapper)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_31 $$ MapperHighlightEntry entry = cache.mappers.get(mapper)-->Line_74 $$ cache.mappers.put(mapper, entry)[ FD ]
Line_97 $$ if (fragments != null && fragments.length > 0) -->Line_98 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ CD ]
Line_51 $$ fragmentsBuilder = new ScoreOrderFragmentsBuilder(field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_77 $$ String[] fragments-->Line_98 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ FD ]
Line_32 $$ if (entry == null) -->Line_73 $$ CustomFieldQuery.highlightFilters.set(field.fieldOptions().highlightFilter())[ CD ]
Line_32 $$ if (entry == null) -->Line_34 $$ BaseFragmentsBuilder fragmentsBuilder[ CD ]
Line_7 $$ FieldMapper mapper = highlighterContext.mapper-->Line_8 $$ if (canHighlight(mapper) == false) [ FD ]
Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)-->Line_89 $$ return new HighlightField(highlighterContext.fieldName, Text.convertFromStringArray(fragments))[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_80 $$ int fragmentCharSize = field.fieldOptions().numberOfFragments() == 0 ? Integer.MAX_VALUE : field.fieldOptions().fragmentCharSize()[ FD ]
Line_34 $$ BaseFragmentsBuilder fragmentsBuilder-->Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_7 $$ FieldMapper mapper = highlighterContext.mapper-->Line_96 $$ fragments = entry.fragmentsBuilder.createFragments(hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fieldFragList, 1, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_12 $$ if (!hitContext.cache().containsKey(CACHE_KEY)) -->Line_13 $$ hitContext.cache().put(CACHE_KEY, new HighlighterEntry())[ CD ]
Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_63 $$ fragmentsBuilder.setDiscreteMultiValueHighlighting(termVectorMultiValue)[ FD ]
Line_80 $$ int fragmentCharSize = field.fieldOptions().numberOfFragments() == 0 ? Integer.MAX_VALUE : field.fieldOptions().fragmentCharSize()-->Line_86 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_43 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_53 $$ fragmentsBuilder = new SourceScoreOrderFragmentsBuilder(mapper, context, hitContext, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)-->Line_57 $$ fragmentsBuilder = new SimpleFragmentsBuilder(mapper, field.fieldOptions().preTags(), field.fieldOptions().postTags(), boundaryScanner)[ FD ]
Line_4 $$ SearchContextHighlight.Field field = highlighterContext.field-->Line_84 $$ fragments = cache.fvh.getBestFragments(fieldQuery, hitContext.reader(), hitContext.docId(), mapper.fieldType().name(), field.fieldOptions().matchedFields(), fragmentCharSize, numberOfFragments, entry.fragListBuilder, entry.fragmentsBuilder, field.fieldOptions().preTags(), field.fieldOptions().postTags(), encoder)[ FD ]
