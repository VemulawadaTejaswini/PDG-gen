Line_10 $$ while (rs.next()) -->Line_14 $$ ResourceBlock resourceBlock = convertResourcePermissions(tableName, pkColumnName, companyId, groupId, name, primKey)[ CD ]
Line_9 $$ rs = ps.executeQuery()-->Line_20 $$ DataAccess.cleanUp(con, ps, rs)[ FD ]
Line_5 $$ ResultSet rs = null-->Line_13 $$ long companyId = rs.getLong("companyId")[ FD ]
Line_2 $$ protected void convertResourcePermissions(String name, String tableName, String pkColumnName) throws Exception -->Line_22 $$ List<ResourcePermission> resourcePermissions = ResourcePermissionLocalServiceUtil.getScopeResourcePermissions(_SCOPES)[ CD ]
Line_2 $$ protected void convertResourcePermissions(String name, String tableName, String pkColumnName) throws Exception -->Line_31 $$ ResourceBlockLocalServiceUtil.setGroupScopePermissions(resourcePermission.getCompanyId(), GetterUtil.getLong(resourcePermission.getPrimKey()), name, resourcePermission.getRoleId(), resourcePermission.getActionIds())[ FD ]
Line_2 $$ protected void convertResourcePermissions(String name, String tableName, String pkColumnName) throws Exception -->Line_25 $$ if (!name.equals(resourcePermission.getName())) [ FD ]
Line_2 $$ protected void convertResourcePermissions(String name, String tableName, String pkColumnName) throws Exception -->Line_29 $$ ResourceBlockLocalServiceUtil.setCompanyScopePermissions(resourcePermission.getCompanyId(), name, resourcePermission.getRoleId(), resourcePermission.getActionIds())[ FD ]
Line_23 $$ for (ResourcePermission resourcePermission : resourcePermissions) -->Line_24 $$ int scope = resourcePermission.getScope()[ FD ]
Line_9 $$ rs = ps.executeQuery()-->Line_11 $$ long primKey = rs.getLong(pkColumnName)[ FD ]
Line_7 $$ con = DataAccess.getUpgradeOptimizedConnection()-->Line_8 $$ ps = con.prepareStatement("select " + pkColumnName + ", groupId, companyId from " + tableName)[ FD ]
Line_3 $$ Connection con = null-->Line_8 $$ ps = con.prepareStatement("select " + pkColumnName + ", groupId, companyId from " + tableName)[ FD ]
Line_2 $$ protected void convertResourcePermissions(String name, String tableName, String pkColumnName) throws Exception -->Line_14 $$ ResourceBlock resourceBlock = convertResourcePermissions(tableName, pkColumnName, companyId, groupId, name, primKey)[ FD ]
Line_15 $$ if (_log.isInfoEnabled() && ((resourceBlock.getResourceBlockId() % 100) == 0)) -->Line_16 $$ _log.info("Processed 100 resource blocks for " + name)[ CD ]
Line_4 $$ PreparedStatement ps = null-->Line_9 $$ rs = ps.executeQuery()[ FD ]
Line_9 $$ rs = ps.executeQuery()-->Line_12 $$ long groupId = rs.getLong("groupId")[ FD ]
Line_9 $$ rs = ps.executeQuery()-->Line_13 $$ long companyId = rs.getLong("companyId")[ FD ]
Line_13 $$ long companyId = rs.getLong("companyId")-->Line_14 $$ ResourceBlock resourceBlock = convertResourcePermissions(tableName, pkColumnName, companyId, groupId, name, primKey)[ FD ]
Line_5 $$ ResultSet rs = null-->Line_11 $$ long primKey = rs.getLong(pkColumnName)[ FD ]
Line_10 $$ while (rs.next()) -->Line_11 $$ long primKey = rs.getLong(pkColumnName)[ CD ]
Line_7 $$ con = DataAccess.getUpgradeOptimizedConnection()-->Line_20 $$ DataAccess.cleanUp(con, ps, rs)[ FD ]
Line_10 $$ while (rs.next()) -->Line_13 $$ long companyId = rs.getLong("companyId")[ CD ]
Line_5 $$ ResultSet rs = null-->Line_9 $$ rs = ps.executeQuery()[ FD ]
Line_12 $$ long groupId = rs.getLong("groupId")-->Line_14 $$ ResourceBlock resourceBlock = convertResourcePermissions(tableName, pkColumnName, companyId, groupId, name, primKey)[ FD ]
Line_3 $$ Connection con = null-->Line_20 $$ DataAccess.cleanUp(con, ps, rs)[ FD ]
Line_5 $$ ResultSet rs = null-->Line_10 $$ while (rs.next()) [ FD ]
Line_2 $$ protected void convertResourcePermissions(String name, String tableName, String pkColumnName) throws Exception -->Line_3 $$ Connection con = null[ CD ]
Line_5 $$ ResultSet rs = null-->Line_12 $$ long groupId = rs.getLong("groupId")[ FD ]
Line_23 $$ for (ResourcePermission resourcePermission : resourcePermissions) -->Line_25 $$ if (!name.equals(resourcePermission.getName())) [ FD ]
Line_4 $$ PreparedStatement ps = null-->Line_20 $$ DataAccess.cleanUp(con, ps, rs)[ FD ]
Line_4 $$ PreparedStatement ps = null-->Line_8 $$ ps = con.prepareStatement("select " + pkColumnName + ", groupId, companyId from " + tableName)[ FD ]
Line_9 $$ rs = ps.executeQuery()-->Line_10 $$ while (rs.next()) [ FD ]
Line_8 $$ ps = con.prepareStatement("select " + pkColumnName + ", groupId, companyId from " + tableName)-->Line_20 $$ DataAccess.cleanUp(con, ps, rs)[ FD ]
Line_3 $$ Connection con = null-->Line_7 $$ con = DataAccess.getUpgradeOptimizedConnection()[ FD ]
Line_11 $$ long primKey = rs.getLong(pkColumnName)-->Line_14 $$ ResourceBlock resourceBlock = convertResourcePermissions(tableName, pkColumnName, companyId, groupId, name, primKey)[ FD ]
Line_10 $$ while (rs.next()) -->Line_12 $$ long groupId = rs.getLong("groupId")[ CD ]
Line_28 $$ if ((scope == ResourceConstants.SCOPE_COMPANY) || (scope == ResourceConstants.SCOPE_GROUP_TEMPLATE)) -->Line_30 $$ if (scope == ResourceConstants.SCOPE_GROUP) [ CD ]
Line_10 $$ while (rs.next()) -->Line_15 $$ if (_log.isInfoEnabled() && ((resourceBlock.getResourceBlockId() % 100) == 0)) [ CD ]
Line_2 $$ protected void convertResourcePermissions(String name, String tableName, String pkColumnName) throws Exception -->Line_5 $$ ResultSet rs = null[ CD ]
Line_2 $$ protected void convertResourcePermissions(String name, String tableName, String pkColumnName) throws Exception -->Line_11 $$ long primKey = rs.getLong(pkColumnName)[ FD ]
Line_8 $$ ps = con.prepareStatement("select " + pkColumnName + ", groupId, companyId from " + tableName)-->Line_9 $$ rs = ps.executeQuery()[ FD ]
Line_24 $$ int scope = resourcePermission.getScope()-->Line_30 $$ if (scope == ResourceConstants.SCOPE_GROUP) [ FD ]
Line_2 $$ protected void convertResourcePermissions(String name, String tableName, String pkColumnName) throws Exception -->Line_4 $$ PreparedStatement ps = null[ CD ]
Line_5 $$ ResultSet rs = null-->Line_20 $$ DataAccess.cleanUp(con, ps, rs)[ FD ]
Line_28 $$ if ((scope == ResourceConstants.SCOPE_COMPANY) || (scope == ResourceConstants.SCOPE_GROUP_TEMPLATE)) -->Line_29 $$ ResourceBlockLocalServiceUtil.setCompanyScopePermissions(resourcePermission.getCompanyId(), name, resourcePermission.getRoleId(), resourcePermission.getActionIds())[ CD ]
Line_30 $$ if (scope == ResourceConstants.SCOPE_GROUP) -->Line_31 $$ ResourceBlockLocalServiceUtil.setGroupScopePermissions(resourcePermission.getCompanyId(), GetterUtil.getLong(resourcePermission.getPrimKey()), name, resourcePermission.getRoleId(), resourcePermission.getActionIds())[ CD ]
Line_14 $$ ResourceBlock resourceBlock = convertResourcePermissions(tableName, pkColumnName, companyId, groupId, name, primKey)-->Line_15 $$ if (_log.isInfoEnabled() && ((resourceBlock.getResourceBlockId() % 100) == 0)) [ FD ]
Line_23 $$ for (ResourcePermission resourcePermission : resourcePermissions) -->Line_29 $$ ResourceBlockLocalServiceUtil.setCompanyScopePermissions(resourcePermission.getCompanyId(), name, resourcePermission.getRoleId(), resourcePermission.getActionIds())[ FD ]
Line_23 $$ for (ResourcePermission resourcePermission : resourcePermissions) -->Line_31 $$ ResourceBlockLocalServiceUtil.setGroupScopePermissions(resourcePermission.getCompanyId(), GetterUtil.getLong(resourcePermission.getPrimKey()), name, resourcePermission.getRoleId(), resourcePermission.getActionIds())[ FD ]
