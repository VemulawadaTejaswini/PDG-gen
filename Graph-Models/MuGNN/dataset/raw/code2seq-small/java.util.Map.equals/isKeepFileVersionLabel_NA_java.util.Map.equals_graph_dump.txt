Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_36 $$ ExpandoBridge latestExpandoBridge = latestDLFileVersion.getExpandoBridge()[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_6 $$ if (Validator.equals(serviceContext.getCommand(), Constants.REVERT)) [ CD ]
Line_68 $$ if (_log.isWarnEnabled()) -->Line_69 $$ _log.warn(e, e)[ CD ]
Line_54 $$ if (Validator.isNull(lastChecksum)) -->Line_55 $$ lastInputStream = DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(), dlFileEntry.getDataRepositoryId(), dlFileEntry.getName(), lastDLFileVersion.getVersion())[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_3 $$ if (PropsValues.DL_FILE_ENTRY_VERSION_POLICY != 1) [ CD ]
Line_36 $$ ExpandoBridge latestExpandoBridge = latestDLFileVersion.getExpandoBridge()-->Line_38 $$ Map<String, Serializable> latestAttributes = latestExpandoBridge.getAttributes()[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_36 $$ ExpandoBridge latestExpandoBridge = latestDLFileVersion.getExpandoBridge()[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_37 $$ Map<String, Serializable> lastAttributes = lastExpandoBridge.getAttributes()[ CD ]
Line_37 $$ Map<String, Serializable> lastAttributes = lastExpandoBridge.getAttributes()-->Line_39 $$ if (!lastAttributes.equals(latestAttributes)) [ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_51 $$ InputStream latestInputStream = null[ CD ]
Line_44 $$ if ((lastSize == 0) && (latestSize >= 0)) -->Line_45 $$ return true[ CD ]
Line_55 $$ lastInputStream = DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(), dlFileEntry.getDataRepositoryId(), dlFileEntry.getName(), lastDLFileVersion.getVersion())-->Line_72 $$ StreamUtil.cleanUp(lastInputStream)[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_9 $$ if (!Validator.equals(lastDLFileVersion.getTitle(), latestDLFileVersion.getTitle())) [ CD ]
Line_51 $$ InputStream latestInputStream = null-->Line_60 $$ latestInputStream = DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(), dlFileEntry.getDataRepositoryId(), dlFileEntry.getName(), latestDLFileVersion.getVersion())[ FD ]
Line_24 $$ DLFileEntryMetadata lastFileEntryMetadata = dlFileEntryMetadataLocalService.fetchFileEntryMetadata(ddmStructure.getStructureId(), lastDLFileVersion.getFileVersionId())-->Line_29 $$ DDMFormValues lastDDMFormValues = StorageEngineManagerUtil.getDDMFormValues(lastFileEntryMetadata.getDDMStorageId())[ FD ]
Line_25 $$ if (lastFileEntryMetadata == null) -->Line_26 $$ return false[ CD ]
Line_42 $$ long lastSize = lastDLFileVersion.getSize()-->Line_47 $$ if (lastSize != latestSize) [ FD ]
Line_35 $$ ExpandoBridge lastExpandoBridge = lastDLFileVersion.getExpandoBridge()-->Line_37 $$ Map<String, Serializable> lastAttributes = lastExpandoBridge.getAttributes()[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_43 $$ long latestSize = latestDLFileVersion.getSize()[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_6 $$ if (Validator.equals(serviceContext.getCommand(), Constants.REVERT)) [ FD ]
Line_61 $$ String latestChecksum = DigesterUtil.digestBase64(latestInputStream)-->Line_65 $$ latestDLFileVersion.setChecksum(latestChecksum)[ FD ]
Line_56 $$ lastChecksum = DigesterUtil.digestBase64(lastInputStream)-->Line_57 $$ lastDLFileVersion.setChecksum(lastChecksum)[ FD ]
Line_54 $$ if (Validator.isNull(lastChecksum)) -->Line_58 $$ dlFileVersionPersistence.update(lastDLFileVersion)[ CD ]
Line_23 $$ for (DDMStructure ddmStructure : ddmStructures) -->Line_24 $$ DLFileEntryMetadata lastFileEntryMetadata = dlFileEntryMetadataLocalService.fetchFileEntryMetadata(ddmStructure.getStructureId(), lastDLFileVersion.getFileVersionId())[ FD ]
Line_51 $$ InputStream latestInputStream = null-->Line_61 $$ String latestChecksum = DigesterUtil.digestBase64(latestInputStream)[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_55 $$ lastInputStream = DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(), dlFileEntry.getDataRepositoryId(), dlFileEntry.getName(), lastDLFileVersion.getVersion())[ FD ]
Line_62 $$ if (lastChecksum.equals(latestChecksum)) -->Line_63 $$ return true[ CD ]
Line_12 $$ if (!Validator.equals(lastDLFileVersion.getDescription(), latestDLFileVersion.getDescription())) -->Line_13 $$ return false[ CD ]
Line_47 $$ if (lastSize != latestSize) -->Line_48 $$ return false[ CD ]
Line_43 $$ long latestSize = latestDLFileVersion.getSize()-->Line_47 $$ if (lastSize != latestSize) [ FD ]
Line_53 $$ String lastChecksum = lastDLFileVersion.getChecksum()-->Line_54 $$ if (Validator.isNull(lastChecksum)) [ FD ]
Line_18 $$ if (serviceContext.getWorkflowAction() == WorkflowConstants.ACTION_SAVE_DRAFT) -->Line_19 $$ return false[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_58 $$ dlFileVersionPersistence.update(lastDLFileVersion)[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_65 $$ latestDLFileVersion.setChecksum(latestChecksum)[ FD ]
Line_61 $$ String latestChecksum = DigesterUtil.digestBase64(latestInputStream)-->Line_62 $$ if (lastChecksum.equals(latestChecksum)) [ FD ]
Line_53 $$ String lastChecksum = lastDLFileVersion.getChecksum()-->Line_57 $$ lastDLFileVersion.setChecksum(lastChecksum)[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_53 $$ String lastChecksum = lastDLFileVersion.getChecksum()[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_15 $$ if (lastDLFileVersion.getFileEntryTypeId() != latestDLFileVersion.getFileEntryTypeId()) [ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_28 $$ DLFileEntryMetadata latestFileEntryMetadata = dlFileEntryMetadataLocalService.getFileEntryMetadata(ddmStructure.getStructureId(), latestDLFileVersion.getFileVersionId())[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_43 $$ long latestSize = latestDLFileVersion.getSize()[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_21 $$ DLFileEntryType dlFileEntryType = lastDLFileVersion.getDLFileEntryType()[ FD ]
Line_3 $$ if (PropsValues.DL_FILE_ENTRY_VERSION_POLICY != 1) -->Line_4 $$ return false[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_75 $$ return false[ CD ]
Line_60 $$ latestInputStream = DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(), dlFileEntry.getDataRepositoryId(), dlFileEntry.getName(), latestDLFileVersion.getVersion())-->Line_73 $$ StreamUtil.cleanUp(latestInputStream)[ FD ]
Line_21 $$ DLFileEntryType dlFileEntryType = lastDLFileVersion.getDLFileEntryType()-->Line_22 $$ List<DDMStructure> ddmStructures = dlFileEntryType.getDDMStructures()[ FD ]
Line_30 $$ DDMFormValues latestDDMFormValues = StorageEngineManagerUtil.getDDMFormValues(latestFileEntryMetadata.getDDMStorageId())-->Line_31 $$ if (!lastDDMFormValues.equals(latestDDMFormValues)) [ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_44 $$ if ((lastSize == 0) && (latestSize >= 0)) [ CD ]
Line_6 $$ if (Validator.equals(serviceContext.getCommand(), Constants.REVERT)) -->Line_7 $$ return false[ CD ]
Line_51 $$ InputStream latestInputStream = null-->Line_73 $$ StreamUtil.cleanUp(latestInputStream)[ FD ]
Line_53 $$ String lastChecksum = lastDLFileVersion.getChecksum()-->Line_56 $$ lastChecksum = DigesterUtil.digestBase64(lastInputStream)[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_42 $$ long lastSize = lastDLFileVersion.getSize()[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_66 $$ dlFileVersionPersistence.update(latestDLFileVersion)[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_60 $$ latestInputStream = DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(), dlFileEntry.getDataRepositoryId(), dlFileEntry.getName(), latestDLFileVersion.getVersion())[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_12 $$ if (!Validator.equals(lastDLFileVersion.getDescription(), latestDLFileVersion.getDescription())) [ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_18 $$ if (serviceContext.getWorkflowAction() == WorkflowConstants.ACTION_SAVE_DRAFT) [ CD ]
Line_28 $$ DLFileEntryMetadata latestFileEntryMetadata = dlFileEntryMetadataLocalService.getFileEntryMetadata(ddmStructure.getStructureId(), latestDLFileVersion.getFileVersionId())-->Line_30 $$ DDMFormValues latestDDMFormValues = StorageEngineManagerUtil.getDDMFormValues(latestFileEntryMetadata.getDDMStorageId())[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_42 $$ long lastSize = lastDLFileVersion.getSize()[ FD ]
Line_50 $$ InputStream lastInputStream = null-->Line_55 $$ lastInputStream = DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(), dlFileEntry.getDataRepositoryId(), dlFileEntry.getName(), lastDLFileVersion.getVersion())[ FD ]
Line_24 $$ DLFileEntryMetadata lastFileEntryMetadata = dlFileEntryMetadataLocalService.fetchFileEntryMetadata(ddmStructure.getStructureId(), lastDLFileVersion.getFileVersionId())-->Line_25 $$ if (lastFileEntryMetadata == null) [ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_38 $$ Map<String, Serializable> latestAttributes = latestExpandoBridge.getAttributes()[ CD ]
Line_56 $$ lastChecksum = DigesterUtil.digestBase64(lastInputStream)-->Line_62 $$ if (lastChecksum.equals(latestChecksum)) [ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_12 $$ if (!Validator.equals(lastDLFileVersion.getDescription(), latestDLFileVersion.getDescription())) [ FD ]
Line_31 $$ if (!lastDDMFormValues.equals(latestDDMFormValues)) -->Line_32 $$ return false[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_35 $$ ExpandoBridge lastExpandoBridge = lastDLFileVersion.getExpandoBridge()[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_57 $$ lastDLFileVersion.setChecksum(lastChecksum)[ FD ]
Line_50 $$ InputStream lastInputStream = null-->Line_72 $$ StreamUtil.cleanUp(lastInputStream)[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_24 $$ DLFileEntryMetadata lastFileEntryMetadata = dlFileEntryMetadataLocalService.fetchFileEntryMetadata(ddmStructure.getStructureId(), lastDLFileVersion.getFileVersionId())[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_39 $$ if (!lastAttributes.equals(latestAttributes)) [ CD ]
Line_55 $$ lastInputStream = DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(), dlFileEntry.getDataRepositoryId(), dlFileEntry.getName(), lastDLFileVersion.getVersion())-->Line_56 $$ lastChecksum = DigesterUtil.digestBase64(lastInputStream)[ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_47 $$ if (lastSize != latestSize) [ CD ]
Line_53 $$ String lastChecksum = lastDLFileVersion.getChecksum()-->Line_62 $$ if (lastChecksum.equals(latestChecksum)) [ FD ]
Line_38 $$ Map<String, Serializable> latestAttributes = latestExpandoBridge.getAttributes()-->Line_39 $$ if (!lastAttributes.equals(latestAttributes)) [ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_9 $$ if (!Validator.equals(lastDLFileVersion.getTitle(), latestDLFileVersion.getTitle())) [ FD ]
Line_29 $$ DDMFormValues lastDDMFormValues = StorageEngineManagerUtil.getDDMFormValues(lastFileEntryMetadata.getDDMStorageId())-->Line_31 $$ if (!lastDDMFormValues.equals(latestDDMFormValues)) [ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_35 $$ ExpandoBridge lastExpandoBridge = lastDLFileVersion.getExpandoBridge()[ CD ]
Line_39 $$ if (!lastAttributes.equals(latestAttributes)) -->Line_40 $$ return false[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_50 $$ InputStream lastInputStream = null[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_22 $$ List<DDMStructure> ddmStructures = dlFileEntryType.getDDMStructures()[ CD ]
Line_23 $$ for (DDMStructure ddmStructure : ddmStructures) -->Line_28 $$ DLFileEntryMetadata latestFileEntryMetadata = dlFileEntryMetadataLocalService.getFileEntryMetadata(ddmStructure.getStructureId(), latestDLFileVersion.getFileVersionId())[ FD ]
Line_15 $$ if (lastDLFileVersion.getFileEntryTypeId() != latestDLFileVersion.getFileEntryTypeId()) -->Line_16 $$ return false[ CD ]
Line_60 $$ latestInputStream = DLStoreUtil.getFileAsStream(dlFileEntry.getCompanyId(), dlFileEntry.getDataRepositoryId(), dlFileEntry.getName(), latestDLFileVersion.getVersion())-->Line_61 $$ String latestChecksum = DigesterUtil.digestBase64(latestInputStream)[ FD ]
Line_54 $$ if (Validator.isNull(lastChecksum)) -->Line_57 $$ lastDLFileVersion.setChecksum(lastChecksum)[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_21 $$ DLFileEntryType dlFileEntryType = lastDLFileVersion.getDLFileEntryType()[ CD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_15 $$ if (lastDLFileVersion.getFileEntryTypeId() != latestDLFileVersion.getFileEntryTypeId()) [ FD ]
Line_2 $$ protected boolean isKeepFileVersionLabel(DLFileEntry dlFileEntry, DLFileVersion lastDLFileVersion, DLFileVersion latestDLFileVersion, ServiceContext serviceContext) throws PortalException -->Line_18 $$ if (serviceContext.getWorkflowAction() == WorkflowConstants.ACTION_SAVE_DRAFT) [ FD ]
Line_9 $$ if (!Validator.equals(lastDLFileVersion.getTitle(), latestDLFileVersion.getTitle())) -->Line_10 $$ return false[ CD ]
Line_54 $$ if (Validator.isNull(lastChecksum)) -->Line_56 $$ lastChecksum = DigesterUtil.digestBase64(lastInputStream)[ CD ]
Line_50 $$ InputStream lastInputStream = null-->Line_56 $$ lastChecksum = DigesterUtil.digestBase64(lastInputStream)[ FD ]
